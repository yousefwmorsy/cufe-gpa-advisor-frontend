<div class="flex flex-col items-center w-full h-full p-2">
	<div *ngIf="pdfUrl" class="mt-8 w-full h-full flex justify-center pdf-viewer-area">
		<iframe [src]="pdfUrl" width="900" height="400" class="rounded-lg shadow-lg border-collapse" title="Transcript PDF"></iframe>
	</div>

	<label for="pdfUpload" class="mb-4 cursor-pointer px-6 py-3 bg-accent text-white rounded-lg font-bold shadow border-2 border-accent transition hover:bg-transparent hover:text-accent hover:border-accent">Upload Transcript PDF</label>
	<input id="pdfUpload" type="file" accept="application/pdf" (change)="onFileSelected($event)" class="hidden" />

		<!-- Transcript Data Table with Tabs -->
		<div class="w-full max-w-4xl mt-8">
									<div class="flex mb-2 border-b border-gray-300 items-center overflow-x-auto scrollbar-thin scrollbar-thumb-accent scrollbar-track-gray-200" style="white-space: nowrap;">
											<ng-container *ngFor="let term of terms; let i = index">
												<div class="flex items-center mr-2"
													*ngIf="true"
        
												>
													<button
														(click)="selectTerm(i)"
														[class.bg-accent]="selectedTermIdx === i"
														[class.text-white]="selectedTermIdx === i"
														[class.font-bold]="selectedTermIdx === i"
														[class.shadow-accent]="selectedTermIdx === i"
														[class.bg-gray-100]="selectedTermIdx !== i"
														[class.text-gray-900]="selectedTermIdx !== i"
														class="px-6 py-4 rounded-t-lg transition-all border-b-2 border-accent flex flex-col items-center justify-center"
														style="height: 64px; min-width: 90px;"
													>
														<ng-container *ngIf="editTerms; else showNameYear">
															<input [(ngModel)]="term.name" class="w-24 px-2 py-1 rounded bg-transparent border border-gray-300 text-center font-bold focus:outline-none mb-1" />
															<input [(ngModel)]="term.year" type="text" class="w-20 px-1 py-1 rounded bg-transparent border border-gray-200 text-center text-xs focus:outline-none" placeholder="Year" />
														</ng-container>
														<ng-template #showNameYear>
															<span class="font-bold">{{ term.name }}</span>
															<span class="text-xs font-bold mt-1">{{ term.year || '' }}</span>
														</ng-template>
													</button>
													<button
														*ngIf="editTerms && terms.length > 1"
														(click)="deleteTerm(i)"
														class="ml-1 w-6 h-6 flex items-center justify-center rounded-full bg-transparent hover:bg-red-100 text-red-600 font-bold"
														title="Delete Term"
													>
														&times;
													</button>
												</div>
											</ng-container>
											<button
												(click)="addTerm()"
												class="ml-2 flex items-center justify-center w-8 h-8 rounded-full transition-colors border-none bg-transparent hover:bg-gray-200"
												title="Add Term"
												style="font-size: 1.5rem;"
											>
												<span class="text-accent font-bold">+</span>
											</button>
											<button
												(click)="editTerms = !editTerms"
												class="ml-2 flex items-center justify-center w-20 h-8 rounded transition-colors border-none bg-transparent hover:bg-gray-200 text-accent font-bold"
												title="Edit Terms"
											>
												{{ editTerms ? 'Done' : 'Edit' }}
											</button>
									</div>
                                    
			<table class="w-full border-collapse rounded-lg shadow-lg bg-white text-gray-900">
				<thead>
					<tr class="bg-accent text-white">
						<th class="p-3">Course Name</th>
						<th class="p-3 text-center">Credits</th>
						<th class="p-3 text-center">Grade</th>
						<th class="p-3 text-center">Actions</th>
					</tr>
				</thead>
				<tbody>
								<tr *ngFor="let course of terms[selectedTermIdx].courses; let ci = index">
									<td class="p-2">
										<input [(ngModel)]="course.name" class="w-full p-2 border rounded" />
									</td>
									<td class="p-2 text-center">
										<input type="number" [(ngModel)]="course.credits" class="w-16 p-2 border rounded text-center" />
									</td>
									<td class="p-2 text-center">
										<input [(ngModel)]="course.grade" class="w-16 p-2 border rounded text-center" />
									</td>
									<td class="p-2 text-center">
										<button class="px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 ml-2" (click)="terms[selectedTermIdx].courses.splice(ci, 1)">Delete</button>
									</td>
								</tr>
					<tr>
						<td colspan="4" class="p-2 text-right">
							<button class="px-4 py-2 bg-accent text-white rounded hover:bg-accent-dark" (click)="terms[selectedTermIdx].courses.push({ name: '', credits: 0, grade: '' })">Add Course</button>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
</div>
