var XR=Object.defineProperty,KR=Object.defineProperties;var ZR=Object.getOwnPropertyDescriptors;var EE=Object.getOwnPropertySymbols,qR=Object.getPrototypeOf,QR=Object.prototype.hasOwnProperty,JR=Object.prototype.propertyIsEnumerable,eO=Reflect.get;var xE=(n,t)=>(t=Symbol[n])?t:Symbol.for("Symbol."+n),DE=n=>{throw TypeError(n)};var wE=(n,t,e)=>t in n?XR(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,H=(n,t)=>{for(var e in t||={})QR.call(t,e)&&wE(n,e,t[e]);if(EE)for(var e of EE(t))JR.call(t,e)&&wE(n,e,t[e]);return n},ce=(n,t)=>KR(n,ZR(t));var Bg=(n,t,e)=>t.has(n)||DE("Cannot "+e);var rt=(n,t,e)=>(Bg(n,t,"read from private field"),e?e.call(n):t.get(n)),_r=(n,t,e)=>t.has(n)?DE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),cn=(n,t,e,r)=>(Bg(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),Cr=(n,t,e)=>(Bg(n,t,"access private method"),e);var SE=(n,t,e,r)=>({set _(i){cn(n,t,i,e)},get _(){return rt(n,t,r)}}),Cs=(n,t,e)=>eO(qR(n),e,t);var K=(n,t,e)=>new Promise((r,i)=>{var s=l=>{try{a(e.next(l))}catch(c){i(c)}},o=l=>{try{a(e.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((e=e.apply(n,t)).next())});var TE=(n,t,e)=>(t=n[xE("asyncIterator")])?t.call(n):(n=n[xE("iterator")](),t={},e=(r,i)=>(i=n[r])&&(t[r]=s=>new Promise((o,a,l)=>(s=i.call(n,s),l=s.done,Promise.resolve(s.value).then(c=>o({value:c,done:l}),a)))),e("next"),e("return"),t);var Er=globalThis;function kn(n){return(Er.__Zone_symbol_prefix||"__zone_symbol__")+n}function tO(){let n=Er.performance;function t(P){n&&n.mark&&n.mark(P)}function e(P,M){n&&n.measure&&n.measure(P,M)}t("Zone");let r=(()=>{class P{static __symbol__=kn;static assertZonePatched(){if(Er.Promise!==A.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let D=P.current;for(;D.parent;)D=D.parent;return D}static get current(){return O.zone}static get currentTask(){return k}static __load_patch(D,T,Y=!1){if(A.hasOwnProperty(D)){let Q=Er[kn("forceDuplicateZoneCheck")]===!0;if(!Y&&Q)throw Error("Already loaded patch: "+D)}else if(!Er["__Zone_disable_"+D]){let Q="Zone:"+D;t(Q),A[D]=T(Er,P,I),e(Q,Q)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(D,T){this._parent=D,this._name=T?T.name||"unnamed":"<root>",this._properties=T&&T.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,T)}get(D){let T=this.getZoneWith(D);if(T)return T._properties[D]}getZoneWith(D){let T=this;for(;T;){if(T._properties.hasOwnProperty(D))return T;T=T._parent}return null}fork(D){if(!D)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,D)}wrap(D,T){if(typeof D!="function")throw new Error("Expecting function got: "+D);let Y=this._zoneDelegate.intercept(this,D,T),Q=this;return function(){return Q.runGuarded(Y,this,arguments,T)}}run(D,T,Y,Q){O={parent:O,zone:this};try{return this._zoneDelegate.invoke(this,D,T,Y,Q)}finally{O=O.parent}}runGuarded(D,T=null,Y,Q){O={parent:O,zone:this};try{try{return this._zoneDelegate.invoke(this,D,T,Y,Q)}catch(ie){if(this._zoneDelegate.handleError(this,ie))throw ie}}finally{O=O.parent}}runTask(D,T,Y){if(D.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(D.zone||m).name+"; Execution: "+this.name+")");let Q=D,{type:ie,data:{isPeriodic:q=!1,isRefreshable:Ee=!1}={}}=D;if(D.state===v&&(ie===S||ie===x))return;let je=D.state!=C;je&&Q._transitionTo(C,b);let W=k;k=Q,O={parent:O,zone:this};try{ie==x&&D.data&&!q&&!Ee&&(D.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,Q,T,Y)}catch(V){if(this._zoneDelegate.handleError(this,V))throw V}}finally{let V=D.state;if(V!==v&&V!==E)if(ie==S||q||Ee&&V===y)je&&Q._transitionTo(b,C,y);else{let N=Q._zoneDelegates;this._updateTaskCount(Q,-1),je&&Q._transitionTo(v,C,v),Ee&&(Q._zoneDelegates=N)}O=O.parent,k=W}}scheduleTask(D){if(D.zone&&D.zone!==this){let Y=this;for(;Y;){if(Y===D.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${D.zone.name}`);Y=Y.parent}}D._transitionTo(y,v);let T=[];D._zoneDelegates=T,D._zone=this;try{D=this._zoneDelegate.scheduleTask(this,D)}catch(Y){throw D._transitionTo(E,y,v),this._zoneDelegate.handleError(this,Y),Y}return D._zoneDelegates===T&&this._updateTaskCount(D,1),D.state==y&&D._transitionTo(b,y),D}scheduleMicroTask(D,T,Y,Q){return this.scheduleTask(new o(w,D,T,Y,Q,void 0))}scheduleMacroTask(D,T,Y,Q,ie){return this.scheduleTask(new o(x,D,T,Y,Q,ie))}scheduleEventTask(D,T,Y,Q,ie){return this.scheduleTask(new o(S,D,T,Y,Q,ie))}cancelTask(D){if(D.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(D.zone||m).name+"; Execution: "+this.name+")");if(!(D.state!==b&&D.state!==C)){D._transitionTo(_,b,C);try{this._zoneDelegate.cancelTask(this,D)}catch(T){throw D._transitionTo(E,_),this._zoneDelegate.handleError(this,T),T}return this._updateTaskCount(D,-1),D._transitionTo(v,_),D.runCount=-1,D}}_updateTaskCount(D,T){let Y=D._zoneDelegates;T==-1&&(D._zoneDelegates=null);for(let Q=0;Q<Y.length;Q++)Y[Q]._updateTaskCount(D.type,T)}}return P})(),i={name:"",onHasTask:(P,M,D,T)=>P.hasTask(D,T),onScheduleTask:(P,M,D,T)=>P.scheduleTask(D,T),onInvokeTask:(P,M,D,T,Y,Q)=>P.invokeTask(D,T,Y,Q),onCancelTask:(P,M,D,T)=>P.cancelTask(D,T)};class s{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(M,D,T){this._zone=M,this._parentDelegate=D,this._forkZS=T&&(T&&T.onFork?T:D._forkZS),this._forkDlgt=T&&(T.onFork?D:D._forkDlgt),this._forkCurrZone=T&&(T.onFork?this._zone:D._forkCurrZone),this._interceptZS=T&&(T.onIntercept?T:D._interceptZS),this._interceptDlgt=T&&(T.onIntercept?D:D._interceptDlgt),this._interceptCurrZone=T&&(T.onIntercept?this._zone:D._interceptCurrZone),this._invokeZS=T&&(T.onInvoke?T:D._invokeZS),this._invokeDlgt=T&&(T.onInvoke?D:D._invokeDlgt),this._invokeCurrZone=T&&(T.onInvoke?this._zone:D._invokeCurrZone),this._handleErrorZS=T&&(T.onHandleError?T:D._handleErrorZS),this._handleErrorDlgt=T&&(T.onHandleError?D:D._handleErrorDlgt),this._handleErrorCurrZone=T&&(T.onHandleError?this._zone:D._handleErrorCurrZone),this._scheduleTaskZS=T&&(T.onScheduleTask?T:D._scheduleTaskZS),this._scheduleTaskDlgt=T&&(T.onScheduleTask?D:D._scheduleTaskDlgt),this._scheduleTaskCurrZone=T&&(T.onScheduleTask?this._zone:D._scheduleTaskCurrZone),this._invokeTaskZS=T&&(T.onInvokeTask?T:D._invokeTaskZS),this._invokeTaskDlgt=T&&(T.onInvokeTask?D:D._invokeTaskDlgt),this._invokeTaskCurrZone=T&&(T.onInvokeTask?this._zone:D._invokeTaskCurrZone),this._cancelTaskZS=T&&(T.onCancelTask?T:D._cancelTaskZS),this._cancelTaskDlgt=T&&(T.onCancelTask?D:D._cancelTaskDlgt),this._cancelTaskCurrZone=T&&(T.onCancelTask?this._zone:D._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let Y=T&&T.onHasTask,Q=D&&D._hasTaskZS;(Y||Q)&&(this._hasTaskZS=Y?T:i,this._hasTaskDlgt=D,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,T.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=D,this._scheduleTaskCurrZone=this._zone),T.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=D,this._invokeTaskCurrZone=this._zone),T.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=D,this._cancelTaskCurrZone=this._zone))}fork(M,D){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,M,D):new r(M,D)}intercept(M,D,T){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,M,D,T):D}invoke(M,D,T,Y,Q){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,M,D,T,Y,Q):D.apply(T,Y)}handleError(M,D){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,M,D):!0}scheduleTask(M,D){let T=D;if(this._scheduleTaskZS)this._hasTaskZS&&T._zoneDelegates.push(this._hasTaskDlgtOwner),T=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,M,D),T||(T=D);else if(D.scheduleFn)D.scheduleFn(D);else if(D.type==w)p(D);else throw new Error("Task is missing scheduleFn.");return T}invokeTask(M,D,T,Y){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,M,D,T,Y):D.callback.apply(T,Y)}cancelTask(M,D){let T;if(this._cancelTaskZS)T=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,M,D);else{if(!D.cancelFn)throw Error("Task is not cancelable");T=D.cancelFn(D)}return T}hasTask(M,D){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,M,D)}catch(T){this.handleError(M,T)}}_updateTaskCount(M,D){let T=this._taskCounts,Y=T[M],Q=T[M]=Y+D;if(Q<0)throw new Error("More tasks executed then were scheduled.");if(Y==0||Q==0){let ie={microTask:T.microTask>0,macroTask:T.macroTask>0,eventTask:T.eventTask>0,change:M};this.hasTask(this._zone,ie)}}}class o{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(M,D,T,Y,Q,ie){if(this.type=M,this.source=D,this.data=Y,this.scheduleFn=Q,this.cancelFn=ie,!T)throw new Error("callback is not defined");this.callback=T;let q=this;M===S&&Y&&Y.useG?this.invoke=o.invokeTask:this.invoke=function(){return o.invokeTask.call(Er,q,this,arguments)}}static invokeTask(M,D,T){M||(M=this),$++;try{return M.runCount++,M.zone.runTask(M,D,T)}finally{$==1&&g(),$--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(v,y)}_transitionTo(M,D,T){if(this._state===D||this._state===T)this._state=M,M==v&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${M}', expecting state '${D}'${T?" or '"+T+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let a=kn("setTimeout"),l=kn("Promise"),c=kn("then"),u=[],d=!1,h;function f(P){if(h||Er[l]&&(h=Er[l].resolve(0)),h){let M=h[c];M||(M=h.then),M.call(h,P)}else Er[a](P,0)}function p(P){$===0&&u.length===0&&f(g),P&&u.push(P)}function g(){if(!d){for(d=!0;u.length;){let P=u;u=[];for(let M=0;M<P.length;M++){let D=P[M];try{D.zone.runTask(D,null,null)}catch(T){I.onUnhandledError(T)}}}I.microtaskDrainDone(),d=!1}}let m={name:"NO ZONE"},v="notScheduled",y="scheduling",b="scheduled",C="running",_="canceling",E="unknown",w="microTask",x="macroTask",S="eventTask",A={},I={symbol:kn,currentZoneFrame:()=>O,onUnhandledError:U,microtaskDrainDone:U,scheduleMicroTask:p,showUncaughtError:()=>!r[kn("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:U,patchMethod:()=>U,bindArguments:()=>[],patchThen:()=>U,patchMacroTask:()=>U,patchEventPrototype:()=>U,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>U,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>U,wrapWithCurrentZone:()=>U,filterProperties:()=>[],attachOriginToPatched:()=>U,_redefineProperty:()=>U,patchCallbacks:()=>U,nativeScheduleMicroTask:f},O={parent:null,zone:new r(null,null)},k=null,$=0;function U(){}return e("Zone","Zone"),r}function nO(){let n=globalThis,t=n[kn("forceDuplicateZoneCheck")]===!0;if(n.Zone&&(t||typeof n.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return n.Zone??=tO(),n.Zone}var ul=Object.getOwnPropertyDescriptor,$g=Object.defineProperty,zg=Object.getPrototypeOf,rO=Object.create,iO=Array.prototype.slice,Gg="addEventListener",Wg="removeEventListener",jg=kn(Gg),Vg=kn(Wg),Zr="true",qr="false",dl=kn("");function Yg(n,t){return Zone.current.wrap(n,t)}function Xg(n,t,e,r,i){return Zone.current.scheduleMacroTask(n,t,e,r,i)}var ze=kn,Fu=typeof window<"u",hl=Fu?window:void 0,It=Fu&&hl||globalThis,sO="removeAttribute";function Kg(n,t){for(let e=n.length-1;e>=0;e--)typeof n[e]=="function"&&(n[e]=Yg(n[e],t+"_"+e));return n}function oO(n,t){let e=n.constructor.name;for(let r=0;r<t.length;r++){let i=t[r],s=n[i];if(s){let o=ul(n,i);if(!PE(o))continue;n[i]=(a=>{let l=function(){return a.apply(this,Kg(arguments,e+"."+i))};return Jr(l,a),l})(s)}}}function PE(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var kE=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Bu=!("nw"in It)&&typeof It.process<"u"&&It.process.toString()==="[object process]",Zg=!Bu&&!kE&&!!(Fu&&hl.HTMLElement),LE=typeof It.process<"u"&&It.process.toString()==="[object process]"&&!kE&&!!(Fu&&hl.HTMLElement),Lu={},aO=ze("enable_beforeunload"),AE=function(n){if(n=n||It.event,!n)return;let t=Lu[n.type];t||(t=Lu[n.type]=ze("ON_PROPERTY"+n.type));let e=this||n.target||It,r=e[t],i;if(Zg&&e===hl&&n.type==="error"){let s=n;i=r&&r.call(this,s.message,s.filename,s.lineno,s.colno,s.error),i===!0&&n.preventDefault()}else i=r&&r.apply(this,arguments),n.type==="beforeunload"&&It[aO]&&typeof i=="string"?n.returnValue=i:i!=null&&!i&&n.preventDefault();return i};function IE(n,t,e){let r=ul(n,t);if(!r&&e&&ul(e,t)&&(r={enumerable:!0,configurable:!0}),!r||!r.configurable)return;let i=ze("on"+t+"patched");if(n.hasOwnProperty(i)&&n[i])return;delete r.writable,delete r.value;let s=r.get,o=r.set,a=t.slice(2),l=Lu[a];l||(l=Lu[a]=ze("ON_PROPERTY"+a)),r.set=function(c){let u=this;if(!u&&n===It&&(u=It),!u)return;typeof u[l]=="function"&&u.removeEventListener(a,AE),o?.call(u,null),u[l]=c,typeof c=="function"&&u.addEventListener(a,AE,!1)},r.get=function(){let c=this;if(!c&&n===It&&(c=It),!c)return null;let u=c[l];if(u)return u;if(s){let d=s.call(this);if(d)return r.set.call(this,d),typeof c[sO]=="function"&&c.removeAttribute(t),d}return null},$g(n,t,r),n[i]=!0}function FE(n,t,e){if(t)for(let r=0;r<t.length;r++)IE(n,"on"+t[r],e);else{let r=[];for(let i in n)i.slice(0,2)=="on"&&r.push(i);for(let i=0;i<r.length;i++)IE(n,r[i],e)}}var tr=ze("originalInstance");function cl(n){let t=It[n];if(!t)return;It[ze(n)]=t,It[n]=function(){let i=Kg(arguments,n);switch(i.length){case 0:this[tr]=new t;break;case 1:this[tr]=new t(i[0]);break;case 2:this[tr]=new t(i[0],i[1]);break;case 3:this[tr]=new t(i[0],i[1],i[2]);break;case 4:this[tr]=new t(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},Jr(It[n],t);let e=new t(function(){}),r;for(r in e)n==="XMLHttpRequest"&&r==="responseBlob"||(function(i){typeof e[i]=="function"?It[n].prototype[i]=function(){return this[tr][i].apply(this[tr],arguments)}:$g(It[n].prototype,i,{set:function(s){typeof s=="function"?(this[tr][i]=Yg(s,n+"."+i),Jr(this[tr][i],s)):this[tr][i]=s},get:function(){return this[tr][i]}})})(r);for(r in t)r!=="prototype"&&t.hasOwnProperty(r)&&(It[n][r]=t[r])}function Qr(n,t,e){let r=n;for(;r&&!r.hasOwnProperty(t);)r=zg(r);!r&&n[t]&&(r=n);let i=ze(t),s=null;if(r&&(!(s=r[i])||!r.hasOwnProperty(i))){s=r[i]=r[t];let o=r&&ul(r,t);if(PE(o)){let a=e(s,i,t);r[t]=function(){return a(this,arguments)},Jr(r[t],s)}}return s}function lO(n,t,e){let r=null;function i(s){let o=s.data;return o.args[o.cbIdx]=function(){s.invoke.apply(this,arguments)},r.apply(o.target,o.args),s}r=Qr(n,t,s=>function(o,a){let l=e(o,a);return l.cbIdx>=0&&typeof a[l.cbIdx]=="function"?Xg(l.name,a[l.cbIdx],l,i):s.apply(o,a)})}function Jr(n,t){n[ze("OriginalDelegate")]=t}var ME=!1,Hg=!1;function cO(){if(ME)return Hg;ME=!0;try{let n=hl.navigator.userAgent;(n.indexOf("MSIE ")!==-1||n.indexOf("Trident/")!==-1||n.indexOf("Edge/")!==-1)&&(Hg=!0)}catch{}return Hg}function RE(n){return typeof n=="function"}function OE(n){return typeof n=="number"}var uO={useG:!0},Ln={},BE={},jE=new RegExp("^"+dl+"(\\w+)(true|false)$"),VE=ze("propagationStopped");function HE(n,t){let e=(t?t(n):n)+qr,r=(t?t(n):n)+Zr,i=dl+e,s=dl+r;Ln[n]={},Ln[n][qr]=i,Ln[n][Zr]=s}function dO(n,t,e,r){let i=r&&r.add||Gg,s=r&&r.rm||Wg,o=r&&r.listeners||"eventListeners",a=r&&r.rmAll||"removeAllListeners",l=ze(i),c="."+i+":",u="prependListener",d="."+u+":",h=function(y,b,C){if(y.isRemoved)return;let _=y.callback;typeof _=="object"&&_.handleEvent&&(y.callback=x=>_.handleEvent(x),y.originalDelegate=_);let E;try{y.invoke(y,b,[C])}catch(x){E=x}let w=y.options;if(w&&typeof w=="object"&&w.once){let x=y.originalDelegate?y.originalDelegate:y.callback;b[s].call(b,C.type,x,w)}return E};function f(y,b,C){if(b=b||n.event,!b)return;let _=y||b.target||n,E=_[Ln[b.type][C?Zr:qr]];if(E){let w=[];if(E.length===1){let x=h(E[0],_,b);x&&w.push(x)}else{let x=E.slice();for(let S=0;S<x.length&&!(b&&b[VE]===!0);S++){let A=h(x[S],_,b);A&&w.push(A)}}if(w.length===1)throw w[0];for(let x=0;x<w.length;x++){let S=w[x];t.nativeScheduleMicroTask(()=>{throw S})}}}let p=function(y){return f(this,y,!1)},g=function(y){return f(this,y,!0)};function m(y,b){if(!y)return!1;let C=!0;b&&b.useG!==void 0&&(C=b.useG);let _=b&&b.vh,E=!0;b&&b.chkDup!==void 0&&(E=b.chkDup);let w=!1;b&&b.rt!==void 0&&(w=b.rt);let x=y;for(;x&&!x.hasOwnProperty(i);)x=zg(x);if(!x&&y[i]&&(x=y),!x||x[l])return!1;let S=b&&b.eventNameToString,A={},I=x[l]=x[i],O=x[ze(s)]=x[s],k=x[ze(o)]=x[o],$=x[ze(a)]=x[a],U;b&&b.prepend&&(U=x[ze(b.prepend)]=x[b.prepend]);function P(R,L){return L?typeof R=="boolean"?{capture:R,passive:!0}:R?typeof R=="object"&&R.passive!==!1?ce(H({},R),{passive:!0}):R:{passive:!0}:R}let M=function(R){if(!A.isExisting)return I.call(A.target,A.eventName,A.capture?g:p,A.options)},D=function(R){if(!R.isRemoved){let L=Ln[R.eventName],X;L&&(X=L[R.capture?Zr:qr]);let J=X&&R.target[X];if(J){for(let ee=0;ee<J.length;ee++)if(J[ee]===R){J.splice(ee,1),R.isRemoved=!0,R.removeAbortListener&&(R.removeAbortListener(),R.removeAbortListener=null),J.length===0&&(R.allRemoved=!0,R.target[X]=null);break}}}if(R.allRemoved)return O.call(R.target,R.eventName,R.capture?g:p,R.options)},T=function(R){return I.call(A.target,A.eventName,R.invoke,A.options)},Y=function(R){return U.call(A.target,A.eventName,R.invoke,A.options)},Q=function(R){return O.call(R.target,R.eventName,R.invoke,R.options)},ie=C?M:T,q=C?D:Q,Ee=function(R,L){let X=typeof L;return X==="function"&&R.callback===L||X==="object"&&R.originalDelegate===L},je=b?.diff||Ee,W=Zone[ze("UNPATCHED_EVENTS")],V=n[ze("PASSIVE_EVENTS")];function N(R){if(typeof R=="object"&&R!==null){let L=H({},R);return R.signal&&(L.signal=R.signal),L}return R}let F=function(R,L,X,J,ee=!1,ue=!1){return function(){let le=this||n,me=arguments[0];b&&b.transferEventName&&(me=b.transferEventName(me));let $e=arguments[1];if(!$e)return R.apply(this,arguments);if(Bu&&me==="uncaughtException")return R.apply(this,arguments);let He=!1;if(typeof $e!="function"){if(!$e.handleEvent)return R.apply(this,arguments);He=!0}if(_&&!_(R,$e,le,arguments))return;let Li=!!V&&V.indexOf(me)!==-1,yr=N(P(arguments[2],Li)),xo=yr?.signal;if(xo?.aborted)return;if(W){for(let br=0;br<W.length;br++)if(me===W[br])return Li?R.call(le,me,$e,yr):R.apply(this,arguments)}let Lg=yr?typeof yr=="boolean"?!0:yr.capture:!1,vE=yr&&typeof yr=="object"?yr.once:!1,YR=Zone.current,Fg=Ln[me];Fg||(HE(me,S),Fg=Ln[me]);let yE=Fg[Lg?Zr:qr],wo=le[yE],bE=!1;if(wo){if(bE=!0,E){for(let br=0;br<wo.length;br++)if(je(wo[br],$e))return}}else wo=le[yE]=[];let Pu,_E=le.constructor.name,CE=BE[_E];CE&&(Pu=CE[me]),Pu||(Pu=_E+L+(S?S(me):me)),A.options=yr,vE&&(A.options.once=!1),A.target=le,A.capture=Lg,A.eventName=me,A.isExisting=bE;let ll=C?uO:void 0;ll&&(ll.taskData=A),xo&&(A.options.signal=void 0);let er=YR.scheduleEventTask(Pu,$e,ll,X,J);if(xo){A.options.signal=xo;let br=()=>er.zone.cancelTask(er);R.call(xo,"abort",br,{once:!0}),er.removeAbortListener=()=>xo.removeEventListener("abort",br)}if(A.target=null,ll&&(ll.taskData=null),vE&&(A.options.once=!0),typeof er.options!="boolean"&&(er.options=yr),er.target=le,er.capture=Lg,er.eventName=me,He&&(er.originalDelegate=$e),ue?wo.unshift(er):wo.push(er),ee)return le}};return x[i]=F(I,c,ie,q,w),U&&(x[u]=F(U,d,Y,q,w,!0)),x[s]=function(){let R=this||n,L=arguments[0];b&&b.transferEventName&&(L=b.transferEventName(L));let X=arguments[2],J=X?typeof X=="boolean"?!0:X.capture:!1,ee=arguments[1];if(!ee)return O.apply(this,arguments);if(_&&!_(O,ee,R,arguments))return;let ue=Ln[L],le;ue&&(le=ue[J?Zr:qr]);let me=le&&R[le];if(me)for(let $e=0;$e<me.length;$e++){let He=me[$e];if(je(He,ee)){if(me.splice($e,1),He.isRemoved=!0,me.length===0&&(He.allRemoved=!0,R[le]=null,!J&&typeof L=="string")){let Li=dl+"ON_PROPERTY"+L;R[Li]=null}return He.zone.cancelTask(He),w?R:void 0}}return O.apply(this,arguments)},x[o]=function(){let R=this||n,L=arguments[0];b&&b.transferEventName&&(L=b.transferEventName(L));let X=[],J=UE(R,S?S(L):L);for(let ee=0;ee<J.length;ee++){let ue=J[ee],le=ue.originalDelegate?ue.originalDelegate:ue.callback;X.push(le)}return X},x[a]=function(){let R=this||n,L=arguments[0];if(L){b&&b.transferEventName&&(L=b.transferEventName(L));let X=Ln[L];if(X){let J=X[qr],ee=X[Zr],ue=R[J],le=R[ee];if(ue){let me=ue.slice();for(let $e=0;$e<me.length;$e++){let He=me[$e],Li=He.originalDelegate?He.originalDelegate:He.callback;this[s].call(this,L,Li,He.options)}}if(le){let me=le.slice();for(let $e=0;$e<me.length;$e++){let He=me[$e],Li=He.originalDelegate?He.originalDelegate:He.callback;this[s].call(this,L,Li,He.options)}}}}else{let X=Object.keys(R);for(let J=0;J<X.length;J++){let ee=X[J],ue=jE.exec(ee),le=ue&&ue[1];le&&le!=="removeListener"&&this[a].call(this,le)}this[a].call(this,"removeListener")}if(w)return this},Jr(x[i],I),Jr(x[s],O),$&&Jr(x[a],$),k&&Jr(x[o],k),!0}let v=[];for(let y=0;y<e.length;y++)v[y]=m(e[y],r);return v}function UE(n,t){if(!t){let s=[];for(let o in n){let a=jE.exec(o),l=a&&a[1];if(l&&(!t||l===t)){let c=n[o];if(c)for(let u=0;u<c.length;u++)s.push(c[u])}}return s}let e=Ln[t];e||(HE(t),e=Ln[t]);let r=n[e[qr]],i=n[e[Zr]];return r?i?r.concat(i):r.slice():i?i.slice():[]}function hO(n,t){let e=n.Event;e&&e.prototype&&t.patchMethod(e.prototype,"stopImmediatePropagation",r=>function(i,s){i[VE]=!0,r&&r.apply(i,s)})}function fO(n,t){t.patchMethod(n,"queueMicrotask",e=>function(r,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}var ku=ze("zoneTask");function Do(n,t,e,r){let i=null,s=null;t+=r,e+=r;let o={};function a(c){let u=c.data;u.args[0]=function(){return c.invoke.apply(this,arguments)};let d=i.apply(n,u.args);return OE(d)?u.handleId=d:(u.handle=d,u.isRefreshable=RE(d.refresh)),c}function l(c){let{handle:u,handleId:d}=c.data;return s.call(n,u??d)}i=Qr(n,t,c=>function(u,d){if(RE(d[0])){let h={isRefreshable:!1,isPeriodic:r==="Interval",delay:r==="Timeout"||r==="Interval"?d[1]||0:void 0,args:d},f=d[0];d[0]=function(){try{return f.apply(this,arguments)}finally{let{handle:C,handleId:_,isPeriodic:E,isRefreshable:w}=h;!E&&!w&&(_?delete o[_]:C&&(C[ku]=null))}};let p=Xg(t,d[0],h,a,l);if(!p)return p;let{handleId:g,handle:m,isRefreshable:v,isPeriodic:y}=p.data;if(g)o[g]=p;else if(m&&(m[ku]=p,v&&!y)){let b=m.refresh;m.refresh=function(){let{zone:C,state:_}=p;return _==="notScheduled"?(p._state="scheduled",C._updateTaskCount(p,1)):_==="running"&&(p._state="scheduling"),b.call(this)}}return m??g??p}else return c.apply(n,d)}),s=Qr(n,e,c=>function(u,d){let h=d[0],f;OE(h)?(f=o[h],delete o[h]):(f=h?.[ku],f?h[ku]=null:f=h),f?.type?f.cancelFn&&f.zone.cancelTask(f):c.apply(n,d)})}function pO(n,t){let{isBrowser:e,isMix:r}=t.getGlobalObjects();if(!e&&!r||!n.customElements||!("customElements"in n))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];t.patchCallbacks(t,n.customElements,"customElements","define",i)}function gO(n,t){if(Zone[t.symbol("patchEventTarget")])return;let{eventNames:e,zoneSymbolEventNames:r,TRUE_STR:i,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=t.getGlobalObjects();for(let l=0;l<e.length;l++){let c=e[l],u=c+s,d=c+i,h=o+u,f=o+d;r[c]={},r[c][s]=h,r[c][i]=f}let a=n.EventTarget;if(!(!a||!a.prototype))return t.patchEventTarget(n,t,[a&&a.prototype]),!0}function mO(n,t){t.patchEventPrototype(n,t)}function $E(n,t,e){if(!e||e.length===0)return t;let r=e.filter(s=>s.target===n);if(r.length===0)return t;let i=r[0].ignoreProperties;return t.filter(s=>i.indexOf(s)===-1)}function NE(n,t,e,r){if(!n)return;let i=$E(n,t,e);FE(n,i,r)}function Ug(n){return Object.getOwnPropertyNames(n).filter(t=>t.startsWith("on")&&t.length>2).map(t=>t.substring(2))}function vO(n,t){if(Bu&&!LE||Zone[n.symbol("patchEvents")])return;let e=t.__Zone_ignore_on_properties,r=[];if(Zg){let i=window;r=r.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=[];NE(i,Ug(i),e&&e.concat(s),zg(i))}r=r.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<r.length;i++){let s=t[r[i]];s?.prototype&&NE(s.prototype,Ug(s.prototype),e)}}function yO(n){n.__load_patch("legacy",t=>{let e=t[n.__symbol__("legacyPatch")];e&&e()}),n.__load_patch("timers",t=>{let r="clear";Do(t,"set",r,"Timeout"),Do(t,"set",r,"Interval"),Do(t,"set",r,"Immediate")}),n.__load_patch("requestAnimationFrame",t=>{Do(t,"request","cancel","AnimationFrame"),Do(t,"mozRequest","mozCancel","AnimationFrame"),Do(t,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(t,e)=>{let r=["alert","prompt","confirm"];for(let i=0;i<r.length;i++){let s=r[i];Qr(t,s,(o,a,l)=>function(c,u){return e.current.run(o,t,u,l)})}}),n.__load_patch("EventTarget",(t,e,r)=>{mO(t,r),gO(t,r);let i=t.XMLHttpRequestEventTarget;i&&i.prototype&&r.patchEventTarget(t,r,[i.prototype])}),n.__load_patch("MutationObserver",(t,e,r)=>{cl("MutationObserver"),cl("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(t,e,r)=>{cl("IntersectionObserver")}),n.__load_patch("FileReader",(t,e,r)=>{cl("FileReader")}),n.__load_patch("on_property",(t,e,r)=>{vO(r,t)}),n.__load_patch("customElements",(t,e,r)=>{pO(t,r)}),n.__load_patch("XHR",(t,e)=>{c(t);let r=ze("xhrTask"),i=ze("xhrSync"),s=ze("xhrListener"),o=ze("xhrScheduled"),a=ze("xhrURL"),l=ze("xhrErrorBeforeScheduled");function c(u){let d=u.XMLHttpRequest;if(!d)return;let h=d.prototype;function f(I){return I[r]}let p=h[jg],g=h[Vg];if(!p){let I=u.XMLHttpRequestEventTarget;if(I){let O=I.prototype;p=O[jg],g=O[Vg]}}let m="readystatechange",v="scheduled";function y(I){let O=I.data,k=O.target;k[o]=!1,k[l]=!1;let $=k[s];p||(p=k[jg],g=k[Vg]),$&&g.call(k,m,$);let U=k[s]=()=>{if(k.readyState===k.DONE)if(!O.aborted&&k[o]&&I.state===v){let M=k[e.__symbol__("loadfalse")];if(k.status!==0&&M&&M.length>0){let D=I.invoke;I.invoke=function(){let T=k[e.__symbol__("loadfalse")];for(let Y=0;Y<T.length;Y++)T[Y]===I&&T.splice(Y,1);!O.aborted&&I.state===v&&D.call(I)},M.push(I)}else I.invoke()}else!O.aborted&&k[o]===!1&&(k[l]=!0)};return p.call(k,m,U),k[r]||(k[r]=I),S.apply(k,O.args),k[o]=!0,I}function b(){}function C(I){let O=I.data;return O.aborted=!0,A.apply(O.target,O.args)}let _=Qr(h,"open",()=>function(I,O){return I[i]=O[2]==!1,I[a]=O[1],_.apply(I,O)}),E="XMLHttpRequest.send",w=ze("fetchTaskAborting"),x=ze("fetchTaskScheduling"),S=Qr(h,"send",()=>function(I,O){if(e.current[x]===!0||I[i])return S.apply(I,O);{let k={target:I,url:I[a],isPeriodic:!1,args:O,aborted:!1},$=Xg(E,b,k,y,C);I&&I[l]===!0&&!k.aborted&&$.state===v&&$.invoke()}}),A=Qr(h,"abort",()=>function(I,O){let k=f(I);if(k&&typeof k.type=="string"){if(k.cancelFn==null||k.data&&k.data.aborted)return;k.zone.cancelTask(k)}else if(e.current[w]===!0)return A.apply(I,O)})}}),n.__load_patch("geolocation",t=>{t.navigator&&t.navigator.geolocation&&oO(t.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(t,e)=>{function r(i){return function(s){UE(t,i).forEach(a=>{let l=t.PromiseRejectionEvent;if(l){let c=new l(i,{promise:s.promise,reason:s.rejection});a.invoke(c)}})}}t.PromiseRejectionEvent&&(e[ze("unhandledPromiseRejectionHandler")]=r("unhandledrejection"),e[ze("rejectionHandledHandler")]=r("rejectionhandled"))}),n.__load_patch("queueMicrotask",(t,e,r)=>{fO(t,r)})}function bO(n){n.__load_patch("ZoneAwarePromise",(t,e,r)=>{let i=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function o(N){if(N&&N.toString===Object.prototype.toString){let F=N.constructor&&N.constructor.name;return(F||"")+": "+JSON.stringify(N)}return N?N.toString():Object.prototype.toString.call(N)}let a=r.symbol,l=[],c=t[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,u=a("Promise"),d=a("then"),h="__creationTrace__";r.onUnhandledError=N=>{if(r.showUncaughtError()){let F=N&&N.rejection;F?console.error("Unhandled Promise rejection:",F instanceof Error?F.message:F,"; Zone:",N.zone.name,"; Task:",N.task&&N.task.source,"; Value:",F,F instanceof Error?F.stack:void 0):console.error(N)}},r.microtaskDrainDone=()=>{for(;l.length;){let N=l.shift();try{N.zone.runGuarded(()=>{throw N.throwOriginal?N.rejection:N})}catch(F){p(F)}}};let f=a("unhandledPromiseRejectionHandler");function p(N){r.onUnhandledError(N);try{let F=e[f];typeof F=="function"&&F.call(this,N)}catch{}}function g(N){return N&&typeof N.then=="function"}function m(N){return N}function v(N){return q.reject(N)}let y=a("state"),b=a("value"),C=a("finally"),_=a("parentPromiseValue"),E=a("parentPromiseState"),w="Promise.then",x=null,S=!0,A=!1,I=0;function O(N,F){return R=>{try{P(N,F,R)}catch(L){P(N,!1,L)}}}let k=function(){let N=!1;return function(R){return function(){N||(N=!0,R.apply(null,arguments))}}},$="Promise resolved with itself",U=a("currentTaskTrace");function P(N,F,R){let L=k();if(N===R)throw new TypeError($);if(N[y]===x){let X=null;try{(typeof R=="object"||typeof R=="function")&&(X=R&&R.then)}catch(J){return L(()=>{P(N,!1,J)})(),N}if(F!==A&&R instanceof q&&R.hasOwnProperty(y)&&R.hasOwnProperty(b)&&R[y]!==x)D(R),P(N,R[y],R[b]);else if(F!==A&&typeof X=="function")try{X.call(R,L(O(N,F)),L(O(N,!1)))}catch(J){L(()=>{P(N,!1,J)})()}else{N[y]=F;let J=N[b];if(N[b]=R,N[C]===C&&F===S&&(N[y]=N[E],N[b]=N[_]),F===A&&R instanceof Error){let ee=e.currentTask&&e.currentTask.data&&e.currentTask.data[h];ee&&s(R,U,{configurable:!0,enumerable:!1,writable:!0,value:ee})}for(let ee=0;ee<J.length;)T(N,J[ee++],J[ee++],J[ee++],J[ee++]);if(J.length==0&&F==A){N[y]=I;let ee=R;try{throw new Error("Uncaught (in promise): "+o(R)+(R&&R.stack?`
`+R.stack:""))}catch(ue){ee=ue}c&&(ee.throwOriginal=!0),ee.rejection=R,ee.promise=N,ee.zone=e.current,ee.task=e.currentTask,l.push(ee),r.scheduleMicroTask()}}}return N}let M=a("rejectionHandledHandler");function D(N){if(N[y]===I){try{let F=e[M];F&&typeof F=="function"&&F.call(this,{rejection:N[b],promise:N})}catch{}N[y]=A;for(let F=0;F<l.length;F++)N===l[F].promise&&l.splice(F,1)}}function T(N,F,R,L,X){D(N);let J=N[y],ee=J?typeof L=="function"?L:m:typeof X=="function"?X:v;F.scheduleMicroTask(w,()=>{try{let ue=N[b],le=!!R&&C===R[C];le&&(R[_]=ue,R[E]=J);let me=F.run(ee,void 0,le&&ee!==v&&ee!==m?[]:[ue]);P(R,!0,me)}catch(ue){P(R,!1,ue)}},R)}let Y="function ZoneAwarePromise() { [native code] }",Q=function(){},ie=t.AggregateError;class q{static toString(){return Y}static resolve(F){return F instanceof q?F:P(new this(null),S,F)}static reject(F){return P(new this(null),A,F)}static withResolvers(){let F={};return F.promise=new q((R,L)=>{F.resolve=R,F.reject=L}),F}static any(F){if(!F||typeof F[Symbol.iterator]!="function")return Promise.reject(new ie([],"All promises were rejected"));let R=[],L=0;try{for(let ee of F)L++,R.push(q.resolve(ee))}catch{return Promise.reject(new ie([],"All promises were rejected"))}if(L===0)return Promise.reject(new ie([],"All promises were rejected"));let X=!1,J=[];return new q((ee,ue)=>{for(let le=0;le<R.length;le++)R[le].then(me=>{X||(X=!0,ee(me))},me=>{J.push(me),L--,L===0&&(X=!0,ue(new ie(J,"All promises were rejected")))})})}static race(F){let R,L,X=new this((ue,le)=>{R=ue,L=le});function J(ue){R(ue)}function ee(ue){L(ue)}for(let ue of F)g(ue)||(ue=this.resolve(ue)),ue.then(J,ee);return X}static all(F){return q.allWithCallback(F)}static allSettled(F){return(this&&this.prototype instanceof q?this:q).allWithCallback(F,{thenCallback:L=>({status:"fulfilled",value:L}),errorCallback:L=>({status:"rejected",reason:L})})}static allWithCallback(F,R){let L,X,J=new this((me,$e)=>{L=me,X=$e}),ee=2,ue=0,le=[];for(let me of F){g(me)||(me=this.resolve(me));let $e=ue;try{me.then(He=>{le[$e]=R?R.thenCallback(He):He,ee--,ee===0&&L(le)},He=>{R?(le[$e]=R.errorCallback(He),ee--,ee===0&&L(le)):X(He)})}catch(He){X(He)}ee++,ue++}return ee-=2,ee===0&&L(le),J}constructor(F){let R=this;if(!(R instanceof q))throw new Error("Must be an instanceof Promise.");R[y]=x,R[b]=[];try{let L=k();F&&F(L(O(R,S)),L(O(R,A)))}catch(L){P(R,!1,L)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return q}then(F,R){let L=this.constructor?.[Symbol.species];(!L||typeof L!="function")&&(L=this.constructor||q);let X=new L(Q),J=e.current;return this[y]==x?this[b].push(J,X,F,R):T(this,J,X,F,R),X}catch(F){return this.then(null,F)}finally(F){let R=this.constructor?.[Symbol.species];(!R||typeof R!="function")&&(R=q);let L=new R(Q);L[C]=C;let X=e.current;return this[y]==x?this[b].push(X,L,F,F):T(this,X,L,F,F),L}}q.resolve=q.resolve,q.reject=q.reject,q.race=q.race,q.all=q.all;let Ee=t[u]=t.Promise;t.Promise=q;let je=a("thenPatched");function W(N){let F=N.prototype,R=i(F,"then");if(R&&(R.writable===!1||!R.configurable))return;let L=F.then;F[d]=L,N.prototype.then=function(X,J){return new q((ue,le)=>{L.call(this,ue,le)}).then(X,J)},N[je]=!0}r.patchThen=W;function V(N){return function(F,R){let L=N.apply(F,R);if(L instanceof q)return L;let X=L.constructor;return X[je]||W(X),L}}return Ee&&(W(Ee),Qr(t,"fetch",N=>V(N))),Promise[e.__symbol__("uncaughtPromiseErrors")]=l,q})}function _O(n){n.__load_patch("toString",t=>{let e=Function.prototype.toString,r=ze("OriginalDelegate"),i=ze("Promise"),s=ze("Error"),o=function(){if(typeof this=="function"){let u=this[r];if(u)return typeof u=="function"?e.call(u):Object.prototype.toString.call(u);if(this===Promise){let d=t[i];if(d)return e.call(d)}if(this===Error){let d=t[s];if(d)return e.call(d)}}return e.call(this)};o[r]=e,Function.prototype.toString=o;let a=Object.prototype.toString,l="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?l:a.call(this)}})}function CO(n,t,e,r,i){let s=Zone.__symbol__(r);if(t[s])return;let o=t[s]=t[r];t[r]=function(a,l,c){return l&&l.prototype&&i.forEach(function(u){let d=`${e}.${r}::`+u,h=l.prototype;try{if(h.hasOwnProperty(u)){let f=n.ObjectGetOwnPropertyDescriptor(h,u);f&&f.value?(f.value=n.wrapWithCurrentZone(f.value,d),n._redefineProperty(l.prototype,u,f)):h[u]&&(h[u]=n.wrapWithCurrentZone(h[u],d))}else h[u]&&(h[u]=n.wrapWithCurrentZone(h[u],d))}catch{}}),o.call(t,a,l,c)},n.attachOriginToPatched(t[r],o)}function EO(n){n.__load_patch("util",(t,e,r)=>{let i=Ug(t);r.patchOnProperties=FE,r.patchMethod=Qr,r.bindArguments=Kg,r.patchMacroTask=lO;let s=e.__symbol__("BLACK_LISTED_EVENTS"),o=e.__symbol__("UNPATCHED_EVENTS");t[o]&&(t[s]=t[o]),t[s]&&(e[s]=e[o]=t[s]),r.patchEventPrototype=hO,r.patchEventTarget=dO,r.isIEOrEdge=cO,r.ObjectDefineProperty=$g,r.ObjectGetOwnPropertyDescriptor=ul,r.ObjectCreate=rO,r.ArraySlice=iO,r.patchClass=cl,r.wrapWithCurrentZone=Yg,r.filterProperties=$E,r.attachOriginToPatched=Jr,r._redefineProperty=Object.defineProperty,r.patchCallbacks=CO,r.getGlobalObjects=()=>({globalSources:BE,zoneSymbolEventNames:Ln,eventNames:i,isBrowser:Zg,isMix:LE,isNode:Bu,TRUE_STR:Zr,FALSE_STR:qr,ZONE_SYMBOL_PREFIX:dl,ADD_EVENT_LISTENER_STR:Gg,REMOVE_EVENT_LISTENER_STR:Wg})})}function xO(n){bO(n),_O(n),EO(n)}var zE=nO();xO(zE);yO(zE);var qg;function ju(){return qg}function xr(n){let t=qg;return qg=n,t}var GE=Symbol("NotFound");function So(n){return n===GE||n?.name==="\u0275NotFound"}function zu(n,t){return Object.is(n,t)}var Yt=null,Vu=!1,Qg=1,wO=null,Xt=Symbol("SIGNAL");function ye(n){let t=Yt;return Yt=n,t}function Gu(){return Yt}var Es={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function To(n){if(Vu)throw new Error("");if(Yt===null)return;Yt.consumerOnSignalRead(n);let t=Yt.producersTail;if(t!==void 0&&t.producer===n)return;let e,r=Yt.recomputing;if(r&&(e=t!==void 0?t.nextProducer:Yt.producers,e!==void 0&&e.producer===n)){Yt.producersTail=e,e.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Yt&&(!r||SO(i,Yt)))return;let s=Io(Yt),o={producer:n,consumer:Yt,nextProducer:e,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Yt.producersTail=o,t!==void 0?t.nextProducer=o:Yt.producers=o,s&&YE(n,o)}function WE(){Qg++}function Wu(n){if(!(Io(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Qg)){if(!n.producerMustRecompute(n)&&!pl(n)){$u(n);return}n.producerRecomputeValue(n),$u(n)}}function Jg(n){if(n.consumers===void 0)return;let t=Vu;Vu=!0;try{for(let e=n.consumers;e!==void 0;e=e.nextConsumer){let r=e.consumer;r.dirty||DO(r)}}finally{Vu=t}}function em(){return Yt?.consumerAllowSignalWrites!==!1}function DO(n){n.dirty=!0,Jg(n),n.consumerMarkedDirty?.(n)}function $u(n){n.dirty=!1,n.lastCleanEpoch=Qg}function xs(n){return n&&(n.producersTail=void 0,n.recomputing=!0),ye(n)}function Ao(n,t){if(ye(t),!n)return;n.recomputing=!1;let e=n.producersTail,r=e!==void 0?e.nextProducer:n.producers;if(r!==void 0){if(Io(n))do r=tm(r);while(r!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function pl(n){for(let t=n.producers;t!==void 0;t=t.nextProducer){let e=t.producer,r=t.lastReadVersion;if(r!==e.version||(Wu(e),r!==e.version))return!0}return!1}function gl(n){if(Io(n)){let t=n.producers;for(;t!==void 0;)t=tm(t)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function YE(n,t){let e=n.consumersTail,r=Io(n);if(e!==void 0?(t.nextConsumer=e.nextConsumer,e.nextConsumer=t):(t.nextConsumer=void 0,n.consumers=t),t.prevConsumer=e,n.consumersTail=t,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)YE(i.producer,i)}function tm(n){let t=n.producer,e=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Io(t)){let s=t.producers;for(;s!==void 0;)s=tm(s)}return e}function Io(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Yu(n){wO?.(n)}function SO(n,t){let e=t.producersTail;if(e!==void 0){let r=t.producers;do{if(r===n)return!0;if(r===e)break;r=r.nextProducer}while(r!==void 0)}return!1}function Xu(n,t){let e=Object.create(TO);e.computation=n,t!==void 0&&(e.equal=t);let r=()=>{if(Wu(e),To(e),e.value===fl)throw e.error;return e.value};return r[Xt]=e,Yu(e),r}var Hu=Symbol("UNSET"),Uu=Symbol("COMPUTING"),fl=Symbol("ERRORED"),TO=ce(H({},Es),{value:Hu,dirty:!0,error:null,equal:zu,kind:"computed",producerMustRecompute(n){return n.value===Hu||n.value===Uu},producerRecomputeValue(n){if(n.value===Uu)throw new Error("");let t=n.value;n.value=Uu;let e=xs(n),r,i=!1;try{r=n.computation(),ye(null),i=t!==Hu&&t!==fl&&r!==fl&&n.equal(t,r)}catch(s){r=fl,n.error=s}finally{Ao(n,e)}if(i){n.value=t;return}n.value=r,n.version++}});function AO(){throw new Error}var XE=AO;function KE(n){XE(n)}function nm(n){XE=n}var IO=null;function rm(n,t){let e=Object.create(Ku);e.value=n,t!==void 0&&(e.equal=t);let r=()=>ZE(e);return r[Xt]=e,Yu(e),[r,o=>Mo(e,o),o=>im(e,o)]}function ZE(n){return To(n),n.value}function Mo(n,t){em()||KE(n),n.equal(n.value,t)||(n.value=t,MO(n))}function im(n,t){em()||KE(n),Mo(n,t(n.value))}var Ku=ce(H({},Es),{equal:zu,value:void 0,kind:"signal"});function MO(n){n.version++,WE(),Jg(n),IO?.(n)}function Ce(n){return typeof n=="function"}function Ro(n){let e=n(r=>{Error.call(r),r.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var Zu=Ro(n=>function(e){n(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function ml(n,t){if(n){let e=n.indexOf(t);0<=e&&n.splice(e,1)}}var bt=class n{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let s of e)s.remove(this);else e.remove(this);let{initialTeardown:r}=this;if(Ce(r))try{r()}catch(s){t=s instanceof Zu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{qE(s)}catch(o){t=t??[],o instanceof Zu?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Zu(t)}}add(t){var e;if(t&&t!==this)if(this.closed)qE(t);else{if(t instanceof n){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&ml(e,t)}remove(t){let{_finalizers:e}=this;e&&ml(e,t),t instanceof n&&t._removeParent(this)}};bt.EMPTY=(()=>{let n=new bt;return n.closed=!0,n})();var sm=bt.EMPTY;function qu(n){return n instanceof bt||n&&"closed"in n&&Ce(n.remove)&&Ce(n.add)&&Ce(n.unsubscribe)}function qE(n){Ce(n)?n():n.unsubscribe()}var nr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Oo={setTimeout(n,t,...e){let{delegate:r}=Oo;return r?.setTimeout?r.setTimeout(n,t,...e):setTimeout(n,t,...e)},clearTimeout(n){let{delegate:t}=Oo;return(t?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Qu(n){Oo.setTimeout(()=>{let{onUnhandledError:t}=nr;if(t)t(n);else throw n})}function vl(){}var QE=om("C",void 0,void 0);function JE(n){return om("E",void 0,n)}function ex(n){return om("N",n,void 0)}function om(n,t,e){return{kind:n,value:t,error:e}}var ws=null;function No(n){if(nr.useDeprecatedSynchronousErrorHandling){let t=!ws;if(t&&(ws={errorThrown:!1,error:null}),n(),t){let{errorThrown:e,error:r}=ws;if(ws=null,e)throw r}}else n()}function tx(n){nr.useDeprecatedSynchronousErrorHandling&&ws&&(ws.errorThrown=!0,ws.error=n)}var Ds=class extends bt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,qu(t)&&t.add(this)):this.destination=NO}static create(t,e,r){return new Po(t,e,r)}next(t){this.isStopped?lm(ex(t),this):this._next(t)}error(t){this.isStopped?lm(JE(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?lm(QE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},RO=Function.prototype.bind;function am(n,t){return RO.call(n,t)}var cm=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(r){Ju(r)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(r){Ju(r)}else Ju(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Ju(e)}}},Po=class extends Ds{constructor(t,e,r){super();let i;if(Ce(t)||!t)i={next:t??void 0,error:e??void 0,complete:r??void 0};else{let s;this&&nr.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&am(t.next,s),error:t.error&&am(t.error,s),complete:t.complete&&am(t.complete,s)}):i=t}this.destination=new cm(i)}};function Ju(n){nr.useDeprecatedSynchronousErrorHandling?tx(n):Qu(n)}function OO(n){throw n}function lm(n,t){let{onStoppedNotification:e}=nr;e&&Oo.setTimeout(()=>e(n,t))}var NO={closed:!0,next:vl,error:OO,complete:vl};var ko=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(n){return n}function um(...n){return dm(n)}function dm(n){return n.length===0?en:n.length===1?n[0]:function(e){return n.reduce((r,i)=>i(r),e)}}var Pe=(()=>{class n{constructor(e){e&&(this._subscribe=e)}lift(e){let r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,i){let s=kO(e)?e:new Po(e,r,i);return No(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(r){e.error(r)}}forEach(e,r){return r=nx(r),new r((i,s)=>{let o=new Po({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)}[ko](){return this}pipe(...e){return dm(e)(this)}toPromise(e){return e=nx(e),new e((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=t=>new n(t),n})();function nx(n){var t;return(t=n??nr.Promise)!==null&&t!==void 0?t:Promise}function PO(n){return n&&Ce(n.next)&&Ce(n.error)&&Ce(n.complete)}function kO(n){return n&&n instanceof Ds||PO(n)&&qu(n)}function hm(n){return Ce(n?.lift)}function Oe(n){return t=>{if(hm(t))return t.lift(function(e){try{return n(e,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,t,e,r,i){return new fm(n,t,e,r,i)}var fm=class extends Ds{constructor(t,e,r,i,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function Lo(){return Oe((n,t)=>{let e=null;n._refCount++;let r=Se(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){e=null;return}let i=n._connection,s=e;e=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});n.subscribe(r),r.closed||(e=n.connect())})}var Fo=class extends Pe{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,hm(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new bt;let e=this.getSubject();t.add(this.source.subscribe(Se(e,void 0,()=>{this._teardown(),e.complete()},r=>{this._teardown(),e.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=bt.EMPTY)}return t}refCount(){return Lo()(this)}};var rx=Ro(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Mt=(()=>{class n extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let r=new ed(this,this);return r.operator=e,r}_throwIfClosed(){if(this.closed)throw new rx}next(e){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(e)}})}error(e){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:r}=this;for(;r.length;)r.shift().error(e)}})}complete(){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:r,isStopped:i,observers:s}=this;return r||i?sm:(this.currentObservers=null,s.push(e),new bt(()=>{this.currentObservers=null,ml(s,e)}))}_checkFinalizedStatuses(e){let{hasError:r,thrownError:i,isStopped:s}=this;r?e.error(i):s&&e.complete()}asObservable(){let e=new Pe;return e.source=this,e}}return n.create=(t,e)=>new ed(t,e),n})(),ed=class extends Mt{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.next)===null||r===void 0||r.call(e,t)}error(t){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.error)===null||r===void 0||r.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,r;return(r=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&r!==void 0?r:sm}};var ft=class extends Mt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:r}=this;if(t)throw e;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var un=new Pe(n=>n.complete());function ix(n){return n&&Ce(n.schedule)}function sx(n){return n[n.length-1]}function td(n){return Ce(sx(n))?n.pop():void 0}function Fi(n){return ix(sx(n))?n.pop():void 0}function ax(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(n,t||[])).next())})}function ox(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ss(n){return this instanceof Ss?(this.v=n,this):new Ss(n)}function lx(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(m,v){s.push([f,g,m,v])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(r[f](p))}catch(g){h(s[0][3],g)}}function c(f){f.value instanceof Ss?Promise.resolve(f.value.v).then(u,d):h(s[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function cx(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof ox=="function"?ox(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(o){return new Promise(function(a,l){o=n[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var nd=n=>n&&typeof n.length=="number"&&typeof n!="function";function rd(n){return Ce(n?.then)}function id(n){return Ce(n[ko])}function sd(n){return Symbol.asyncIterator&&Ce(n?.[Symbol.asyncIterator])}function od(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ad=LO();function ld(n){return Ce(n?.[ad])}function cd(n){return lx(this,arguments,function*(){let e=n.getReader();try{for(;;){let{value:r,done:i}=yield Ss(e.read());if(i)return yield Ss(void 0);yield yield Ss(r)}}finally{e.releaseLock()}})}function ud(n){return Ce(n?.getReader)}function _t(n){if(n instanceof Pe)return n;if(n!=null){if(id(n))return FO(n);if(nd(n))return BO(n);if(rd(n))return jO(n);if(sd(n))return ux(n);if(ld(n))return VO(n);if(ud(n))return HO(n)}throw od(n)}function FO(n){return new Pe(t=>{let e=n[ko]();if(Ce(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BO(n){return new Pe(t=>{for(let e=0;e<n.length&&!t.closed;e++)t.next(n[e]);t.complete()})}function jO(n){return new Pe(t=>{n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Qu)})}function VO(n){return new Pe(t=>{for(let e of n)if(t.next(e),t.closed)return;t.complete()})}function ux(n){return new Pe(t=>{UO(n,t).catch(e=>t.error(e))})}function HO(n){return ux(cd(n))}function UO(n,t){var e,r,i,s;return ax(this,void 0,void 0,function*(){try{for(e=cx(n);r=yield e.next(),!r.done;){let o=r.value;if(t.next(o),t.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}t.complete()})}function dn(n,t,e,r=0,i=!1){let s=t.schedule(function(){e(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function dd(n,t=0){return Oe((e,r)=>{e.subscribe(Se(r,i=>dn(r,n,()=>r.next(i),t),()=>dn(r,n,()=>r.complete(),t),i=>dn(r,n,()=>r.error(i),t)))})}function hd(n,t=0){return Oe((e,r)=>{r.add(n.schedule(()=>e.subscribe(r),t))})}function dx(n,t){return _t(n).pipe(hd(t),dd(t))}function hx(n,t){return _t(n).pipe(hd(t),dd(t))}function fx(n,t){return new Pe(e=>{let r=0;return t.schedule(function(){r===n.length?e.complete():(e.next(n[r++]),e.closed||this.schedule())})})}function px(n,t){return new Pe(e=>{let r;return dn(e,t,()=>{r=n[ad](),dn(e,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){e.error(o);return}s?e.complete():e.next(i)},0,!0)}),()=>Ce(r?.return)&&r.return()})}function fd(n,t){if(!n)throw new Error("Iterable cannot be null");return new Pe(e=>{dn(e,t,()=>{let r=n[Symbol.asyncIterator]();dn(e,t,()=>{r.next().then(i=>{i.done?e.complete():e.next(i.value)})},0,!0)})})}function gx(n,t){return fd(cd(n),t)}function mx(n,t){if(n!=null){if(id(n))return dx(n,t);if(nd(n))return fx(n,t);if(rd(n))return hx(n,t);if(sd(n))return fd(n,t);if(ld(n))return px(n,t);if(ud(n))return gx(n,t)}throw od(n)}function it(n,t){return t?mx(n,t):_t(n)}function fe(...n){let t=Fi(n);return it(n,t)}function Bo(n,t){let e=Ce(n)?n:()=>n,r=i=>i.error(e());return new Pe(t?i=>t.schedule(r,0,i):r)}function pm(n){return!!n&&(n instanceof Pe||Ce(n.lift)&&Ce(n.subscribe))}var ei=Ro(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Ne(n,t){return Oe((e,r)=>{let i=0;e.subscribe(Se(r,s=>{r.next(n.call(t,s,i++))}))})}var{isArray:$O}=Array;function zO(n,t){return $O(t)?n(...t):n(t)}function pd(n){return Ne(t=>zO(n,t))}var{isArray:GO}=Array,{getPrototypeOf:WO,prototype:YO,keys:XO}=Object;function gd(n){if(n.length===1){let t=n[0];if(GO(t))return{args:t,keys:null};if(KO(t)){let e=XO(t);return{args:e.map(r=>t[r]),keys:e}}}return{args:n,keys:null}}function KO(n){return n&&typeof n=="object"&&WO(n)===YO}function md(n,t){return n.reduce((e,r,i)=>(e[r]=t[i],e),{})}function yl(...n){let t=Fi(n),e=td(n),{args:r,keys:i}=gd(n);if(r.length===0)return it([],t);let s=new Pe(ZO(r,t,i?o=>md(i,o):en));return e?s.pipe(pd(e)):s}function ZO(n,t,e=en){return r=>{vx(t,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)vx(t,()=>{let c=it(n[l],t),u=!1;c.subscribe(Se(r,d=>{s[l]=d,u||(u=!0,a--),a||r.next(e(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function vx(n,t,e){n?dn(e,n,t):t()}function yx(n,t,e,r,i,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&t.complete()},f=g=>c<r?p(g):l.push(g),p=g=>{s&&t.next(g),c++;let m=!1;_t(e(g,u++)).subscribe(Se(t,v=>{i?.(v),s?f(v):t.next(v)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<r;){let v=l.shift();o?dn(t,o,()=>p(v)):p(v)}h()}catch(v){t.error(v)}}))};return n.subscribe(Se(t,f,()=>{d=!0,h()})),()=>{a?.()}}function pt(n,t,e=1/0){return Ce(t)?pt((r,i)=>Ne((s,o)=>t(r,s,i,o))(_t(n(r,i))),e):(typeof t=="number"&&(e=t),Oe((r,i)=>yx(r,i,n,e)))}function jo(n=1/0){return pt(en,n)}function bx(){return jo(1)}function Vo(...n){return bx()(it(n,Fi(n)))}function bl(n){return new Pe(t=>{_t(n()).subscribe(t)})}function gm(...n){let t=td(n),{args:e,keys:r}=gd(n),i=new Pe(s=>{let{length:o}=e;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;_t(e[u]).subscribe(Se(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(r?md(r,a):a),s.complete())}))}});return t?i.pipe(pd(t)):i}function hn(n,t){return Oe((e,r)=>{let i=0;e.subscribe(Se(r,s=>n.call(t,s,i++)&&r.next(s)))})}function ti(n){return Oe((t,e)=>{let r=null,i=!1,s;r=t.subscribe(Se(e,void 0,void 0,o=>{s=_t(n(o,ti(n)(t))),r?(r.unsubscribe(),r=null,s.subscribe(e)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(e))})}function _x(n,t,e,r,i){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Se(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function Bi(n,t){return Ce(t)?pt(n,t,1):pt(n,1)}function ji(n){return Oe((t,e)=>{let r=!1;t.subscribe(Se(e,i=>{r=!0,e.next(i)},()=>{r||e.next(n),e.complete()}))})}function ni(n){return n<=0?()=>un:Oe((t,e)=>{let r=0;t.subscribe(Se(e,i=>{++r<=n&&(e.next(i),n<=r&&e.complete())}))})}function mm(n,t=en){return n=n??qO,Oe((e,r)=>{let i,s=!0;e.subscribe(Se(r,o=>{let a=t(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function qO(n,t){return n===t}function vd(n=QO){return Oe((t,e)=>{let r=!1;t.subscribe(Se(e,i=>{r=!0,e.next(i)},()=>r?e.complete():e.error(n())))})}function QO(){return new ei}function _l(n){return Oe((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}function ri(n,t){let e=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):en,ni(1),e?ji(t):vd(()=>new ei))}function Ho(n){return n<=0?()=>un:Oe((t,e)=>{let r=[];t.subscribe(Se(e,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)e.next(i);e.complete()},void 0,()=>{r=null}))})}function vm(n,t){let e=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):en,Ho(1),e?ji(t):vd(()=>new ei))}function ym(n,t){return Oe(_x(n,t,arguments.length>=2,!0))}function bm(...n){let t=Fi(n);return Oe((e,r)=>{(t?Vo(n,e,t):Vo(n,e)).subscribe(r)})}function tn(n,t){return Oe((e,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();e.subscribe(Se(r,l=>{i?.unsubscribe();let c=0,u=s++;_t(n(l,u)).subscribe(i=Se(r,d=>r.next(t?t(l,d,u,c++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function yd(n){return Oe((t,e)=>{_t(n).subscribe(Se(e,()=>e.complete(),vl)),!e.closed&&t.subscribe(e)})}function kt(n,t,e){let r=Ce(n)||t||e?{next:n,error:t,complete:e}:n;return r?Oe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Se(s,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),s.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):en}function Cx(n){let t=ye(null);try{return n()}finally{ye(t)}}var xd="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",oe=class extends Error{code;constructor(t,e){super(Ui(t,e)),this.code=t}};function JO(n){return`NG0${Math.abs(n)}`}function Ui(n,t){return`${JO(n)}${t?": "+t:""}`}var $o=globalThis;function Ge(n){for(let t in n)if(n[t]===Ge)return t;throw Error("")}function wx(n,t){for(let e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function si(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(si).join(", ")}]`;if(n==null)return""+n;let t=n.overriddenName||n.name;if(t)return`${t}`;let e=n.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r>=0?e.slice(0,r):e}function Om(n,t){return n?t?`${n} ${t}`:n:t||""}var eN=Ge({__forward_ref__:Ge});function Fn(n){return n.__forward_ref__=Fn,n.toString=function(){return si(this())},n}function Ft(n){return Nm(n)?n():n}function Nm(n){return typeof n=="function"&&n.hasOwnProperty(eN)&&n.__forward_ref__===Fn}function Dx(n,t){n==null&&Pm(t,n,null,"!=")}function Pm(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(r==null?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ir(n){return{providers:n.providers||[],imports:n.imports||[]}}function Dl(n){return tN(n,wd)}function km(n){return Dl(n)!==null}function tN(n,t){return n.hasOwnProperty(t)&&n[t]||null}function nN(n){let t=n?.[wd]??null;return t||null}function Cm(n){return n&&n.hasOwnProperty(_d)?n[_d]:null}var wd=Ge({\u0275prov:Ge}),_d=Ge({\u0275inj:Ge}),se=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,e){this._desc=t,this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=re({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Lm(n){return n&&!!n.\u0275providers}var Fm=Ge({\u0275cmp:Ge}),Bm=Ge({\u0275dir:Ge}),jm=Ge({\u0275pipe:Ge}),Vm=Ge({\u0275mod:Ge}),xl=Ge({\u0275fac:Ge}),Os=Ge({__NG_ELEMENT_ID__:Ge}),Ex=Ge({__NG_ENV_ID__:Ge});function Dd(n){return typeof n=="string"?n:n==null?"":String(n)}function Cd(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Dd(n)}var Hm=Ge({ngErrorCode:Ge}),Sx=Ge({ngErrorMessage:Ge}),El=Ge({ngTokenPath:Ge});function Um(n,t){return Tx("",-200,t)}function Sd(n,t){throw new oe(-201,!1)}function rN(n,t){n[El]??=[];let e=n[El],r;typeof t=="object"&&"multi"in t&&t?.multi===!0?(Dx(t.provide,"Token with multi: true should have a provide property"),r=Cd(t.provide)):r=Cd(t),e[0]!==r&&n[El].unshift(r)}function iN(n,t){let e=n[El],r=n[Hm],i=n[Sx]||n.message;return n.message=oN(i,r,e,t),n}function Tx(n,t,e){let r=new oe(t,n);return r[Hm]=t,r[Sx]=n,e&&(r[El]=e),r}function sN(n){return n[Hm]}function oN(n,t,e=[],r=null){let i="";e&&e.length>1&&(i=` Path: ${e.join(" -> ")}.`);let s=r?` Source: ${r}.`:"";return Ui(t,`${n}${s}${i}`)}var Em;function Ax(){return Em}function En(n){let t=Em;return Em=n,t}function $m(n,t,e){let r=Dl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(e&8)return null;if(t!==void 0)return t;Sd(n,"Injector")}var aN={},Ts=aN,xm="__NG_DI_FLAG__",wm=class{injector;constructor(t){this.injector=t}retrieve(t,e){let r=As(e)||0;try{return this.injector.get(t,r&8?null:Ts,r)}catch(i){if(So(i))return i;throw i}}};function lN(n,t=0){let e=ju();if(e===void 0)throw new oe(-203,!1);if(e===null)return $m(n,void 0,t);{let r=cN(t),i=e.retrieve(n,r);if(So(i)){if(r.optional)return null;throw i}return i}}function he(n,t=0){return(Ax()||lN)(Ft(n),t)}function z(n,t){return he(n,As(t))}function As(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cN(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Dm(n){let t=[];for(let e=0;e<n.length;e++){let r=Ft(n[e]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],l=uN(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}t.push(he(i,s))}else t.push(he(r))}return t}function zm(n,t){return n[xm]=t,n.prototype[xm]=t,n}function uN(n){return n[xm]}function Is(n,t){let e=n.hasOwnProperty(xl);return e?n[xl]:null}function Td(n,t){n.forEach(e=>Array.isArray(e)?Td(e,t):t(e))}function Gm(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Sl(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function Ix(n,t,e,r){let i=n.length;if(i==t)n.push(e,r);else if(i===1)n.push(r,n[0]),n[0]=e;else{for(i--,n.push(n[i-1],n[i]);i>t;){let s=i-2;n[i]=n[s],i--}n[t]=e,n[t+1]=r}}function Mx(n,t,e){let r=zo(n,t);return r>=0?n[r|1]=e:(r=~r,Ix(n,r,t,e)),r}function Ad(n,t){let e=zo(n,t);if(e>=0)return n[e|1]}function zo(n,t){return dN(n,t,1)}function dN(n,t,e){let r=0,i=n.length>>e;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<e];if(t===o)return s<<e;o>t?i=s:r=s+1}return~(i<<e)}var $i={},xn=[],oi=new se(""),Wm=new se("",-1),Ym=new se(""),wl=class{get(t,e=Ts){if(e===Ts){let i=Tx("",-201);throw i.name="\u0275NotFound",i}return e}};function Xm(n){return n[Vm]||null}function ai(n){return n[Fm]||null}function Km(n){return n[Bm]||null}function Rx(n){return n[jm]||null}function Ns(n){return{\u0275providers:n}}function Ox(...n){return{\u0275providers:Zm(!0,n),\u0275fromNgModule:!0}}function Zm(n,...t){let e=[],r=new Set,i,s=o=>{e.push(o)};return Td(t,o=>{let a=o;Ed(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Nx(i,s),e}function Nx(n,t){for(let e=0;e<n.length;e++){let{ngModule:r,providers:i}=n[e];qm(i,s=>{t(s,r)})}}function Ed(n,t,e,r){if(n=Ft(n),!n)return!1;let i=null,s=Cm(n),o=!s&&ai(n);if(!s&&!o){let l=n.ngModule;if(s=Cm(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)Ed(c,t,e,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let c;try{Td(s.imports,u=>{Ed(u,t,e,r)&&(c||=[],c.push(u))})}finally{}c!==void 0&&Nx(c,t)}if(!a){let c=Is(i)||(()=>new i);t({provide:i,useFactory:c,deps:xn},i),t({provide:Ym,useValue:i,multi:!0},i),t({provide:oi,useValue:()=>he(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let c=n;qm(l,u=>{t(u,c)})}}else return!1;return i!==n&&n.providers!==void 0}function qm(n,t){for(let e of n)Lm(e)&&(e=e.\u0275providers),Array.isArray(e)?qm(e,t):t(e)}var hN=Ge({provide:String,useValue:Ge});function Px(n){return n!==null&&typeof n=="object"&&hN in n}function fN(n){return!!(n&&n.useExisting)}function pN(n){return!!(n&&n.useFactory)}function Ms(n){return typeof n=="function"}function kx(n){return!!n.useClass}var Tl=new se(""),bd={},xx={},_m;function Al(){return _m===void 0&&(_m=new wl),_m}var Rt=class{},Rs=class extends Rt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,e,r,i){super(),this.parent=e,this.source=r,this.scopes=i,Tm(t,o=>this.processProvider(o)),this.records.set(Wm,Uo(void 0,this)),i.has("environment")&&this.records.set(Rt,Uo(void 0,this));let s=this.records.get(Tl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ym,xn,{self:!0}))}retrieve(t,e){let r=As(e)||0;try{return this.get(t,Ts,r)}catch(i){if(So(i))return i;throw i}}destroy(){Cl(this),this._destroyed=!0;let t=ye(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of e)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(t)}}onDestroy(t){return Cl(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Cl(this);let e=xr(this),r=En(void 0),i;try{return t()}finally{xr(e),En(r)}}get(t,e=Ts,r){if(Cl(this),t.hasOwnProperty(Ex))return t[Ex](this);let i=As(r),s,o=xr(this),a=En(void 0);try{if(!(i&4)){let c=this.records.get(t);if(c===void 0){let u=bN(t)&&Dl(t);u&&this.injectableDefInScope(u)?c=Uo(Sm(t),bd):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,i)}let l=i&2?Al():this.parent;return e=i&8&&e===Ts?null:e,l.get(t,e)}catch(l){let c=sN(l);throw c===-200||c===-201?new oe(c,null):l}finally{En(a),xr(o)}}resolveInjectorInitializers(){let t=ye(null),e=xr(this),r=En(void 0),i;try{let s=this.get(oi,xn,{self:!0});for(let o of s)o()}finally{xr(e),En(r),ye(t)}}toString(){let t=[],e=this.records;for(let r of e.keys())t.push(si(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ft(t);let e=Ms(t)?t:Ft(t&&t.provide),r=mN(t);if(!Ms(t)&&t.multi===!0){let i=this.records.get(e);i||(i=Uo(void 0,bd,!0),i.factory=()=>Dm(i.multi),this.records.set(e,i)),e=t,i.multi.push(t)}this.records.set(e,r)}hydrate(t,e,r){let i=ye(null);try{if(e.value===xx)throw Um(si(t));return e.value===bd&&(e.value=xx,e.value=e.factory(void 0,r)),typeof e.value=="object"&&e.value&&yN(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{ye(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=Ft(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function Sm(n){let t=Dl(n),e=t!==null?t.factory:Is(n);if(e!==null)return e;if(n instanceof se)throw new oe(204,!1);if(n instanceof Function)return gN(n);throw new oe(204,!1)}function gN(n){if(n.length>0)throw new oe(204,!1);let e=nN(n);return e!==null?()=>e.factory(n):()=>new n}function mN(n){if(Px(n))return Uo(void 0,n.useValue);{let t=Qm(n);return Uo(t,bd)}}function Qm(n,t,e){let r;if(Ms(n)){let i=Ft(n);return Is(i)||Sm(i)}else if(Px(n))r=()=>Ft(n.useValue);else if(pN(n))r=()=>n.useFactory(...Dm(n.deps||[]));else if(fN(n))r=(i,s)=>he(Ft(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=Ft(n&&(n.useClass||n.provide));if(vN(n))r=()=>new i(...Dm(n.deps));else return Is(i)||Sm(i)}return r}function Cl(n){if(n.destroyed)throw new oe(205,!1)}function Uo(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function vN(n){return!!n.deps}function yN(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function bN(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Tm(n,t){for(let e of n)Array.isArray(e)?Tm(e,t):e&&Lm(e)?Tm(e.\u0275providers,t):t(e)}function Kt(n,t){let e;n instanceof Rs?(Cl(n),e=n):e=new wm(n);let r,i=xr(e),s=En(void 0);try{return t()}finally{xr(i),En(s)}}function Lx(){return Ax()!==void 0||ju()!=null}var sr=0,pe=1,_e=2,Lt=3,Bn=4,jn=5,Go=6,Wo=7,gt=8,Ps=9,li=10,st=11,Yo=12,Jm=13,ks=14,wn=15,Ls=16,Fs=17,Bs=18,Il=19,ev=20,ii=21,Id=22,Ml=23,Dn=24,js=25,Ct=26,Fx=1,tv=6,zi=7,Rl=8,Ol=9,Bt=10;function wr(n){return Array.isArray(n)&&typeof n[Fx]=="object"}function or(n){return Array.isArray(n)&&n[Fx]===!0}function nv(n){return(n.flags&4)!==0}function Gi(n){return n.componentOffset>-1}function Xo(n){return(n.flags&1)===1}function Dr(n){return!!n.template}function Ko(n){return(n[_e]&512)!==0}function Vs(n){return(n[_e]&256)===256}var Bx="svg",jx="math";function Vn(n){for(;Array.isArray(n);)n=n[sr];return n}function rv(n,t){return Vn(t[n])}function ar(n,t){return Vn(t[n.index])}function Nl(n,t){return n.data[t]}function Vx(n,t){return n[t]}function Hn(n,t){let e=t[n];return wr(e)?e:e[sr]}function Md(n){return(n[_e]&128)===128}function Hx(n){return or(n[Lt])}function Un(n,t){return t==null?null:n[t]}function iv(n){n[Fs]=0}function sv(n){n[_e]&1024||(n[_e]|=1024,Md(n)&&Zo(n))}function Ux(n,t){for(;n>0;)t=t[ks],n--;return t}function Pl(n){return!!(n[_e]&9216||n[Dn]?.dirty)}function Rd(n){n[li].changeDetectionScheduler?.notify(8),n[_e]&64&&(n[_e]|=1024),Pl(n)&&Zo(n)}function Zo(n){n[li].changeDetectionScheduler?.notify(0);let t=Vi(n);for(;t!==null&&!(t[_e]&8192||(t[_e]|=8192,!Md(t)));)t=Vi(t)}function ov(n,t){if(Vs(n))throw new oe(911,!1);n[ii]===null&&(n[ii]=[]),n[ii].push(t)}function $x(n,t){if(n[ii]===null)return;let e=n[ii].indexOf(t);e!==-1&&n[ii].splice(e,1)}function Vi(n){let t=n[Lt];return or(t)?t[Lt]:t}function zx(n){return n[Wo]??=[]}function Gx(n){return n.cleanup??=[]}var Te={lFrame:sw(null),bindingsEnabled:!0,skipHydrationRootTNode:null},kl=(function(n){return n[n.Off=0]="Off",n[n.Exhaustive=1]="Exhaustive",n[n.OnlyDirtyViews=2]="OnlyDirtyViews",n})(kl||{}),_N=0,Am=!1;function Wx(){return Te.lFrame.elementDepthCount}function Yx(){Te.lFrame.elementDepthCount++}function av(){Te.lFrame.elementDepthCount--}function Od(){return Te.bindingsEnabled}function Xx(){return Te.skipHydrationRootTNode!==null}function lv(n){return Te.skipHydrationRootTNode===n}function cv(){Te.skipHydrationRootTNode=null}function Me(){return Te.lFrame.lView}function jt(){return Te.lFrame.tView}function ke(n){return Te.lFrame.contextLView=n,n[gt]}function Le(n){return Te.lFrame.contextLView=null,n}function Vt(){let n=uv();for(;n!==null&&n.type===64;)n=n.parent;return n}function uv(){return Te.lFrame.currentTNode}function Kx(){let n=Te.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}function qo(n,t){let e=Te.lFrame;e.currentTNode=n,e.isParent=t}function dv(){return Te.lFrame.isParent}function Zx(){Te.lFrame.isParent=!1}function qx(){return Te.lFrame.contextLView}function hv(n){Pm("Must never be called in production mode"),_N=n}function fv(){return Am}function pv(n){let t=Am;return Am=n,t}function Nd(){let n=Te.lFrame,t=n.bindingRootIndex;return t===-1&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Qx(n){return Te.lFrame.bindingIndex=n}function Hs(){return Te.lFrame.bindingIndex++}function Jx(n){let t=Te.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function ew(){return Te.lFrame.inI18n}function tw(n,t){let e=Te.lFrame;e.bindingIndex=e.bindingRootIndex=n,Pd(t)}function nw(){return Te.lFrame.currentDirectiveIndex}function Pd(n){Te.lFrame.currentDirectiveIndex=n}function rw(n){let t=Te.lFrame.currentDirectiveIndex;return t===-1?null:n[t]}function gv(n){Te.lFrame.currentQueryIndex=n}function CN(n){let t=n[pe];return t.type===2?t.declTNode:t.type===1?n[jn]:null}function mv(n,t,e){if(e&4){let i=t,s=n;for(;i=i.parent,i===null&&!(e&1);)if(i=CN(s),i===null||(s=s[ks],i.type&10))break;if(i===null)return!1;t=i,n=s}let r=Te.lFrame=iw();return r.currentTNode=t,r.lView=n,!0}function kd(n){let t=iw(),e=n[pe];Te.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function iw(){let n=Te.lFrame,t=n===null?null:n.child;return t===null?sw(n):t}function sw(n){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=t),t}function ow(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var vv=ow;function Ld(){let n=ow();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aw(n){return(Te.lFrame.contextLView=Ux(n,Te.lFrame.contextLView))[gt]}function Wi(){return Te.lFrame.selectedIndex}function Yi(n){Te.lFrame.selectedIndex=n}function Fd(){let n=Te.lFrame;return Nl(n.tView,n.selectedIndex)}function lw(){return Te.lFrame.currentNamespace}var cw=!0;function Bd(){return cw}function Ll(n){cw=n}var EN={elements:void 0};function jd(){return EN}function Im(n,t=null,e=null,r){let i=yv(n,t,e,r);return i.resolveInjectorInitializers(),i}function yv(n,t=null,e=null,r,i=new Set){let s=[e||xn,Ox(n)];return r=r||(typeof n=="object"?void 0:si(n)),new Rs(s,t||Al(),r||null,i)}var nn=class n{static THROW_IF_NOT_FOUND=Ts;static NULL=new wl;static create(t,e){if(Array.isArray(t))return Im({name:""},e,t,"");{let r=t.name??"";return Im({name:r},t.parent,t.providers,r)}}static \u0275prov=re({token:n,providedIn:"any",factory:()=>he(Wm)});static __NG_ELEMENT_ID__=-1},mt=new se(""),ci=(()=>{class n{static __NG_ELEMENT_ID__=xN;static __NG_ENV_ID__=e=>e}return n})(),Mm=class extends ci{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Vs(this._lView)}onDestroy(t){let e=this._lView;return ov(e,t),()=>$x(e,t)}};function xN(){return new Mm(Me())}var rr=class{_console=console;handleError(t){this._console.error("ERROR",t)}},$n=new se("",{providedIn:"root",factory:()=>{let n=z(Rt),t;return e=>{n.destroyed&&!t?setTimeout(()=>{throw e}):(t??=n.get(rr),t.handleError(e))}}}),uw={provide:oi,useValue:()=>void z(rr),multi:!0};function bv(n){return typeof n=="function"&&n[Xt]!==void 0}function ui(n,t){let[e,r,i]=rm(n,t?.equal),s=e,o=s[Xt];return s.set=r,s.update=i,s.asReadonly=dw.bind(s),s}function dw(){let n=this[Xt];if(n.readonlyFn===void 0){let t=()=>this();t[Xt]=n,n.readonlyFn=t}return n.readonlyFn}function _v(n){return bv(n)&&typeof n.set=="function"}var Hi=class{},Qo=new se("",{providedIn:"root",factory:()=>!1});var Cv=new se(""),Ev=new se("");var Vd=(()=>{class n{view;node;constructor(e,r){this.view=e,this.node=r}static __NG_ELEMENT_ID__=wN}return n})();function wN(){return new Vd(Me(),Vt())}var di=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ft(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Pe(e=>{e.next(!1),e.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}has(e){return this.pendingTasks.has(e)}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})();function Fl(...n){}var xv=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new Rm})}return n})(),Rm=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let e=t.zone,r=this.queues.get(e);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let e=t.zone;this.queues.has(e)||this.queues.set(e,new Set);let r=this.queues.get(e);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[e,r]of this.queues)e===null?t||=this.flushQueue(r):t||=e.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let e=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,e=!0,r.run());return e}};function ia(n){return{toString:n}.toString()}var Hd="__parameters__";function PN(n){return function(...e){if(n){let r=n(...e);for(let i in r)this[i]=r[i]}}}function Gw(n,t,e){return ia(()=>{let r=PN(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Hd)?l[Hd]:Object.defineProperty(l,Hd,{value:[]})[Hd];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var py=zm(Gw("Optional"),8);var Ww=zm(Gw("SkipSelf"),4);function kN(n){return typeof n=="function"}var Xd=class{previousValue;currentValue;firstChange;constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}};function Yw(n,t,e,r){t!==null?t.applyValueToInputSignal(t,r):n[e]=r}var zn=(()=>{let n=()=>Xw;return n.ngInherit=!0,n})();function Xw(n){return n.type.prototype.ngOnChanges&&(n.setInput=FN),LN}function LN(){let n=Zw(this),t=n?.current;if(t){let e=n.previous;if(e===$i)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function FN(n,t,e,r,i){let s=this.declaredInputs[r],o=Zw(n)||BN(n,{previous:$i,current:null}),a=o.current||(o.current={}),l=o.previous,c=l[s];a[s]=new Xd(c&&c.currentValue,e,l===$i),Yw(n,t,i,e)}var Kw="__ngSimpleChanges__";function Zw(n){return n[Kw]||null}function BN(n,t){return n[Kw]=t}var hw=[];var Ye=function(n,t=null,e){for(let r=0;r<hw.length;r++){let i=hw[r];i(n,t,e)}};function jN(n,t,e){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){let o=Xw(t);(e.preOrderHooks??=[]).push(n,o),(e.preOrderCheckHooks??=[]).push(n,o)}i&&(e.preOrderHooks??=[]).push(0-n,i),s&&((e.preOrderHooks??=[]).push(n,s),(e.preOrderCheckHooks??=[]).push(n,s))}function qw(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){let s=n.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-e,o),a&&((n.contentHooks??=[]).push(e,a),(n.contentCheckHooks??=[]).push(e,a)),l&&(n.viewHooks??=[]).push(-e,l),c&&((n.viewHooks??=[]).push(e,c),(n.viewCheckHooks??=[]).push(e,c)),u!=null&&(n.destroyHooks??=[]).push(e,u)}}function Gd(n,t,e){Qw(n,t,3,e)}function Wd(n,t,e,r){(n[_e]&3)===e&&Qw(n,t,e,r)}function wv(n,t){let e=n[_e];(e&3)===t&&(e&=16383,e+=1,n[_e]=e)}function Qw(n,t,e,r){let i=r!==void 0?n[Fs]&65535:0,s=r??-1,o=t.length-1,a=0;for(let l=i;l<o;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(n[Fs]+=65536),(a<s||s==-1)&&(VN(n,e,t,l),n[Fs]=(n[Fs]&4294901760)+l+2),l++}function fw(n,t){Ye(4,n,t);let e=ye(null);try{t.call(n)}finally{ye(e),Ye(5,n,t)}}function VN(n,t,e,r){let i=e[r]<0,s=e[r+1],o=i?-e[r]:e[r],a=n[o];i?n[_e]>>14<n[Fs]>>16&&(n[_e]&3)===t&&(n[_e]+=16384,fw(a,s)):fw(a,s)}var ea=-1,$s=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,e,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=e,this.injectImpl=r}};function HN(n){return(n.flags&8)!==0}function UN(n){return(n.flags&16)!==0}function $N(n,t,e){let r=0;for(;r<e.length;){let i=e[r];if(typeof i=="number"){if(i!==0)break;r++;let s=e[r++],o=e[r++],a=e[r++];n.setAttribute(t,o,a,s)}else{let s=i,o=e[++r];GN(s)?n.setProperty(t,s,o):n.setAttribute(t,s,o),r++}}return r}function zN(n){return n===3||n===4||n===6}function GN(n){return n.charCodeAt(0)===64}function ta(n,t){if(!(t===null||t.length===0))if(n===null||n.length===0)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?e=i:e===0||(e===-1||e===2?pw(n,e,i,null,t[++r]):pw(n,e,i,null,null))}}return n}function pw(n,t,e,r,i){let s=0,o=n.length;if(t===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===t){o=-1;break}else if(a>t){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===e){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,t),s=o+1),n.splice(s++,0,e),i!==null&&n.splice(s++,0,i)}function Jw(n){return n!==ea}function Kd(n){return n&32767}function WN(n){return n>>16}function Zd(n,t){let e=WN(n),r=t;for(;e>0;)r=r[ks],e--;return r}var kv=!0;function gw(n){let t=kv;return kv=n,t}var YN=256,eD=YN-1,tD=5,XN=0,Sr={};function KN(n,t,e){let r;typeof e=="string"?r=e.charCodeAt(0)||0:e.hasOwnProperty(Os)&&(r=e[Os]),r==null&&(r=e[Os]=XN++);let i=r&eD,s=1<<i;t.data[n+(i>>tD)]|=s}function qd(n,t){let e=nD(n,t);if(e!==-1)return e;let r=t[pe];r.firstCreatePass&&(n.injectorIndex=t.length,Dv(r.data,n),Dv(t,null),Dv(r.blueprint,null));let i=gy(n,t),s=n.injectorIndex;if(Jw(i)){let o=Kd(i),a=Zd(i,t),l=a[pe].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=i,s}function Dv(n,t){n.push(0,0,0,0,0,0,0,0,t)}function nD(n,t){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||t[n.injectorIndex+8]===null?-1:n.injectorIndex}function gy(n,t){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let e=0,r=null,i=t;for(;i!==null;){if(r=aD(i),r===null)return ea;if(e++,i=i[ks],r.injectorIndex!==-1)return r.injectorIndex|e<<16}return ea}function Lv(n,t,e){KN(n,t,e)}function rD(n,t,e){if(e&8||n!==void 0)return n;Sd(t,"NodeInjector")}function iD(n,t,e,r){if(e&8&&r===void 0&&(r=null),(e&3)===0){let i=n[Ps],s=En(void 0);try{return i?i.get(t,r,e&8):$m(t,r,e&8)}finally{En(s)}}return rD(r,t,e)}function sD(n,t,e,r=0,i){if(n!==null){if(t[_e]&2048&&!(r&2)){let o=eP(n,t,e,r,Sr);if(o!==Sr)return o}let s=oD(n,t,e,r,Sr);if(s!==Sr)return s}return iD(t,e,r,i)}function oD(n,t,e,r,i){let s=QN(e);if(typeof s=="function"){if(!mv(t,n,r))return r&1?rD(i,e,r):iD(t,e,r,i);try{let o;if(o=s(r),o==null&&!(r&8))Sd(e);else return o}finally{vv()}}else if(typeof s=="number"){let o=null,a=nD(n,t),l=ea,c=r&1?t[wn][jn]:null;for((a===-1||r&4)&&(l=a===-1?gy(n,t):t[a+8],l===ea||!vw(r,!1)?a=-1:(o=t[pe],a=Kd(l),t=Zd(l,t)));a!==-1;){let u=t[pe];if(mw(s,a,u.data)){let d=ZN(a,t,e,o,r,c);if(d!==Sr)return d}l=t[a+8],l!==ea&&vw(r,t[pe].data[a+8]===c)&&mw(s,a,t)?(o=u,a=Kd(l),t=Zd(l,t)):a=-1}}return i}function ZN(n,t,e,r,i,s){let o=t[pe],a=o.data[n+8],l=r==null?Gi(a)&&kv:r!=o&&(a.type&3)!==0,c=i&1&&s===a,u=qN(a,o,e,l,c);return u!==null?Qd(t,o,u,a,i):Sr}function qN(n,t,e,r,i){let s=n.providerIndexes,o=t.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=r?a:a+u,h=i?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&e===p||f>=l&&p.type===e)return f}if(i){let f=o[l];if(f&&Dr(f)&&f.type===e)return l}return null}function Qd(n,t,e,r,i){let s=n[e],o=t.data;if(s instanceof $s){let a=s;if(a.resolving){let f=Cd(o[e]);throw Um(f)}let l=gw(a.canSeeViewProviders);a.resolving=!0;let c=o[e].type||o[e],u,d=a.injectImpl?En(a.injectImpl):null,h=mv(n,r,0);try{s=n[e]=a.factory(void 0,i,o,n,r),t.firstCreatePass&&e>=r.directiveStart&&jN(e,o[e],t)}finally{d!==null&&En(d),gw(l),a.resolving=!1,vv()}}return s}function QN(n){if(typeof n=="string")return n.charCodeAt(0)||0;let t=n.hasOwnProperty(Os)?n[Os]:void 0;return typeof t=="number"?t>=0?t&eD:JN:t}function mw(n,t,e){let r=1<<n;return!!(e[t+(n>>tD)]&r)}function vw(n,t){return!(n&2)&&!(n&1&&t)}var Us=class{_tNode;_lView;constructor(t,e){this._tNode=t,this._lView=e}get(t,e,r){return sD(this._tNode,this._lView,t,As(r),e)}};function JN(){return new Us(Vt(),Me())}function ur(n){return ia(()=>{let t=n.prototype.constructor,e=t[xl]||Fv(t),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[xl]||Fv(i);if(s&&s!==e)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Fv(n){return Nm(n)?()=>{let t=Fv(Ft(n));return t&&t()}:Is(n)}function eP(n,t,e,r,i){let s=n,o=t;for(;s!==null&&o!==null&&o[_e]&2048&&!Ko(o);){let a=oD(s,o,e,r|2,Sr);if(a!==Sr)return a;let l=s.parent;if(!l){let c=o[ev];if(c){let u=c.get(e,Sr,r);if(u!==Sr)return u}l=aD(o),o=o[ks]}s=l}return i}function aD(n){let t=n[pe],e=t.type;return e===2?t.declTNode:e===1?n[jn]:null}function tP(){return fh(Vt(),Me())}function fh(n,t){return new Sn(ar(n,t))}var Sn=(()=>{class n{nativeElement;constructor(e){this.nativeElement=e}static __NG_ELEMENT_ID__=tP}return n})();function lD(n){return(n.flags&128)===128}var my=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(my||{}),cD=new Map,nP=0;function rP(){return nP++}function iP(n){cD.set(n[Il],n)}function Bv(n){cD.delete(n[Il])}var yw="__ngContext__";function na(n,t){wr(t)?(n[yw]=t[Il],iP(t)):n[yw]=t}function uD(n){return hD(n[Yo])}function dD(n){return hD(n[Bn])}function hD(n){for(;n!==null&&!or(n);)n=n[Bn];return n}var jv;function vy(n){jv=n}function fD(){if(jv!==void 0)return jv;if(typeof document<"u")return document;throw new oe(210,!1)}var ph=new se("",{providedIn:"root",factory:()=>sP}),sP="ng",gh=new se(""),sa=new se("",{providedIn:"platform",factory:()=>"unknown"});var mh=new se("",{providedIn:"root",factory:()=>fD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var oP="h",aP="b";var pD="r";var gD="di";var mD=!1,vD=new se("",{providedIn:"root",factory:()=>mD});var vh=new se("");var lP=(n,t,e,r)=>{};function cP(n,t,e,r){lP(n,t,e,r)}function yy(n){return(n.flags&32)===32}var uP=()=>null;function yD(n,t,e=!1){return uP(n,t,e)}function bD(n,t){let e=n.contentQueries;if(e!==null){let r=ye(null);try{for(let i=0;i<e.length;i+=2){let s=e[i],o=e[i+1];if(o!==-1){let a=n.data[o];gv(s),a.contentQueries(2,t[o],o)}}}finally{ye(r)}}}function Vv(n,t,e){gv(0);let r=ye(null);try{t(n,e)}finally{ye(r)}}function by(n,t,e){if(nv(t)){let r=ye(null);try{let i=t.directiveStart,s=t.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let l=e[o];a.contentQueries(1,l,o)}}}finally{ye(r)}}}var hi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(hi||{}),Ud;function dP(){if(Ud===void 0&&(Ud=null,$o.trustedTypes))try{Ud=$o.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ud}function yh(n){return dP()?.createHTML(n)||n}var fi=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xd})`}},Hv=class extends fi{getTypeName(){return"HTML"}},Uv=class extends fi{getTypeName(){return"Style"}},$v=class extends fi{getTypeName(){return"Script"}},zv=class extends fi{getTypeName(){return"URL"}},Gv=class extends fi{getTypeName(){return"ResourceURL"}};function pi(n){return n instanceof fi?n.changingThisBreaksApplicationSecurity:n}function Xs(n,t){let e=_D(n);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${xd})`)}return e===t}function _D(n){return n instanceof fi&&n.getTypeName()||null}function _y(n){return new Hv(n)}function Cy(n){return new Uv(n)}function Ey(n){return new $v(n)}function xy(n){return new zv(n)}function wy(n){return new Gv(n)}function hP(n){let t=new Yv(n);return fP()?new Wv(t):t}var Wv=class{inertDocumentHelper;constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString(yh(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.firstChild?.remove(),e)}catch{return null}}},Yv=class{defaultDoc;inertDocument;constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=yh(t),e}};function fP(){try{return!!new window.DOMParser().parseFromString(yh(""),"text/html")}catch{return!1}}var pP=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bh(n){return n=String(n),n.match(pP)?n:"unsafe:"+n}function gi(n){let t={};for(let e of n.split(","))t[e]=!0;return t}function Gl(...n){let t={};for(let e of n)for(let r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}var CD=gi("area,br,col,hr,img,wbr"),ED=gi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xD=gi("rp,rt"),gP=Gl(xD,ED),mP=Gl(ED,gi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),vP=Gl(xD,gi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bw=Gl(CD,mP,vP,gP),wD=gi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yP=gi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),bP=gi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),_P=Gl(wD,yP,bP),CP=gi("script,style,template"),Xv=class{sanitizedSomething=!1;buf=[];sanitizeChildren(t){let e=t.firstChild,r=!0,i=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild){i.push(e),e=wP(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let s=xP(e);if(s){e=s;break}e=i.pop()}}return this.buf.join("")}startElement(t){let e=_w(t).toLowerCase();if(!bw.hasOwnProperty(e))return this.sanitizedSomething=!0,!CP.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let r=t.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!_P.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;wD[a]&&(l=bh(l)),this.buf.push(" ",o,'="',Cw(l),'"')}return this.buf.push(">"),!0}endElement(t){let e=_w(t).toLowerCase();bw.hasOwnProperty(e)&&!CD.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Cw(t))}};function EP(n,t){return(n.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function xP(n){let t=n.nextSibling;if(t&&n!==t.previousSibling)throw DD(t);return t}function wP(n){let t=n.firstChild;if(t&&EP(n,t))throw DD(t);return t}function _w(n){let t=n.nodeName;return typeof t=="string"?t:"FORM"}function DD(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var DP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,SP=/([^\#-~ |!])/g;function Cw(n){return n.replace(/&/g,"&amp;").replace(DP,function(t){let e=t.charCodeAt(0),r=t.charCodeAt(1);return"&#"+((e-55296)*1024+(r-56320)+65536)+";"}).replace(SP,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var $d;function Dy(n,t){let e=null;try{$d=$d||hP(n);let r=t?String(t):"";e=$d.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=e.innerHTML,e=$d.getInertBodyElement(r)}while(r!==s);let a=new Xv().sanitizeChildren(Ew(e)||e);return yh(a)}finally{if(e){let r=Ew(e)||e;for(;r.firstChild;)r.firstChild.remove()}}}function Ew(n){return"content"in n&&TP(n)?n.content:null}function TP(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var mi=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(mi||{});var AP=/^>|^->|<!--|-->|--!>|<!-$/g,IP=/(<|>)/g,MP="\u200B$1\u200B";function RP(n){return n.replace(AP,t=>t.replace(IP,MP))}function SD(n){return n instanceof Function?n():n}function OP(n,t,e){let r=n.length;for(;;){let i=n.indexOf(t,e);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=t.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}e=i+1}}var TD="ng-template";function NP(n,t,e,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&OP(t[i+1].toLowerCase(),e,0)!==-1)return!0}else if(Sy(n))return!1;if(i=t.indexOf(1,i),i>-1){let s;for(;++i<t.length&&typeof(s=t[i])=="string";)if(s.toLowerCase()===e)return!0}return!1}function Sy(n){return n.type===4&&n.value!==TD}function PP(n,t,e){let r=n.type===4&&!e?TD:n.value;return t===r}function kP(n,t,e){let r=4,i=n.attrs,s=i!==null?BP(i):0,o=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!o&&!lr(r)&&!lr(l))return!1;if(o&&lr(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!PP(n,l,e)||l===""&&t.length===1){if(lr(r))return!1;o=!0}}else if(r&8){if(i===null||!NP(n,i,l,e)){if(lr(r))return!1;o=!0}}else{let c=t[++a],u=LP(l,i,Sy(n),e);if(u===-1){if(lr(r))return!1;o=!0;continue}if(c!==""){let d;if(u>s?d="":d=i[u+1].toLowerCase(),r&2&&c!==d){if(lr(r))return!1;o=!0}}}}return lr(r)||o}function lr(n){return(n&1)===0}function LP(n,t,e,r){if(t===null)return-1;let i=0;if(r||!e){let s=!1;for(;i<t.length;){let o=t[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return jP(t,n)}function FP(n,t,e=!1){for(let r=0;r<t.length;r++)if(kP(n,t[r],e))return!0;return!1}function BP(n){for(let t=0;t<n.length;t++){let e=n[t];if(zN(e))return t}return n.length}function jP(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){let r=n[e];if(typeof r=="number")return-1;if(r===t)return e;e++}return-1}function xw(n,t){return n?":not("+t.trim()+")":t}function VP(n){let t=n[0],e=1,r=2,i="",s=!1;for(;e<n.length;){let o=n[e];if(typeof o=="string")if(r&2){let a=n[++e];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!lr(o)&&(t+=xw(s,i),i=""),r=o,s=s||!lr(r);e++}return i!==""&&(t+=xw(s,i)),t}function HP(n){return n.map(VP).join(",")}function UP(n){let t=[],e=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&t.push(s,n[++r]):i===8&&e.push(s);else{if(!lr(i))break;i=s}r++}return e.length&&t.push(1,...e),t}var Ar={};function $P(n,t){return n.createText(t)}function zP(n,t,e){n.setValue(t,e)}function GP(n,t){return n.createComment(RP(t))}function AD(n,t,e){return n.createElement(t,e)}function Jd(n,t,e,r,i){n.insertBefore(t,e,r,i)}function ID(n,t,e){n.appendChild(t,e)}function ww(n,t,e,r,i){r!==null?Jd(n,t,e,r,i):ID(n,t,e)}function MD(n,t,e){n.removeChild(null,t,e)}function WP(n,t,e){n.setAttribute(t,"style",e)}function YP(n,t,e){e===""?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e)}function RD(n,t,e){let{mergedAttrs:r,classes:i,styles:s}=e;r!==null&&$N(n,t,r),i!==null&&YP(n,t,i),s!==null&&WP(n,t,s)}function Ty(n,t,e,r,i,s,o,a,l,c,u){let d=Ct+r,h=d+i,f=XP(d,h),p=typeof c=="function"?c():c;return f[pe]={type:n,blueprint:f,template:e,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function XP(n,t){let e=[];for(let r=0;r<t;r++)e.push(r<n?null:Ar);return e}function KP(n){let t=n.tView;return t===null||t.incompleteFirstPass?n.tView=Ty(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):t}function Ay(n,t,e,r,i,s,o,a,l,c,u){let d=t.blueprint.slice();return d[sr]=i,d[_e]=r|4|128|8|64|1024,(c!==null||n&&n[_e]&2048)&&(d[_e]|=2048),iv(d),d[Lt]=d[ks]=n,d[gt]=e,d[li]=o||n&&n[li],d[st]=a||n&&n[st],d[Ps]=l||n&&n[Ps]||null,d[jn]=s,d[Il]=rP(),d[Go]=u,d[ev]=c,d[wn]=t.type==2?n[wn]:d,d}function ZP(n,t,e){let r=ar(t,n),i=KP(e),s=n[li].rendererFactory,o=Iy(n,Ay(n,i,null,OD(e),r,t,null,s.createRenderer(r,e),null,null,null));return n[t.index]=o}function OD(n){let t=16;return n.signals?t=4096:n.onPush&&(t=64),t}function ND(n,t,e,r){if(e===0)return-1;let i=t.length;for(let s=0;s<e;s++)t.push(r),n.blueprint.push(r),n.data.push(null);return i}function Iy(n,t){return n[Yo]?n[Jm][Bn]=t:n[Yo]=t,n[Jm]=t,t}function Z(n=1){PD(jt(),Me(),Wi()+n,!1)}function PD(n,t,e,r){if(!r)if((t[_e]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Gd(t,s,e)}else{let s=n.preOrderHooks;s!==null&&Wd(t,s,0,e)}Yi(e)}var _h=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(_h||{});function Kv(n,t,e,r){let i=ye(null);try{let[s,o,a]=n.inputs[e],l=null;(o&_h.SignalBased)!==0&&(l=t[s][Xt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),n.setInput!==null?n.setInput(t,l,r,e,s):Yw(t,l,s,r)}finally{ye(i)}}var Tr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Tr||{}),qP;function My(n,t){return qP(n,t)}function Jo(n,t,e,r,i){if(r!=null){let s,o=!1;or(r)?s=r:wr(r)&&(o=!0,r=r[sr]);let a=Vn(r);n===0&&e!==null?i==null?ID(t,e,a):Jd(t,e,a,i||null,!0):n===1&&e!==null?Jd(t,e,a,i||null,!0):n===2?MD(t,a,o):n===3&&t.destroyNode(a),s!=null&&ck(t,n,s,e,i)}}function QP(n,t){kD(n,t),t[sr]=null,t[jn]=null}function JP(n,t,e,r,i,s){r[sr]=i,r[jn]=t,Eh(n,r,e,1,i,s)}function kD(n,t){t[li].changeDetectionScheduler?.notify(9),Eh(n,t,t[st],2,null,null)}function ek(n){let t=n[Yo];if(!t)return Sv(n[pe],n);for(;t;){let e=null;if(wr(t))e=t[Yo];else{let r=t[Bt];r&&(e=r)}if(!e){for(;t&&!t[Bn]&&t!==n;)wr(t)&&Sv(t[pe],t),t=t[Lt];t===null&&(t=n),wr(t)&&Sv(t[pe],t),e=t&&t[Bn]}t=e}}function Ry(n,t){let e=n[Ol],r=e.indexOf(t);e.splice(r,1)}function Ch(n,t){if(Vs(t))return;let e=t[st];e.destroyNode&&Eh(n,t,e,3,null,null),ek(t)}function Sv(n,t){if(Vs(t))return;let e=ye(null);try{t[_e]&=-129,t[_e]|=256,t[Dn]&&gl(t[Dn]),nk(n,t),tk(n,t),t[pe].type===1&&t[st].destroy();let r=t[Ls];if(r!==null&&or(t[Lt])){r!==t[Lt]&&Ry(r,t);let i=t[Bs];i!==null&&i.detachView(n)}Bv(t)}finally{ye(e)}}function tk(n,t){let e=n.cleanup,r=t[Wo];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let a=e[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[e[o+1]];e[o].call(a)}r!==null&&(t[Wo]=null);let i=t[ii];if(i!==null){t[ii]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=t[Ml];if(s!==null){t[Ml]=null;for(let o of s)o.destroy()}}function nk(n,t){let e;if(n!=null&&(e=n.destroyHooks)!=null)for(let r=0;r<e.length;r+=2){let i=t[e[r]];if(!(i instanceof $s)){let s=e[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Ye(4,a,l);try{l.call(a)}finally{Ye(5,a,l)}}else{Ye(4,i,s);try{s.call(i)}finally{Ye(5,i,s)}}}}}function rk(n,t,e){return ik(n,t.parent,e)}function ik(n,t,e){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return e[sr];if(Gi(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===hi.None||i===hi.Emulated)return null}return ar(r,e)}function sk(n,t,e){return ak(n,t,e)}function ok(n,t,e){return n.type&40?ar(n,e):null}var ak=ok,Dw;function Oy(n,t,e,r){let i=rk(n,r,t),s=t[st],o=r.parent||t[jn],a=sk(o,r,t);if(i!=null)if(Array.isArray(e))for(let l=0;l<e.length;l++)ww(s,i,e[l],a,!1);else ww(s,i,e,a,!1);Dw!==void 0&&Dw(s,r,t,e,i)}function Bl(n,t){if(t!==null){let e=t.type;if(e&3)return ar(t,n);if(e&4)return Zv(-1,n[t.index]);if(e&8){let r=t.child;if(r!==null)return Bl(n,r);{let i=n[t.index];return or(i)?Zv(-1,i):Vn(i)}}else{if(e&128)return Bl(n,t.next);if(e&32)return My(t,n)()||Vn(n[t.index]);{let r=LD(n,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Vi(n[wn]);return Bl(i,r)}else return Bl(n,t.next)}}}return null}function LD(n,t){if(t!==null){let r=n[wn][jn],i=t.projection;return r.projection[i]}return null}function Zv(n,t){let e=Bt+n+1;if(e<t.length){let r=t[e],i=r[pe].firstChild;if(i!==null)return Bl(r,i)}return t[zi]}function Ny(n,t,e,r,i,s,o){for(;e!=null;){if(e.type===128){e=e.next;continue}let a=r[e.index],l=e.type;if(o&&t===0&&(a&&na(Vn(a),r),e.flags|=2),!yy(e))if(l&8)Ny(n,t,e.child,r,i,s,!1),Jo(t,n,i,a,s);else if(l&32){let c=My(e,r),u;for(;u=c();)Jo(t,n,i,u,s);Jo(t,n,i,a,s)}else l&16?lk(n,t,r,e,i,s):Jo(t,n,i,a,s);e=o?e.projectionNext:e.next}}function Eh(n,t,e,r,i,s){Ny(e,r,n.firstChild,t,i,s,!1)}function lk(n,t,e,r,i,s){let o=e[wn],l=o[jn].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];Jo(t,n,i,u,s)}else{let c=l,u=o[Lt];lD(r)&&(c.flags|=128),Ny(n,t,c,u,i,s,!0)}}function ck(n,t,e,r,i){let s=e[zi],o=Vn(e);s!==o&&Jo(t,n,r,s,i);for(let a=Bt;a<e.length;a++){let l=e[a];Eh(l[pe],l,n,t,r,s)}}function uk(n,t,e,r,i){if(t)i?n.addClass(e,r):n.removeClass(e,r);else{let s=r.indexOf("-")===-1?void 0:Tr.DashCase;i==null?n.removeStyle(e,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Tr.Important),n.setStyle(e,r,i,s))}}function FD(n,t,e,r,i){let s=Wi(),o=r&2;try{Yi(-1),o&&t.length>Ct&&PD(n,t,Ct,!1),Ye(o?2:0,i,e),e(r,i)}finally{Yi(s),Ye(o?3:1,i,e)}}function xh(n,t,e){vk(n,t,e),(e.flags&64)===64&&yk(n,t,e)}function Wl(n,t,e=ar){let r=t.localNames;if(r!==null){let i=t.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?e(t,n):n[o];n[i++]=a}}}function dk(n,t,e,r){let s=r.get(vD,mD)||e===hi.ShadowDom,o=n.selectRootElement(t,s);return hk(o),o}function hk(n){fk(n)}var fk=()=>null;function pk(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function BD(n,t,e,r,i,s){let o=t[pe];if(Fy(n,o,t,e,r)){Gi(n)&&mk(t,n.index);return}n.type&3&&(e=pk(e)),gk(n,t,e,r,i,s)}function gk(n,t,e,r,i,s){if(n.type&3){let o=ar(n,t);r=s!=null?s(r,n.value||"",e):r,i.setProperty(o,e,r)}else n.type&12}function mk(n,t){let e=Hn(t,n);e[_e]&16||(e[_e]|=64)}function vk(n,t,e){let r=e.directiveStart,i=e.directiveEnd;Gi(e)&&ZP(t,e,n.data[r+e.componentOffset]),n.firstCreatePass||qd(e,t);let s=e.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],l=Qd(t,n,o,e);if(na(l,t),s!==null&&Ek(t,o-r,l,a,e,s),Dr(a)){let c=Hn(e.index,t);c[gt]=Qd(t,n,o,e)}}}function yk(n,t,e){let r=e.directiveStart,i=e.directiveEnd,s=e.index,o=nw();try{Yi(s);for(let a=r;a<i;a++){let l=n.data[a],c=t[a];Pd(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&bk(l,c)}}finally{Yi(-1),Pd(o)}}function bk(n,t){n.hostBindings!==null&&n.hostBindings(1,t)}function Py(n,t){let e=n.directiveRegistry,r=null;if(e)for(let i=0;i<e.length;i++){let s=e[i];FP(t,s.selectors,!1)&&(r??=[],Dr(s)?r.unshift(s):r.push(s))}return r}function _k(n,t,e,r,i,s){let o=ar(n,t);Ck(t[st],o,s,n.value,e,r,i)}function Ck(n,t,e,r,i,s,o){if(s==null)n.removeAttribute(t,i,e);else{let a=o==null?Dd(s):o(s,r||"",i);n.setAttribute(t,i,a,e)}}function Ek(n,t,e,r,i,s){let o=s[t];if(o!==null)for(let a=0;a<o.length;a+=2){let l=o[a],c=o[a+1];Kv(r,e,l,c)}}function ky(n,t,e,r,i){let s=Ct+e,o=t[pe],a=i(o,t,n,r,e);t[s]=a,qo(n,!0);let l=n.type===2;return l?(RD(t[st],a,n),(Wx()===0||Xo(n))&&na(a,t),Yx()):na(a,t),Bd()&&(!l||!yy(n))&&Oy(o,t,a,n),n}function Ly(n){let t=n;return dv()?Zx():(t=t.parent,qo(t,!1)),t}function xk(n,t){let e=n[Ps];if(!e)return;e.get($n,null)?.(t)}function Fy(n,t,e,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let l=0;l<o.length;l+=2){let c=o[l],u=o[l+1],d=t.data[c];Kv(d,e[c],u,i),a=!0}if(s)for(let l of s){let c=e[l],u=t.data[l];Kv(u,c,r,i),a=!0}return a}function wk(n,t){let e=Hn(t,n),r=e[pe];Dk(r,e);let i=e[sr];i!==null&&e[Go]===null&&(e[Go]=yD(i,e[Ps])),Ye(18),By(r,e,e[gt]),Ye(19,e[gt])}function Dk(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])}function By(n,t,e){kd(t);try{let r=n.viewQuery;r!==null&&Vv(1,r,e);let i=n.template;i!==null&&FD(n,t,i,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),t[Bs]?.finishViewCreation(n),n.staticContentQueries&&bD(n,t),n.staticViewQueries&&Vv(2,n.viewQuery,e);let s=n.components;s!==null&&Sk(t,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[_e]&=-5,Ld()}}function Sk(n,t){for(let e=0;e<t.length;e++)wk(n,t[e])}function wh(n,t,e,r){let i=ye(null);try{let s=t.tView,a=n[_e]&4096?4096:16,l=Ay(n,s,e,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=n[t.index];l[Ls]=c;let u=n[Bs];return u!==null&&(l[Bs]=u.createEmbeddedView(s)),By(s,l,e),l}finally{ye(i)}}function Vl(n,t){return!t||t.firstChild===null||lD(n)}var Sw=!1,Tk=new se("");function Hl(n,t,e,r,i=!1){for(;e!==null;){if(e.type===128){e=i?e.projectionNext:e.next;continue}let s=t[e.index];s!==null&&r.push(Vn(s)),or(s)&&jD(s,r);let o=e.type;if(o&8)Hl(n,t,e.child,r);else if(o&32){let a=My(e,t),l;for(;l=a();)r.push(l)}else if(o&16){let a=LD(t,e);if(Array.isArray(a))r.push(...a);else{let l=Vi(t[wn]);Hl(l[pe],l,a,r,!0)}}e=i?e.projectionNext:e.next}return r}function jD(n,t){for(let e=Bt;e<n.length;e++){let r=n[e],i=r[pe].firstChild;i!==null&&Hl(r[pe],r,i,t)}n[zi]!==n[sr]&&t.push(n[zi])}function VD(n){if(n[js]!==null){for(let t of n[js])t.impl.addSequence(t);n[js].length=0}}var HD=[];function Ak(n){return n[Dn]??Ik(n)}function Ik(n){let t=HD.pop()??Object.create(Rk);return t.lView=n,t}function Mk(n){n.lView[Dn]!==n&&(n.lView=null,HD.push(n))}var Rk=ce(H({},Es),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Zo(n.lView)},consumerOnSignalRead(){this.lView[Dn]=this}});function Ok(n){let t=n[Dn]??Object.create(Nk);return t.lView=n,t}var Nk=ce(H({},Es),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let t=Vi(n.lView);for(;t&&!UD(t[pe]);)t=Vi(t);t&&sv(t)},consumerOnSignalRead(){this.lView[Dn]=this}});function UD(n){return n.type!==2}function $D(n){if(n[Ml]===null)return;let t=!0;for(;t;){let e=!1;for(let r of n[Ml])r.dirty&&(e=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=e&&!!(n[_e]&8192)}}var Pk=100;function jy(n,t=0){let r=n[li].rendererFactory,i=!1;i||r.begin?.();try{kk(n,t)}finally{i||r.end?.()}}function kk(n,t){let e=fv();try{pv(!0),qv(n,t);let r=0;for(;Pl(n);){if(r===Pk)throw new oe(103,!1);r++,qv(n,1)}}finally{pv(e)}}function zD(n,t){hv(t?kl.Exhaustive:kl.OnlyDirtyViews);try{jy(n)}finally{hv(kl.Off)}}function Lk(n,t,e,r){if(Vs(t))return;let i=t[_e],s=!1,o=!1;kd(t);let a=!0,l=null,c=null;s||(UD(n)?(c=Ak(t),l=xs(c)):Gu()===null?(a=!1,c=Ok(t),l=xs(c)):t[Dn]&&(gl(t[Dn]),t[Dn]=null));try{iv(t),Qx(n.bindingStartIndex),e!==null&&FD(n,t,e,2,r);let u=(i&3)===3;if(!s)if(u){let f=n.preOrderCheckHooks;f!==null&&Gd(t,f,null)}else{let f=n.preOrderHooks;f!==null&&Wd(t,f,0,null),wv(t,0)}if(o||Fk(t),$D(t),GD(t,0),n.contentQueries!==null&&bD(n,t),!s)if(u){let f=n.contentCheckHooks;f!==null&&Gd(t,f)}else{let f=n.contentHooks;f!==null&&Wd(t,f,1),wv(t,1)}jk(n,t);let d=n.components;d!==null&&YD(t,d,0);let h=n.viewQuery;if(h!==null&&Vv(2,h,r),!s)if(u){let f=n.viewCheckHooks;f!==null&&Gd(t,f)}else{let f=n.viewHooks;f!==null&&Wd(t,f,2),wv(t,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),t[Id]){for(let f of t[Id])f();t[Id]=null}s||(VD(t),t[_e]&=-73)}catch(u){throw s||Zo(t),u}finally{c!==null&&(Ao(c,l),a&&Mk(c)),Ld()}}function GD(n,t){for(let e=uD(n);e!==null;e=dD(e))for(let r=Bt;r<e.length;r++){let i=e[r];WD(i,t)}}function Fk(n){for(let t=uD(n);t!==null;t=dD(t)){if(!(t[_e]&2))continue;let e=t[Ol];for(let r=0;r<e.length;r++){let i=e[r];sv(i)}}}function Bk(n,t,e){Ye(18);let r=Hn(t,n);WD(r,e),Ye(19,r[gt])}function WD(n,t){Md(n)&&qv(n,t)}function qv(n,t){let r=n[pe],i=n[_e],s=n[Dn],o=!!(t===0&&i&16);if(o||=!!(i&64&&t===0),o||=!!(i&1024),o||=!!(s?.dirty&&pl(s)),o||=!1,s&&(s.dirty=!1),n[_e]&=-9217,o)Lk(r,n,r.template,n[gt]);else if(i&8192){let a=ye(null);try{$D(n),GD(n,1);let l=r.components;l!==null&&YD(n,l,1),VD(n)}finally{ye(a)}}}function YD(n,t,e){for(let r=0;r<t.length;r++)Bk(n,t[r],e)}function jk(n,t){let e=n.hostBindingOpCodes;if(e!==null)try{for(let r=0;r<e.length;r++){let i=e[r];if(i<0)Yi(~i);else{let s=i,o=e[++r],a=e[++r];tw(o,s);let l=t[s];Ye(24,l),a(2,l),Ye(25,l)}}}finally{Yi(-1)}}function Vy(n,t){let e=fv()?64:1088;for(n[li].changeDetectionScheduler?.notify(t);n;){n[_e]|=e;let r=Vi(n);if(Ko(n)&&!r)return n;n=r}return null}function XD(n,t,e,r){return[n,!0,0,t,null,r,null,e,null,null]}function KD(n,t){let e=Bt+t;if(e<n.length)return n[e]}function Dh(n,t,e,r=!0){let i=t[pe];if(Vk(i,t,n,e),r){let o=Zv(e,n),a=t[st],l=a.parentNode(n[zi]);l!==null&&JP(i,n[jn],a,t,l,o)}let s=t[Go];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ZD(n,t){let e=Ul(n,t);return e!==void 0&&Ch(e[pe],e),e}function Ul(n,t){if(n.length<=Bt)return;let e=Bt+t,r=n[e];if(r){let i=r[Ls];i!==null&&i!==n&&Ry(i,r),t>0&&(n[e-1][Bn]=r[Bn]);let s=Sl(n,Bt+t);QP(r[pe],r);let o=s[Bs];o!==null&&o.detachView(s[pe]),r[Lt]=null,r[Bn]=null,r[_e]&=-129}return r}function Vk(n,t,e,r){let i=Bt+r,s=e.length;r>0&&(e[i-1][Bn]=t),r<s-Bt?(t[Bn]=e[i],Gm(e,Bt+r,t)):(e.push(t),t[Bn]=null),t[Lt]=e;let o=t[Ls];o!==null&&e!==o&&qD(o,t);let a=t[Bs];a!==null&&a.insertView(n),Rd(t),t[_e]|=128}function qD(n,t){let e=n[Ol],r=t[Lt];if(wr(r))n[_e]|=2;else{let i=r[Lt][wn];t[wn]!==i&&(n[_e]|=2)}e===null?n[Ol]=[t]:e.push(t)}var Xi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,e=t[pe];return Hl(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e}get context(){return this._lView[gt]}set context(t){this._lView[gt]=t}get destroyed(){return Vs(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Lt];if(or(t)){let e=t[Rl],r=e?e.indexOf(this):-1;r>-1&&(Ul(t,r),Sl(e,r))}this._attachedToViewContainer=!1}Ch(this._lView[pe],this._lView)}onDestroy(t){ov(this._lView,t)}markForCheck(){Vy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[_e]&=-129}reattach(){Rd(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,jy(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Ko(this._lView),e=this._lView[Ls];e!==null&&!t&&Ry(e,this._lView),kD(this._lView[pe],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=t;let e=Ko(this._lView),r=this._lView[Ls];r!==null&&!e&&qD(r,this._lView),Rd(this._lView)}};var Yl=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Hk;constructor(e,r,i){this._declarationLView=e,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,i){let s=wh(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:i});return new Xi(s)}}return n})();function Hk(){return QD(Vt(),Me())}function QD(n,t){return n.type&4?new Yl(t,n,fh(n,t)):null}function Xl(n,t,e,r,i){let s=n.data[t];if(s===null)s=Uk(n,t,e,r,i),ew()&&(s.flags|=32);else if(s.type&64){s.type=e,s.value=r,s.attrs=i;let o=Kx();s.injectorIndex=o===null?-1:o.injectorIndex}return qo(s,!0),s}function Uk(n,t,e,r,i){let s=uv(),o=dv(),a=o?s:s&&s.parent,l=n.data[t]=zk(n,a,e,t,r,i);return $k(n,l,s,o),l}function $k(n,t,e,r){n.firstChild===null&&(n.firstChild=t),e!==null&&(r?e.child==null&&t.parent!==null&&(e.child=t):e.next===null&&(e.next=t,t.prev=e))}function zk(n,t,e,r,i,s){let o=t?t.injectorIndex:-1,a=0;return Xx()&&(a|=128),{type:e,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var HK=new RegExp(`^(\\d+)*(${aP}|${oP})*(.*)`);function Gk(n){let t=n[tv]??[],r=n[Lt][st],i=[];for(let s of t)s.data[gD]!==void 0?i.push(s):Wk(s,r);n[tv]=i}function Wk(n,t){let e=0,r=n.firstChild;if(r){let i=n.data[pD];for(;e<i;){let s=r.nextSibling;MD(t,r,!1),r=s,e++}}}var Yk=()=>null,Xk=()=>null;function Qv(n,t){return Yk(n,t)}function JD(n,t,e){return Xk(n,t,e)}var eS=class{},Sh=class{},Jv=class{resolveComponentFactory(t){throw new oe(917,!1)}},Kl=class{static NULL=new Jv},zs=class{},Ir=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>Kk()}return n})();function Kk(){let n=Me(),t=Vt(),e=Hn(t.index,n);return(wr(e)?e:n)[st]}var tS=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>null})}return n})();var Yd={},ey=class{injector;parentInjector;constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,r){let i=this.injector.get(t,Yd,r);return i!==Yd||e===Yd?i:this.parentInjector.get(t,e,r)}};function eh(n,t,e){let r=e?n.styles:null,i=e?n.classes:null,s=0;if(t!==null)for(let o=0;o<t.length;o++){let a=t[o];if(typeof a=="number")s=a;else if(s==1)i=Om(i,a);else if(s==2){let l=a,c=t[++o];r=Om(r,l+": "+c+";")}}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=i:n.classesWithoutHost=i}function de(n,t=0){let e=Me();if(e===null)return he(n,t);let r=Vt();return sD(r,e,Ft(n),t)}function Hy(){let n="invalid";throw new Error(n)}function nS(n,t,e,r,i){let s=r===null?null:{"":-1},o=i(n,e);if(o!==null){let a=o,l=null,c=null;for(let u of o)if(u.resolveHostDirectives!==null){[a,l,c]=u.resolveHostDirectives(o);break}Qk(n,t,e,a,s,l,c)}s!==null&&r!==null&&Zk(e,r,s)}function Zk(n,t,e){let r=n.localNames=[];for(let i=0;i<t.length;i+=2){let s=e[t[i+1]];if(s==null)throw new oe(-301,!1);r.push(t[i],s)}}function qk(n,t,e){t.componentOffset=e,(n.components??=[]).push(t.index)}function Qk(n,t,e,r,i,s,o){let a=r.length,l=!1;for(let h=0;h<a;h++){let f=r[h];!l&&Dr(f)&&(l=!0,qk(n,e,h)),Lv(qd(e,t),n,f.type)}iL(e,n.data.length,a);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let c=!1,u=!1,d=ND(n,t,a,null);a>0&&(e.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(e.mergedAttrs=ta(e.mergedAttrs,f.hostAttrs),eL(n,e,t,d,f),rL(d,f,i),o!==null&&o.has(f)){let[g,m]=o.get(f);e.directiveToIndex.set(f.type,[d,g+e.directiveStart,m+e.directiveStart])}else(s===null||!s.has(f))&&e.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(e.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(e.flags|=64);let p=f.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(e.index),c=!0),!u&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(e.index),u=!0),d++}Jk(n,e,s)}function Jk(n,t,e){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=n.data[r];if(e===null||!e.has(i))Tw(0,t,i,r),Tw(1,t,i,r),Iw(t,r,!1);else{let s=e.get(i);Aw(0,t,s,r),Aw(1,t,s,r),Iw(t,r,!0)}}}function Tw(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=t.inputs??={}:o=t.outputs??={},o[s]??=[],o[s].push(r),rS(t,s)}}function Aw(n,t,e,r){let i=n===0?e.inputs:e.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),rS(t,o)}}function rS(n,t){t==="class"?n.flags|=8:t==="style"&&(n.flags|=16)}function Iw(n,t,e){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!e&&i===null||e&&s===null||Sy(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!e&&i.hasOwnProperty(l)){let c=i[l];for(let u of c)if(u===t){o??=[],o.push(l,r[a+1]);break}}else if(e&&s.hasOwnProperty(l)){let c=s[l];for(let u=0;u<c.length;u+=2)if(c[u]===t){o??=[],o.push(c[u+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function eL(n,t,e,r,i){n.data[r]=i;let s=i.factory||(i.factory=Is(i.type,!0)),o=new $s(s,Dr(i),de,null);n.blueprint[r]=o,e[r]=o,tL(n,t,r,ND(n,e,i.hostVars,Ar),i)}function tL(n,t,e,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~t.index;nL(o)!=a&&o.push(a),o.push(e,r,s)}}function nL(n){let t=n.length;for(;t>0;){let e=n[--t];if(typeof e=="number"&&e<0)return e}return 0}function rL(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Dr(t)&&(e[""]=n)}}function iL(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function Uy(n,t,e,r,i,s,o,a){let l=t[pe],c=l.consts,u=Un(c,o),d=Xl(l,n,e,r,u);return s&&nS(l,t,d,Un(c,a),i),d.mergedAttrs=ta(d.mergedAttrs,d.attrs),d.attrs!==null&&eh(d,d.attrs,!1),d.mergedAttrs!==null&&eh(d,d.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,d),d}function $y(n,t){qw(n,t),nv(t)&&n.queries.elementEnd(t)}function sL(n,t,e,r,i,s){let o=t.consts,a=Un(o,i),l=Xl(t,n,e,r,a);if(l.mergedAttrs=ta(l.mergedAttrs,l.attrs),s!=null){let c=Un(o,s);l.localNames=[];for(let u=0;u<c.length;u+=2)l.localNames.push(c[u],-1)}return l.attrs!==null&&eh(l,l.attrs,!1),l.mergedAttrs!==null&&eh(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function zy(n){return sS(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function iS(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{let e=n[Symbol.iterator](),r;for(;!(r=e.next()).done;)t(r.value)}}function sS(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Gy(n,t,e){return n[t]=e}function cr(n,t,e){if(e===Ar)return!1;let r=n[t];return Object.is(r,e)?!1:(n[t]=e,!0)}function oS(n,t,e,r){let i=cr(n,t,e);return cr(n,t+1,r)||i}function oL(n,t,e,r,i){let s=oS(n,t,e,r);return cr(n,t+2,i)||s}function Tv(n,t,e){return function r(i){let s=Gi(n)?Hn(n.index,t):t;Vy(s,5);let o=t[gt],a=Mw(t,o,e,i),l=r.__ngNextListenerFn__;for(;l;)a=Mw(t,o,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function Mw(n,t,e,r){let i=ye(null);try{return Ye(6,t,e),e(r)!==!1}catch(s){return xk(n,s),!1}finally{Ye(7,t,e),ye(i)}}function aL(n,t,e,r,i,s,o,a){let l=Xo(n),c=!1,u=null;if(!r&&l&&(u=lL(t,e,s,n.index)),u!==null){let d=u.__ngLastListenerFn__||u;d.__ngNextListenerFn__=o,u.__ngLastListenerFn__=o,c=!0}else{let d=ar(n,e),h=r?r(d):d;cP(e,h,s,a);let f=i.listen(h,s,a),p=r?g=>r(Vn(g[n.index])):n.index;aS(p,t,e,s,a,f,!1)}return c}function lL(n,t,e,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===e&&i[s+1]===r){let a=t[Wo],l=i[s+2];return a&&a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function aS(n,t,e,r,i,s,o){let a=t.firstCreatePass?Gx(t):null,l=zx(e),c=l.length;l.push(i,s),a&&a.push(r,n,c,(c+1)*(o?-1:1))}function Rw(n,t,e,r,i,s){let o=t[e],a=t[pe],c=a.data[e].outputs[r],d=o[c].subscribe(s);aS(n.index,a,t,i,s,d,!0)}var ty=Symbol("BINDING");var th=class extends Kl{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=ai(t);return new Gs(e,this.ngModule)}};function cL(n){return Object.keys(n).map(t=>{let[e,r,i]=n[t],s={propName:e,templateName:t,isSignal:(r&_h.SignalBased)!==0};return i&&(s.transform=i),s})}function uL(n){return Object.keys(n).map(t=>({propName:n[t],templateName:t}))}function dL(n,t,e){let r=t instanceof Rt?t:t?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new ey(e,r):e}function hL(n){let t=n.get(zs,null);if(t===null)throw new oe(407,!1);let e=n.get(tS,null),r=n.get(Hi,null);return{rendererFactory:t,sanitizer:e,changeDetectionScheduler:r,ngReflect:!1}}function fL(n,t){let e=lS(n);return AD(t,e,e==="svg"?Bx:e==="math"?jx:null)}function lS(n){return(n.selectors[0][0]||"div").toLowerCase()}var Gs=class extends Sh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=cL(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=uL(this.componentDef.outputs),this.cachedOutputs}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=HP(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!e}create(t,e,r,i,s,o){Ye(22);let a=ye(null);try{let l=this.componentDef,c=pL(r,l,o,s),u=dL(l,i||this.ngModule,t),d=hL(u),h=d.rendererFactory.createRenderer(null,l),f=r?dk(h,r,l.encapsulation,u):fL(l,h),p=o?.some(Ow)||s?.some(v=>typeof v!="function"&&v.bindings.some(Ow)),g=Ay(null,c,null,512|OD(l),null,null,d,h,u,null,yD(f,u,!0));g[Ct]=f,kd(g);let m=null;try{let v=Uy(Ct,g,2,"#host",()=>c.directiveRegistry,!0,0);f&&(RD(h,f,v),na(f,g)),xh(c,g,v),by(c,v,g),$y(c,v),e!==void 0&&mL(v,this.ngContentSelectors,e),m=Hn(v.index,g),g[gt]=m[gt],By(c,g,null)}catch(v){throw m!==null&&Bv(m),Bv(g),v}finally{Ye(23),Ld()}return new nh(this.componentType,g,!!p)}finally{ye(a)}}};function pL(n,t,e,r){let i=n?["ng-version","20.2.1"]:UP(t.selectors[0]),s=null,o=null,a=0;if(e)for(let u of e)a+=u[ty].requiredVars,u.create&&(u.targetIdx=0,(s??=[]).push(u)),u.update&&(u.targetIdx=0,(o??=[]).push(u));if(r)for(let u=0;u<r.length;u++){let d=r[u];if(typeof d!="function")for(let h of d.bindings){a+=h[ty].requiredVars;let f=u+1;h.create&&(h.targetIdx=f,(s??=[]).push(h)),h.update&&(h.targetIdx=f,(o??=[]).push(h))}}let l=[t];if(r)for(let u of r){let d=typeof u=="function"?u:u.type,h=Km(d);l.push(h)}return Ty(0,null,gL(s,o),1,a,l,null,null,null,[i],null)}function gL(n,t){return!n&&!t?null:e=>{if(e&1&&n)for(let r of n)r.create();if(e&2&&t)for(let r of t)r.update()}}function Ow(n){let t=n[ty].kind;return t==="input"||t==="twoWay"}var nh=class extends eS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,e,r){super(),this._rootLView=e,this._hasInputBindings=r,this._tNode=Nl(e[pe],Ct),this.location=fh(this._tNode,e),this.instance=Hn(this._tNode.index,e)[gt],this.hostView=this.changeDetectorRef=new Xi(e,void 0),this.componentType=t}setInput(t,e){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let i=this._rootLView,s=Fy(r,i[pe],i,t,e);this.previousInputValues.set(t,e);let o=Hn(r.index,i);Vy(o,1)}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function mL(n,t,e){let r=n.projection=[];for(let i=0;i<t.length;i++){let s=e[i];r.push(s!=null&&s.length?Array.from(s):null)}}var Ks=(()=>{class n{static __NG_ELEMENT_ID__=vL}return n})();function vL(){let n=Vt();return bL(n,Me())}var yL=Ks,cS=class extends yL{_lContainer;_hostTNode;_hostLView;constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){let t=gy(this._hostTNode,this._hostLView);if(Jw(t)){let e=Zd(t,this._hostLView),r=Kd(t),i=e[pe].data[r+8];return new Us(i,e)}else return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=Nw(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Bt}createEmbeddedView(t,e,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Qv(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},s,o);return this.insertImpl(a,i,Vl(this._hostTNode,o)),a}createComponent(t,e,r,i,s,o,a){let l=t&&!kN(t),c;if(l)c=e;else{let m=e||{};c=m.index,r=m.injector,i=m.projectableNodes,s=m.environmentInjector||m.ngModuleRef,o=m.directives,a=m.bindings}let u=l?t:new Gs(ai(t)),d=r||this.parentInjector;if(!s&&u.ngModule==null){let v=(l?d:this.parentInjector).get(Rt,null);v&&(s=v)}let h=ai(u.componentType??{}),f=Qv(this._lContainer,h?.id??null),p=f?.firstChild??null,g=u.create(d,i,p,s,o,a);return this.insertImpl(g.hostView,c,Vl(this._hostTNode,f)),g}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,r){let i=t._lView;if(Hx(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=i[Lt],c=new cS(l,l[jn],l[Lt]);c.detach(c.indexOf(t))}}let s=this._adjustIndex(e),o=this._lContainer;return Dh(o,i,s,r),t.attachToViewContainerRef(),Gm(Av(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=Nw(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),r=Ul(this._lContainer,e);r&&(Sl(Av(this._lContainer),e),Ch(r[pe],r))}detach(t){let e=this._adjustIndex(t,-1),r=Ul(this._lContainer,e);return r&&Sl(Av(this._lContainer),e)!=null?new Xi(r):null}_adjustIndex(t,e=0){return t??this.length+e}};function Nw(n){return n[Rl]}function Av(n){return n[Rl]||(n[Rl]=[])}function bL(n,t){let e,r=t[n.index];return or(r)?e=r:(e=XD(r,t,null,n),t[n.index]=e,Iy(t,e)),CL(e,t,n,r),new cS(e,n,t)}function _L(n,t){let e=n[st],r=e.createComment(""),i=ar(t,n),s=e.parentNode(i);return Jd(e,s,r,e.nextSibling(i),!1),r}var CL=wL,EL=()=>!1;function xL(n,t,e){return EL(n,t,e)}function wL(n,t,e,r){if(n[zi])return;let i;e.type&8?i=Vn(r):i=_L(t,e),n[zi]=i}var Pw=new Set;function dr(n){Pw.has(n)||(Pw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ws=class{},Th=class{};var rh=class extends Ws{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new th(this);constructor(t,e,r,i=!0){super(),this.ngModuleType=t,this._parent=e;let s=Xm(t);this._bootstrapComponents=SD(s.bootstrap),this._r3Injector=yv(t,e,[{provide:Ws,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver},...r],si(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},ih=class extends Th{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new rh(this.moduleType,t,[])}};var $l=class extends Ws{injector;componentFactoryResolver=new th(this);instance=null;constructor(t){super();let e=new Rs([...t.providers,{provide:Ws,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver}],t.parent||Al(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function oa(n,t,e=null){return new $l({providers:n,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var DL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(e){this._injector=e}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let r=Zm(!1,e.type),i=r.length>0?oa([r],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,i)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(he(Rt))})}return n})();function vt(n){return ia(()=>{let t=uS(n),e=ce(H({},t),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===my.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&n.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(DL).getOrCreateStandaloneInjector(e):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||hi.Emulated,styles:n.styles||xn,_:null,schemas:n.schemas||null,tView:null,id:""});t.standalone&&dr("NgStandalone"),dS(e);let r=n.dependencies;return e.directiveDefs=kw(r,SL),e.pipeDefs=kw(r,Rx),e.id=IL(e),e})}function SL(n){return ai(n)||Km(n)}function Mr(n){return ia(()=>({type:n.type,bootstrap:n.bootstrap||xn,declarations:n.declarations||xn,imports:n.imports||xn,exports:n.exports||xn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function TL(n,t){if(n==null)return $i;let e={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,l;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,l=i[3]||null):(s=i,o=i,a=_h.None,l=null),e[s]=[r,a,l],t[s]=o}return e}function AL(n){if(n==null)return $i;let t={};for(let e in n)n.hasOwnProperty(e)&&(t[n[e]]=e);return t}function at(n){return ia(()=>{let t=uS(n);return dS(t),t})}function uS(n){let t={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:t,inputConfig:n.inputs||$i,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||xn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:TL(n.inputs,t),outputs:AL(n.outputs),debugInfo:null}}function dS(n){n.features?.forEach(t=>t(n))}function kw(n,t){return n?()=>{let e=typeof n=="function"?n():n,r=[];for(let i of e){let s=t(i);s!==null&&r.push(s)}return r}:null}function IL(n){let t=0,e=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,e,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))t=Math.imul(31,t)+s.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function ML(n){return Object.getPrototypeOf(n.prototype).constructor}function Gn(n){let t=ML(n.type),e=!0,r=[n];for(;t;){let i;if(Dr(n))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new oe(903,!1);i=t.\u0275dir}if(i){if(e){r.push(i);let o=n;o.inputs=Iv(n.inputs),o.declaredInputs=Iv(n.declaredInputs),o.outputs=Iv(n.outputs);let a=i.hostBindings;a&&kL(n,a);let l=i.viewQuery,c=i.contentQueries;if(l&&NL(n,l),c&&PL(n,c),RL(n,i),wx(n.outputs,i.outputs),Dr(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Gn&&(e=!1)}}t=Object.getPrototypeOf(t)}OL(r)}function RL(n,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||n.inputs.hasOwnProperty(e))continue;let r=t.inputs[e];r!==void 0&&(n.inputs[e]=r,n.declaredInputs[e]=t.declaredInputs[e])}}function OL(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ta(i.hostAttrs,e=ta(e,i.hostAttrs))}}function Iv(n){return n===$i?{}:n===xn?[]:n}function NL(n,t){let e=n.viewQuery;e?n.viewQuery=(r,i)=>{t(r,i),e(r,i)}:n.viewQuery=t}function PL(n,t){let e=n.contentQueries;e?n.contentQueries=(r,i,s)=>{t(r,i,s),e(r,i,s)}:n.contentQueries=t}function kL(n,t){let e=n.hostBindings;e?n.hostBindings=(r,i)=>{t(r,i),e(r,i)}:n.hostBindings=t}function hS(n,t,e,r,i,s,o,a){if(e.firstCreatePass){n.mergedAttrs=ta(n.mergedAttrs,n.attrs);let u=n.tView=Ty(2,n,i,s,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,e.consts,null);e.queries!==null&&(e.queries.template(e,n),u.queries=e.queries.embeddedTView(n))}a&&(n.flags|=a),qo(n,!1);let l=FL(e,t,n,r);Bd()&&Oy(e,t,l,n),na(l,t);let c=XD(l,t,l,n);t[r+Ct]=c,Iy(t,c),xL(c,n,t)}function LL(n,t,e,r,i,s,o,a,l,c,u){let d=e+Ct,h;return t.firstCreatePass?(h=Xl(t,d,4,o||null,a||null),Od()&&nS(t,n,h,Un(t.consts,c),Py),qw(t,h)):h=t.data[d],hS(h,n,t,e,r,i,s,l),Xo(h)&&xh(t,n,h),c!=null&&Wl(n,h,u),h}function sh(n,t,e,r,i,s,o,a,l,c,u){let d=e+Ct,h;if(t.firstCreatePass){if(h=Xl(t,d,4,o||null,a||null),c!=null){let f=Un(t.consts,c);h.localNames=[];for(let p=0;p<f.length;p+=2)h.localNames.push(f[p],-1)}}else h=t.data[d];return hS(h,n,t,e,r,i,s,l),c!=null&&Wl(n,h,u),h}function Ht(n,t,e,r,i,s,o,a){let l=Me(),c=jt(),u=Un(c.consts,s);return LL(l,c,n,t,e,r,i,u,void 0,o,a),Ht}var FL=BL;function BL(n,t,e,r){return Ll(!0),t[st].createComment("")}var Ah=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ah||{}),Zs=new se(""),fS=!1,ny=class extends Mt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Lx()&&(this.destroyRef=z(ci,{optional:!0})??void 0,this.pendingTasks=z(di,{optional:!0})??void 0)}emit(t){let e=ye(null);try{super.next(t)}finally{ye(e)}}subscribe(t,e,r){let i=t,s=e||(()=>null),o=r;if(t&&typeof t=="object"){let l=t;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return t instanceof bt&&t.add(a),a}wrapInTimeout(t){return e=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(e)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Qe=ny;function pS(n){let t,e;function r(){n=Fl;try{e!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(e),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(e=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Lw(n){return queueMicrotask(()=>n()),()=>{n=Fl}}var Wy="isAngularZone",oh=Wy+"_ID",jL=0,ot=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qe(!1);onMicrotaskEmpty=new Qe(!1);onStable=new Qe(!1);onError=new Qe(!1);constructor(t){let{enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=fS}=t;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,UL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Wy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,t,VL,Fl,Fl);try{return s.runTask(o,e,r)}finally{s.cancelTask(o)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}},VL={};function Yy(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function HL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function t(){pS(()=>{n.callbackScheduled=!1,ry(n),n.isCheckStableRunning=!0,Yy(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{t()}):n._outer.run(()=>{t()}),ry(n)}function UL(n){let t=()=>{HL(n)},e=jL++;n._inner=n._inner.fork({name:"angular",properties:{[Wy]:!0,[oh]:e,[oh+e]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if($L(l))return r.invokeTask(s,o,a,l);try{return Fw(n),r.invokeTask(s,o,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&t(),Bw(n)}},onInvoke:(r,i,s,o,a,l,c)=>{try{return Fw(n),r.invoke(s,o,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!zL(l)&&t(),Bw(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ry(n),Yy(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ry(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Fw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Bw(n){n._nesting--,Yy(n)}var ah=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qe;onMicrotaskEmpty=new Qe;onStable=new Qe;onError=new Qe;run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,i){return t.apply(e,r)}};function $L(n){return gS(n,"__ignore_ng_zone__")}function zL(n){return gS(n,"__scheduler_tick__")}function gS(n,t){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[t]===!0}var Xy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),mS=[0,1,2,3],vS=(()=>{class n{ngZone=z(ot);scheduler=z(Hi);errorHandler=z(rr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){z(Zs,{optional:!0})}execute(){let e=this.sequences.size>0;e&&Ye(16),this.executing=!0;for(let r of mS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),e&&Ye(17)}register(e){let{view:r}=e;r!==void 0?((r[js]??=[]).push(e),Zo(r),r[_e]|=8192):this.executing?this.deferredRegistrations.add(e):this.addSequence(e)}addSequence(e){this.sequences.add(e),this.scheduler.notify(7)}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}maybeTrace(e,r){return r?r.run(Ah.AFTER_NEXT_RENDER,e):e()}static \u0275prov=re({token:n,providedIn:"root",factory:()=>new n})}return n})(),lh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(t,e,r,i,s,o=null){this.impl=t,this.hooks=e,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let t=this.view?.[js];t&&(this.view[js]=t.filter(e=>e!==this))}};function Zl(n,t){let e=t?.injector??z(nn);return dr("NgAfterNextRender"),WL(n,e,t,!0)}function GL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function WL(n,t,e,r){let i=t.get(Xy);i.impl??=t.get(vS);let s=t.get(Zs,null,{optional:!0}),o=e?.manualCleanup!==!0?t.get(ci):null,a=t.get(Vd,null,{optional:!0}),l=new lh(i.impl,GL(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(l),l}var Ih=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Ky=new se("");function Ki(n){return!!n&&typeof n.then=="function"}function Zy(n){return!!n&&typeof n.subscribe=="function"}var qy=new se("");function Mh(n){return Ns([{provide:qy,multi:!0,useValue:n}])}var Qy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((e,r)=>{this.resolve=e,this.reject=r});appInits=z(qy,{optional:!0})??[];injector=z(nn);constructor(){}runInitializers(){if(this.initialized)return;let e=[];for(let i of this.appInits){let s=Kt(this.injector,i);if(Ki(s))e.push(s);else if(Zy(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{r()}).catch(i=>{this.reject(i)}),e.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ql=new se("");function yS(){nm(()=>{let n="";throw new oe(600,n)})}function bS(n){return n.isBoundToModule}var YL=10;var Rr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z($n);afterRenderManager=z(Xy);zonelessEnabled=z(Qo);rootEffectScheduler=z(xv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Mt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=z(di);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Ne(e=>!e))}constructor(){z(Zs,{optional:!0})}whenStable(){let e;return new Promise(r=>{e=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{e.unsubscribe()})}_injector=z(Rt);_rendererFactory=null;get injector(){return this._injector}bootstrap(e,r){return this.bootstrapImpl(e,r)}bootstrapImpl(e,r,i=nn.NULL){return this._injector.get(ot).run(()=>{Ye(10);let o=e instanceof Sh;if(!this._injector.get(Qy).done){let p="";throw new oe(405,p)}let l;o?l=e:l=this._injector.get(Kl).resolveComponentFactory(e),this.componentTypes.push(l.componentType);let c=bS(l)?void 0:this._injector.get(Ws),u=r||l.selector,d=l.create(i,[],u,c),h=d.location.nativeElement,f=d.injector.get(Ky,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),jl(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),Ye(11,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Ye(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ah.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new oe(101,!1);let e=ye(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ye(e),this.afterTick.next(),Ye(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zs,null,{optional:!0}));let e=0;for(;this.dirtyFlags!==0&&e++<YL;)Ye(14),this.synchronizeOnce(),Ye(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let e=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Pl(i))continue;let s=r&&!this.zonelessEnabled?0:1;jy(i,s),e=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}e||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:e})=>Pl(e))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(e){let r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){let r=e;jl(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(e),this._injector.get(ql,[]).forEach(i=>i(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>jl(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new oe(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jl(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function aa(n,t,e,r){let i=Me(),s=Hs();if(cr(i,s,t)){let o=jt(),a=Fd();_k(a,i,n,t,e,r)}return aa}var Jy=new se("",{providedIn:"root",factory:()=>!1}),eb=new se("",{providedIn:"root",factory:()=>XL}),XL=4e3;var XK=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var iy=class{destroy(t){}updateValue(t,e){}swap(t,e){let r=Math.min(t,e),i=Math.max(t,e),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(t,e){this.attach(e,this.detach(t))}};function Mv(n,t,e,r,i){return n===e&&Object.is(t,r)?1:Object.is(i(n,t),i(e,r))?-1:0}function KL(n,t,e){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;s<=o&&s<=l;){let c=n.at(s),u=t[s],d=Mv(s,c,s,u,e);if(d!==0){d<0&&n.updateValue(s,u),s++;continue}let h=n.at(o),f=t[l],p=Mv(o,h,l,f,e);if(p!==0){p<0&&n.updateValue(o,f),o--,l--;continue}let g=e(s,c),m=e(o,h),v=e(s,u);if(Object.is(v,m)){let y=e(l,f);Object.is(y,g)?(n.swap(s,o),n.updateValue(o,f),l--,o--):n.move(o,s),n.updateValue(s,u),s++;continue}if(r??=new ch,i??=Vw(n,s,o,e),sy(n,r,s,v))n.updateValue(s,u),s++,o++;else if(i.has(v))r.set(g,n.detach(s)),o--;else{let y=n.create(s,t[s]);n.attach(s,y),s++,o++}}for(;s<=l;)jw(n,r,e,s,t[s]),s++}else if(t!=null){let l=t[Symbol.iterator](),c=l.next();for(;!c.done&&s<=o;){let u=n.at(s),d=c.value,h=Mv(s,u,s,d,e);if(h!==0)h<0&&n.updateValue(s,d),s++,c=l.next();else{r??=new ch,i??=Vw(n,s,o,e);let f=e(s,d);if(sy(n,r,s,f))n.updateValue(s,d),s++,o++,c=l.next();else if(!i.has(f))n.attach(s,n.create(s,d)),s++,o++,c=l.next();else{let p=e(s,u);r.set(p,n.detach(s)),o--}}}for(;!c.done;)jw(n,r,e,n.length,c.value),c=l.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(l=>{n.destroy(l)})}function sy(n,t,e,r){return t!==void 0&&t.has(r)?(n.attach(e,t.get(r)),t.delete(r),!0):!1}function jw(n,t,e,r,i){if(sy(n,t,r,e(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function Vw(n,t,e,r){let i=new Set;for(let s=t;s<=e;s++)i.add(r(s,n.at(s)));return i}var ch=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,r]of this.kvMap)if(t(r,e),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),t(r,e)}}};function Tn(n,t,e,r,i,s,o,a){dr("NgControlFlow");let l=Me(),c=jt(),u=Un(c.consts,s);return sh(l,c,n,t,e,r,i,u,256,o,a),tb}function tb(n,t,e,r,i,s,o,a){dr("NgControlFlow");let l=Me(),c=jt(),u=Un(c.consts,s);return sh(l,c,n,t,e,r,i,u,512,o,a),tb}function An(n,t){dr("NgControlFlow");let e=Me(),r=Hs(),i=e[r]!==Ar?e[r]:-1,s=i!==-1?uh(e,Ct+i):void 0,o=0;if(cr(e,r,n)){let a=ye(null);try{if(s!==void 0&&ZD(s,o),n!==-1){let l=Ct+n,c=uh(e,l),u=cy(e[pe],l),d=JD(c,u,e),h=wh(e,u,t,{dehydratedView:d});Dh(c,h,o,Vl(u,d))}}finally{ye(a)}}else if(s!==void 0){let a=KD(s,o);a!==void 0&&(a[gt]=t)}}var oy=class{lContainer;$implicit;$index;constructor(t,e,r){this.lContainer=t,this.$implicit=e,this.$index=r}get $count(){return this.lContainer.length-Bt}};function Or(n,t){return t}var ay=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,e,r){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=r}};function Nr(n,t,e,r,i,s,o,a,l,c,u,d,h){dr("NgControlFlow");let f=Me(),p=jt(),g=l!==void 0,m=Me(),v=a?o.bind(m[wn][gt]):o,y=new ay(g,v);m[Ct+n]=y,sh(f,p,n+1,t,e,r,i,Un(p.consts,s),256),g&&sh(f,p,n+2,l,c,u,d,Un(p.consts,h),512)}var ly=class extends iy{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,e,r){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=r}get length(){return this.lContainer.length-Bt}at(t){return this.getLView(t)[gt].$implicit}attach(t,e){let r=e[Go];this.needsIndexUpdate||=t!==this.length,Dh(this.lContainer,e,t,Vl(this.templateTNode,r))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,ZL(this.lContainer,t)}create(t,e){let r=Qv(this.lContainer,this.templateTNode.tView.ssrId),i=wh(this.hostLView,this.templateTNode,new oy(this.lContainer,e,t),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(t){Ch(t[pe],t),this.operationsCounter?.recordDestroy()}updateValue(t,e){this.getLView(t)[gt].$implicit=e}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[gt].$index=t}getLView(t){return qL(this.lContainer,t)}};function Pr(n){let t=ye(null),e=Wi();try{let r=Me(),i=r[pe],s=r[e],o=e+1,a=uh(r,o);if(s.liveCollection===void 0){let c=cy(i,o);s.liveCollection=new ly(a,r,c)}else s.liveCollection.reset();let l=s.liveCollection;if(KL(l,n,s.trackByFn),l.updateIndexes(),s.hasEmptyBlock){let c=Hs(),u=l.length===0;if(cr(r,c,u)){let d=e+2,h=uh(r,d);if(u){let f=cy(i,d),p=JD(h,f,r),g=wh(r,f,void 0,{dehydratedView:p});Dh(h,g,0,Vl(f,p))}else i.firstUpdatePass&&Gk(h),ZD(h,0)}}}finally{ye(t)}}function uh(n,t){return n[t]}function ZL(n,t){return Ul(n,t)}function qL(n,t){return KD(n,t)}function cy(n,t){return Nl(n,t)}function Fe(n,t,e){let r=Me(),i=Hs();if(cr(r,i,t)){let s=jt(),o=Fd();BD(o,r,n,t,r[st],e)}return Fe}function Hw(n,t,e,r,i){Fy(t,n,e,i?"class":"style",r)}function B(n,t,e,r){let i=Me(),s=i[pe],o=n+Ct,a=s.firstCreatePass?Uy(o,i,2,t,Py,Od(),e,r):s.data[o];if(ky(a,i,n,t,_S),Xo(a)){let l=i[pe];xh(l,i,a),by(l,a,i)}return r!=null&&Wl(i,a),B}function j(){let n=jt(),t=Vt(),e=Ly(t);return n.firstCreatePass&&$y(n,e),lv(e)&&cv(),av(),e.classesWithoutHost!=null&&HN(e)&&Hw(n,e,Me(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UN(e)&&Hw(n,e,Me(),e.stylesWithoutHost,!1),j}function Et(n,t,e,r){return B(n,t,e,r),j(),Et}function fn(n,t,e,r){let i=Me(),s=i[pe],o=n+Ct,a=s.firstCreatePass?sL(o,s,2,t,e,r):s.data[o];return ky(a,i,n,t,_S),r!=null&&Wl(i,a),fn}function pn(){let n=Vt(),t=Ly(n);return lv(t)&&cv(),av(),pn}var _S=(n,t,e,r,i)=>(Ll(!0),AD(t[st],r,lw()));function Rh(n,t,e){let r=Me(),i=r[pe],s=n+Ct,o=i.firstCreatePass?Uy(s,r,8,"ng-container",Py,Od(),t,e):i.data[s];if(ky(o,r,n,"ng-container",QL),Xo(o)){let a=r[pe];xh(a,r,o),by(a,o,r)}return e!=null&&Wl(r,o),Rh}function Oh(){let n=jt(),t=Vt(),e=Ly(t);return n.firstCreatePass&&$y(n,e),Oh}var QL=(n,t,e,r,i)=>(Ll(!0),GP(t[st],""));function ct(){return Me()}var Ql="en-US";var JL=Ql;function CS(n){typeof n=="string"&&(JL=n.toLowerCase().replace(/_/g,"-"))}function De(n,t,e){let r=Me(),i=jt(),s=Vt();return ES(i,r,r[st],s,n,t,e),De}function ES(n,t,e,r,i,s,o){let a=!0,l=null;if((r.type&3||o)&&(l??=Tv(r,t,s),aL(r,n,t,o,e,i,s,l)&&(a=!1)),a){let c=r.outputs?.[i],u=r.hostDirectiveOutputs?.[i];if(u&&u.length)for(let d=0;d<u.length;d+=2){let h=u[d],f=u[d+1];l??=Tv(r,t,s),Rw(r,t,h,f,i,l)}if(c&&c.length)for(let d of c)l??=Tv(r,t,s),Rw(r,t,d,i,i,l)}}function ae(n=1){return aw(n)}function Nh(n){let t=qx();return Vx(t,Ct+n)}function zd(n,t){return n<<17|t<<2}function Ys(n){return n>>17&32767}function eF(n){return(n&2)==2}function tF(n,t){return n&131071|t<<17}function uy(n){return n|2}function ra(n){return(n&131068)>>2}function Rv(n,t){return n&-131069|t<<2}function nF(n){return(n&1)===1}function dy(n){return n|1}function rF(n,t,e,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Ys(o),l=ra(o);n[r]=e;let c=!1,u;if(Array.isArray(e)){let d=e;u=d[1],(u===null||zo(d,u)>0)&&(c=!0)}else u=e;if(i)if(l!==0){let h=Ys(n[a+1]);n[r+1]=zd(h,a),h!==0&&(n[h+1]=Rv(n[h+1],r)),n[a+1]=tF(n[a+1],r)}else n[r+1]=zd(a,0),a!==0&&(n[a+1]=Rv(n[a+1],r)),a=r;else n[r+1]=zd(l,0),a===0?a=r:n[l+1]=Rv(n[l+1],r),l=r;c&&(n[r+1]=uy(n[r+1])),Uw(n,u,r,!0),Uw(n,u,r,!1),iF(t,u,n,r,s),o=zd(a,l),s?t.classBindings=o:t.styleBindings=o}function iF(n,t,e,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof t=="string"&&zo(s,t)>=0&&(e[r+1]=dy(e[r+1]))}function Uw(n,t,e,r){let i=n[e+1],s=t===null,o=r?Ys(i):ra(i),a=!1;for(;o!==0&&(a===!1||s);){let l=n[o],c=n[o+1];sF(l,t)&&(a=!0,n[o+1]=r?dy(c):uy(c)),o=r?Ys(c):ra(c)}a&&(n[e+1]=r?uy(i):dy(i))}function sF(n,t){return n===null||t==null||(Array.isArray(n)?n[1]:n)===t?!0:Array.isArray(n)&&typeof t=="string"?zo(n,t)>=0:!1}function vi(n,t){return oF(n,t,null,!0),vi}function oF(n,t,e,r){let i=Me(),s=jt(),o=Jx(2);if(s.firstUpdatePass&&lF(s,n,o,r),t!==Ar&&cr(i,o,t)){let a=s.data[Wi()];fF(s,a,i,i[st],n,i[o+1]=pF(t,e),r,o)}}function aF(n,t){return t>=n.expandoStartIndex}function lF(n,t,e,r){let i=n.data;if(i[e+1]===null){let s=i[Wi()],o=aF(n,e);gF(s,r)&&t===null&&!o&&(t=!1),t=cF(i,s,t,r),rF(i,s,t,e,o,r)}}function cF(n,t,e,r){let i=rw(n),s=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(e=Ov(null,n,t,e,r),e=zl(e,t.attrs,r),s=null);else{let o=t.directiveStylingLast;if(o===-1||n[o]!==i)if(e=Ov(i,n,t,e,r),s===null){let l=uF(n,t,r);l!==void 0&&Array.isArray(l)&&(l=Ov(null,n,t,l[1],r),l=zl(l,t.attrs,r),dF(n,t,r,l))}else s=hF(n,t,r)}return s!==void 0&&(r?t.residualClasses=s:t.residualStyles=s),e}function uF(n,t,e){let r=e?t.classBindings:t.styleBindings;if(ra(r)!==0)return n[Ys(r)]}function dF(n,t,e,r){let i=e?t.classBindings:t.styleBindings;n[Ys(i)]=r}function hF(n,t,e){let r,i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=zl(r,o,e)}return zl(r,t.attrs,e)}function Ov(n,t,e,r,i){let s=null,o=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<o&&(s=t[a],r=zl(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(e.directiveStylingLast=a),r}function zl(n,t,e){let r=e?1:2,i=-1;if(t!==null)for(let s=0;s<t.length;s++){let o=t[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mx(n,o,e?!0:t[++s]))}return n===void 0?null:n}function fF(n,t,e,r,i,s,o,a){if(!(t.type&3))return;let l=n.data,c=l[a+1],u=nF(c)?$w(l,t,e,i,ra(c),o):void 0;if(!dh(u)){dh(s)||eF(c)&&(s=$w(l,null,e,i,a,o));let d=rv(Wi(),e);uk(r,o,d,i,s)}}function $w(n,t,e,r,i,s){let o=t===null,a;for(;i>0;){let l=n[i],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=e[i+1];h===Ar&&(h=d?xn:void 0);let f=d?Ad(h,r):u===r?h:void 0;if(c&&!dh(f)&&(f=Ad(l,r)),dh(f)&&(a=f,o))return a;let p=n[i+1];i=o?Ys(p):ra(p)}if(t!==null){let l=s?t.residualClasses:t.residualStyles;l!=null&&(a=Ad(l,r))}return a}function dh(n){return n!==void 0}function pF(n,t){return n==null||n===""||(typeof t=="string"?n=n+t:typeof n=="object"&&(n=si(pi(n)))),n}function gF(n,t){return(n.flags&(t?8:16))!==0}function G(n,t=""){let e=Me(),r=jt(),i=n+Ct,s=r.firstCreatePass?Xl(r,i,1,t,null):r.data[i],o=mF(r,e,s,t,n);e[i]=o,Bd()&&Oy(r,e,o,s),qo(s,!1)}var mF=(n,t,e,r,i)=>(Ll(!0),$P(t[st],r));function vF(n,t,e,r=""){return cr(n,Hs(),e)?t+Dd(e)+r:Ar}function Xe(n){return Wn("",n),Xe}function Wn(n,t,e){let r=Me(),i=vF(r,n,t,e);return i!==Ar&&yF(r,Wi(),i),Wn}function yF(n,t,e){let r=rv(t,n);zP(n[st],r,e)}function Zt(n,t,e){_v(t)&&(t=t());let r=Me(),i=Hs();if(cr(r,i,t)){let s=jt(),o=Fd();BD(o,r,n,t,r[st],e)}return Zt}function rn(n,t){let e=_v(n);return e&&n.set(t),e}function qt(n,t){let e=Me(),r=jt(),i=Vt();return ES(r,e,e[st],i,n,t),qt}function bF(n,t,e){let r=jt();if(r.firstCreatePass){let i=Dr(n);hy(e,r.data,r.blueprint,i,!0),hy(t,r.data,r.blueprint,i,!1)}}function hy(n,t,e,r,i){if(n=Ft(n),Array.isArray(n))for(let s=0;s<n.length;s++)hy(n[s],t,e,r,i);else{let s=jt(),o=Me(),a=Vt(),l=Ms(n)?n:Ft(n.provide),c=Qm(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ms(n)||!n.multi){let f=new $s(c,i,de,null),p=Pv(l,t,i?u:u+h,d);p===-1?(Lv(qd(a,o),s,l),Nv(s,n,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(f),o.push(f)):(e[p]=f,o[p]=f)}else{let f=Pv(l,t,u+h,d),p=Pv(l,t,u,u+h),g=f>=0&&e[f],m=p>=0&&e[p];if(i&&!m||!i&&!g){Lv(qd(a,o),s,l);let v=EF(i?CF:_F,e.length,i,r,c,n);!i&&m&&(e[p].providerFactory=v),Nv(s,n,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),e.push(v),o.push(v)}else{let v=xS(e[i?p:f],c,!i&&r);Nv(s,n,f>-1?f:p,v)}!i&&r&&m&&e[p].componentProviders++}}}function Nv(n,t,e,r){let i=Ms(t),s=kx(t);if(i||s){let l=(s?Ft(t.useClass):t).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&t.multi){let u=c.indexOf(e);u===-1?c.push(e,[r,l]):c[u+1].push(r,l)}else c.push(e,l)}}}function xS(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function Pv(n,t,e,r){for(let i=e;i<r;i++)if(t[i]===n)return i;return-1}function _F(n,t,e,r,i){return fy(this.multi,[])}function CF(n,t,e,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Qd(r,r[pe],this.providerFactory.index,i);o=l.slice(0,a),fy(s,o);for(let c=a;c<l.length;c++)o.push(l[c])}else o=[],fy(s,o);return o}function fy(n,t){for(let e=0;e<n.length;e++){let r=n[e];t.push(r())}return t}function EF(n,t,e,r,i,s){let o=new $s(n,e,de,null);return o.multi=[],o.index=t,o.componentProviders=0,xS(o,i,r&&!e),o}function yi(n,t=[]){return e=>{e.providersResolver=(r,i)=>bF(r,i?i(n):n,t)}}function nb(n,t,e,r){return xF(Me(),Nd(),n,t,e,r)}function rb(n,t,e,r,i){return wF(Me(),Nd(),n,t,e,r,i)}function ib(n,t,e,r,i,s){return DF(Me(),Nd(),n,t,e,r,i,s)}function sb(n,t){let e=n[t];return e===Ar?void 0:e}function xF(n,t,e,r,i,s){let o=t+e;return cr(n,o,i)?Gy(n,o+1,s?r.call(s,i):r(i)):sb(n,o+1)}function wF(n,t,e,r,i,s,o){let a=t+e;return oS(n,a,i,s)?Gy(n,a+2,o?r.call(o,i,s):r(i,s)):sb(n,a+2)}function DF(n,t,e,r,i,s,o,a){let l=t+e;return oL(n,l,i,s,o)?Gy(n,l+3,a?r.call(a,i,s,o):r(i,s,o)):sb(n,l+3)}function Ph(n,t){return QD(n,t)}var hh=class{ngModuleFactory;componentFactories;constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},ob=(()=>{class n{compileModuleSync(e){return new ih(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let r=this.compileModuleSync(e),i=Xm(e),s=SD(i.declarations).reduce((o,a)=>{let l=ai(a);return l&&o.push(new Gs(l)),o},[]);return new hh(r,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SF=(()=>{class n{zone=z(ot);changeDetectionScheduler=z(Hi);applicationRef=z(Rr);applicationErrorHandler=z($n);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(e){this.applicationErrorHandler(e)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),wS=new se("",{factory:()=>!1});function ab({ngZoneFactory:n,ignoreChangesOutsideZone:t,scheduleInRootZone:e}){return n??=()=>new ot(ce(H({},cb()),{scheduleInRootZone:e})),[{provide:ot,useFactory:n},{provide:oi,multi:!0,useFactory:()=>{let r=z(SF,{optional:!0});return()=>r.initialize()}},{provide:oi,multi:!0,useFactory:()=>{let r=z(TF);return()=>{r.initialize()}}},t===!0?{provide:Cv,useValue:!0}:[],{provide:Ev,useValue:e??fS},{provide:$n,useFactory:()=>{let r=z(ot),i=z(Rt),s;return o=>{r.runOutsideAngular(()=>{i.destroyed&&!s?setTimeout(()=>{throw o}):(s??=i.get(rr),s.handleError(o))})}}}]}function lb(n){let t=n?.ignoreChangesOutsideZone,e=n?.scheduleInRootZone,r=ab({ngZoneFactory:()=>{let i=cb(n);return i.scheduleInRootZone=e,i.shouldCoalesceEventChangeDetection&&dr("NgZone_CoalesceEvent"),new ot(i)},ignoreChangesOutsideZone:t,scheduleInRootZone:e});return Ns([{provide:wS,useValue:!0},{provide:Qo,useValue:!1},r])}function cb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TF=(()=>{class n{subscription=new bt;initialized=!1;zone=z(ot);pendingTasks=z(di);initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ot.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var DS=(()=>{class n{applicationErrorHandler=z($n);appRef=z(Rr);taskService=z(di);ngZone=z(ot);zonelessEnabled=z(Qo);tracing=z(Zs,{optional:!0});disableScheduling=z(Cv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new bt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(oh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(Ev,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ah||!this.zoneIsDefined)}notify(e){if(!this.zonelessEnabled&&e===5)return;let r=!1;switch(e){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Lw:pS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(e){return!(this.disableScheduling&&!e||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(oh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let e=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(e),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Lw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(e)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let e=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(e)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AF(){return typeof $localize<"u"&&$localize.locale||Ql}var kh=new se("",{providedIn:"root",factory:()=>z(kh,{optional:!0,skipSelf:!0})||AF()});function Qt(n){return Cx(n)}function Jl(n,t){return Xu(n,t?.equal)}var SS=class{[Xt];constructor(t){this[Xt]=t}destroy(){this[Xt].destroy()}};var OS=Symbol("InputSignalNode#UNSET"),YF=ce(H({},Ku),{transformFn:void 0,applyValueToInputSignal(n,t){Mo(n,t)}});function NS(n,t){let e=Object.create(YF);e.value=n,e.transformFn=t?.transform;function r(){if(To(e),e.value===OS){let i=null;throw new oe(-950,i)}return e.value}return r[Xt]=e,r}var XF=new se("");XF.__NG_ELEMENT_ID__=n=>{let t=Vt();if(t===null)throw new oe(204,!1);if(t.type&2)return t.value;if(n&8)return null;throw new oe(204,!1)};function TS(n,t){return NS(n,t)}function KF(n){return NS(OS,n)}var PS=(TS.required=KF,TS);var ub=new se(""),ZF=new se("");function ec(n){return!n.moduleRef}function qF(n){let t=ec(n)?n.r3Injector:n.moduleRef.injector,e=t.get(ot);return e.run(()=>{ec(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=t.get($n),i;if(e.runOutsideAngular(()=>{i=e.onError.subscribe({next:r})}),ec(n)){let s=()=>t.destroy(),o=n.platformInjector.get(ub);o.add(s),t.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(ub);o.add(s),n.moduleRef.onDestroy(()=>{jl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return JF(r,e,()=>{let s=t.get(di),o=s.add(),a=t.get(Qy);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(kh,Ql);if(CS(l||Ql),!t.get(ZF,!0))return ec(n)?t.get(Rr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(ec(n)){let u=t.get(Rr);return n.rootComponent!==void 0&&u.bootstrap(n.rootComponent),u}else return QF?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var QF;function JF(n,t,e){try{let r=e();return Ki(r)?r.catch(i=>{throw t.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>n(r)),r}}var Lh=null;function e2(n=[],t){return nn.create({name:t,providers:[{provide:Tl,useValue:"platform"},{provide:ub,useValue:new Set([()=>Lh=null])},...n]})}function t2(n=[]){if(Lh)return Lh;let t=e2(n);return Lh=t,yS(),n2(t),t}function n2(n){let t=n.get(gh,null);Kt(n,()=>{t?.forEach(e=>e())})}var Zi=(()=>{class n{static __NG_ELEMENT_ID__=r2}return n})();function r2(n){return i2(Vt(),Me(),(n&16)===16)}function i2(n,t,e){if(Gi(n)&&!e){let r=Hn(n.index,t);return new Xi(r,r)}else if(n.type&175){let r=t[wn];return new Xi(r,t)}return null}var db=class{constructor(){}supports(t){return zy(t)}create(t){return new hb(t)}},s2=(n,t)=>t,hb=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||s2}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,i=0,s=null;for(;e||r;){let o=!r||e&&e.currentIndex<AS(r,i,s)?e:r,a=AS(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(e=e._next,o.previousIndex==null)i++;else{s||(s=[]);let c=a-i,u=l-i;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!zy(t))throw new oe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,r=!1,i,s,o;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,s,o,a),r=!0):(r&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)),e=e._next}else i=0,iS(t,a=>{o=this._trackByFn(i,a),e===null||!Object.is(e.trackById,o)?(e=this._mismatch(e,a,o,i),r=!0):(r&&(e=this._verifyReinsertion(e,a,o,i)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,i++}),this.length=i;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,i){let s;return t===null?s=this._itTail:(s=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,i)):t=this._addAfter(new fb(e,r),s,i)),t}_verifyReinsertion(t,e,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?t=this._reinsertAfter(s,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,s=t._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){let i=e===null?this._itHead:e._next;return t._next=i,t._prev=e,i===null?this._itTail=t:i._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new Fh),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,r=t._next;return e===null?this._itHead=r:e._next=r,r===null?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fh),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},fb=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,e){this.item=t,this.trackById=e}},pb=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;r!==null;r=r._nextDup)if((e===null||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let e=t._prevDup,r=t._nextDup;return e===null?this._head=r:e._nextDup=r,r===null?this._tail=e:r._prevDup=e,this._head===null}},Fh=class{map=new Map;put(t){let e=t.trackById,r=this.map.get(e);r||(r=new pb,this.map.set(e,r)),r.add(t)}get(t,e){let r=t,i=this.map.get(r);return i?i.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function AS(n,t,e){let r=n.previousIndex;if(r===null)return r;let i=0;return e&&r<e.length&&(i=e[r]),r+t+i}function IS(){return new gb([new db])}var gb=(()=>{class n{factories;static \u0275prov=re({token:n,providedIn:"root",factory:IS});constructor(e){this.factories=e}static create(e,r){if(r!=null){let i=r.factories.slice();e=e.concat(i)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||IS()),deps:[[n,new Ww,new py]]}}find(e){let r=this.factories.find(i=>i.supports(e));if(r!=null)return r;throw new oe(901,!1)}}return n})();function kS(n){Ye(8);try{let{rootComponent:t,appProviders:e,platformProviders:r}=n,i=t2(r),s=[ab({}),{provide:Hi,useExisting:DS},uw,...e||[]],o=new $l({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return qF({r3Injector:o.injector,platformInjector:i,rootComponent:t})}catch(t){return Promise.reject(t)}finally{Ye(9)}}function Bh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function LS(n){let t=ai(n);if(!t)return null;let e=new Gs(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var jS=null;function Yn(){return jS}function mb(n){jS??=n}var tc=class{},nc=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z(VS),providedIn:"platform"})}return n})(),vb=new se(""),VS=(()=>{class n extends nc{_location;_history;_doc=z(mt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(e){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,r,i){this._history.pushState(e,r,i)}replaceState(e,r,i){this._history.replaceState(e,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function jh(n,t){return n?t?n.endsWith("/")?t.startsWith("/")?n+t.slice(1):n+t:t.startsWith("/")?n+t:`${n}/${t}`:n:t}function FS(n){let t=n.search(/#|\?|$/);return n[t-1]==="/"?n.slice(0,t-1)+n.slice(t):n}function hr(n){return n&&n[0]!=="?"?`?${n}`:n}var _i=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z(Hh),providedIn:"root"})}return n})(),Vh=new se(""),Hh=(()=>{class n extends _i{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return jh(this._baseHref,e)}path(e=!1){let r=this._platformLocation.pathname+hr(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${r}${i}`:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+hr(s));this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+hr(s));this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(he(nc),he(Vh,8))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qi=(()=>{class n{_subject=new Mt;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let r=this._locationStrategy.getBaseHref();this._basePath=l2(FS(BS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+hr(r))}normalize(e){return n.stripTrailingSlash(a2(this._basePath,BS(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,r="",i=null){this._locationStrategy.pushState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hr(r)),i)}replaceState(e,r="",i=null){this._locationStrategy.replaceState(i,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+hr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(i=>i(e,r))}subscribe(e,r,i){return this._subject.subscribe({next:e,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=hr;static joinWithSlash=jh;static stripTrailingSlash=FS;static \u0275fac=function(r){return new(r||n)(he(_i))};static \u0275prov=re({token:n,factory:()=>o2(),providedIn:"root"})}return n})();function o2(){return new qi(he(_i))}function a2(n,t){if(!n||!t.startsWith(n))return t;let e=t.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function BS(n){return n.replace(/\/index.html$/,"")}function l2(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}var bb=(()=>{class n extends _i{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,r){super(),this._platformLocation=e,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(e){let r=jh(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,i,s){let o=this.prepareExternalUrl(i+hr(s))||this._platformLocation.pathname;this._platformLocation.pushState(e,r,o)}replaceState(e,r,i,s){let o=this.prepareExternalUrl(i+hr(s))||this._platformLocation.pathname;this._platformLocation.replaceState(e,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(r){return new(r||n)(he(nc),he(Vh,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();var yb=/\s+/,HS=[],qs=(()=>{class n{_ngEl;_renderer;initialClasses=HS;rawClass;stateMap=new Map;constructor(e,r){this._ngEl=e,this._renderer=r}set klass(e){this.initialClasses=e!=null?e.trim().split(yb):HS}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(yb):e}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let r of e)this._updateState(r,!0);else if(e!=null)for(let r of Object.keys(e))this._updateState(r,!!e[r]);this._applyStateDiff()}_updateState(e,r){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(e,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let r=e[0],i=e[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(e,r){e=e.trim(),e.length>0&&e.split(yb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(de(Sn),de(Ir))};static \u0275dir=at({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var Uh=class{$implicit;ngForOf;index;count;constructor(t,e,r,i){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},la=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,r,i){this._viewContainer=e,this._template=r,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let r=this._viewContainer;e.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Uh(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),US(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);US(s,i)})}static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(de(Ks),de(Yl),de(gb))};static \u0275dir=at({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function US(n,t){n.context.$implicit=t.item}var fr=(()=>{class n{_viewContainer;_context=new $h;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,r){this._viewContainer=e,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){$S(e,!1),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){$S(e,!1),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,r){return!0}static \u0275fac=function(r){return new(r||n)(de(Ks),de(Yl))};static \u0275dir=at({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),$h=class{$implicit=null;ngIf=null};function $S(n,t){if(n&&!n.createEmbeddedView)throw new oe(2020,!1)}var gn=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=ir({})}return n})();function _b(n,t){t=encodeURIComponent(t);for(let e of n.split(";")){let r=e.indexOf("="),[i,s]=r==-1?[e,""]:[e.slice(0,r),e.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}var rc=class{};var GS="browser";var WS=(()=>{class n{static \u0275prov=re({token:n,providedIn:"root",factory:()=>new Cb(z(mt),window)})}return n})(),Cb=class{document;window;offset=()=>[0,0];constructor(t,e){this.document=t,this.window=e}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t,e){this.window.scrollTo(ce(H({},e),{left:t[0],top:t[1]}))}scrollToAnchor(t,e){let r=c2(this.document,t);r&&(this.scrollToElement(r,e),r.focus())}setHistoryScrollRestoration(t){try{this.window.history.scrollRestoration=t}catch{console.warn(Ui(2400,!1))}}scrollToElement(t,e){let r=t.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ce(H({},e),{left:i-o[0],top:s-o[1]}))}};function c2(n,t){let e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}i=r.nextNode()}}return null}var Gh=new se(""),Sb=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(e,r){this._zone=r,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,r,i,s){return this._findPluginFor(r).addEventListener(e,r,i,s)}getZone(){return this._zone}_findPluginFor(e){let r=this._eventNameToPlugin.get(e);if(r)return r;if(r=this._plugins.find(s=>s.supports(e)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(e,r),r}static \u0275fac=function(r){return new(r||n)(he(Gh),he(ot))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),ic=class{_doc;constructor(t){this._doc=t}manager},Eb="ng-app-id";function YS(n){for(let t of n)t.remove()}function XS(n,t){let e=t.createElement("style");return e.textContent=n,e}function u2(n,t,e,r){let i=n.head?.querySelectorAll(`style[${Eb}="${t}"],link[${Eb}="${t}"]`);if(i)for(let s of i)s.removeAttribute(Eb),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&e.set(s.textContent,{usage:0,elements:[s]})}function wb(n,t){let e=t.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href",n),e}var Tb=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(e,r,i,s={}){this.doc=e,this.appId=r,this.nonce=i,u2(e,r,this.inline,this.external),this.hosts.add(e.head)}addStyles(e,r){for(let i of e)this.addUsage(i,this.inline,XS);r?.forEach(i=>this.addUsage(i,this.external,wb))}removeStyles(e,r){for(let i of e)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(e,r,i){let s=r.get(e);s?s.usage++:r.set(e,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(e,this.doc)))})}removeUsage(e,r){let i=r.get(e);i&&(i.usage--,i.usage<=0&&(YS(i.elements),r.delete(e)))}ngOnDestroy(){for(let[,{elements:e}]of[...this.inline,...this.external])YS(e);this.hosts.clear()}addHost(e){this.hosts.add(e);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(e,XS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(e,wb(r,this.doc)))}removeHost(e){this.hosts.delete(e)}addElement(e,r){return this.nonce&&r.setAttribute("nonce",this.nonce),e.appendChild(r)}static \u0275fac=function(r){return new(r||n)(he(mt),he(ph),he(mh,8),he(sa))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),xb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ab=/%COMP%/g;var ZS="%COMP%",d2=`_nghost-${ZS}`,h2=`_ngcontent-${ZS}`,f2=!0,p2=new se("",{providedIn:"root",factory:()=>f2});function g2(n){return h2.replace(Ab,n)}function m2(n){return d2.replace(Ab,n)}function qS(n,t){return t.map(e=>e.replace(Ab,n))}var Ib=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(e,r,i,s,o,a,l,c=null,u,d,h=null){this.eventManager=e,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.animationDisabled=u,this.maxAnimationTimeout=d,this.tracingService=h,this.platformIsServer=!1,this.defaultRenderer=new sc(e,o,l,this.platformIsServer,this.tracingService,this.registry=jd(),this.maxAnimationTimeout)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(e,r);return i instanceof zh?i.applyToHost(e):i instanceof oc&&i.applyStyles(),i}getOrCreateRenderer(e,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer,h=this.tracingService;switch(r.encapsulation){case hi.Emulated:s=new zh(l,c,r,this.appId,u,o,a,d,h,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case hi.ShadowDom:return new Db(l,c,e,r,o,a,this.nonce,d,h,this.registry,this.maxAnimationTimeout);default:s=new oc(l,c,r,u,o,a,d,h,this.registry,this.animationDisabled,this.maxAnimationTimeout);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(e){this.rendererByCompId.delete(e)}static \u0275fac=function(r){return new(r||n)(he(Sb),he(Tb),he(ph),he(p2),he(mt),he(sa),he(ot),he(mh),he(Jy),he(eb),he(Zs,8))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),sc=class{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,e,r,i,s,o,a){this.eventManager=t,this.doc=e,this.ngZone=r,this.platformIsServer=i,this.tracingService=s,this.registry=o,this.maxAnimationTimeout=a}destroy(){}destroyNode=null;createElement(t,e){return e?this.doc.createElementNS(xb[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(KS(t)?t.content:t).appendChild(e)}insertBefore(t,e,r){t&&(KS(t)?t.content:t).insertBefore(e,r)}removeChild(t,e){let{elements:r}=this.registry;if(r){r.animate(e,()=>e.remove(),this.maxAnimationTimeout);return}e.remove()}selectRootElement(t,e){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new oe(-5104,!1);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,i){if(i){e=i+":"+e;let s=xb[i];s?t.setAttributeNS(s,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){let i=xb[r];i?t.removeAttributeNS(i,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,i){i&(Tr.DashCase|Tr.Important)?t.style.setProperty(e,r,i&Tr.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Tr.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t!=null&&(t[e]=r)}setValue(t,e){t.nodeValue=e}listen(t,e,r,i){if(typeof t=="string"&&(t=Yn().getGlobalEventTarget(this.doc,t),!t))throw new oe(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(t,e,s)),this.eventManager.addEventListener(t,e,s,i)}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;t(e)===!1&&e.preventDefault()}}};function KS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Db=class extends sc{sharedStylesHost;hostEl;shadowRoot;constructor(t,e,r,i,s,o,a,l,c,u,d){super(t,s,o,l,c,u,d),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=qS(i.id,h);for(let p of h){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=p,this.shadowRoot.appendChild(g)}let f=i.getExternalStyles?.();if(f)for(let p of f){let g=wb(p,s);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(null,e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oc=class extends sc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(t,e,r,i,s,o,a,l,c,u,d,h){super(t,s,o,a,l,c,d),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this._animationDisabled=u;let f=r.styles;this.styles=h?qS(h,f):f,this.styleUrls=r.getExternalStyles?.(h)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});return}this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}},zh=class extends oc{contentAttr;hostAttr;constructor(t,e,r,i,s,o,a,l,c,u,d,h){let f=i+"-"+r.id;super(t,e,r,s,o,a,l,c,u,d,h,f),this.contentAttr=g2(f),this.hostAttr=m2(f)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}};var Wh=class n extends tc{supportsDOMEvents=!0;static makeCurrent(){mb(new n)}onAndCancel(t,e,r,i){return t.addEventListener(e,r,i),()=>{t.removeEventListener(e,r,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.remove()}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=v2();return e==null?null:y2(e)}resetBaseElement(){ac=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return _b(document.cookie,t)}},ac=null;function v2(){return ac=ac||document.head.querySelector("base"),ac?ac.getAttribute("href"):null}function y2(n){return new URL(n,document.baseURI).pathname}var b2=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),JS=(()=>{class n extends ic{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,i,s){return e.addEventListener(r,i,s),()=>this.removeEventListener(e,r,i,s)}removeEventListener(e,r,i,s){return e.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(he(mt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),QS=["alt","control","meta","shift"],_2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},C2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},eT=(()=>{class n extends ic{constructor(e){super(e)}supports(e){return n.parseEventName(e)!=null}addEventListener(e,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(e,o.domEventName,a,s))}static parseEventName(e){let r=e.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),QS.forEach(c=>{let u=r.indexOf(c);u>-1&&(r.splice(u,1),o+=c+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,r){let i=_2[e.key]||e.key,s="";return r.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),QS.forEach(o=>{if(o!==i){let a=C2[o];a(e)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(e,r,i){return s=>{n.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>r(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static \u0275fac=function(r){return new(r||n)(he(mt))};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function Mb(n,t){let e=H({rootComponent:n},E2(t));return kS(e)}function E2(n){return{appProviders:[...T2,...n?.providers??[]],platformProviders:S2}}function x2(){Wh.makeCurrent()}function w2(){return new rr}function D2(){return vy(document),document}var S2=[{provide:sa,useValue:GS},{provide:gh,useValue:x2,multi:!0},{provide:mt,useFactory:D2}];var T2=[{provide:Tl,useValue:"root"},{provide:rr,useFactory:w2},{provide:Gh,useClass:JS,multi:!0,deps:[mt]},{provide:Gh,useClass:eT,multi:!0,deps:[mt]},Ib,Tb,Sb,{provide:zs,useExisting:Ib},{provide:rc,useClass:b2},[]];var tT=(()=>{class n{_doc;constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static \u0275fac=function(r){return new(r||n)(he(mt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rb=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=he(A2),i},providedIn:"root"})}return n})(),A2=(()=>{class n extends Rb{_doc;constructor(e){super(),this._doc=e}sanitize(e,r){if(r==null)return null;switch(e){case mi.NONE:return r;case mi.HTML:return Xs(r,"HTML")?pi(r):Dy(this._doc,String(r)).toString();case mi.STYLE:return Xs(r,"Style")?pi(r):r;case mi.SCRIPT:if(Xs(r,"Script"))return pi(r);throw new oe(5200,!1);case mi.URL:return Xs(r,"URL")?pi(r):bh(String(r));case mi.RESOURCE_URL:if(Xs(r,"ResourceURL"))return pi(r);throw new oe(5201,!1);default:throw new oe(5202,!1)}}bypassSecurityTrustHtml(e){return _y(e)}bypassSecurityTrustStyle(e){return Cy(e)}bypassSecurityTrustScript(e){return Ey(e)}bypassSecurityTrustUrl(e){return xy(e)}bypassSecurityTrustResourceUrl(e){return wy(e)}static \u0275fac=function(r){return new(r||n)(he(mt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function uc(n){return n+.5|0}var Qi=(n,t,e)=>Math.max(Math.min(n,e),t);function lc(n){return Qi(uc(n*2.55),0,255)}function Ji(n){return Qi(uc(n*255),0,255)}function Ci(n){return Qi(uc(n/2.55)/100,0,1)}function rT(n){return Qi(uc(n*100),0,100)}var Xn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nb=[..."0123456789ABCDEF"],I2=n=>Nb[n&15],M2=n=>Nb[(n&240)>>4]+Nb[n&15],Yh=n=>(n&240)>>4===(n&15),R2=n=>Yh(n.r)&&Yh(n.g)&&Yh(n.b)&&Yh(n.a);function O2(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&Xn[n[1]]*17,g:255&Xn[n[2]]*17,b:255&Xn[n[3]]*17,a:t===5?Xn[n[4]]*17:255}:(t===7||t===9)&&(e={r:Xn[n[1]]<<4|Xn[n[2]],g:Xn[n[3]]<<4|Xn[n[4]],b:Xn[n[5]]<<4|Xn[n[6]],a:t===9?Xn[n[7]]<<4|Xn[n[8]]:255})),e}var N2=(n,t)=>n<255?t(n):"";function P2(n){var t=R2(n)?I2:M2;return n?"#"+t(n.r)+t(n.g)+t(n.b)+N2(n.a,t):void 0}var k2=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function aT(n,t,e){let r=t*Math.min(e,1-e),i=(s,o=(s+n/30)%12)=>e-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function L2(n,t,e){let r=(i,s=(i+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function F2(n,t,e){let r=aT(n,1,.5),i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function B2(n,t,e,r,i){return n===i?(t-e)/r+(t<e?6:0):t===i?(e-n)/r+2:(n-t)/r+4}function Pb(n){let e=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(e,r,i),o=Math.min(e,r,i),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=B2(e,r,i,u,s),l=l*60+.5),[l|0,c||0,a]}function kb(n,t,e,r){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,r)).map(Ji)}function Lb(n,t,e){return kb(aT,n,t,e)}function j2(n,t,e){return kb(F2,n,t,e)}function V2(n,t,e){return kb(L2,n,t,e)}function lT(n){return(n%360+360)%360}function H2(n){let t=k2.exec(n),e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?lc(+t[5]):Ji(+t[5]));let i=lT(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?r=j2(i,s,o):t[1]==="hsv"?r=V2(i,s,o):r=Lb(i,s,o),{r:r[0],g:r[1],b:r[2],a:e}}function U2(n,t){var e=Pb(n);e[0]=lT(e[0]+t),e=Lb(e),n.r=e[0],n.g=e[1],n.b=e[2]}function $2(n){if(!n)return;let t=Pb(n),e=t[0],r=rT(t[1]),i=rT(t[2]);return n.a<255?`hsla(${e}, ${r}%, ${i}%, ${Ci(n.a)})`:`hsl(${e}, ${r}%, ${i}%)`}var iT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},sT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function z2(){let n={},t=Object.keys(sT),e=Object.keys(iT),r,i,s,o,a;for(r=0;r<t.length;r++){for(o=a=t[r],i=0;i<e.length;i++)s=e[i],a=a.replace(s,iT[s]);s=parseInt(sT[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Xh;function G2(n){Xh||(Xh=z2(),Xh.transparent=[0,0,0,0]);let t=Xh[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var W2=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Y2(n){let t=W2.exec(n),e=255,r,i,s;if(t){if(t[7]!==r){let o=+t[7];e=t[8]?lc(o):Qi(o*255,0,255)}return r=+t[1],i=+t[3],s=+t[5],r=255&(t[2]?lc(r):Qi(r,0,255)),i=255&(t[4]?lc(i):Qi(i,0,255)),s=255&(t[6]?lc(s):Qi(s,0,255)),{r,g:i,b:s,a:e}}}function X2(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Ci(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Ob=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ua=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function K2(n,t,e){let r=ua(Ci(n.r)),i=ua(Ci(n.g)),s=ua(Ci(n.b));return{r:Ji(Ob(r+e*(ua(Ci(t.r))-r))),g:Ji(Ob(i+e*(ua(Ci(t.g))-i))),b:Ji(Ob(s+e*(ua(Ci(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Kh(n,t,e){if(n){let r=Pb(n);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Lb(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function cT(n,t){return n&&Object.assign(t||{},n)}function oT(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=Ji(n[3]))):(t=cT(n,{r:0,g:0,b:0,a:1}),t.a=Ji(t.a)),t}function Z2(n){return n.charAt(0)==="r"?Y2(n):H2(n)}var cc=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,r;e==="object"?r=oT(t):e==="string"&&(r=O2(t)||G2(t)||Z2(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=cT(this._rgb);return t&&(t.a=Ci(t.a)),t}set rgb(t){this._rgb=oT(t)}rgbString(){return this._valid?X2(this._rgb):void 0}hexString(){return this._valid?P2(this._rgb):void 0}hslString(){return this._valid?$2(this._rgb):void 0}mix(t,e){if(t){let r=this.rgb,i=t.rgb,s,o=e===s?.5:e,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=K2(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=Ji(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=uc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Kh(this._rgb,2,t),this}darken(t){return Kh(this._rgb,2,-t),this}saturate(t){return Kh(this._rgb,1,t),this}desaturate(t){return Kh(this._rgb,1,-t),this}rotate(t){return U2(this._rgb,t),this}};function Fr(){}var _T=(()=>{let n=0;return()=>n++})();function Ae(n){return n==null}function Je(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Re(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ut(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function mn(n,t){return ut(n)?n:t}function be(n,t){return typeof n>"u"?t:n}var CT=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,Vb=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ze(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function We(n,t,e,r){let i,s,o;if(Je(n))if(s=n.length,r)for(i=s-1;i>=0;i--)t.call(e,n[i],i);else for(i=0;i<s;i++)t.call(e,n[i],i);else if(Re(n))for(o=Object.keys(n),s=o.length,i=0;i<s;i++)t.call(e,n[o[i]],o[i])}function fc(n,t){let e,r,i,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,r=n.length;e<r;++e)if(i=n[e],s=t[e],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ef(n){if(Je(n))return n.map(ef);if(Re(n)){let t=Object.create(null),e=Object.keys(n),r=e.length,i=0;for(;i<r;++i)t[e[i]]=ef(n[e[i]]);return t}return n}function ET(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function q2(n,t,e,r){if(!ET(n))return;let i=t[n],s=e[n];Re(i)&&Re(s)?ha(i,s,r):t[n]=ef(s)}function ha(n,t,e){let r=Je(t)?t:[t],i=r.length;if(!Re(n))return n;e=e||{};let s=e.merger||q2,o;for(let a=0;a<i;++a){if(o=r[a],!Re(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,e)}return n}function pa(n,t){return ha(n,t,{merger:Q2})}function Q2(n,t,e){if(!ET(n))return;let r=t[n],i=e[n];Re(r)&&Re(i)?pa(r,i):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=ef(i))}var uT={"":n=>n,x:n=>n.x,y:n=>n.y};function J2(n){let t=n.split("."),e=[],r="";for(let i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function eB(n){let t=J2(n);return e=>{for(let r of t){if(r==="")break;e=e&&e[r]}return e}}function wi(n,t){return(uT[t]||(uT[t]=eB(t)))(n)}function sf(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ga=n=>typeof n<"u",Ei=n=>typeof n=="function",Hb=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function xT(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Ve=Math.PI,et=2*Ve,tB=et+Ve,tf=Number.POSITIVE_INFINITY,nB=Ve/180,ht=Ve/2,Qs=Ve/4,dT=Ve*2/3,xi=Math.log10,pr=Math.sign;function ma(n,t,e){return Math.abs(n-t)<e}function Ub(n){let t=Math.round(n);n=ma(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(xi(n))),r=n/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function wT(n){let t=[],e=Math.sqrt(n),r;for(r=1;r<e;r++)n%r===0&&(t.push(r),t.push(n/r));return e===(e|0)&&t.push(e),t.sort((i,s)=>i-s).pop(),t}function rB(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function to(n){return!rB(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function DT(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function $b(n,t,e){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Kn(n){return n*(Ve/180)}function of(n){return n*(180/Ve)}function zb(n){if(!ut(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function Gb(n,t){let e=t.x-n.x,r=t.y-n.y,i=Math.sqrt(e*e+r*r),s=Math.atan2(r,e);return s<-.5*Ve&&(s+=et),{angle:s,distance:i}}function nf(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function iB(n,t){return(n-t+tB)%et-Ve}function Ut(n){return(n%et+et)%et}function va(n,t,e,r){let i=Ut(n),s=Ut(t),o=Ut(e),a=Ut(s-i),l=Ut(o-i),c=Ut(i-s),u=Ut(i-o);return i===s||i===o||r&&s===o||a>l&&c<u}function Ot(n,t,e){return Math.max(t,Math.min(e,n))}function ST(n){return Ot(n,-32768,32767)}function Br(n,t,e,r=1e-6){return n>=Math.min(t,e)-r&&n<=Math.max(t,e)+r}function af(n,t,e){e=e||(o=>n[o]<t);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,e(s)?i=s:r=s;return{lo:i,hi:r}}var kr=(n,t,e,r)=>af(n,e,r?i=>{let s=n[i][t];return s<e||s===e&&n[i+1][t]===e}:i=>n[i][t]<e),TT=(n,t,e)=>af(n,e,r=>n[r][t]>=e);function AT(n,t,e){let r=0,i=n.length;for(;r<i&&n[r]<t;)r++;for(;i>r&&n[i-1]>e;)i--;return r>0||i<n.length?n.slice(r,i):n}var IT=["push","pop","shift","splice","unshift"];function MT(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),IT.forEach(e=>{let r="_onData"+sf(e),i=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let o=i.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function Wb(n,t){let e=n._chartjs;if(!e)return;let r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(IT.forEach(s=>{delete n[s]}),delete n._chartjs)}function Yb(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var Xb=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function Kb(n,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,Xb.call(window,()=>{r=!1,n.apply(t,e)}))}}function RT(n,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(n,t,r)):n.apply(this,r),t}}var lf=n=>n==="start"?"left":n==="end"?"right":"center",$t=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,OT=(n,t,e,r)=>n===(r?"left":"right")?e:n==="center"?(t+e)/2:t;function Zb(n,t,e){let r=t.length,i=0,s=r;if(n._sorted){let{iScale:o,vScale:a,_parsed:l}=n,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=o.axis,{min:d,max:h,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(i=Math.min(kr(l,u,d).lo,e?r:kr(t,u,o.getPixelForValue(d)).lo),c){let g=l.slice(0,i+1).reverse().findIndex(m=>!Ae(m[a.axis]));i-=Math.max(0,g)}i=Ot(i,0,r-1)}if(p){let g=Math.max(kr(l,o.axis,h,!0).hi+1,e?0:kr(t,u,o.getPixelForValue(h),!0).hi+1);if(c){let m=l.slice(g-1).findIndex(v=>!Ae(v[a.axis]));g+=Math.max(0,m)}s=Ot(g,i,r)-i}else s=r-i}return{start:i,count:s}}function qb(n){let{xScale:t,yScale:e,_scaleRanges:r}=n,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return n._scaleRanges=i,!0;let s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),s}var Zh=n=>n===0||n===1,hT=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*et/e)),fT=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*et/e)+1,da={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ht)+1,easeOutSine:n=>Math.sin(n*ht),easeInOutSine:n=>-.5*(Math.cos(Ve*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Zh(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Zh(n)?n:hT(n,.075,.3),easeOutElastic:n=>Zh(n)?n:fT(n,.075,.3),easeInOutElastic(n){return Zh(n)?n:n<.5?.5*hT(n*2,.1125,.45):.5+.5*fT(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-da.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?da.easeInBounce(n*2)*.5:da.easeOutBounce(n*2-1)*.5+.5};function Qb(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Jb(n){return Qb(n)?n:new cc(n)}function Fb(n){return Qb(n)?n:new cc(n).saturate(.5).darken(.1).hexString()}var sB=["x","y","borderWidth","radius","tension"],oB=["color","borderColor","backgroundColor"];function aB(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:oB},numbers:{type:"number",properties:sB}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function lB(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var pT=new Map;function cB(n,t){t=t||{};let e=n+JSON.stringify(t),r=pT.get(e);return r||(r=new Intl.NumberFormat(n,t),pT.set(e,r)),r}function ya(n,t,e){return cB(t,e).format(n)}var NT={values(n){return Je(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let r=this.chart.options.locale,i,s=n;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=uB(n,e)}let o=xi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),ya(n,r,l)},logarithmic(n,t,e){if(n===0)return"0";let r=e[t].significand||n/Math.pow(10,Math.floor(xi(n)));return[1,2,3,5,10,15].includes(r)||t>.8*e.length?NT.numeric.call(this,n,t,e):""}};function uB(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var pc={formatters:NT};function dB(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var ts=Object.create(null),cf=Object.create(null);function dc(n,t){if(!t)return n;let e=t.split(".");for(let r=0,i=e.length;r<i;++r){let s=e[r];n=n[s]||(n[s]=Object.create(null))}return n}function Bb(n,t,e){return typeof t=="string"?ha(dc(n,t),e):ha(dc(n,""),t)}var jb=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>Fb(i.backgroundColor),this.hoverBorderColor=(r,i)=>Fb(i.borderColor),this.hoverColor=(r,i)=>Fb(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Bb(this,t,e)}get(t){return dc(this,t)}describe(t,e){return Bb(cf,t,e)}override(t,e){return Bb(ts,t,e)}route(t,e,r,i){let s=dc(this,t),o=dc(this,r),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[i];return Re(l)?Object.assign({},c,l):be(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},qe=new jb({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[aB,lB,dB]);function hB(n){return!n||Ae(n.size)||Ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function hc(n,t,e,r,i){let s=t[i];return s||(s=t[i]=n.measureText(i).width,e.push(i)),s>r&&(r=s),r}function PT(n,t,e,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),n.save(),n.font=t;let o=0,a=e.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=e[l],d!=null&&!Je(d))o=hc(n,i,s,o,d);else if(Je(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Je(h)&&(o=hc(n,i,s,o,h));n.restore();let f=s.length/2;if(f>e.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return o}function ns(n,t,e){let r=n.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function e0(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function uf(n,t,e,r){t0(n,t,e,r,null)}function t0(n,t,e,r,i){let s,o,a,l,c,u,d,h,f=t.pointStyle,p=t.rotation,g=t.radius,m=(p||0)*nB;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,r),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:i?n.ellipse(e,r,i/2,g,0,0,et):n.arc(e,r,g,0,et),n.closePath();break;case"triangle":u=i?i/2:g,n.moveTo(e+Math.sin(m)*u,r-Math.cos(m)*g),m+=dT,n.lineTo(e+Math.sin(m)*u,r-Math.cos(m)*g),m+=dT,n.lineTo(e+Math.sin(m)*u,r-Math.cos(m)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Qs)*l,d=Math.cos(m+Qs)*(i?i/2-c:l),a=Math.sin(m+Qs)*l,h=Math.sin(m+Qs)*(i?i/2-c:l),n.arc(e-d,r-a,c,m-Ve,m-ht),n.arc(e+h,r-o,c,m-ht,m),n.arc(e+d,r+a,c,m,m+ht),n.arc(e-h,r+o,c,m+ht,m+Ve),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,n.rect(e-u,r-l,2*u,2*l);break}m+=Qs;case"rectRot":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),n.moveTo(e-d,r-a),n.lineTo(e+h,r-o),n.lineTo(e+d,r+a),n.lineTo(e-h,r+o),n.closePath();break;case"crossRot":m+=Qs;case"cross":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),n.moveTo(e-d,r-a),n.lineTo(e+d,r+a),n.moveTo(e+h,r-o),n.lineTo(e-h,r+o);break;case"star":d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),n.moveTo(e-d,r-a),n.lineTo(e+d,r+a),n.moveTo(e+h,r-o),n.lineTo(e-h,r+o),m+=Qs,d=Math.cos(m)*(i?i/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(i?i/2:g),n.moveTo(e-d,r-a),n.lineTo(e+d,r+a),n.moveTo(e+h,r-o),n.lineTo(e-h,r+o);break;case"line":o=i?i/2:Math.cos(m)*g,a=Math.sin(m)*g,n.moveTo(e-o,r-a),n.lineTo(e+o,r+a);break;case"dash":n.moveTo(e,r),n.lineTo(e+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function Lr(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function gc(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function mc(n){n.restore()}function kT(n,t,e,r,i){if(!t)return n.lineTo(e.x,e.y);if(i==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else i==="after"!=!!r?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function LT(n,t,e,r){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function fB(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),Ae(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function pB(n,t,e,r,i){if(i.strikethrough||i.underline){let s=n.measureText(r),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function gB(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function rs(n,t,e,r,i,s={}){let o=Je(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=i.string,fB(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&gB(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ae(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,e,r,s.maxWidth)),n.fillText(c,e,r,s.maxWidth),pB(n,e,r,c,s),r+=Number(i.lineHeight);n.restore()}function ba(n,t){let{x:e,y:r,w:i,h:s,radius:o}=t;n.arc(e+o.topLeft,r+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),n.lineTo(e,r+s-o.bottomLeft),n.arc(e+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Ve,ht,!0),n.lineTo(e+i-o.bottomRight,r+s),n.arc(e+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,ht,0,!0),n.lineTo(e+i,r+o.topRight),n.arc(e+i-o.topRight,r+o.topRight,o.topRight,0,-ht,!0),n.lineTo(e+o.topLeft,r)}var mB=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vB=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yB(n,t){let e=(""+n).match(mB);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var bB=n=>+n||0;function df(n,t){let e={},r=Re(t),i=r?Object.keys(t):t,s=Re(n)?r?o=>be(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of i)e[o]=bB(s(o));return e}function n0(n){return df(n,{top:"y",right:"x",bottom:"y",left:"x"})}function is(n){return df(n,["topLeft","topRight","bottomLeft","bottomRight"])}function zt(n){let t=n0(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function wt(n,t){n=n||{},t=t||qe.font;let e=be(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=be(n.style,t.style);r&&!(""+r).match(vB)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:be(n.family,t.family),lineHeight:yB(be(n.lineHeight,t.lineHeight),e),size:e,style:r,weight:be(n.weight,t.weight),string:""};return i.string=hB(i),i}function _a(n,t,e,r){let i=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),i=!1),e!==void 0&&Je(a)&&(a=a[e%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function FT(n,t,e){let{min:r,max:i}=n,s=Vb(t,(i-r)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Di(n,t){return Object.assign(Object.create(n),t)}function hf(n,t=[""],e,r,i=()=>n[0]){let s=e||n;typeof r>"u"&&(r=VT("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>hf([a,...n],t,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return BT(a,l,()=>TB(l,t,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return mT(a).includes(l)},ownKeys(a){return mT(a)},set(a,l,c){let u=a._storage||(a._storage=i());return a[l]=u[l]=c,delete a._keys,!0}})}function eo(n,t,e,r){let i={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:r0(n,r),setContext:s=>eo(n,s,e,r),override:s=>eo(n.override(s),t,e,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return BT(s,o,()=>CB(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function r0(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=n;return{allKeys:i,scriptable:e,indexable:r,isScriptable:Ei(e)?e:()=>e,isIndexable:Ei(r)?r:()=>r}}var _B=(n,t)=>n?n+sf(t):t,i0=(n,t)=>Re(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function BT(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let r=e();return n[t]=r,r}function CB(n,t,e){let{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=n,a=r[t];return Ei(a)&&o.isScriptable(t)&&(a=EB(t,a,n,e)),Je(a)&&a.length&&(a=xB(t,a,n,o.isIndexable)),i0(t,a)&&(a=eo(a,i,s&&s[t],o)),a}function EB(n,t,e,r){let{_proxy:i,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=t(s,o||r);return a.delete(n),i0(n,l)&&(l=s0(i._scopes,i,n,l)),l}function xB(n,t,e,r){let{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&r(n))return t[s.index%t.length];if(Re(t[0])){let l=t,c=i._scopes.filter(u=>u!==l);t=[];for(let u of l){let d=s0(c,i,n,u);t.push(eo(d,s,o&&o[n],a))}}return t}function jT(n,t,e){return Ei(n)?n(t,e):n}var wB=(n,t)=>n===!0?t:typeof n=="string"?wi(t,n):void 0;function DB(n,t,e,r,i){for(let s of t){let o=wB(e,s);if(o){n.add(o);let a=jT(o._fallback,e,i);if(typeof a<"u"&&a!==e&&a!==r)return a}else if(o===!1&&typeof r<"u"&&e!==r)return null}return!1}function s0(n,t,e,r){let i=t._rootScopes,s=jT(t._fallback,e,r),o=[...n,...i],a=new Set;a.add(r);let l=gT(a,o,e,s||e,r);return l===null||typeof s<"u"&&s!==e&&(l=gT(a,o,s,l,r),l===null)?!1:hf(Array.from(a),[""],i,s,()=>SB(t,e,r))}function gT(n,t,e,r,i){for(;e;)e=DB(n,t,e,r,i);return e}function SB(n,t,e){let r=n._getTarget();t in r||(r[t]={});let i=r[t];return Je(i)&&Re(e)?e:i||{}}function TB(n,t,e,r){let i;for(let s of t)if(i=VT(_B(s,n),e),typeof i<"u")return i0(n,i)?s0(e,r,n,i):i}function VT(n,t){for(let e of t){if(!e)continue;let r=e[n];if(typeof r<"u")return r}}function mT(n){let t=n._keys;return t||(t=n._keys=AB(n._scopes)),t}function AB(n){let t=new Set;for(let e of n)for(let r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}function o0(n,t,e,r){let{iScale:i}=n,{key:s="r"}=this._parsing,o=new Array(r),a,l,c,u;for(a=0,l=r;a<l;++a)c=a+e,u=t[c],o[a]={r:i.parse(wi(u,s),c)};return o}var IB=Number.EPSILON||1e-14,fa=(n,t)=>t<n.length&&!n[t].skip&&n[t],HT=n=>n==="x"?"y":"x";function MB(n,t,e,r){let i=n.skip?t:n,s=t,o=e.skip?t:e,a=nf(s,i),l=nf(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=r*c,h=r*u;return{previous:{x:s.x-d*(o.x-i.x),y:s.y-d*(o.y-i.y)},next:{x:s.x+h*(o.x-i.x),y:s.y+h*(o.y-i.y)}}}function RB(n,t,e){let r=n.length,i,s,o,a,l,c=fa(n,0);for(let u=0;u<r-1;++u)if(l=c,c=fa(n,u+1),!(!l||!c)){if(ma(t[u],0,IB)){e[u]=e[u+1]=0;continue}i=e[u]/t[u],s=e[u+1]/t[u],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[u]=i*o*t[u],e[u+1]=s*o*t[u])}}function OB(n,t,e="x"){let r=HT(e),i=n.length,s,o,a,l=fa(n,0);for(let c=0;c<i;++c){if(o=a,a=l,l=fa(n,c+1),!a)continue;let u=a[e],d=a[r];o&&(s=(u-o[e])/3,a[`cp1${e}`]=u-s,a[`cp1${r}`]=d-s*t[c]),l&&(s=(l[e]-u)/3,a[`cp2${e}`]=u+s,a[`cp2${r}`]=d+s*t[c])}}function NB(n,t="x"){let e=HT(t),r=n.length,i=Array(r).fill(0),s=Array(r),o,a,l,c=fa(n,0);for(o=0;o<r;++o)if(a=l,l=c,c=fa(n,o+1),!!l){if(c){let u=c[t]-l[t];i[o]=u!==0?(c[e]-l[e])/u:0}s[o]=a?c?pr(i[o-1])!==pr(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}RB(n,i,s),OB(n,s,t)}function qh(n,t,e){return Math.max(Math.min(n,e),t)}function PB(n,t){let e,r,i,s,o,a=Lr(n[0],t);for(e=0,r=n.length;e<r;++e)o=s,s=a,a=e<r-1&&Lr(n[e+1],t),s&&(i=n[e],o&&(i.cp1x=qh(i.cp1x,t.left,t.right),i.cp1y=qh(i.cp1y,t.top,t.bottom)),a&&(i.cp2x=qh(i.cp2x,t.left,t.right),i.cp2y=qh(i.cp2y,t.top,t.bottom)))}function UT(n,t,e,r,i){let s,o,a,l;if(t.spanGaps&&(n=n.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")NB(n,i);else{let c=r?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=MB(c,a,n[Math.min(s+1,o-(r?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&PB(n,e)}function ff(){return typeof window<"u"&&typeof document<"u"}function pf(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function rf(n,t,e){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=n,r}var gf=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function kB(n,t){return gf(n).getPropertyValue(t)}var LB=["top","right","bottom","left"];function Js(n,t,e){let r={};e=e?"-"+e:"";for(let i=0;i<4;i++){let s=LB[i];r[s]=parseFloat(n[t+"-"+s+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var FB=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function BB(n,t){let e=n.touches,r=e&&e.length?e[0]:n,{offsetX:i,offsetY:s}=r,o=!1,a,l;if(FB(i,s,n.target))a=i,l=s;else{let c=t.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ss(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:r}=t,i=gf(e),s=i.boxSizing==="border-box",o=Js(i,"padding"),a=Js(i,"border","width"),{x:l,y:c,box:u}=BB(n,e),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*e.width/r),y:Math.round((c-h)/p*e.height/r)}}function jB(n,t,e){let r,i;if(t===void 0||e===void 0){let s=n&&pf(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let o=s.getBoundingClientRect(),a=gf(s),l=Js(a,"border","width"),c=Js(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,r=rf(a.maxWidth,s,"clientWidth"),i=rf(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:r||tf,maxHeight:i||tf}}var Qh=n=>Math.round(n*10)/10;function $T(n,t,e,r){let i=gf(n),s=Js(i,"margin"),o=rf(i.maxWidth,n,"clientWidth")||tf,a=rf(i.maxHeight,n,"clientHeight")||tf,l=jB(n,t,e),{width:c,height:u}=l;if(i.boxSizing==="content-box"){let h=Js(i,"border","width"),f=Js(i,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Qh(Math.min(c,o,l.maxWidth)),u=Qh(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Qh(c/2)),(t!==void 0||e!==void 0)&&r&&l.height&&u>l.height&&(u=l.height,c=Qh(Math.floor(u*r))),{width:c,height:u}}function a0(n,t,e){let r=t||1,i=Math.floor(n.height*r),s=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(n.currentDevicePixelRatio=r,o.height=i,o.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var zT=(function(){let n=!1;try{let t={get passive(){return n=!0,!1}};ff()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n})();function l0(n,t){let e=kB(n,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function es(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function GT(n,t,e,r){return{x:n.x+e*(t.x-n.x),y:r==="middle"?e<.5?n.y:t.y:r==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function WT(n,t,e,r){let i={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=es(n,i,e),a=es(i,s,e),l=es(s,t,e),c=es(o,a,e),u=es(a,l,e);return es(c,u,e)}var VB=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},HB=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function no(n,t,e){return n?VB(t,e):HB()}function c0(n,t){let e,r;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=r)}function u0(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function YT(n){return n==="angle"?{between:va,compare:iB,normalize:Ut}:{between:Br,compare:(t,e)=>t-e,normalize:t=>t}}function vT({start:n,end:t,count:e,loop:r,style:i}){return{start:n%e,end:t%e,loop:r&&(t-n+1)%e===0,style:i}}function UB(n,t,e){let{property:r,start:i,end:s}=e,{between:o,normalize:a}=YT(r),l=t.length,{start:c,end:u,loop:d}=n,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(t[c%l][r]),i,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function d0(n,t,e){if(!e)return[n];let{property:r,start:i,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=YT(r),{start:u,end:d,loop:h,style:f}=UB(n,t,e),p=[],g=!1,m=null,v,y,b,C=()=>l(i,b,v)&&a(i,b)!==0,_=()=>a(s,v)===0||l(s,b,v),E=()=>g||C(),w=()=>!g||_();for(let x=u,S=u;x<=d;++x)y=t[x%o],!y.skip&&(v=c(y[r]),v!==b&&(g=l(v,i,s),m===null&&E()&&(m=a(v,i)===0?x:S),m!==null&&w()&&(p.push(vT({start:m,end:x,loop:h,count:o,style:f})),m=null),S=x,b=v));return m!==null&&p.push(vT({start:m,end:d,loop:h,count:o,style:f})),p}function h0(n,t){let e=[],r=n.segments;for(let i=0;i<r.length;i++){let s=d0(r[i],n.points,t);s.length&&e.push(...s)}return e}function $B(n,t,e,r){let i=0,s=t-1;if(e&&!r)for(;i<t&&!n[i].skip;)i++;for(;i<t&&n[i].skip;)i++;for(i%=t,e&&(s+=i);s>i&&n[s%t].skip;)s--;return s%=t,{start:i,end:s}}function zB(n,t,e,r){let i=n.length,s=[],o=t,a=n[t],l;for(l=t+1;l<=e;++l){let c=n[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:t%i,end:(l-1)%i,loop:r}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%i,end:o%i,loop:r}),s}function XT(n,t){let e=n.points,r=n.options.spanGaps,i=e.length;if(!i)return[];let s=!!n._loop,{start:o,end:a}=$B(e,i,s,r);if(r===!0)return yT(n,[{start:o,end:a,loop:s}],e,t);let l=a<o?a+i:a,c=!!n._fullLoop&&o===0&&a===i-1;return yT(n,zB(e,o,l,c),e,t)}function yT(n,t,e,r){return!r||!r.setContext||!e?t:GB(n,t,e,r)}function GB(n,t,e,r){let i=n._chart.getContext(),s=bT(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=e.length,c=[],u=s,d=t[0].start,h=d;function f(p,g,m,v){let y=a?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=y;for(;e[g%l].skip;)g+=y;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:v}),u=v,d=g%l)}}for(let p of t){d=a?d:p.start;let g=e[d%l],m;for(h=d+1;h<=p.end;h++){let v=e[h%l];m=bT(r.setContext(Di(i,{type:"segment",p0:g,p1:v,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),WB(m,u)&&f(d,h-1,p.loop,u),g=v,u=m}d<h-1&&f(d,h-1,p.loop,u)}return c}function bT(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function WB(n,t){if(!t)return!1;let e=[],r=function(i,s){return Qb(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(t,r)}function Jh(n,t,e){return n.options.clip?n[e]:t[e]}function YB(n,t){let{xScale:e,yScale:r}=n;return e&&r?{left:Jh(e,t,"left"),right:Jh(e,t,"right"),top:Jh(r,t,"top"),bottom:Jh(r,t,"bottom")}:t}function f0(n,t){let e=t._clip;if(e.disabled)return!1;let r=YB(t,n.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?n.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?n.height:r.bottom+(e.bottom===!0?0:e.bottom)}}var D0=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){let s=e.listeners[i],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(r-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Xb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let s=r.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,t,"progress")),s.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let r=e.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Si=new D0,KT="transparent",XB={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let r=Jb(n||KT),i=r.valid&&Jb(t||KT);return i&&i.valid?i.mix(r,e).hexString():t},number(n,t,e){return n+(t-n)*e}},S0=class{constructor(t,e,r,i){let s=e[r];i=_a([t.to,i,s,t.from]);let o=_a([t.from,s,i]);this._active=!0,this._fn=t.fn||XB[t.type||typeof o],this._easing=da[t.easing]||da.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);let i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=_a([t.to,e,i,t.from]),this._from=_a([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||e<r),!this._active){this._target[i]=a,this._notify(!0);return}if(e<0){this._target[i]=s;return}l=e/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){let e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}},wf=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Re(t))return;let e=Object.keys(qe.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{let s=t[i];if(!Re(s))return;let o={};for(let a of e)o[a]=s[a];(Je(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(t,e){let r=e.options,i=ZB(t,r);if(!i)return[];let s=this._createAnimations(i,r);return r.$shared&&KB(t.options.$animations,r).then(()=>{t.options=r},()=>{}),s}_createAnimations(t,e){let r=this._properties,i=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(t,e));continue}let u=e[c],d=s[c],h=r.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){t[c]=u;continue}s[c]=d=new S0(h,t,c,u),i.push(d)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let r=this._createAnimations(t,e);if(r.length)return Si.add(this._chart,r),!0}};function KB(n,t){let e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){let s=n[r[i]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function ZB(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function ZT(n,t){let e=n&&n.options||{},r=e.reverse,i=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:r?s:i,end:r?i:s}}function qB(n,t,e){if(e===!1)return!1;let r=ZT(n,e),i=ZT(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function QB(n){let t,e,r,i;return Re(n)?(t=n.top,e=n.right,r=n.bottom,i=n.left):t=e=r=i=n,{top:t,right:e,bottom:r,left:i,disabled:n===!1}}function KA(n,t){let e=[],r=n._getSortedDatasetMetas(t),i,s;for(i=0,s=r.length;i<s;++i)e.push(r[i].index);return e}function qT(n,t,e,r={}){let i=n.keys,s=r.mode==="single",o,a,l,c;if(t===null)return;let u=!1;for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===e){if(u=!0,r.all)continue;break}c=n.values[l],ut(c)&&(s||t===0||pr(t)===pr(c))&&(t+=c)}return!u&&!r.all?0:t}function JB(n,t){let{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[i]:u,[s]:n[u]};return a}function p0(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function ej(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function tj(n){let{min:t,max:e,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function nj(n,t,e){let r=n[t]||(n[t]={});return r[e]||(r[e]={})}function QT(n,t,e,r){for(let i of t.getMatchingVisibleMetas(r).reverse()){let s=n[i.index];if(e&&s>0||!e&&s<0)return i.index}return null}function JT(n,t){let{chart:e,_cachedMeta:r}=n,i=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,u=ej(s,o,r),d=t.length,h;for(let f=0;f<d;++f){let p=t[f],{[l]:g,[c]:m}=p,v=p._stacks||(p._stacks={});h=v[c]=nj(i,u,g),h[a]=m,h._top=QT(h,o,!0,r.type),h._bottom=QT(h,o,!1,r.type);let y=h._visualValues||(h._visualValues={});y[a]=m}}function g0(n,t){let e=n.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function rj(n,t){return Di(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function ij(n,t,e){return Di(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function vc(n,t){let e=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){t=t||n._parsed;for(let i of t){let s=i._stacks;if(!s||s[r]===void 0||s[r][e]===void 0)return;delete s[r][e],s[r]._visualValues!==void 0&&s[r]._visualValues[e]!==void 0&&delete s[r]._visualValues[e]}}}var m0=n=>n==="reset"||n==="none",eA=(n,t)=>t?n:Object.assign({},n),sj=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:KA(e,!0),values:null},as=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=p0(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&vc(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,r=this._cachedMeta,i=this.getDataset(),s=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=r.xAxisID=be(i.xAxisID,g0(e,"x")),a=r.yAxisID=be(i.yAxisID,g0(e,"y")),l=r.rAxisID=be(i.rAxisID,g0(e,"r")),c=r.indexAxis,u=r.iAxisID=s(c,o,a,l),d=r.vAxisID=s(c,a,o,l);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(l),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&Wb(this._data,this),e._stacked&&vc(e)}_dataCheck(){let e=this.getDataset(),r=e.data||(e.data=[]),i=this._data;if(Re(r)){let s=this._cachedMeta;this._data=JB(r,s)}else if(i!==r){if(i){Wb(i,this);let s=this._cachedMeta;vc(s),s._parsed=[]}r&&Object.isExtensible(r)&&MT(r,this),this._syncList=[],this._data=r}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let r=this._cachedMeta,i=this.getDataset(),s=!1;this._dataCheck();let o=r._stacked;r._stacked=p0(r.vScale,r),r.stack!==i.stack&&(s=!0,vc(r),r.stack=i.stack),this._resyncElements(e),(s||o!==r._stacked)&&(JT(this,r._parsed),r._stacked=p0(r.vScale,r))}configure(){let e=this.chart.config,r=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){let{_cachedMeta:i,_data:s}=this,{iScale:o,_stacked:a}=i,l=o.axis,c=e===0&&r===s.length?!0:i._sorted,u=e>0&&i._parsed[e-1],d,h,f;if(this._parsing===!1)i._parsed=s,i._sorted=!0,f=s;else{Je(s[e])?f=this.parseArrayData(i,s,e,r):Re(s[e])?f=this.parseObjectData(i,s,e,r):f=this.parsePrimitiveData(i,s,e,r);let p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<r;++d)i._parsed[d+e]=h=f[d],c&&(p()&&(c=!1),u=h);i._sorted=c}a&&JT(this,f)}parsePrimitiveData(e,r,i,s){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,p,g;for(f=0,p=s;f<p;++f)g=f+i,h[f]={[l]:d||o.parse(u[g],g),[c]:a.parse(r[g],g)};return h}parseArrayData(e,r,i,s){let{xScale:o,yScale:a}=e,l=new Array(s),c,u,d,h;for(c=0,u=s;c<u;++c)d=c+i,h=r[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(e,r,i,s){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+i,p=r[f],u[d]={x:o.parse(wi(p,l),f),y:a.parse(wi(p,c),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,i){let s=this.chart,o=this._cachedMeta,a=r[e.axis],l={keys:KA(s,!0),values:r._stacks[e.axis]._visualValues};return qT(l,a,o.index,{mode:i})}updateRangeFromParsed(e,r,i,s){let o=i[r.axis],a=o===null?NaN:o,l=s&&i._stacks[r.axis];s&&l&&(s.values=l,a=qT(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){let i=this._cachedMeta,s=i._parsed,o=i._sorted&&e===i.iScale,a=s.length,l=this._getOtherScale(e),c=sj(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=tj(l),f,p;function g(){p=s[f];let m=p[l.axis];return!ut(p[e.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,e,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,e,p,c);break}}return u}getAllParsedValues(e){let r=this._cachedMeta._parsed,i=[],s,o,a;for(s=0,o=r.length;s<o;++s)a=r[s][e.axis],ut(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(e){let r=this._cachedMeta,i=r.iScale,s=r.vScale,o=this.getParsed(e);return{label:i?""+i.getLabelForValue(o[i.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let r=this._cachedMeta;this.update(e||"default"),r._clip=QB(be(this.options.clip,qB(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,r=this.chart,i=this._cachedMeta,s=i.data||[],o=r.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(e,o,l,c),d=l;d<l+c;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(e,o))}for(d=0;d<a.length;++d)a[d].draw(e,o)}getStyle(e,r){let i=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,r,i){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=ij(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=rj(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=i,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",i){let s=r==="active",o=this._cachedDataOpts,a=e+"-"+r,l=o[a],c=this.enableOptionSharing&&ga(i);if(l)return eA(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(qe.elements[e]),g=()=>this.getContext(i,s,r),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=c,o[a]=Object.freeze(eA(m,c))),m}_resolveAnimations(e,r,i){let s=this.chart,o=this._cachedDataOpts,a=`animation-${r}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,r),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(e,i,r))}let u=new wf(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||m0(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){let i=this.resolveDataElementOptions(e,r),s=this._sharedOptions,o=this.getSharedOptions(i),a=this.includeOptions(r,o)||o!==s;return this.updateSharedOptions(o,r,i),{sharedOptions:o,includeOptions:a}}updateElement(e,r,i,s){m0(s)?Object.assign(e,i):this._resolveAnimations(r,s).update(e,i)}updateSharedOptions(e,r,i){e&&!m0(r)&&this._resolveAnimations(void 0,r).update(e,i)}_setStyle(e,r,i,s){e.active=s;let o=this.getStyle(r,s);this._resolveAnimations(r,i,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,r,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let r=this._data,i=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=i.length,o=r.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,r,i=!0){let s=this._cachedMeta,o=s.data,a=e+r,l,c=u=>{for(u.length+=r,l=u.length-1;l>=a;l--)u[l]=u[l-r]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,r),i&&this.updateElements(o,e,r,"reset")}updateElements(e,r,i,s){}_removeElements(e,r){let i=this._cachedMeta;if(this._parsing){let s=i._parsed.splice(e,r);i._stacked&&vc(i,s)}i.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[r,i,s]=e;this[r](i,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function oj(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),r=[];for(let i=0,s=e.length;i<s;i++)r=r.concat(e[i].controller.getAllParsedValues(n));n._cache.$bar=Yb(r.sort((i,s)=>i-s))}return n._cache.$bar}function aj(n){let t=n.iScale,e=oj(t,n.type),r=t._length,i,s,o,a,l=()=>{o===32767||o===-32768||(ga(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=e.length;i<s;++i)o=t.getPixelForValue(e[i]),l();for(a=void 0,i=0,s=t.ticks.length;i<s;++i)o=t.getPixelForTick(i),l();return r}function lj(n,t,e,r){let i=e.barThickness,s,o;return Ae(i)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:t.pixels[n]-s/2}}function cj(n,t,e,r){let i=t.pixels,s=i[n],o=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:e.barPercentage,start:c}}function uj(n,t,e,r){let i=e.parse(n[0],r),s=e.parse(n[1],r),o=Math.min(i,s),a=Math.max(i,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function ZA(n,t,e,r){return Je(n)?uj(n,t,e,r):t[e.axis]=e.parse(n,r),t}function tA(n,t,e,r){let i=n.iScale,s=n.vScale,o=i.getLabels(),a=i===s,l=[],c,u,d,h;for(c=e,u=e+r;c<u;++c)h=t[c],d={},d[i.axis]=a||i.parse(o[c],c),l.push(ZA(h,d,s,c));return l}function v0(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function dj(n,t,e){return n!==0?pr(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function hj(n){let t,e,r,i,s;return n.horizontal?(t=n.base>n.x,e="left",r="right"):(t=n.base<n.y,e="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:e,end:r,reverse:t,top:i,bottom:s}}function fj(n,t,e,r){let i=t.borderSkipped,s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=hj(n);i==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===r?i=c:(e._bottom||0)===r?i=u:(s[nA(u,o,a,l)]=!0,i=c)),s[nA(i,o,a,l)]=!0,n.borderSkipped=s}function nA(n,t,e,r){return r?(n=pj(n,t,e),n=rA(n,e,t)):n=rA(n,t,e),n}function pj(n,t,e){return n===t?e:n===e?t:n}function rA(n,t,e){return n==="start"?t:n==="end"?e:n}function gj(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var mj=(()=>{class n extends as{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,r,i,s){return tA(e,r,i,s)}parseArrayData(e,r,i,s){return tA(e,r,i,s)}parseObjectData(e,r,i,s){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],f,p,g,m;for(f=i,p=i+s;f<p;++f)m=r[f],g={},g[o.axis]=o.parse(wi(m,u),f),h.push(ZA(wi(m,d),g,a,f));return h}updateRangeFromParsed(e,r,i,s){super.updateRangeFromParsed(e,r,i,s);let o=i._custom;o&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let r=this._cachedMeta,{iScale:i,vScale:s}=r,o=this.getParsed(e),a=o._custom,l=v0(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+i.getLabelForValue(o[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,i,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,s);for(let p=r;p<r+i;p++){let g=this.getParsed(p),m=o||Ae(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,d),y=(g._stacks||{})[l.axis],b={horizontal:u,base:m.base,enableBorderRadius:!y||v0(g._custom)||a===y._top||a===y._bottom,x:u?m.head:v.center,y:u?v.center:m.head,height:u?v.size:Math.abs(m.size),width:u?Math.abs(m.size):v.size};f&&(b.options=h||this.resolveDataElementOptions(p,e[p].active?"active":s));let C=b.options||e[p].options;fj(b,C,y,a),gj(b,C,d.ratio),this.updateElement(e[p],p,b,s)}}_getStacks(e,r){let{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=i.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(r),c=l&&l[i.axis],u=d=>{let h=d._parsed.find(p=>p[i.axis]===c),f=h&&h[d.vScale.axis];if(Ae(f)||isNaN(f))return!0};for(let d of s)if(!(r!==void 0&&u(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let e=this.chart.scales,r=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===r).shift()}_getAxis(){let e={},r=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)e[be(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,r)]=!0;return Object.keys(e)}_getStackIndex(e,r,i){let s=this._getStacks(e,i),o=r!==void 0?s.indexOf(r):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,r=this._cachedMeta,i=r.iScale,s=[],o,a;for(o=0,a=r.data.length;o<a;++o)s.push(i.getPixelForValue(this.getParsed(o)[i.axis],o));let l=e.barThickness;return{min:l||aj(r),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:r,_stacked:i,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),u=c._custom,d=v0(u),h=c[r.axis],f=0,p=i?this.applyStack(r,c,i):h,g,m;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&pr(h)!==pr(u.barEnd)&&(f=0),f+=h);let v=!Ae(o)&&!d?o:f,y=r.getPixelForValue(v);if(this.chart.getDataVisibility(e)?g=r.getPixelForValue(f+p):g=y,m=g-y,Math.abs(m)<a){m=dj(m,r,l)*a,h===l&&(y-=m/2);let b=r.getPixelForDecimal(0),C=r.getPixelForDecimal(1),_=Math.min(b,C),E=Math.max(b,C);y=Math.max(Math.min(y,E),_),g=y+m,i&&!d&&(c._stacks[r.axis]._visualValues[s]=r.getValueForPixel(g)-r.getValueForPixel(y))}if(y===r.getPixelForValue(l)){let b=pr(m)*r.getLineWidthForValue(l)/2;y+=b,m-=b}return{size:m,base:y,head:g,center:g+m/2}}_calculateBarIndexPixels(e,r){let i=r.scale,s=this.options,o=s.skipNull,a=be(s.maxBarThickness,1/0),l,c,u=this._getAxisCount();if(r.grouped){let d=o?this._getStackCount(e):r.stackCount,h=s.barThickness==="flex"?cj(e,r,s,d*u):lj(e,r,s,d*u),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(be(f,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0)+p;l=h.start+h.chunk*g+h.chunk/2,c=Math.min(a,h.chunk*h.ratio)}else l=i.getPixelForValue(this.getParsed(e)[i.axis],e),c=Math.min(a,r.min*r.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,r=e.vScale,i=e.data,s=i.length,o=0;for(;o<s;++o)this.getParsed(o)[r.axis]!==null&&!i[o].hidden&&i[o].draw(this._ctx)}}return n})(),vj=(()=>{class n extends as{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,i,s){let o=super.parsePrimitiveData(e,r,i,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+i).radius;return o}parseArrayData(e,r,i,s){let o=super.parseArrayData(e,r,i,s);for(let a=0;a<o.length;a++){let l=r[i+a];o[a]._custom=be(l[2],this.resolveDataElementOptions(a+i).radius)}return o}parseObjectData(e,r,i,s){let o=super.parseObjectData(e,r,i,s);for(let a=0;a<o.length;a++){let l=r[i+a];o[a]._custom=be(l&&l.r&&+l.r,this.resolveDataElementOptions(a+i).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,r=0;for(let i=e.length-1;i>=0;--i)r=Math.max(r,e[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(e){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:i[e]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(e){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,i,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(r,s),d=a.axis,h=l.axis;for(let f=r;f<r+i;f++){let p=e[f],g=!o&&this.getParsed(f),m={},v=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),y=m[h]=o?l.getBasePixel():l.getPixelForValue(g[h]);m.skip=isNaN(v)||isNaN(y),u&&(m.options=c||this.resolveDataElementOptions(f,p.active?"active":s),o&&(m.options.radius=0)),this.updateElement(p,f,m,s)}}resolveDataElementOptions(e,r){let i=this.getParsed(e),s=super.resolveDataElementOptions(e,r);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return r!=="active"&&(s.radius=0),s.radius+=be(i&&i._custom,o),s}}return n})();function yj(n,t,e){let r=1,i=1,s=0,o=0;if(t<et){let a=n,l=a+t,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(b,C,_)=>va(b,a,l,!0)?1:Math.max(C,C*e,_,_*e),p=(b,C,_)=>va(b,a,l,!0)?-1:Math.min(C,C*e,_,_*e),g=f(0,c,d),m=f(ht,u,h),v=p(Ve,c,d),y=p(Ve+ht,u,h);r=(g-v)/2,i=(m-y)/2,s=-(g+v)/2,o=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}var W0=(()=>{class n extends as{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let r=e.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=e.legend.options;return r.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){let i=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=i;else{let o=c=>+i[c];if(Re(i[e])){let{key:c="value"}=this._parsing;o=u=>+wi(i[u],c)}let a,l;for(a=e,l=e+r;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return Kn(this.options.rotation-90)}_getCircumference(){return Kn(this.options.circumference)}_getRotationExtents(){let e=et,r=-et;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let s=this.chart.getDatasetMeta(i).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),r=Math.max(r,o+a)}return{rotation:e,circumference:r-e}}update(e){let r=this.chart,{chartArea:i}=r,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-a)/2,0),c=Math.min(CT(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=yj(h,d,c),v=(i.width-a)/f,y=(i.height-a)/p,b=Math.max(Math.min(v,y)/2,0),C=Vb(this.options.radius,b),_=Math.max(C*c,0),E=(C-_)/this._getVisibleDatasetWeightTotal();this.offsetX=g*C,this.offsetY=m*C,s.total=this.calculateTotal(),this.outerRadius=C-E*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-E*u,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){let i=this.options,s=this._cachedMeta,o=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/et)}updateElements(e,r,i,s){let o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:v}=this._getSharedOptions(r,s),y=this._getRotation(),b;for(b=0;b<r;++b)y+=this._circumference(b,o);for(b=r;b<r+i;++b){let C=this._circumference(b,o),_=e[b],E={x:d+this.offsetX,y:h+this.offsetY,startAngle:y,endAngle:y+C,circumference:C,outerRadius:g,innerRadius:p};v&&(E.options=m||this.resolveDataElementOptions(b,_.active?"active":s)),y+=C,this.updateElement(_,b,E,s)}}calculateTotal(){let e=this._cachedMeta,r=e.data,i=0,s;for(s=0;s<r.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!r[s].hidden&&(i+=Math.abs(o))}return i}calculateCircumference(e){let r=this._cachedMeta.total;return r>0&&!isNaN(e)?et*(Math.abs(e)/r):0}getLabelAndValue(e){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=ya(r._parsed[e],i.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let r=0,i=this.chart,s,o,a,l,c;if(!e){for(s=0,o=i.data.datasets.length;s<o;++s)if(i.isDatasetVisible(s)){a=i.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(r=Math.max(r,c.borderWidth||0,c.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let i=0,s=e.length;i<s;++i){let o=this.resolveDataElementOptions(i);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(e){return Math.max(be(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),bj=(()=>{class n extends as{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let r=this._cachedMeta,{dataset:i,data:s=[],_dataset:o}=r,a=this.chart._animationsDisabled,{start:l,count:c}=Zb(r,s,a);this._drawStart=l,this._drawCount=c,qb(r)&&(l=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=s;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},e),this.updateElements(s,l,c,e)}updateElements(e,r,i,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(r,s),f=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,v=to(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||s==="none",b=r+i,C=e.length,_=r>0&&this.getParsed(r-1);for(let E=0;E<C;++E){let w=e[E],x=y?w:{};if(E<r||E>=b){x.skip=!0;continue}let S=this.getParsed(E),A=Ae(S[p]),I=x[f]=a.getPixelForValue(S[f],E),O=x[p]=o||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,S,c):S[p],E);x.skip=isNaN(I)||isNaN(O)||A,x.stop=E>0&&Math.abs(S[f]-_[f])>v,m&&(x.parsed=S,x.raw=u.data[E]),h&&(x.options=d||this.resolveDataElementOptions(E,w.active?"active":s)),y||this.updateElement(w,E,x,s),_=S}}getMaxOverflow(){let e=this._cachedMeta,r=e.dataset,i=r.options&&r.options.borderWidth||0,s=e.data||[];if(!s.length)return i;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),qA=(()=>{class n extends as{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let r=e.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:s}}=e.legend.options;return r.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let r=this._cachedMeta,i=this.chart,s=i.data.labels||[],o=ya(r._parsed[e].r,i.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,r,i,s){return o0.bind(this)(e,r,i,s)}update(e){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){let e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((i,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let e=this.chart,r=e.chartArea,i=e.options,s=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(s/2,0),a=Math.max(i.cutoutPercentage?o/100*i.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,r,i,s){let o=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Ve,p=f,g,m=360/this.countVisibleElements();for(g=0;g<r;++g)p+=this._computeAngle(g,s,m);for(g=r;g<r+i;g++){let v=e[g],y=p,b=p+this._computeAngle(g,s,m),C=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=b,o&&(c.animateScale&&(C=0),c.animateRotate&&(y=b=f));let _={x:d,y:h,innerRadius:0,outerRadius:C,startAngle:y,endAngle:b,options:this.resolveDataElementOptions(g,v.active?"active":s)};this.updateElement(v,g,_,s)}}countVisibleElements(){let e=this._cachedMeta,r=0;return e.data.forEach((i,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&r++}),r}_computeAngle(e,r,i){return this.chart.getDataVisibility(e)?Kn(this.resolveDataElementOptions(e,r).angle||i):0}}return n})(),_j=(()=>{class n extends W0{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),Cj=(()=>{class n extends as{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let r=this._cachedMeta.vScale,i=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(e,r,i,s){return o0.bind(this)(e,r,i,s)}update(e){let r=this._cachedMeta,i=r.dataset,s=r.data||[],o=r.iScale.getLabels();if(i.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(i,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,r,i,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=r;l<r+i;l++){let c=e[l],u=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(c,l,p,s)}}}return n})(),Ej=(()=>{class n extends as{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:o}=r,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:i[e]||"",value:"("+l+", "+c+")"}}update(e){let r=this._cachedMeta,{data:i=[]}=r,s=this.chart._animationsDisabled,{start:o,count:a}=Zb(r,i,s);if(this._drawStart=o,this._drawCount=a,qb(r)&&(o=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=r;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=i;let u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,i,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(r,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=a.axis,g=l.axis,{spanGaps:m,segment:v}=this.options,y=to(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||s==="none",C=r>0&&this.getParsed(r-1);for(let _=r;_<r+i;++_){let E=e[_],w=this.getParsed(_),x=b?E:{},S=Ae(w[g]),A=x[p]=a.getPixelForValue(w[p],_),I=x[g]=o||S?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,w,c):w[g],_);x.skip=isNaN(A)||isNaN(I)||S,x.stop=_>0&&Math.abs(w[p]-C[p])>y,v&&(x.parsed=w,x.raw=u.data[_]),f&&(x.options=h||this.resolveDataElementOptions(_,E.active?"active":s)),b||this.updateElement(E,_,x,s),C=w}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let l=0;for(let c=r.length-1;c>=0;--c)l=Math.max(l,r[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let i=e.dataset,s=i.options&&i.options.borderWidth||0;if(!r.length)return s;let o=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(s,o,a)/2}}return n})(),xj=Object.freeze({__proto__:null,BarController:mj,BubbleController:vj,DoughnutController:W0,LineController:bj,PieController:_j,PolarAreaController:qA,RadarController:Cj,ScatterController:Ej});function ro(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var T0=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ro()}parse(){return ro()}format(){return ro()}add(){return ro()}diff(){return ro()}startOf(){return ro()}endOf(){return ro()}},wj={_date:T0};function Dj(n,t,e,r){let{controller:i,data:s,_sorted:o}=n,a=i._cachedMeta.iScale,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?TT:kr;if(r){if(i._sharedOptions){let u=s[0],d=typeof u.getRange=="function"&&u.getRange(t);if(d){let h=c(s,t,e-d),f=c(s,t,e+d);return{lo:h.lo,hi:f.hi}}}}else{let u=c(s,t,e);if(l){let{vScale:d}=i._cachedMeta,{_parsed:h}=n,f=h.slice(0,u.lo+1).reverse().findIndex(g=>!Ae(g[d.axis]));u.lo-=Math.max(0,f);let p=h.slice(u.hi).findIndex(g=>!Ae(g[d.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:s.length-1}}function Tc(n,t,e,r,i){let s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=Dj(s[a],t,o,i);for(let f=d;f<=h;++f){let p=u[f];p.skip||r(p,c,f)}}}function Sj(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(r,i){let s=t?Math.abs(r.x-i.x):0,o=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function y0(n,t,e,r,i){let s=[];return!i&&!n.isPointInArea(t)||Tc(n,e,t,function(a,l,c){!i&&!Lr(a,n.chartArea,0)||a.inRange(t.x,t.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Tj(n,t,e,r){let i=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],r),{angle:d}=Gb(o,{x:t.x,y:t.y});va(d,c,u)&&i.push({element:o,datasetIndex:a,index:l})}return Tc(n,e,t,s),i}function Aj(n,t,e,r,i,s){let o=[],a=Sj(e),l=Number.POSITIVE_INFINITY;function c(u,d,h){let f=u.inRange(t.x,t.y,i);if(r&&!f)return;let p=u.getCenterPoint(i);if(!(!!s||n.isPointInArea(p))&&!f)return;let m=a(t,p);m<l?(o=[{element:u,datasetIndex:d,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:h})}return Tc(n,e,t,c),o}function b0(n,t,e,r,i,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!r?Tj(n,t,e,i):Aj(n,t,e,r,i,s)}function iA(n,t,e,r,i){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Tc(n,e,t,(l,c,u)=>{l[o]&&l[o](t[e],i)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(t.x,t.y,i))}),r&&!a?[]:s}var Ij={evaluateInteractionItems:Tc,modes:{index(n,t,e,r){let i=ss(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?y0(n,i,s,r,o):b0(n,i,s,!1,r,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,t,e,r){let i=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?y0(n,i,s,r,o):b0(n,i,s,!1,r,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,t,e,r){let i=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return y0(n,i,s,r,o)},nearest(n,t,e,r){let i=ss(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return b0(n,i,s,e.intersect,r,o)},x(n,t,e,r){let i=ss(t,n);return iA(n,i,"x",e.intersect,r)},y(n,t,e,r){let i=ss(t,n);return iA(n,i,"y",e.intersect,r)}}},QA=["left","top","right","bottom"];function yc(n,t){return n.filter(e=>e.pos===t)}function sA(n,t){return n.filter(e=>QA.indexOf(e.pos)===-1&&e.box.axis===t)}function bc(n,t){return n.sort((e,r)=>{let i=t?r:e,s=t?e:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Mj(n){let t=[],e,r,i,s,o,a;for(e=0,r=(n||[]).length;e<r;++e)i=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=i,t.push({index:e,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return t}function Rj(n){let t={};for(let e of n){let{stack:r,pos:i,stackWeight:s}=e;if(!r||!QA.includes(i))continue;let o=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function Oj(n,t){let e=Rj(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=e[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*r:l&&t.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:l&&t.availableHeight)}return e}function Nj(n){let t=Mj(n),e=bc(t.filter(c=>c.box.fullSize),!0),r=bc(yc(t,"left"),!0),i=bc(yc(t,"right")),s=bc(yc(t,"top"),!0),o=bc(yc(t,"bottom")),a=sA(t,"x"),l=sA(t,"y");return{fullSize:e,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:yc(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function oA(n,t,e,r){return Math.max(n[e],t[e])+Math.max(n[r],t[r])}function JA(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function Pj(n,t,e,r){let{pos:i,box:s}=e,o=n.maxPadding;if(!Re(i)){e.size&&(n[i]-=e.size);let d=r[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?s.height:s.width),e.size=d.size/d.count,n[i]+=e.size}s.getPadding&&JA(o,s.getPadding());let a=Math.max(0,t.outerWidth-oA(o,n,"left","right")),l=Math.max(0,t.outerHeight-oA(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,e.horizontal?{same:c,other:u}:{same:u,other:c}}function kj(n){let t=n.maxPadding;function e(r){let i=Math.max(t[r]-n[r],0);return n[r]+=i,i}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function Lj(n,t){let e=t.maxPadding;function r(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return r(n?["left","right"]:["top","bottom"])}function Ec(n,t,e,r){let i=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||t.w,a.height||t.h,Lj(a.horizontal,t));let{same:d,other:h}=Pj(t,e,a,r);c|=d&&i.length,u=u||h,l.fullSize||i.push(a)}return c&&Ec(i,t,e,r)||u}function mf(n,t,e,r,i){n.top=e,n.left=t,n.right=t+r,n.bottom=e+i,n.width=r,n.height=i}function aA(n,t,e,r){let i=e.padding,{x:s,y:o}=t;for(let a of n){let l=a.box,c=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=t.w*u,h=c.size||l.height;ga(c.start)&&(o=c.start),l.fullSize?mf(l,i.left,o,e.outerWidth-i.right-i.left,h):mf(l,t.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=t.h*u,h=c.size||l.width;ga(c.start)&&(s=c.start),l.fullSize?mf(l,s,i.top,h,e.outerHeight-i.bottom-i.top):mf(l,s,t.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}t.x=s,t.y=o}var Jt={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,r){if(!n)return;let i=zt(n.options.layout.padding),s=Math.max(t-i.width,0),o=Math.max(e-i.height,0),a=Nj(n.boxes),l=a.vertical,c=a.horizontal;We(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},i);JA(h,zt(r));let f=Object.assign({maxPadding:h,w:s,h:o,x:i.left,y:i.top},i),p=Oj(l.concat(c),d);Ec(a.fullSize,f,d,p),Ec(l,f,d,p),Ec(c,f,d,p)&&Ec(l,f,d,p),kj(f),aA(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,aA(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},We(a.chartArea,g=>{let m=g.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},Df=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}},A0=class extends Df{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},Ef="$chartjs",Fj={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},lA=n=>n===null||n==="";function Bj(n,t){let e=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ef]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",lA(i)){let s=l0(n,"width");s!==void 0&&(n.width=s)}if(lA(r))if(n.style.height==="")n.height=n.width/(t||2);else{let s=l0(n,"height");s!==void 0&&(n.height=s)}return n}var eI=zT?{passive:!0}:!1;function jj(n,t,e){n&&n.addEventListener(t,e,eI)}function Vj(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,eI)}function Hj(n,t){let e=Fj[n.type]||n.type,{x:r,y:i}=ss(n,t);return{type:e,chart:t,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function Sf(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function Uj(n,t,e){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Sf(a.addedNodes,r),o=o&&!Sf(a.removedNodes,r);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function $j(n,t,e){let r=n.canvas,i=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Sf(a.removedNodes,r),o=o&&!Sf(a.addedNodes,r);o&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}var wc=new Map,cA=0;function tI(){let n=window.devicePixelRatio;n!==cA&&(cA=n,wc.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function zj(n,t){wc.size||window.addEventListener("resize",tI),wc.set(n,t)}function Gj(n){wc.delete(n),wc.size||window.removeEventListener("resize",tI)}function Wj(n,t,e){let r=n.canvas,i=r&&pf(r);if(!i)return;let s=Kb((a,l)=>{let c=i.clientWidth;e(a,l),c<i.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(i),zj(n,s),o}function _0(n,t,e){e&&e.disconnect(),t==="resize"&&Gj(n)}function Yj(n,t,e){let r=n.canvas,i=Kb(s=>{n.ctx!==null&&e(Hj(s,n))},n);return jj(r,t,i),i}var I0=class extends Df{acquireContext(t,e){let r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(Bj(t,e),r):null}releaseContext(t){let e=t.canvas;if(!e[Ef])return!1;let r=e[Ef].initial;["height","width"].forEach(s=>{let o=r[s];Ae(o)?e.removeAttribute(s):e.setAttribute(s,o)});let i=r.style||{};return Object.keys(i).forEach(s=>{e.style[s]=i[s]}),e.width=e.width,delete e[Ef],!0}addEventListener(t,e,r){this.removeEventListener(t,e);let i=t.$proxies||(t.$proxies={}),o={attach:Uj,detach:$j,resize:Wj}[e]||Yj;i[e]=o(t,e,r)}removeEventListener(t,e){let r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:_0,detach:_0,resize:_0}[e]||Vj)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return $T(t,e,r,i)}isAttached(t){let e=t&&pf(t);return!!(e&&e.isConnected)}};function Xj(n){return!ff()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?A0:I0}var gr=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return to(this.x)&&to(this.y)}getProps(t,e){let r=this.$animations;if(!e||!r)return this;let i={};return t.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}};function Kj(n,t){let e=n.options.ticks,r=Zj(n),i=Math.min(e.maxTicksLimit||r,r),s=e.major.enabled?Qj(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return Jj(t,c,s,o/i),c;let u=qj(s,t,i);if(o>0){let d,h,f=o>1?Math.round((l-a)/(o-1)):null;for(vf(t,c,u,Ae(f)?0:a-f,a),d=0,h=o-1;d<h;d++)vf(t,c,u,s[d],s[d+1]);return vf(t,c,u,l,Ae(f)?t.length:l+f),c}return vf(t,c,u),c}function Zj(n){let t=n.options.offset,e=n._tickSize(),r=n._length/e+(t?0:1),i=n._maxLength/e;return Math.floor(Math.min(r,i))}function qj(n,t,e){let r=eV(n),i=t.length/e;if(!r)return Math.max(i,1);let s=wT(r);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>i)return l}return Math.max(i,1)}function Qj(n){let t=[],e,r;for(e=0,r=n.length;e<r;e++)n[e].major&&t.push(e);return t}function Jj(n,t,e,r){let i=0,s=e[0],o;for(r=Math.ceil(r),o=0;o<n.length;o++)o===s&&(t.push(n[o]),i++,s=e[i*r])}function vf(n,t,e,r,i){let s=be(r,0),o=Math.min(be(i,n.length),n.length),a=0,l,c,u;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),u=s;u<0;)a++,u=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===u&&(t.push(n[c]),a++,u=Math.round(s+a*e))}function eV(n){let t=n.length,e,r;if(t<2)return!1;for(r=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==r)return!1;return r}var tV=n=>n==="left"?"right":n==="right"?"left":n,uA=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,dA=(n,t)=>Math.min(t||n,n);function hA(n,t){let e=[],r=n.length/t,i=n.length,s=0;for(;s<i;s+=r)e.push(n[Math.floor(s)]);return e}function nV(n,t,e){let r=n.ticks.length,i=Math.min(t,r-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(i),c;if(!(e&&(r===1?c=Math.max(l-s,o-l):t===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(i-1))/2,l+=i<t?c:-c,l<s-a||l>o+a)))return l}function rV(n,t){We(n,e=>{let r=e.gc,i=r.length/2,s;if(i>t){for(s=0;s<i;++s)delete e.data[r[s]];r.splice(0,i)}})}function _c(n){return n.drawTicks?n.tickLength:0}function fA(n,t){if(!n.display)return 0;let e=wt(n.font,t),r=zt(n.padding);return(Je(n.text)?n.text.length:1)*e.lineHeight+r.height}function iV(n,t){return Di(n,{scale:t,type:"scale"})}function sV(n,t,e){return Di(n,{tick:e,index:t,type:"tick"})}function oV(n,t,e){let r=lf(n);return(e&&t!=="right"||!e&&t==="right")&&(r=tV(r)),r}function aV(n,t,e,r){let{top:i,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,f,p,g=o-i,m=a-s;if(n.isHorizontal()){if(f=$t(r,s,a),Re(e)){let v=Object.keys(e)[0],y=e[v];p=u[v].getPixelForValue(y)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=uA(n,e,t);h=a-s}else{if(Re(e)){let v=Object.keys(e)[0],y=e[v];f=u[v].getPixelForValue(y)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=uA(n,e,t);p=$t(r,o,i),d=e==="left"?-ht:ht}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var so=class n extends gr{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=mn(t,Number.POSITIVE_INFINITY),e=mn(e,Number.NEGATIVE_INFINITY),r=mn(r,Number.POSITIVE_INFINITY),i=mn(i,Number.NEGATIVE_INFINITY),{min:mn(t,r),max:mn(e,i),minDefined:ut(t),maxDefined:ut(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:e,max:r};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),i||(e=Math.min(e,o.min)),s||(r=Math.max(r,o.max));return e=s&&e>r?r:e,r=i&&e>r?e:r,{min:mn(e,mn(r,e)),max:mn(r,mn(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ze(this.options.beforeUpdate,[this])}update(t,e,r){let{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=FT(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?hA(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Kj(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ze(this.options.afterUpdate,[this])}beforeSetDimensions(){Ze(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ze(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ze(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ze(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r],s.label=Ze(e.callback,[s.value,r,t],this)}afterTickToLabelConversion(){Ze(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ze(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,r=dA(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,s=e.maxRotation,o=i,a,l,c;if(!this._isVisible()||!e.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Ot(this.chart.width-d,0,this.maxWidth);a=t.offset?this.maxWidth/r:f/(r-1),d+6>a&&(a=f/(r-(t.offset?.5:1)),l=this.maxHeight-_c(t.grid)-e.padding-fA(t.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=of(Math.min(Math.asin(Ot((u.highest.height+6)/a,-1,1)),Math.asin(Ot(l/c,-1,1))-Math.asin(Ot(h/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ze(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ze(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=fA(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=_c(s)+l):(t.height=this.maxHeight,t.width=_c(s)+l),r.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=r.padding*2,p=Kn(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let v=r.mirror?0:m*d.width+g*h.height;t.height=Math.min(this.maxHeight,t.height+v+f)}else{let v=r.mirror?0:g*d.width+m*h.height;t.width=Math.min(this.maxWidth,t.width+v+f)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;l?c?(h=i*t.width,f=r*e.height):(h=r*t.height,f=i*e.width):s==="start"?f=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,f=e.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=e.height/2,d=t.height/2;s==="start"?(u=0,d=t.height):s==="end"&&(u=e.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ze(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Ae(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,r=this.ticks;e<r.length&&(r=hA(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){let{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/dA(e,r)),c=0,u=0,d,h,f,p,g,m,v,y,b,C,_;for(d=0;d<e;d+=l){if(p=t[d].label,g=this._resolveTickFontOptions(d),i.font=m=g.string,v=s[m]=s[m]||{data:{},gc:[]},y=g.lineHeight,b=C=0,!Ae(p)&&!Je(p))b=hc(i,v.data,v.gc,b,p),C=y;else if(Je(p))for(h=0,f=p.length;h<f;++h)_=p[h],!Ae(_)&&!Je(_)&&(b=hc(i,v.data,v.gc,b,_),C+=y);o.push(b),a.push(C),c=Math.max(b,c),u=Math.max(C,u)}rV(s,e);let E=o.indexOf(c),w=a.indexOf(u),x=S=>({width:o[S]||0,height:a[S]||0});return{first:x(0),last:x(e-1),widest:x(E),highest:x(w),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return ST(this._alignToPixels?ns(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let r=e[t];return r.$context||(r.$context=sV(this.getContext(),t,r))}return this.$context||(this.$context=iV(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=Kn(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=_c(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,v=function(P){return ns(r,P,g)},y,b,C,_,E,w,x,S,A,I,O,k;if(o==="top")y=v(this.bottom),w=this.bottom-h,S=y-m,I=v(t.top)+m,k=t.bottom;else if(o==="bottom")y=v(this.top),I=t.top,k=v(t.bottom)-m,w=y+m,S=this.top+h;else if(o==="left")y=v(this.right),E=this.right-h,x=y-m,A=v(t.left)+m,O=t.right;else if(o==="right")y=v(this.left),A=t.left,O=v(t.right)-m,E=y+m,x=this.left+h;else if(e==="x"){if(o==="center")y=v((t.top+t.bottom)/2+.5);else if(Re(o)){let P=Object.keys(o)[0],M=o[P];y=v(this.chart.scales[P].getPixelForValue(M))}I=t.top,k=t.bottom,w=y+m,S=w+h}else if(e==="y"){if(o==="center")y=v((t.left+t.right)/2);else if(Re(o)){let P=Object.keys(o)[0],M=o[P];y=v(this.chart.scales[P].getPixelForValue(M))}E=y-m,x=E-h,A=t.left,O=t.right}let $=be(i.ticks.maxTicksLimit,d),U=Math.max(1,Math.ceil(d/$));for(b=0;b<d;b+=U){let P=this.getContext(b),M=s.setContext(P),D=a.setContext(P),T=M.lineWidth,Y=M.color,Q=D.dash||[],ie=D.dashOffset,q=M.tickWidth,Ee=M.tickColor,je=M.tickBorderDash||[],W=M.tickBorderDashOffset;C=nV(this,b,l),C!==void 0&&(_=ns(r,C,T),c?E=x=A=O=_:w=S=I=k=_,f.push({tx1:E,ty1:w,tx2:x,ty2:S,x1:A,y1:I,x2:O,y2:k,width:T,color:Y,borderDash:Q,borderDashOffset:ie,tickWidth:q,tickColor:Ee,tickBorderDash:je,tickBorderDashOffset:W}))}return this._ticksLength=d,this._borderValue=y,f}_computeLabelItems(t){let e=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=_c(r.grid),f=h+u,p=d?-u:f,g=-Kn(this.labelRotation),m=[],v,y,b,C,_,E,w,x,S,A,I,O,k="middle";if(i==="top")E=this.bottom-p,w=this._getXAxisLabelAlignment();else if(i==="bottom")E=this.top+p,w=this._getXAxisLabelAlignment();else if(i==="left"){let U=this._getYAxisLabelAlignment(h);w=U.textAlign,_=U.x}else if(i==="right"){let U=this._getYAxisLabelAlignment(h);w=U.textAlign,_=U.x}else if(e==="x"){if(i==="center")E=(t.top+t.bottom)/2+f;else if(Re(i)){let U=Object.keys(i)[0],P=i[U];E=this.chart.scales[U].getPixelForValue(P)+f}w=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")_=(t.left+t.right)/2-f;else if(Re(i)){let U=Object.keys(i)[0],P=i[U];_=this.chart.scales[U].getPixelForValue(P)}w=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?k="top":l==="end"&&(k="bottom"));let $=this._getLabelSizes();for(v=0,y=a.length;v<y;++v){b=a[v],C=b.label;let U=s.setContext(this.getContext(v));x=this.getPixelForTick(v)+s.labelOffset,S=this._resolveTickFontOptions(v),A=S.lineHeight,I=Je(C)?C.length:1;let P=I/2,M=U.color,D=U.textStrokeColor,T=U.textStrokeWidth,Y=w;o?(_=x,w==="inner"&&(v===y-1?Y=this.options.reverse?"left":"right":v===0?Y=this.options.reverse?"right":"left":Y="center"),i==="top"?c==="near"||g!==0?O=-I*A+A/2:c==="center"?O=-$.highest.height/2-P*A+A:O=-$.highest.height+A/2:c==="near"||g!==0?O=A/2:c==="center"?O=$.highest.height/2-P*A:O=$.highest.height-I*A,d&&(O*=-1),g!==0&&!U.showLabelBackdrop&&(_+=A/2*Math.sin(g))):(E=x,O=(1-I)*A/2);let Q;if(U.showLabelBackdrop){let ie=zt(U.backdropPadding),q=$.heights[v],Ee=$.widths[v],je=O-ie.top,W=0-ie.left;switch(k){case"middle":je-=q/2;break;case"bottom":je-=q;break}switch(w){case"center":W-=Ee/2;break;case"right":W-=Ee;break;case"inner":v===y-1?W-=Ee:v>0&&(W-=Ee/2);break}Q={left:W,top:je,width:Ee+ie.width,height:q+ie.height,color:U.backdropColor}}m.push({label:C,font:S,textOffset:O,options:{rotation:g,color:M,strokeColor:D,strokeWidth:T,textAlign:Y,textBaseline:k,translation:[_,E],backdrop:Q}})}return m}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-Kn(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width,c,u;return e==="left"?i?(u=this.right+s,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u=this.left)):e==="right"?i?(u=this.left+s,r==="near"?c="right":r==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,r==="near"?c="left":r==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:r,top:i,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let i=this.ticks.findIndex(s=>s.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){let e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(l,c,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(e.display)for(s=0,o=i.length;s<o;++s){let l=i[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;let a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=ns(t,this.left,o)-o/2,u=ns(t,this.right,a)+a/2,d=h=l):(d=ns(t,this.top,o)-o/2,h=ns(t,this.bottom,a)+a/2,c=u=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,d),e.lineTo(u,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&gc(r,i);let s=this.getLabelItems(t);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;rs(r,c,0,u,l,a)}i&&mc(r)}drawTitle(){let{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;let s=wt(r.font),o=zt(r.padding),a=r.align,l=s.lineHeight/2;e==="bottom"||e==="center"||Re(e)?(l+=o.bottom,Je(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=aV(this,l,e,a);rs(t,r.text,0,0,s,{color:r.color,maxWidth:d,rotation:h,textAlign:oV(a,e,i),textBaseline:"middle",translation:[c,u]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,r=be(t.grid&&t.grid.z,-1),i=be(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[r]===this.id&&(!t||a.type===t)&&i.push(a)}return i}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return wt(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Ea=class{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),r;uV(e)&&(r=this.register(e));let i=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in i||(i[s]=t,lV(t,o,r),this.override&&qe.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in qe[i]&&(delete qe[i][r],this.override&&delete ts[r])}};function lV(n,t,e){let r=ha(Object.create(null),[e?qe.get(e):{},qe.get(t),n.defaults]);qe.set(t,r),n.defaultRoutes&&cV(t,n.defaultRoutes),n.descriptors&&qe.describe(t,n.descriptors)}function cV(n,t){Object.keys(t).forEach(e=>{let r=e.split("."),i=r.pop(),s=[n].concat(r).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");qe.route(s,i,l,a)})}function uV(n){return"id"in n&&"defaults"in n}var M0=class{constructor(){this.controllers=new Ea(as,"datasets",!0),this.elements=new Ea(gr,"elements"),this.plugins=new Ea(Object,"plugins"),this.scales=new Ea(so,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{let s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(t,s,i):We(i,o=>{let a=r||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,r){let i=sf(t);Ze(r["before"+i],[],r),e[t](r),Ze(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){let i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}},Vr=new M0,R0=class{constructor(){this._init=[]}notify(t,e,r,i){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(s,t,e,r);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,r,i){i=i||{};for(let s of t){let o=s.plugin,a=o[r],l=[e,i,s.options];if(Ze(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let r=t&&t.config,i=be(r.options&&r.options.plugins,{}),s=dV(r);return i===!1&&!e?[]:fV(t,s,i,e)}_notifyStateChanges(t){let e=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}};function dV(n){let t={},e=[],r=Object.keys(Vr.plugins.items);for(let s=0;s<r.length;s++)e.push(Vr.getPlugin(r[s]));let i=n.plugins||[];for(let s=0;s<i.length;s++){let o=i[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function hV(n,t){return!t&&n===!1?null:n===!0?{}:n}function fV(n,{plugins:t,localIds:e},r,i){let s=[],o=n.getContext();for(let a of t){let l=a.id,c=hV(r[l],i);c!==null&&s.push({plugin:a,options:pV(n.config,{plugin:a,local:e[l]},c,o)})}return s}function pV(n,{plugin:t,local:e},r,i){let s=n.pluginScopeKeys(t),o=n.getOptionScopes(r,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function O0(n,t){let e=qe.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function gV(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function mV(n,t){return n===t?"_index_":"_value_"}function pA(n){if(n==="x"||n==="y"||n==="r")return n}function vV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function N0(n,...t){if(pA(n))return n;for(let e of t){let r=e.axis||vV(e.position)||n.length>1&&pA(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function gA(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function yV(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(e.length)return gA(n,"x",e[0])||gA(n,"y",e[0])}return{}}function bV(n,t){let e=ts[n.type]||{scales:{}},r=t.scales||{},i=O0(n.type,t),s=Object.create(null);return Object.keys(r).forEach(o=>{let a=r[o];if(!Re(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=N0(o,a,yV(o,n),qe.scales[a.type]),c=mV(l,i),u=e.scales||{};s[o]=pa(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||O0(a,t),u=(ts[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=gV(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),pa(s[f],[{axis:h},r[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];pa(a,[qe.scales[a.type],qe.scale])}),s}function nI(n){let t=n.options||(n.options={});t.plugins=be(t.plugins,{}),t.scales=bV(n,t)}function rI(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function _V(n){return n=n||{},n.data=rI(n.data),nI(n),n}var mA=new Map,iI=new Set;function yf(n,t){let e=mA.get(n);return e||(e=t(),mA.set(n,e),iI.add(e)),e}var Cc=(n,t,e)=>{let r=wi(t,e);r!==void 0&&n.add(r)},P0=class{constructor(t){this._config=_V(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=rI(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),nI(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return yf(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return yf(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return yf(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,r=this.type;return yf(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let r=this._scopeCache,i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){let{options:i,type:s}=this,o=this._cachedScopes(t,r),a=o.get(e);if(a)return a;let l=new Set;e.forEach(u=>{t&&(l.add(t),u.forEach(d=>Cc(l,t,d))),u.forEach(d=>Cc(l,i,d)),u.forEach(d=>Cc(l,ts[s]||{},d)),u.forEach(d=>Cc(l,qe,d)),u.forEach(d=>Cc(l,cf,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),iI.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,ts[e]||{},qe.datasets[e]||{},{type:e},qe,cf]}resolveNamedOptions(t,e,r,i=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=vA(this._resolverCache,t,i),l=o;if(EV(o,e)){s.$shared=!1,r=Ei(r)?r():r;let c=this.createResolver(t,r,a);l=eo(o,r,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,r=[""],i){let{resolver:s}=vA(this._resolverCache,t,r);return Re(e)?eo(s,e,void 0,i):s}};function vA(n,t,e){let r=n.get(t);r||(r=new Map,n.set(t,r));let i=e.join(),s=r.get(i);return s||(s={resolver:hf(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}var CV=n=>Re(n)&&Object.getOwnPropertyNames(n).some(t=>Ei(n[t]));function EV(n,t){let{isScriptable:e,isIndexable:r}=r0(n);for(let i of t){let s=e(i),o=r(i),a=(o||s)&&n[i];if(s&&(Ei(a)||CV(a))||o&&Je(a))return!0}return!1}var xV="4.5.0",wV=["top","bottom","left","right","chartArea"];function yA(n,t){return n==="top"||n==="bottom"||wV.indexOf(n)===-1&&t==="x"}function bA(n,t){return function(e,r){return e[n]===r[n]?e[t]-r[t]:e[n]-r[n]}}function _A(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ze(e&&e.onComplete,[n],t)}function DV(n){let t=n.chart,e=t.options.animation;Ze(e&&e.onProgress,[n],t)}function sI(n){return ff()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var xf={},CA=n=>{let t=sI(n);return Object.values(xf).filter(e=>e.canvas===t).pop()};function SV(n,t,e){let r=Object.keys(n);for(let i of r){let s=+i;if(s>=t){let o=n[i];delete n[i],(e>0||s>t)&&(n[s+e]=o)}}}function TV(n,t,e,r){return!e||n.type==="mouseout"?null:r?t:n}var Mf=(()=>{class n{static defaults=qe;static instances=xf;static overrides=ts;static registry=Vr;static version=xV;static getChart=CA;static register(...e){Vr.add(...e),EA()}static unregister(...e){Vr.remove(...e),EA()}constructor(e,r){let i=this.config=new P0(r),s=sI(e),o=CA(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Xj(s)),this.platform.updateConfig(i);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=_T(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new R0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=RT(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],xf[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Si.listen(this,"complete",_A),Si.listen(this,"progress",DV),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:r},width:i,height:s,_aspectRatio:o}=this;return Ae(e)?r&&o?o:s?i/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vr}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():a0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return e0(this.canvas,this.ctx),this}stop(){return Si.stop(this),this}resize(e,r){Si.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){let i=this.options,s=this.canvas,o=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,r,o),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,a0(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Ze(i.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};We(r,(i,s)=>{i.id=s})}buildOrUpdateScales(){let e=this.options,r=e.scales,i=this.scales,s=Object.keys(i).reduce((a,l)=>(a[l]=!1,a),{}),o=[];r&&(o=o.concat(Object.keys(r).map(a=>{let l=r[a],c=N0(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),We(o,a=>{let l=a.options,c=l.id,u=N0(c,l),d=be(l.type,a.dtype);(l.position===void 0||yA(l.position,u)!==yA(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in i&&i[c].type===d)h=i[c];else{let f=Vr.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(l,e)}),We(s,(a,l)=>{a||delete i[l]}),We(i,a=>{Jt.configure(this,a,a.options),Jt.addBox(this,a)})}_updateMetasets(){let e=this._metasets,r=this.data.datasets.length,i=e.length;if(e.sort((s,o)=>s.index-o.index),i>r){for(let s=r;s<i;++s)this._destroyDatasetMeta(s);e.splice(r,i-r)}this._sortedMetasets=e.slice(0).sort(bA("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((i,s)=>{r.filter(o=>o===i._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],r=this.data.datasets,i,s;for(this._removeUnreferencedMetasets(),i=0,s=r.length;i<s;i++){let o=r[i],a=this.getDatasetMeta(i),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=l,a.indexAxis=o.indexAxis||O0(l,this.options),a.order=o.order||0,a.index=i,a.label=""+o.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let c=Vr.getController(l),{datasetElementType:u,dataElementType:d}=qe.datasets[l];Object.assign(c,{dataElementType:Vr.getElement(d),datasetElementType:u&&Vr.getElement(u)}),a.controller=new c(this,i),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){We(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),s||We(o,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bA("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){We(this.scales,e=>{Jt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Hb(r,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:s,count:o}of r){let a=i==="_removeElements"?-o:o;SV(e,s,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=i(0);for(let o=1;o<r;o++)if(!Hb(s,i(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Jt.update(this,this.width,this.height,e);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],We(this.boxes,s=>{i&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Ei(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){let i=this.getDatasetMeta(e),s={meta:i,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(i.controller._update(r),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Si.has(this)?this.attached&&!Si.running(this)&&Si.start(this):(this.draw(),_A({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:i,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let r=this._sortedMetasets,i=[],s,o;for(s=0,o=r.length;s<o;++s){let a=r[s];(!e||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let r=this.ctx,i={meta:e,index:e.index,cancelable:!0},s=f0(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(s&&gc(r,s),e.controller.draw(),s&&mc(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Lr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,i,s){let o=Ij.modes[r];return typeof o=="function"?o(this,e,i,s):[]}getDatasetMeta(e){let r=this.data.datasets[e],i=this._metasets,s=i.filter(o=>o&&o._dataset===r).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Di(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let r=this.data.datasets[e];if(!r)return!1;let i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(e,r){let i=this.getDatasetMeta(e);i.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,i){let s=i?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);ga(r)?(o.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),a.update(o,{visible:i}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){let r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Si.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),e0(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete xf[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,r=this.platform,i=(o,a)=>{r.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};We(this.options.events,o=>i(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,r=this.platform,i=(c,u)=>{r.addEventListener(this,c,u),e[c]=u},s=(c,u)=>{e[c]&&(r.removeEventListener(this,c,u),delete e[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),i("resize",o),i("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),i("attach",l)},r.isAttached(this.canvas)?l():a()}unbindEvents(){We(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},We(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,i){let s=i?"set":"remove",o,a,l,c;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let r=this._active||[],i=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!fc(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(e,r,i){return this._plugins.notify(this,e,r,i)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,i){let s=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(r,e),l=i?e:o(e,r);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,r){let i={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,s)===!1)return;let o=this._handleEvent(e,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(o||i.changed)&&this.render(),this}_handleEvent(e,r,i){let{_active:s=[],options:o}=this,a=r,l=this._getActiveElements(e,s,i,a),c=xT(e),u=TV(e,this._lastEvent,i,c);i&&(this._lastEvent=null,Ze(o.onHover,[e,l,this],this),c&&Ze(o.onClick,[e,l,this],this));let d=!fc(l,s);return(d||r)&&(this._active=l,this._updateHoverStyles(l,s,r)),this._lastEvent=u,d}_getActiveElements(e,r,i,s){if(e.type==="mouseout")return[];if(!i)return r;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return n})();function EA(){return We(Mf.instances,n=>n._plugins.invalidate())}function AV(n,t,e){let{startAngle:r,x:i,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,d=Math.min(c/o,Ut(r-e));if(n.beginPath(),n.arc(i,s,o-c/2,r+d/2,e-d/2),a>0){let h=Math.min(c/a,Ut(r-e));n.arc(i,s,a+c/2,e-h/2,r+h/2,!0)}else{let h=Math.min(c/2,o*Ut(r-e));if(u==="round")n.arc(i,s,h,e-Ve/2,r+Ve/2,!0);else if(u==="bevel"){let f=2*h*h,p=-f*Math.cos(e+Ve/2)+i,g=-f*Math.sin(e+Ve/2)+s,m=f*Math.cos(r+Ve/2)+i,v=f*Math.sin(r+Ve/2)+s;n.lineTo(p,g),n.lineTo(m,v)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function IV(n,t,e){let{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=t,c=i/a;n.beginPath(),n.arc(s,o,a,r-c,e+c),l>i?(c=i/l,n.arc(s,o,l,e+c,r-c,!0)):n.arc(s,o,i,e+ht,r-ht),n.closePath(),n.clip()}function MV(n){return df(n,["outerStart","outerEnd","innerStart","innerEnd"])}function RV(n,t,e,r){let i=MV(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,r*t/2),a=l=>{let c=(e-Math.min(s,l))*r/2;return Ot(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ot(i.innerStart,0,o),innerEnd:Ot(i.innerEnd,0,o)}}function Ca(n,t,e,r){return{x:e+n*Math.cos(t),y:r+n*Math.sin(t)}}function Tf(n,t,e,r,i,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,d=Math.max(t.outerRadius+r+e-c,0),h=u>0?u+r+e+c:0,f=0,p=i-l;if(r){let U=u>0?u-r:0,P=d>0?d-r:0,M=(U+P)/2,D=M!==0?p*M/(M+r):p;f=(p-D)/2}let g=Math.max(.001,p*d-e/Ve)/d,m=(p-g)/2,v=l+m+f,y=i-m-f,{outerStart:b,outerEnd:C,innerStart:_,innerEnd:E}=RV(t,h,d,y-v),w=d-b,x=d-C,S=v+b/w,A=y-C/x,I=h+_,O=h+E,k=v+_/I,$=y-E/O;if(n.beginPath(),s){let U=(S+A)/2;if(n.arc(o,a,d,S,U),n.arc(o,a,d,U,A),C>0){let T=Ca(x,A,o,a);n.arc(T.x,T.y,C,A,y+ht)}let P=Ca(O,y,o,a);if(n.lineTo(P.x,P.y),E>0){let T=Ca(O,$,o,a);n.arc(T.x,T.y,E,y+ht,$+Math.PI)}let M=(y-E/h+(v+_/h))/2;if(n.arc(o,a,h,y-E/h,M,!0),n.arc(o,a,h,M,v+_/h,!0),_>0){let T=Ca(I,k,o,a);n.arc(T.x,T.y,_,k+Math.PI,v-ht)}let D=Ca(w,v,o,a);if(n.lineTo(D.x,D.y),b>0){let T=Ca(w,S,o,a);n.arc(T.x,T.y,b,v-ht,S)}}else{n.moveTo(o,a);let U=Math.cos(S)*d+o,P=Math.sin(S)*d+a;n.lineTo(U,P);let M=Math.cos(A)*d+o,D=Math.sin(A)*d+a;n.lineTo(M,D)}n.closePath()}function OV(n,t,e,r,i){let{fullCircles:s,startAngle:o,circumference:a}=t,l=t.endAngle;if(s){Tf(n,t,e,r,l,i);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%et||et))}return Tf(n,t,e,r,l,i),n.fill(),l}function NV(n,t,e,r,i){let{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,p?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let g=t.endAngle;if(s){Tf(n,t,e,r,g,i);for(let m=0;m<s;++m)n.stroke();isNaN(a)||(g=o+(a%et||et))}p&&IV(n,t,g),l.selfJoin&&g-o>=Ve&&f===0&&u!=="miter"&&AV(n,t,g),s||(Tf(n,t,e,r,g,i),n.stroke())}var k0=class extends gr{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,r){let i=this.getProps(["x","y"],r),{angle:s,distance:o}=Gb(i,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),h=(this.options.spacing+this.options.borderWidth)/2,f=be(d,l-a),p=va(s,a,l)&&a!==l,g=f>=et||p,m=Br(o,c+h,u+h);return g&&m}getCenterPoint(t){let{x:e,y:r,startAngle:i,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,u=(i+s)/2,d=(o+a+c+l)/2;return{x:e+Math.cos(u)*d,y:r+Math.sin(u)*d}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:r}=this,i=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=r>et?Math.floor(r/et):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);let l=1-Math.sin(Math.min(Ve,r||0)),c=i*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,OV(t,this,c,s,o),NV(t,this,c,s,o),t.restore()}};function oI(n,t,e=t){n.lineCap=be(e.borderCapStyle,t.borderCapStyle),n.setLineDash(be(e.borderDash,t.borderDash)),n.lineDashOffset=be(e.borderDashOffset,t.borderDashOffset),n.lineJoin=be(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=be(e.borderWidth,t.borderWidth),n.strokeStyle=be(e.borderColor,t.borderColor)}function PV(n,t,e){n.lineTo(e.x,e.y)}function kV(n){return n.stepped?kT:n.tension||n.cubicInterpolationMode==="monotone"?LT:PV}function aI(n,t,e={}){let r=n.length,{start:i=0,end:s=r-1}=e,{start:o,end:a}=t,l=Math.max(i,o),c=Math.min(s,a),u=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function LV(n,t,e,r){let{points:i,options:s}=t,{count:o,start:a,loop:l,ilen:c}=aI(i,e,r),u=kV(s),{move:d=!0,reverse:h}=r||{},f,p,g;for(f=0;f<=c;++f)p=i[(a+(h?c-f:f))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,g,p,h,s.stepped),g=p);return l&&(p=i[(a+(h?c:0))%o],u(n,g,p,h,s.stepped)),!!l}function FV(n,t,e,r){let i=t.points,{count:s,start:o,ilen:a}=aI(i,e,r),{move:l=!0,reverse:c}=r||{},u=0,d=0,h,f,p,g,m,v,y=C=>(o+(c?a-C:C))%s,b=()=>{g!==m&&(n.lineTo(u,m),n.lineTo(u,g),n.lineTo(u,v))};for(l&&(f=i[y(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=i[y(h)],f.skip)continue;let C=f.x,_=f.y,E=C|0;E===p?(_<g?g=_:_>m&&(m=_),u=(d*u+C)/++d):(b(),n.lineTo(C,_),p=E,d=0,g=m=_),v=_}b()}function L0(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?FV:LV}function BV(n){return n.stepped?GT:n.tension||n.cubicInterpolationMode==="monotone"?WT:es}function jV(n,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),oI(n,t.options),n.stroke(i)}function VV(n,t,e,r){let{segments:i,options:s}=t,o=L0(t);for(let a of i)oI(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+r-1})&&n.closePath(),n.stroke()}var HV=typeof Path2D=="function";function UV(n,t,e,r){HV&&!t.options.segment?jV(n,t,e,r):VV(n,t,e,r)}var Rf=(()=>{class n extends gr{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let s=i.spanGaps?this._loop:this._fullLoop;UT(this._points,i,e,s,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=XT(this,this.options.segment))}first(){let e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){let e=this.segments,r=this.points,i=e.length;return i&&r[e[i-1].end]}interpolate(e,r){let i=this.options,s=e[r],o=this.points,a=h0(this,{property:r,start:s,end:s});if(!a.length)return;let l=[],c=BV(i),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=o[h],g=o[f];if(p===g){l.push(p);continue}let m=Math.abs((s-p[r])/(g[r]-p[r])),v=c(p,g,m,i.stepped);v[r]=e[r],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,r,i){return L0(this)(e,this,r,i)}path(e,r,i){let s=this.segments,o=L0(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let l of s)a&=o(e,this,l,{start:r,end:r+i-1});return!!a}draw(e,r,i,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),UV(e,this,i,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function xA(n,t,e,r){let i=n.options,{[e]:s}=n.getProps([e],r);return Math.abs(t-s)<i.radius+i.hitRadius}var $V=(()=>{class n extends gr{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,i){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(e-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,r){return xA(this,e,"x",r)}inYRange(e,r){return xA(this,e,"y",r)}getCenterPoint(e){let{x:r,y:i}=this.getProps(["x","y"],e);return{x:r,y:i}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);let i=r&&e.borderWidth||0;return(r+i)*2}draw(e,r){let i=this.options;this.skip||i.radius<.1||!Lr(this,r,this.size(i)/2)||(e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.fillStyle=i.backgroundColor,uf(e,i,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function lI(n,t){let{x:e,y:r,base:i,width:s,height:o}=n.getProps(["x","y","base","width","height"],t),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(e,i),l=Math.max(e,i),c=r-d,u=r+d):(d=s/2,a=e-d,l=e+d,c=Math.min(r,i),u=Math.max(r,i)),{left:a,top:c,right:l,bottom:u}}function os(n,t,e,r){return n?0:Ot(t,e,r)}function zV(n,t,e){let r=n.options.borderWidth,i=n.borderSkipped,s=n0(r);return{t:os(i.top,s.top,0,e),r:os(i.right,s.right,0,t),b:os(i.bottom,s.bottom,0,e),l:os(i.left,s.left,0,t)}}function GV(n,t,e){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=is(i),o=Math.min(t,e),a=n.borderSkipped,l=r||Re(i);return{topLeft:os(!l||a.top||a.left,s.topLeft,0,o),topRight:os(!l||a.top||a.right,s.topRight,0,o),bottomLeft:os(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:os(!l||a.bottom||a.right,s.bottomRight,0,o)}}function WV(n){let t=lI(n),e=t.right-t.left,r=t.bottom-t.top,i=zV(n,e/2,r/2),s=GV(n,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function C0(n,t,e,r){let i=t===null,s=e===null,a=n&&!(i&&s)&&lI(n,r);return a&&(i||Br(t,a.left,a.right))&&(s||Br(e,a.top,a.bottom))}function YV(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function XV(n,t){n.rect(t.x,t.y,t.w,t.h)}function E0(n,t,e={}){let r=n.x!==e.x?-t:0,i=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-r,o=(n.y+n.h!==e.y+e.h?t:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+o,radius:n.radius}}var F0=class extends gr{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=WV(this),a=YV(o.radius)?ba:XV;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,E0(o,e,s)),t.clip(),a(t,E0(s,-e,o)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),a(t,E0(s,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return C0(this,t,e,r)}inXRange(t,e){return C0(this,t,null,e)}inYRange(t,e){return C0(this,null,t,e)}getCenterPoint(t){let{x:e,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+i)/2:e,y:s?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},KV=Object.freeze({__proto__:null,ArcElement:k0,BarElement:F0,LineElement:Rf,PointElement:$V}),B0=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],wA=B0.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function cI(n){return B0[n%B0.length]}function uI(n){return wA[n%wA.length]}function ZV(n,t){return n.borderColor=cI(t),n.backgroundColor=uI(t),++t}function qV(n,t){return n.backgroundColor=n.data.map(()=>cI(t++)),t}function QV(n,t){return n.backgroundColor=n.data.map(()=>uI(t++)),t}function JV(n){let t=0;return(e,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof W0?t=qV(e,t):i instanceof qA?t=QV(e,t):i&&(t=ZV(e,t))}}function DA(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function eH(n){return n&&(n.borderColor||n.backgroundColor)}function tH(){return qe.borderColor!=="rgba(0,0,0,0.1)"||qe.backgroundColor!=="rgba(0,0,0,0.1)"}var nH={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:s}=i,o=DA(r)||eH(i)||s&&DA(s)||tH();if(!e.forceOverride&&o)return;let a=JV(n);r.forEach(a)}};function rH(n,t,e,r,i){let s=i.samples||r;if(s>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(s-2),l=0,c=t+e-1,u=t,d,h,f,p,g;for(o[l++]=n[u],d=0;d<s-2;d++){let m=0,v=0,y,b=Math.floor((d+1)*a)+1+t,C=Math.min(Math.floor((d+2)*a)+1,e)+t,_=C-b;for(y=b;y<C;y++)m+=n[y].x,v+=n[y].y;m/=_,v/=_;let E=Math.floor(d*a)+1+t,w=Math.min(Math.floor((d+1)*a)+1,e)+t,{x,y:S}=n[u];for(f=p=-1,y=E;y<w;y++)p=.5*Math.abs((x-m)*(n[y].y-S)-(x-n[y].x)*(v-S)),p>f&&(f=p,h=n[y],g=y);o[l++]=h,u=g}return o[l++]=n[c],o}function iH(n,t,e,r){let i=0,s=0,o,a,l,c,u,d,h,f,p,g,m=[],v=t+e-1,y=n[t].x,C=n[v].x-y;for(o=t;o<t+e;++o){a=n[o],l=(a.x-y)/C*r,c=a.y;let _=l|0;if(_===u)c<p?(p=c,d=o):c>g&&(g=c,h=o),i=(s*i+a.x)/++s;else{let E=o-1;if(!Ae(d)&&!Ae(h)){let w=Math.min(d,h),x=Math.max(d,h);w!==f&&w!==E&&m.push(ce(H({},n[w]),{x:i})),x!==f&&x!==E&&m.push(ce(H({},n[x]),{x:i}))}o>0&&E!==f&&m.push(n[E]),m.push(a),u=_,s=0,p=g=c,d=h=f=o}}return m}function dI(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function SA(n){n.data.datasets.forEach(t=>{dI(t)})}function sH(n,t){let e=t.length,r=0,i,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ot(kr(t,s.axis,o).lo,0,e-1)),c?i=Ot(kr(t,s.axis,a).hi+1,r,e)-r:i=e-r,{start:r,count:i}}var oH={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){SA(n);return}let r=n.width;n.data.datasets.forEach((i,s)=>{let{_data:o,indexAxis:a}=i,l=n.getDatasetMeta(s),c=o||i.data;if(_a([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=sH(l,c),f=e.threshold||4*r;if(h<=f){dI(i);return}Ae(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=rH(c,d,h,r,e);break;case"min-max":p=iH(c,d,h,r);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=p})},destroy(n){SA(n)}};function aH(n,t,e){let r=n.segments,i=n.points,s=t.points,o=[];for(let a of r){let{start:l,end:c}=a;c=Of(l,c,i);let u=j0(e,i[l],i[c],a.loop);if(!t.segments){o.push({source:a,target:u,start:i[l],end:i[c]});continue}let d=h0(t,u);for(let h of d){let f=j0(e,s[h.start],s[h.end],h.loop),p=d0(a,i,f);for(let g of p)o.push({source:g,target:h,start:{[e]:TA(u,f,"start",Math.max)},end:{[e]:TA(u,f,"end",Math.min)}})}}return o}function j0(n,t,e,r){if(r)return;let i=t[n],s=e[n];return n==="angle"&&(i=Ut(i),s=Ut(s)),{property:n,start:i,end:s}}function lH(n,t){let{x:e=null,y:r=null}=n||{},i=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=Of(o,a,i);let l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function Of(n,t,e){for(;t>n;t--){let r=e[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function TA(n,t,e,r){return n&&t?r(n[e],t[e]):n?n[e]:t?t[e]:0}function hI(n,t){let e=[],r=!1;return Je(n)?(r=!0,e=n):e=lH(n,t),e.length?new Rf({points:e,options:{tension:0},_loop:r,_fullLoop:r}):null}function AA(n){return n&&n.fill!==!1}function cH(n,t,e){let i=n[t].fill,s=[t],o;if(!e)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ut(i))return i;if(o=n[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function uH(n,t,e){let r=pH(n);if(Re(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ut(i)&&Math.floor(i)===i?dH(r[0],t,i,e):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function dH(n,t,e,r){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=r?!1:e}function hH(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:Re(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function fH(n,t,e){let r;return n==="start"?r=e:n==="end"?r=t.options.reverse?t.min:t.max:Re(n)?r=n.value:r=t.getBaseValue(),r}function pH(n){let t=n.options,e=t.fill,r=be(e&&e.target,e);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function gH(n){let{scale:t,index:e,line:r}=n,i=[],s=r.segments,o=r.points,a=mH(t,e);a.push(hI({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)vH(i,o[u],a)}return new Rf({points:i,options:{}})}function mH(n,t){let e=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let s=r[i];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function vH(n,t,e){let r=[];for(let i=0;i<e.length;i++){let s=e[i],{first:o,last:a,point:l}=yH(s,t,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(n.push(l),!a)break}}n.push(...r)}function yH(n,t,e){let r=n.interpolate(t,e);if(!r)return{};let i=r[e],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][e],h=o[u.end][e];if(Br(i,d,h)){a=i===d,l=i===h;break}}return{first:a,last:l,point:r}}var Af=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,r){let{x:i,y:s,radius:o}=this;return e=e||{start:0,end:et},t.arc(i,s,o,e.end,e.start,!0),!r.bounds}interpolate(t){let{x:e,y:r,radius:i}=this,s=t.angle;return{x:e+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}};function bH(n){let{chart:t,fill:e,line:r}=n;if(ut(e))return _H(t,e);if(e==="stack")return gH(n);if(e==="shape")return!0;let i=CH(n);return i instanceof Af?i:hI(i,r)}function _H(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function CH(n){return(n.scale||{}).getPointPositionForValue?xH(n):EH(n)}function EH(n){let{scale:t={},fill:e}=n,r=hH(e,t);if(ut(r)){let i=t.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function xH(n){let{scale:t,fill:e}=n,r=t.options,i=t.getLabels().length,s=r.reverse?t.max:t.min,o=fH(e,t,s),a=[];if(r.grid.circular){let l=t.getPointPositionForValue(0,s);return new Af({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(t.getPointPositionForValue(l,o));return a}function x0(n,t,e){let r=bH(t),{chart:i,index:s,line:o,scale:a,axis:l}=t,c=o.options,u=c.fill,d=c.backgroundColor,{above:h=d,below:f=d}=u||{},p=i.getDatasetMeta(s),g=f0(i,p);r&&o.points.length&&(gc(n,e),wH(n,{line:o,target:r,above:h,below:f,area:e,scale:a,axis:l,clip:g}),mc(n))}function wH(n,t){let{line:e,target:r,above:i,below:s,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;n.save();let u=s;s!==i&&(c==="x"?(IA(n,r,o.top),w0(n,{line:e,target:r,color:i,scale:a,property:c,clip:l}),n.restore(),n.save(),IA(n,r,o.bottom)):c==="y"&&(MA(n,r,o.left),w0(n,{line:e,target:r,color:s,scale:a,property:c,clip:l}),n.restore(),n.save(),MA(n,r,o.right),u=i)),w0(n,{line:e,target:r,color:u,scale:a,property:c,clip:l}),n.restore()}function IA(n,t,e){let{segments:r,points:i}=t,s=!0,o=!1;n.beginPath();for(let a of r){let{start:l,end:c}=a,u=i[l],d=i[Of(l,c,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,e),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function MA(n,t,e){let{segments:r,points:i}=t,s=!0,o=!1;n.beginPath();for(let a of r){let{start:l,end:c}=a,u=i[l],d=i[Of(l,c,i)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(e,u.y),n.lineTo(u.x,u.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(e,d.y)}n.lineTo(e,t.first().y),n.closePath(),n.clip()}function w0(n,t){let{line:e,target:r,property:i,color:s,scale:o,clip:a}=t,l=aH(e,r,i);for(let{source:c,target:u,start:d,end:h}of l){let{style:{backgroundColor:f=s}={}}=c,p=r!==!0;n.save(),n.fillStyle=f,DH(n,o,a,p&&j0(i,d,h)),n.beginPath();let g=!!e.pathSegment(n,c),m;if(p){g?n.closePath():RA(n,r,h,i);let v=!!r.pathSegment(n,u,{move:g,reverse:!0});m=g&&v,m||RA(n,r,d,i)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function DH(n,t,e,r){let i=t.chart.chartArea,{property:s,start:o,end:a}=r||{};if(s==="x"||s==="y"){let l,c,u,d;s==="x"?(l=o,c=i.top,u=a,d=i.bottom):(l=i.left,c=o,u=i.right,d=a),n.beginPath(),e&&(l=Math.max(l,e.left),u=Math.min(u,e.right),c=Math.max(c,e.top),d=Math.min(d,e.bottom)),n.rect(l,c,u-l,d-c),n.clip()}}function RA(n,t,e,r){let i=t.interpolate(e,r);i&&n.lineTo(i.x,i.y)}var SH={id:"filler",afterDatasetsUpdate(n,t,e){let r=(n.data.datasets||[]).length,i=[],s,o,a,l;for(o=0;o<r;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof Rf&&(l={visible:n.isDatasetVisible(o),index:o,fill:uH(a,o,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=cH(i,o,e.propagate))},beforeDraw(n,t,e){let r=e.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=i.length-1;o>=0;--o){let a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&x0(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let s=r[i].$filler;AA(s)&&x0(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let r=t.meta.$filler;!AA(r)||e.drawTime!=="beforeDatasetDraw"||x0(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},OA=(n,t)=>{let{boxHeight:e=t,boxWidth:r=t}=n;return n.usePointStyle&&(e=Math.min(e,t),r=n.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},TH=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,If=class extends gr{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Ze(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let r=t.labels,i=wt(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=OA(r,s),c,u;e.font=i.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(u,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=i+a,d=t;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=r+e/2+s.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:m,height:i},c[c.length-1]+=m+a}),d}_fitCols(t,e,r,i){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-t,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,v)=>{let{itemWidth:y,itemHeight:b}=AH(r,e,s,m,i);v>0&&f+b+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,g++,h=f=0),l[v]={left:p,top:f,col:g,width:y,height:b},h=Math.max(h,y),f+=b+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:s}}=this,o=no(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=$t(r,this.left+i,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=$t(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+t+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=$t(r,this.top+t+i,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=$t(r,this.top+t+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;gc(t,this),this._draw(),mc(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:s,labels:o}=t,a=qe.color,l=no(t.rtl,this.left,this.width),c=wt(o.font),{padding:u}=o,d=c.size,h=d/2,f;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=OA(o,d),v=function(E,w,x){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;i.save();let S=be(x.lineWidth,1);if(i.fillStyle=be(x.fillStyle,a),i.lineCap=be(x.lineCap,"butt"),i.lineDashOffset=be(x.lineDashOffset,0),i.lineJoin=be(x.lineJoin,"miter"),i.lineWidth=S,i.strokeStyle=be(x.strokeStyle,a),i.setLineDash(be(x.lineDash,[])),o.usePointStyle){let A={radius:g*Math.SQRT2/2,pointStyle:x.pointStyle,rotation:x.rotation,borderWidth:S},I=l.xPlus(E,p/2),O=w+h;t0(i,A,I,O,o.pointStyleWidth&&p)}else{let A=w+Math.max((d-g)/2,0),I=l.leftForLtr(E,p),O=is(x.borderRadius);i.beginPath(),Object.values(O).some(k=>k!==0)?ba(i,{x:I,y:A,w:p,h:g,radius:O}):i.rect(I,A,p,g),i.fill(),S!==0&&i.stroke()}i.restore()},y=function(E,w,x){rs(i,x.text,E,w+m/2,c,{strikethrough:x.hidden,textAlign:l.textAlign(x.textAlign)})},b=this.isHorizontal(),C=this._computeTitleHeight();b?f={x:$t(s,this.left+u,this.right-r[0]),y:this.top+u+C,line:0}:f={x:this.left+u,y:$t(s,this.top+C+u,this.bottom-e[0].height),line:0},c0(this.ctx,t.textDirection);let _=m+u;this.legendItems.forEach((E,w)=>{i.strokeStyle=E.fontColor,i.fillStyle=E.fontColor;let x=i.measureText(E.text).width,S=l.textAlign(E.textAlign||(E.textAlign=o.textAlign)),A=p+h+x,I=f.x,O=f.y;l.setWidth(this.width),b?w>0&&I+A+u>this.right&&(O=f.y+=_,f.line++,I=f.x=$t(s,this.left+u,this.right-r[f.line])):w>0&&O+_>this.bottom&&(I=f.x=I+e[f.line].width+u,f.line++,O=f.y=$t(s,this.top+C+u,this.bottom-e[f.line].height));let k=l.x(I);if(v(k,O,E),I=OT(S,I+p+h,b?I+A:this.right,t.rtl),y(l.x(I),O,E),b)f.x+=A+u;else if(typeof E.text!="string"){let $=c.lineHeight;f.y+=fI(E,$)+u}else f.y+=_}),u0(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,r=wt(e.font),i=zt(e.padding);if(!e.display)return;let s=no(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=r.size/2,c=i.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=$t(t.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+$t(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}let f=$t(a,d,d+h);o.textAlign=s.textAlign(lf(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=r.string,rs(o,e.text,f,u,r)}_computeTitleHeight(){let t=this.options.title,e=wt(t.font),r=zt(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,s;if(Br(t,this.left,this.right)&&Br(e,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Br(t,i.left,i.left+i.width)&&Br(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){let e=this.options;if(!RH(t.type,e))return;let r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let i=this._hoveredItem,s=TH(i,r);i&&!s&&Ze(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!s&&Ze(e.onHover,[t,r,this],this)}else r&&Ze(e.onClick,[t,r,this],this)}};function AH(n,t,e,r,i){let s=IH(r,n,t,e),o=MH(i,r,t.lineHeight);return{itemWidth:s,itemHeight:o}}function IH(n,t,e,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+r.measureText(i).width}function MH(n,t,e){let r=n;return typeof t.text!="string"&&(r=fI(t,e)),r}function fI(n,t){let e=n.text?n.text.length:0;return t*e}function RH(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var OH={id:"legend",_element:If,start(n,t,e){let r=n.legend=new If({ctx:n.ctx,options:e,chart:n});Jt.configure(n,r,e),Jt.addBox(n,r)},stop(n){Jt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let r=n.legend;Jt.configure(n,r,e),r.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),u=zt(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Dc=class extends gr{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let i=Je(r.text)?r.text.length:1;this._padding=zt(r.padding);let s=i*wt(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:r,bottom:i,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=$t(a,r,s),d=e+t,c=s-r):(o.position==="left"?(u=r+t,d=$t(a,i,e),l=Ve*-.5):(u=s-t,d=$t(a,e,i),l=Ve*.5),c=i-e),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let r=wt(e.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);rs(t,e.text,0,0,r,{color:e.color,maxWidth:l,rotation:c,textAlign:lf(e.align),textBaseline:"middle",translation:[o,a]})}};function NH(n,t){let e=new Dc({ctx:n.ctx,options:t,chart:n});Jt.configure(n,e,t),Jt.addBox(n,e),n.titleBlock=e}var PH={id:"title",_element:Dc,start(n,t,e){NH(n,e)},stop(n){let t=n.titleBlock;Jt.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let r=n.titleBlock;Jt.configure(n,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},bf=new WeakMap,kH={id:"subtitle",start(n,t,e){let r=new Dc({ctx:n.ctx,options:e,chart:n});Jt.configure(n,r,e),Jt.addBox(n,r),bf.set(n,r)},stop(n){Jt.removeBox(n,bf.get(n)),bf.delete(n)},beforeUpdate(n,t,e){let r=bf.get(n);Jt.configure(n,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},xc={average(n){if(!n.length)return!1;let t,e,r=new Set,i=0,s=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();r.add(l.x),i+=l.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((a,l)=>a+l)/r.size,y:i/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=nf(t,c);u<i&&(i=u,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function jr(n,t){return t&&(Je(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Ti(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function LH(n,t){let{element:e,datasetIndex:r,index:i}=t,s=n.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:n,label:o,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function NA(n,t){let e=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:o,boxHeight:a}=t,l=wt(t.bodyFont),c=wt(t.titleFont),u=wt(t.footerFont),d=s.length,h=i.length,f=r.length,p=zt(t.padding),g=p.height,m=0,v=r.reduce((C,_)=>C+_.before.length+_.lines.length+_.after.length,0);if(v+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*t.titleSpacing+t.titleMarginBottom),v){let C=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*C+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}h&&(g+=t.footerMarginTop+h*u.lineHeight+(h-1)*t.footerSpacing);let y=0,b=function(C){m=Math.max(m,e.measureText(C).width+y)};return e.save(),e.font=c.string,We(n.title,b),e.font=l.string,We(n.beforeBody.concat(n.afterBody),b),y=t.displayColors?o+2+t.boxPadding:0,We(r,C=>{We(C.before,b),We(C.lines,b),We(C.after,b)}),y=0,e.font=u.string,We(n.footer,b),e.restore(),m+=p.width,{width:m,height:g}}function FH(n,t){let{y:e,height:r}=t;return e<r/2?"top":e>n.height-r/2?"bottom":"center"}function BH(n,t,e,r){let{x:i,width:s}=r,o=e.caretSize+e.caretPadding;if(n==="left"&&i+s+o>t.width||n==="right"&&i-s-o<0)return!0}function jH(n,t,e,r){let{x:i,width:s}=e,{width:o,chartArea:{left:a,right:l}}=n,c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),BH(c,n,t,e)&&(c="center"),c}function PA(n,t,e){let r=e.yAlign||t.yAlign||FH(n,e);return{xAlign:e.xAlign||t.xAlign||jH(n,t,e,r),yAlign:r}}function VH(n,t){let{x:e,width:r}=n;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function HH(n,t,e){let{y:r,height:i}=n;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function kA(n,t,e,r){let{caretSize:i,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=e,c=i+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=is(o),p=VH(t,a),g=HH(t,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+i:a==="right"&&(p+=Math.max(d,f)+i),{x:Ot(p,0,r.width-t.width),y:Ot(g,0,r.height-t.height)}}function _f(n,t,e){let r=zt(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-r.right:n.x+r.left}function LA(n){return jr([],Ti(n))}function UH(n,t,e){return Di(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function FA(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var pI={beforeTitle:Fr,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:Fr,beforeBody:Fr,beforeLabel:Fr,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return Ae(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Fr,afterBody:Fr,beforeFooter:Fr,footer:Fr,afterFooter:Fr};function vn(n,t,e,r){let i=n[t].call(e,r);return typeof i>"u"?pI[t].call(e,r):i}var BA=(()=>{class n extends gr{static positioners=xc;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let r=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&r.options.animation&&i.animations,o=new wf(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=UH(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){let{callbacks:i}=r,s=vn(i,"beforeTitle",this,e),o=vn(i,"title",this,e),a=vn(i,"afterTitle",this,e),l=[];return l=jr(l,Ti(s)),l=jr(l,Ti(o)),l=jr(l,Ti(a)),l}getBeforeBody(e,r){return LA(vn(r.callbacks,"beforeBody",this,e))}getBody(e,r){let{callbacks:i}=r,s=[];return We(e,o=>{let a={before:[],lines:[],after:[]},l=FA(i,o);jr(a.before,Ti(vn(l,"beforeLabel",this,o))),jr(a.lines,vn(l,"label",this,o)),jr(a.after,Ti(vn(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,r){return LA(vn(r.callbacks,"afterBody",this,e))}getFooter(e,r){let{callbacks:i}=r,s=vn(i,"beforeFooter",this,e),o=vn(i,"footer",this,e),a=vn(i,"afterFooter",this,e),l=[];return l=jr(l,Ti(s)),l=jr(l,Ti(o)),l=jr(l,Ti(a)),l}_createItems(e){let r=this._active,i=this.chart.data,s=[],o=[],a=[],l=[],c,u;for(c=0,u=r.length;c<u;++c)l.push(LH(this.chart,r[c]));return e.filter&&(l=l.filter((d,h,f)=>e.filter(d,h,f,i))),e.itemSort&&(l=l.sort((d,h)=>e.itemSort(d,h,i))),We(l,d=>{let h=FA(e.callbacks,d);s.push(vn(h,"labelColor",this,d)),o.push(vn(h,"labelPointStyle",this,d)),a.push(vn(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,r){let i=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=xc[i.position].call(this,s,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let c=this._size=NA(this,i),u=Object.assign({},l,c),d=PA(this.chart,i,u),h=kA(i,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,i,s){let o=this.getCaretPosition(e,i,s);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,i){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=i,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=is(l),{x:f,y:p}=e,{width:g,height:m}=r,v,y,b,C,_,E;return o==="center"?(_=p+m/2,s==="left"?(v=f,y=v-a,C=_+a,E=_-a):(v=f+g,y=v+a,C=_-a,E=_+a),b=v):(s==="left"?y=f+Math.max(c,d)+a:s==="right"?y=f+g-Math.max(u,h)-a:y=this.caretX,o==="top"?(C=p,_=C-a,v=y-a,b=y+a):(C=p+m,_=C+a,v=y+a,b=y-a),E=C),{x1:v,x2:y,x3:b,y1:C,y2:_,y3:E}}drawTitle(e,r,i){let s=this.title,o=s.length,a,l,c;if(o){let u=no(i.rtl,this.x,this.width);for(e.x=_f(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=wt(i.titleFont),l=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,c=0;c<o;++c)r.fillText(s[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,r,i,s,o){let a=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:u}=o,d=wt(o.bodyFont),h=_f(this,"left",o),f=s.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,g=r.y+p;if(o.usePointStyle){let m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},v=s.leftForLtr(f,u)+u/2,y=g+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,uf(e,m,v,y),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,uf(e,m,v,y)}else{e.lineWidth=Re(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let m=s.leftForLtr(f,u),v=s.leftForLtr(s.xPlus(f,1),u-2),y=is(a.borderRadius);Object.values(y).some(b=>b!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,ba(e,{x:m,y:g,w:u,h:c,radius:y}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),ba(e,{x:v,y:g+1,w:u-2,h:c-2,radius:y}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(m,g,u,c),e.strokeRect(m,g,u,c),e.fillStyle=a.backgroundColor,e.fillRect(v,g+1,u-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,r,i){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=i,h=wt(i.bodyFont),f=h.lineHeight,p=0,g=no(i.rtl,this.x,this.width),m=function(S){r.fillText(S,g.x(e.x+p),e.y+f/2),e.y+=f+o},v=g.textAlign(a),y,b,C,_,E,w,x;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,e.x=_f(this,v,i),r.fillStyle=i.bodyColor,We(this.beforeBody,m),p=l&&v!=="right"?a==="center"?u/2+d:u+2+d:0,_=0,w=s.length;_<w;++_){for(y=s[_],b=this.labelTextColors[_],r.fillStyle=b,We(y.before,m),C=y.lines,l&&C.length&&(this._drawColorBox(r,e,_,g,i),f=Math.max(h.lineHeight,c)),E=0,x=C.length;E<x;++E)m(C[E]),f=h.lineHeight;We(y.after,m)}p=0,f=h.lineHeight,We(this.afterBody,m),e.y-=o}drawFooter(e,r,i){let s=this.footer,o=s.length,a,l;if(o){let c=no(i.rtl,this.x,this.width);for(e.x=_f(this,i.footerAlign,i),e.y+=i.footerMarginTop,r.textAlign=c.textAlign(i.footerAlign),r.textBaseline="middle",a=wt(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,l=0;l<o;++l)r.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+i.footerSpacing}}drawBackground(e,r,i,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:u,height:d}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=is(s.cornerRadius);r.fillStyle=s.backgroundColor,r.strokeStyle=s.borderColor,r.lineWidth=s.borderWidth,r.beginPath(),r.moveTo(l+h,c),a==="top"&&this.drawCaret(e,r,i,s),r.lineTo(l+u-f,c),r.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&o==="right"&&this.drawCaret(e,r,i,s),r.lineTo(l+u,c+d-g),r.quadraticCurveTo(l+u,c+d,l+u-g,c+d),a==="bottom"&&this.drawCaret(e,r,i,s),r.lineTo(l+p,c+d),r.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&o==="left"&&this.drawCaret(e,r,i,s),r.lineTo(l,c+h),r.quadraticCurveTo(l,c,l+h,c),r.closePath(),r.fill(),s.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){let r=this.chart,i=this.$animations,s=i&&i.x,o=i&&i.y;if(s||o){let a=xc[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=NA(this,e),c=Object.assign({},a,this._size),u=PA(r,e,c),d=kA(e,c,u,r);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=zt(r.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(o,e,s,r),c0(e,r.textDirection),o.y+=a.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),u0(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){let i=this._active,s=e.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!fc(i,s),a=this._positionChanged(s,r);(o||a)&&(this._active=s,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(e,o,r,i),l=this._positionChanged(a,e),c=r||!fc(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),c}_getActiveElements(e,r,i,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return r.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,i);return o.reverse&&a.reverse(),a}_positionChanged(e,r){let{caretX:i,caretY:s,options:o}=this,a=xc[o.position].call(this,e,r);return a!==!1&&(i!==a.x||s!==a.y)}}return n})(),$H={id:"tooltip",_element:BA,positioners:xc,afterInit(n,t,e){e&&(n.tooltip=new BA({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",ce(H({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pI},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},zH=Object.freeze({__proto__:null,Colors:nH,Decimation:oH,Filler:SH,Legend:OH,SubTitle:kH,Title:PH,Tooltip:$H}),GH=(n,t,e,r)=>(typeof t=="string"?(e=n.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function WH(n,t,e,r){let i=n.indexOf(t);if(i===-1)return GH(n,t,e,r);let s=n.lastIndexOf(t);return i!==s?e:i}var YH=(n,t)=>n===null?null:Ot(Math.round(n),0,t);function jA(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var XH=(()=>{class n extends so{static id="category";static defaults={ticks:{callback:jA}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:s,label:o}of r)i[s]===o&&i.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ae(e))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===e?r:WH(i,e,be(r,e),this._addedLabels),YH(r,i.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),r||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){let e=this.min,r=this.max,i=this.options.offset,s=[],o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=e;a<=r;a++)s.push({value:a});return s}getLabelForValue(e){return jA.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function KH(n,t){let e=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,p=u-1,{min:g,max:m}=t,v=!Ae(o),y=!Ae(a),b=!Ae(c),C=(m-g)/(d+1),_=Ub((m-g)/p/f)*f,E,w,x,S;if(_<1e-14&&!v&&!y)return[{value:g},{value:m}];S=Math.ceil(m/_)-Math.floor(g/_),S>p&&(_=Ub(S*_/p/f)*f),Ae(l)||(E=Math.pow(10,l),_=Math.ceil(_*E)/E),i==="ticks"?(w=Math.floor(g/_)*_,x=Math.ceil(m/_)*_):(w=g,x=m),v&&y&&s&&DT((a-o)/s,_/1e3)?(S=Math.round(Math.min((a-o)/_,u)),_=(a-o)/S,w=o,x=a):b?(w=v?o:w,x=y?a:x,S=c-1,_=(x-w)/S):(S=(x-w)/_,ma(S,Math.round(S),_/1e3)?S=Math.round(S):S=Math.ceil(S));let A=Math.max(zb(_),zb(w));E=Math.pow(10,Ae(l)?A:l),w=Math.round(w*E)/E,x=Math.round(x*E)/E;let I=0;for(v&&(h&&w!==o?(e.push({value:o}),w<o&&I++,ma(Math.round((w+I*_)*E)/E,o,VA(o,C,n))&&I++):w<o&&I++);I<S;++I){let O=Math.round((w+I*_)*E)/E;if(y&&O>a)break;e.push({value:O})}return y&&h&&x!==a?e.length&&ma(e[e.length-1].value,a,VA(a,C,n))?e[e.length-1].value=a:e.push({value:a}):(!y||x===a)&&e.push({value:x}),e}function VA(n,t,{horizontal:e,minRotation:r}){let i=Kn(r),s=(e?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}var xa=class extends so{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Ae(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:i,max:s}=this,o=l=>i=e?i:l,a=l=>s=r?s:l;if(t){let l=pr(i),c=pr(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(i-l)}this.min=i,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=KH(i,s);return t.bounds==="ticks"&&$b(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){let i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return ya(t,this.chart.options.locale,this.options.ticks.format)}},V0=class extends xa{static id="linear";static defaults={ticks:{callback:pc.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ut(t)?t:0,this.max=ut(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,r=Kn(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Sc=n=>Math.floor(xi(n)),io=(n,t)=>Math.pow(10,Sc(n)+t);function HA(n){return n/Math.pow(10,Sc(n))===1}function UA(n,t,e){let r=Math.pow(10,e),i=Math.floor(n/r);return Math.ceil(t/r)-i}function ZH(n,t){let e=t-n,r=Sc(e);for(;UA(n,t,r)>10;)r++;for(;UA(n,t,r)<10;)r--;return Math.min(r,Sc(n))}function qH(n,{min:t,max:e}){t=mn(n.min,t);let r=[],i=Sc(t),s=ZH(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((t-l)*o)/o,u=Math.floor((t-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=mn(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<e;)r.push({value:h,major:HA(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let f=mn(n.max,h);return r.push({value:f,major:HA(f),significand:d}),r}var H0=class extends so{static id="logarithmic";static defaults={ticks:{callback:pc.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let r=xa.prototype.parse.apply(this,[t,e]);if(r===0){this._zero=!0;return}return ut(r)&&r>0?r:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ut(t)?Math.max(0,t):null,this.max=ut(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ut(this._userMin)&&(this.min=t===io(this.min,0)?io(this.min,-1):io(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),r=this.min,i=this.max,s=a=>r=t?r:a,o=a=>i=e?i:a;r===i&&(r<=0?(s(1),o(10)):(s(io(r,-1)),o(io(i,1)))),r<=0&&s(io(i,-1)),i<=0&&o(io(r,1)),this.min=r,this.max=i}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},r=qH(e,this);return t.bounds==="ticks"&&$b(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":ya(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=xi(t),this._valueRange=xi(this.max)-xi(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(xi(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function U0(n){let t=n.ticks;if(t.display&&n.display){let e=zt(t.backdropPadding);return be(t.font&&t.font.size,qe.font.size)+e.height}return 0}function QH(n,t,e){return e=Je(e)?e:[e],{w:PT(n,t.string,e),h:e.length*t.lineHeight}}function $A(n,t,e,r,i){return n===r||n===i?{start:t-e/2,end:t+e/2}:n<r||n>i?{start:t-e,end:t}:{start:t,end:t+e}}function JH(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),r=[],i=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Ve/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));i[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+i[l],a),d=wt(c.font),h=QH(n.ctx,d,n._pointLabels[l]);r[l]=h;let f=Ut(n.getIndexAngle(l)+a),p=Math.round(of(f)),g=$A(p,u.x,h.w,0,180),m=$A(p,u.y,h.h,90,270);eU(e,t,f,g,m)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=rU(n,r,i)}function eU(n,t,e,r,i){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;r.start<t.l?(a=(t.l-r.start)/s,n.l=Math.min(n.l,t.l-a)):r.end>t.r&&(a=(r.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),i.start<t.t?(l=(t.t-i.start)/o,n.t=Math.min(n.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,n.b=Math.max(n.b,t.b+l))}function tU(n,t,e){let r=n.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=e,l=n.getPointPosition(t,r+i+o,s),c=Math.round(of(Ut(l.angle+ht))),u=oU(l.y,a.h,c),d=iU(c),h=sU(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function nU(n,t){if(!t)return!0;let{left:e,top:r,right:i,bottom:s}=n;return!(Lr({x:e,y:r},t)||Lr({x:e,y:s},t)||Lr({x:i,y:r},t)||Lr({x:i,y:s},t))}function rU(n,t,e){let r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:U0(s)/2,additionalAngle:o?Ve/i:0},c;for(let u=0;u<i;u++){l.padding=e[u],l.size=t[u];let d=tU(n,u,l);r.push(d),a==="auto"&&(d.visible=nU(d,c),d.visible&&(c=d))}return r}function iU(n){return n===0||n===180?"center":n<180?"left":"right"}function sU(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function oU(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function aU(n,t,e){let{left:r,top:i,right:s,bottom:o}=e,{backdropColor:a}=t;if(!Ae(a)){let l=is(t.borderRadius),c=zt(t.backdropPadding);n.fillStyle=a;let u=r-c.left,d=i-c.top,h=s-r+c.width,f=o-i+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),ba(n,{x:u,y:d,w:h,h:f,radius:l}),n.fill()):n.fillRect(u,d,h,f)}}function lU(n,t){let{ctx:e,options:{pointLabels:r}}=n;for(let i=t-1;i>=0;i--){let s=n._pointLabelItems[i];if(!s.visible)continue;let o=r.setContext(n.getPointLabelContext(i));aU(e,o,s);let a=wt(o.font),{x:l,y:c,textAlign:u}=s;rs(e,n._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function gI(n,t,e,r){let{ctx:i}=n;if(e)i.arc(n.xCenter,n.yCenter,t,0,et);else{let s=n.getPointPosition(0,t);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=n.getPointPosition(o,t),i.lineTo(s.x,s.y)}}function cU(n,t,e,r,i){let s=n.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!r||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),gI(n,e,o,r),s.closePath(),s.stroke(),s.restore())}function uU(n,t,e){return Di(n,{label:e,index:t,type:"pointLabel"})}var $0=class extends xa{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=zt(U0(this.options)/2),e=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(e,r)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=ut(t)&&!isNaN(t)?t:0,this.max=ut(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/U0(this.options))}generateTickLabels(t){xa.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,r)=>{let i=Ze(this.options.pointLabels.callback,[e,r],this);return i||i===0?i:""}).filter((e,r)=>this.chart.getDataVisibility(r))}fit(){let t=this.options;t.display&&t.pointLabels.display?JH(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,r,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,r,i))}getIndexAngle(t){let e=et/(this._pointLabels.length||1),r=this.options.startAngle||0;return Ut(t*e+Kn(r))}getDistanceFromCenterForValue(t){if(Ae(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Ae(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let r=e[t];return uU(this.getContext(),t,r)}}getPointPosition(t,e,r=0){let i=this.getIndexAngle(t)-ht+r;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:r,right:i,bottom:s}=this._pointLabelItems[t];return{left:e,top:r,right:i,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let r=this.ctx;r.save(),r.beginPath(),gI(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:r,grid:i,border:s}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&lU(this,o),i.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=i.setContext(h),p=s.setContext(h);cU(this,f,l,o,p)}}),r.display){for(t.save(),a=o-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(t.lineWidth=h,t.strokeStyle=d,t.setLineDash(u.borderDash),t.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,r=e.ticks;if(!r.display)return;let i=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=r.setContext(this.getContext(l)),u=wt(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=u.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let d=zt(c.backdropPadding);t.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}rs(t,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},Nf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yn=Object.keys(Nf);function zA(n,t){return n-t}function GA(n,t){if(Ae(t))return null;let e=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts,o=t;return typeof r=="function"&&(o=r(o)),ut(o)||(o=typeof r=="string"?e.parse(o,r):e.parse(o)),o===null?null:(i&&(o=i==="week"&&(to(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,i)),+o)}function WA(n,t,e,r){let i=yn.length;for(let s=yn.indexOf(n);s<i-1;++s){let o=Nf[yn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=r)return yn[s]}return yn[i-1]}function dU(n,t,e,r,i){for(let s=yn.length-1;s>=yn.indexOf(e);s--){let o=yn[s];if(Nf[o].common&&n._adapter.diff(i,r,o)>=t-1)return o}return yn[e?yn.indexOf(e):0]}function hU(n){for(let t=yn.indexOf(n)+1,e=yn.length;t<e;++t)if(Nf[yn[t]].common)return yn[t]}function YA(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:r,hi:i}=af(e,t),s=e[r]>=t?e[r]:e[i];n[s]=!0}}function fU(n,t,e,r){let i=n._adapter,s=+i.startOf(t[0].value,r),o=t[t.length-1].value,a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=e[a],l>=0&&(t[l].major=!0);return t}function XA(n,t,e){let r=[],i={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],i[a]=o,r.push({value:a,major:!1});return s===0||!e?r:fU(n,r,i,e)}var z0=(()=>{class n extends so{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){let i=e.time||(e.time={}),s=this._adapter=new wj._date(e.adapters.date);s.init(r),pa(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:GA(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,r=this._adapter,i=e.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=ut(s)&&!isNaN(s)?s:+r.startOf(Date.now(),i),o=ut(o)&&!isNaN(o)?o:+r.endOf(Date.now(),i)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],i=e[e.length-1]),{min:r,max:i}}buildTicks(){let e=this.options,r=e.time,i=e.ticks,s=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=AT(s,o,a);return this._unit=r.unit||(i.autoSkip?WA(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):dU(this,l.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:hU(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),XA(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,i=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?r=1-s:r=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?i=o:i=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;r=Ot(r,0,a),i=Ot(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let e=this._adapter,r=this.min,i=this.max,s=this.options,o=s.time,a=o.unit||WA(o.minUnit,r,i,this._getLabelCapacity(r)),l=be(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=to(c)||c===!0,d={},h=r,f,p;if(u&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,u?"day":a),e.diff(i,r,a)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+a);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+e.add(f,l,a),p++)YA(d,f,g);return(f===i||s.bounds==="ticks"||p===1)&&YA(d,f,g),Object.keys(d).sort(zA).map(m=>+m)}getLabelForValue(e){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(e,i.tooltipFormat):r.format(e,i.displayFormats.datetime)}format(e,r){let s=this.options.time.displayFormats,o=this._unit,a=r||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,r,i,s){let o=this.options,a=o.ticks.callback;if(a)return Ze(a,[e,r,i],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=i[r],p=u&&h&&f&&f.major;return this._adapter.format(e,s||(p?h:d))}generateTickLabels(e){let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],s.label=this._tickFormatFunction(s.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let r=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(e){let r=this._offsets,i=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){let r=this.options.ticks,i=this.ctx.measureText(e).width,s=Kn(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:i*o+l*a,h:i*a+l*o}}_getLabelCapacity(e){let r=this.options.time,i=r.displayFormats,s=i[r.unit]||i.millisecond,o=this._tickFormatFunction(e,0,XA(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],r,i;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(r=0,i=s.length;r<i;++r)e=e.concat(s[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],r,i;if(e.length)return e;let s=this.getLabels();for(r=0,i=s.length;r<i;++r)e.push(GA(this,s[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Yb(e.sort(zA))}}return n})();function Cf(n,t,e){let r=0,i=n.length-1,s,o,a,l;e?(t>=n[r].pos&&t<=n[i].pos&&({lo:r,hi:i}=kr(n,"pos",t)),{pos:s,time:a}=n[r],{pos:o,time:l}=n[i]):(t>=n[r].time&&t<=n[i].time&&({lo:r,hi:i}=kr(n,"time",t)),{time:s,pos:a}=n[r],{time:o,pos:l}=n[i]);let c=o-s;return c?a+(l-a)*(t-s)/c:a}var G0=class extends z0{static id="timeseries";static defaults=z0.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Cf(e,this.min),this._tableRange=Cf(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:r}=this,i=[],s=[],o,a,l,c,u;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=r&&i.push(c);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)u=i[o+1],l=i[o-1],c=i[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Cf(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Cf(this._table,r*this._tableRange+this._minPos,!0)}},pU=Object.freeze({__proto__:null,CategoryScale:XH,LinearScale:V0,LogarithmicScale:H0,RadialLinearScale:$0,TimeScale:z0,TimeSeriesScale:G0}),mI=[xj,KV,zH,pU];var gU=typeof global=="object"&&global&&global.Object===Object&&global,Pf=gU;var mU=typeof self=="object"&&self&&self.Object===Object&&self,vU=Pf||mU||Function("return this")(),Zn=vU;var yU=Zn.Symbol,wa=yU;var vI=Object.prototype,bU=vI.hasOwnProperty,_U=vI.toString,Ac=wa?wa.toStringTag:void 0;function CU(n){var t=bU.call(n,Ac),e=n[Ac];try{n[Ac]=void 0;var r=!0}catch{}var i=_U.call(n);return r&&(t?n[Ac]=e:delete n[Ac]),i}var yI=CU;var EU=Object.prototype,xU=EU.toString;function wU(n){return xU.call(n)}var bI=wU;var DU="[object Null]",SU="[object Undefined]",_I=wa?wa.toStringTag:void 0;function TU(n){return n==null?n===void 0?SU:DU:_I&&_I in Object(n)?yI(n):bI(n)}var ls=TU;function AU(n){return n!=null&&typeof n=="object"}var Hr=AU;var IU=Array.isArray,Ic=IU;function MU(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var bn=MU;function RU(n){return n}var kf=RU;var OU="[object AsyncFunction]",NU="[object Function]",PU="[object GeneratorFunction]",kU="[object Proxy]";function LU(n){if(!bn(n))return!1;var t=ls(n);return t==NU||t==PU||t==OU||t==kU}var Da=LU;var FU=Zn["__core-js_shared__"],Lf=FU;var CI=(function(){var n=/[^.]+$/.exec(Lf&&Lf.keys&&Lf.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function BU(n){return!!CI&&CI in n}var EI=BU;var jU=Function.prototype,VU=jU.toString;function HU(n){if(n!=null){try{return VU.call(n)}catch{}try{return n+""}catch{}}return""}var xI=HU;var UU=/[\\^$.*+?()[\]{}|]/g,$U=/^\[object .+?Constructor\]$/,zU=Function.prototype,GU=Object.prototype,WU=zU.toString,YU=GU.hasOwnProperty,XU=RegExp("^"+WU.call(YU).replace(UU,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KU(n){if(!bn(n)||EI(n))return!1;var t=Da(n)?XU:$U;return t.test(xI(n))}var wI=KU;function ZU(n,t){return n?.[t]}var DI=ZU;function qU(n,t){var e=DI(n,t);return wI(e)?e:void 0}var Sa=qU;var SI=Object.create,QU=(function(){function n(){}return function(t){if(!bn(t))return{};if(SI)return SI(t);n.prototype=t;var e=new n;return n.prototype=void 0,e}})(),TI=QU;function JU(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}var AI=JU;function e$(n,t){var e=-1,r=n.length;for(t||(t=Array(r));++e<r;)t[e]=n[e];return t}var II=e$;var t$=800,n$=16,r$=Date.now;function i$(n){var t=0,e=0;return function(){var r=r$(),i=n$-(r-e);if(e=r,i>0){if(++t>=t$)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}var MI=i$;function s$(n){return function(){return n}}var RI=s$;var o$=(function(){try{var n=Sa(Object,"defineProperty");return n({},"",{}),n}catch{}})(),Ta=o$;var a$=Ta?function(n,t){return Ta(n,"toString",{configurable:!0,enumerable:!1,value:RI(t),writable:!0})}:kf,OI=a$;var l$=MI(OI),NI=l$;var c$=9007199254740991,u$=/^(?:0|[1-9]\d*)$/;function d$(n,t){var e=typeof n;return t=t??c$,!!t&&(e=="number"||e!="symbol"&&u$.test(n))&&n>-1&&n%1==0&&n<t}var Ff=d$;function h$(n,t,e){t=="__proto__"&&Ta?Ta(n,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):n[t]=e}var Aa=h$;function f$(n,t){return n===t||n!==n&&t!==t}var cs=f$;var p$=Object.prototype,g$=p$.hasOwnProperty;function m$(n,t,e){var r=n[t];(!(g$.call(n,t)&&cs(r,e))||e===void 0&&!(t in n))&&Aa(n,t,e)}var PI=m$;function v$(n,t,e,r){var i=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=r?r(e[a],n[a],a,e,n):void 0;l===void 0&&(l=n[a]),i?Aa(e,a,l):PI(e,a,l)}return e}var kI=v$;var LI=Math.max;function y$(n,t,e){return t=LI(t===void 0?n.length-1:t,0),function(){for(var r=arguments,i=-1,s=LI(r.length-t,0),o=Array(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=e(o),AI(n,this,a)}}var FI=y$;function b$(n,t){return NI(FI(n,t,kf),n+"")}var BI=b$;var _$=9007199254740991;function C$(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_$}var Bf=C$;function E$(n){return n!=null&&Bf(n.length)&&!Da(n)}var Ia=E$;function x$(n,t,e){if(!bn(e))return!1;var r=typeof t;return(r=="number"?Ia(e)&&Ff(t,e.length):r=="string"&&t in e)?cs(e[t],n):!1}var jI=x$;function w$(n){return BI(function(t,e){var r=-1,i=e.length,s=i>1?e[i-1]:void 0,o=i>2?e[2]:void 0;for(s=n.length>3&&typeof s=="function"?(i--,s):void 0,o&&jI(e[0],e[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var a=e[r];a&&n(t,a,r,s)}return t})}var VI=w$;var D$=Object.prototype;function S$(n){var t=n&&n.constructor,e=typeof t=="function"&&t.prototype||D$;return n===e}var jf=S$;function T$(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}var HI=T$;var A$="[object Arguments]";function I$(n){return Hr(n)&&ls(n)==A$}var Y0=I$;var UI=Object.prototype,M$=UI.hasOwnProperty,R$=UI.propertyIsEnumerable,O$=Y0((function(){return arguments})())?Y0:function(n){return Hr(n)&&M$.call(n,"callee")&&!R$.call(n,"callee")},Mc=O$;function N$(){return!1}var $I=N$;var WI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zI=WI&&typeof module=="object"&&module&&!module.nodeType&&module,P$=zI&&zI.exports===WI,GI=P$?Zn.Buffer:void 0,k$=GI?GI.isBuffer:void 0,L$=k$||$I,Vf=L$;var F$="[object Arguments]",B$="[object Array]",j$="[object Boolean]",V$="[object Date]",H$="[object Error]",U$="[object Function]",$$="[object Map]",z$="[object Number]",G$="[object Object]",W$="[object RegExp]",Y$="[object Set]",X$="[object String]",K$="[object WeakMap]",Z$="[object ArrayBuffer]",q$="[object DataView]",Q$="[object Float32Array]",J$="[object Float64Array]",e3="[object Int8Array]",t3="[object Int16Array]",n3="[object Int32Array]",r3="[object Uint8Array]",i3="[object Uint8ClampedArray]",s3="[object Uint16Array]",o3="[object Uint32Array]",nt={};nt[Q$]=nt[J$]=nt[e3]=nt[t3]=nt[n3]=nt[r3]=nt[i3]=nt[s3]=nt[o3]=!0;nt[F$]=nt[B$]=nt[Z$]=nt[j$]=nt[q$]=nt[V$]=nt[H$]=nt[U$]=nt[$$]=nt[z$]=nt[G$]=nt[W$]=nt[Y$]=nt[X$]=nt[K$]=!1;function a3(n){return Hr(n)&&Bf(n.length)&&!!nt[ls(n)]}var YI=a3;function l3(n){return function(t){return n(t)}}var XI=l3;var KI=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Rc=KI&&typeof module=="object"&&module&&!module.nodeType&&module,c3=Rc&&Rc.exports===KI,X0=c3&&Pf.process,u3=(function(){try{var n=Rc&&Rc.require&&Rc.require("util").types;return n||X0&&X0.binding&&X0.binding("util")}catch{}})(),K0=u3;var ZI=K0&&K0.isTypedArray,d3=ZI?XI(ZI):YI,Hf=d3;var h3=Object.prototype,f3=h3.hasOwnProperty;function p3(n,t){var e=Ic(n),r=!e&&Mc(n),i=!e&&!r&&Vf(n),s=!e&&!r&&!i&&Hf(n),o=e||r||i||s,a=o?HI(n.length,String):[],l=a.length;for(var c in n)(t||f3.call(n,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ff(c,l)))&&a.push(c);return a}var qI=p3;function g3(n,t){return function(e){return n(t(e))}}var QI=g3;function m3(n){var t=[];if(n!=null)for(var e in Object(n))t.push(e);return t}var JI=m3;var v3=Object.prototype,y3=v3.hasOwnProperty;function b3(n){if(!bn(n))return JI(n);var t=jf(n),e=[];for(var r in n)r=="constructor"&&(t||!y3.call(n,r))||e.push(r);return e}var eM=b3;function _3(n){return Ia(n)?qI(n,!0):eM(n)}var Uf=_3;var C3=Sa(Object,"create"),Ai=C3;function E3(){this.__data__=Ai?Ai(null):{},this.size=0}var tM=E3;function x3(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var nM=x3;var w3="__lodash_hash_undefined__",D3=Object.prototype,S3=D3.hasOwnProperty;function T3(n){var t=this.__data__;if(Ai){var e=t[n];return e===w3?void 0:e}return S3.call(t,n)?t[n]:void 0}var rM=T3;var A3=Object.prototype,I3=A3.hasOwnProperty;function M3(n){var t=this.__data__;return Ai?t[n]!==void 0:I3.call(t,n)}var iM=M3;var R3="__lodash_hash_undefined__";function O3(n,t){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Ai&&t===void 0?R3:t,this}var sM=O3;function Ma(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Ma.prototype.clear=tM;Ma.prototype.delete=nM;Ma.prototype.get=rM;Ma.prototype.has=iM;Ma.prototype.set=sM;var Z0=Ma;function N3(){this.__data__=[],this.size=0}var oM=N3;function P3(n,t){for(var e=n.length;e--;)if(cs(n[e][0],t))return e;return-1}var us=P3;var k3=Array.prototype,L3=k3.splice;function F3(n){var t=this.__data__,e=us(t,n);if(e<0)return!1;var r=t.length-1;return e==r?t.pop():L3.call(t,e,1),--this.size,!0}var aM=F3;function B3(n){var t=this.__data__,e=us(t,n);return e<0?void 0:t[e][1]}var lM=B3;function j3(n){return us(this.__data__,n)>-1}var cM=j3;function V3(n,t){var e=this.__data__,r=us(e,n);return r<0?(++this.size,e.push([n,t])):e[r][1]=t,this}var uM=V3;function Ra(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Ra.prototype.clear=oM;Ra.prototype.delete=aM;Ra.prototype.get=lM;Ra.prototype.has=cM;Ra.prototype.set=uM;var ds=Ra;var H3=Sa(Zn,"Map"),$f=H3;function U3(){this.size=0,this.__data__={hash:new Z0,map:new($f||ds),string:new Z0}}var dM=U3;function $3(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}var hM=$3;function z3(n,t){var e=n.__data__;return hM(t)?e[typeof t=="string"?"string":"hash"]:e.map}var hs=z3;function G3(n){var t=hs(this,n).delete(n);return this.size-=t?1:0,t}var fM=G3;function W3(n){return hs(this,n).get(n)}var pM=W3;function Y3(n){return hs(this,n).has(n)}var gM=Y3;function X3(n,t){var e=hs(this,n),r=e.size;return e.set(n,t),this.size+=e.size==r?0:1,this}var mM=X3;function Oa(n){var t=-1,e=n==null?0:n.length;for(this.clear();++t<e;){var r=n[t];this.set(r[0],r[1])}}Oa.prototype.clear=dM;Oa.prototype.delete=fM;Oa.prototype.get=pM;Oa.prototype.has=gM;Oa.prototype.set=mM;var vM=Oa;var K3=QI(Object.getPrototypeOf,Object),zf=K3;var Z3="[object Object]",q3=Function.prototype,Q3=Object.prototype,yM=q3.toString,J3=Q3.hasOwnProperty,e5=yM.call(Object);function t5(n){if(!Hr(n)||ls(n)!=Z3)return!1;var t=zf(n);if(t===null)return!0;var e=J3.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&yM.call(e)==e5}var bM=t5;function n5(){this.__data__=new ds,this.size=0}var _M=n5;function r5(n){var t=this.__data__,e=t.delete(n);return this.size=t.size,e}var CM=r5;function i5(n){return this.__data__.get(n)}var EM=i5;function s5(n){return this.__data__.has(n)}var xM=s5;var o5=200;function a5(n,t){var e=this.__data__;if(e instanceof ds){var r=e.__data__;if(!$f||r.length<o5-1)return r.push([n,t]),this.size=++e.size,this;e=this.__data__=new vM(r)}return e.set(n,t),this.size=e.size,this}var wM=a5;function Na(n){var t=this.__data__=new ds(n);this.size=t.size}Na.prototype.clear=_M;Na.prototype.delete=CM;Na.prototype.get=EM;Na.prototype.has=xM;Na.prototype.set=wM;var DM=Na;var IM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,SM=IM&&typeof module=="object"&&module&&!module.nodeType&&module,l5=SM&&SM.exports===IM,TM=l5?Zn.Buffer:void 0,AM=TM?TM.allocUnsafe:void 0;function c5(n,t){if(t)return n.slice();var e=n.length,r=AM?AM(e):new n.constructor(e);return n.copy(r),r}var MM=c5;var u5=Zn.Uint8Array,q0=u5;function d5(n){var t=new n.constructor(n.byteLength);return new q0(t).set(new q0(n)),t}var RM=d5;function h5(n,t){var e=t?RM(n.buffer):n.buffer;return new n.constructor(e,n.byteOffset,n.length)}var OM=h5;function f5(n){return typeof n.constructor=="function"&&!jf(n)?TI(zf(n)):{}}var NM=f5;function p5(n){return function(t,e,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var l=o[n?a:++i];if(e(s[l],l,s)===!1)break}return t}}var PM=p5;var g5=PM(),kM=g5;function m5(n,t,e){(e!==void 0&&!cs(n[t],e)||e===void 0&&!(t in n))&&Aa(n,t,e)}var Oc=m5;function v5(n){return Hr(n)&&Ia(n)}var LM=v5;function y5(n,t){if(!(t==="constructor"&&typeof n[t]=="function")&&t!="__proto__")return n[t]}var Nc=y5;function b5(n){return kI(n,Uf(n))}var FM=b5;function _5(n,t,e,r,i,s,o){var a=Nc(n,e),l=Nc(t,e),c=o.get(l);if(c){Oc(n,e,c);return}var u=s?s(a,l,e+"",n,t,o):void 0,d=u===void 0;if(d){var h=Ic(l),f=!h&&Vf(l),p=!h&&!f&&Hf(l);u=l,h||f||p?Ic(a)?u=a:LM(a)?u=II(a):f?(d=!1,u=MM(l,!0)):p?(d=!1,u=OM(l,!0)):u=[]:bM(l)||Mc(l)?(u=a,Mc(a)?u=FM(a):(!bn(a)||Da(a))&&(u=NM(l))):d=!1}d&&(o.set(l,u),i(u,l,r,s,o),o.delete(l)),Oc(n,e,u)}var BM=_5;function jM(n,t,e,r,i){n!==t&&kM(t,function(s,o){if(i||(i=new DM),bn(s))BM(n,t,o,e,jM,r,i);else{var a=r?r(Nc(n,o),s,o+"",n,t,i):void 0;a===void 0&&(a=s),Oc(n,o,a)}},Uf)}var VM=jM;var C5=VI(function(n,t,e){VM(n,t,e)}),Gf=C5;var HM=new se("Configuration for ngCharts");function UM(...n){return{registerables:[...mI,...n]}}function $M(...n){let t=Gf({},...n);return{provide:HM,useValue:t}}var E5=(()=>{let t=class t{constructor(){this.colorschemesOptions=new ft(void 0)}setColorschemesOptions(r){this.pColorschemesOptions=r,this.colorschemesOptions.next(r)}getColorschemesOptions(){return this.pColorschemesOptions}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),zM=(()=>{let t=class t{constructor(r,i,s,o){this.zone=i,this.themeService=s,this.type="bar",this.plugins=[],this.chartClick=new Qe,this.chartHover=new Qe,this.subs=[],this.themeOverrides={},o?.registerables&&Mf.register(...o.registerables),o?.defaults&&qe.set(o.defaults),this.ctx=r.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(mm()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(r){let i=["type"],s=Object.getOwnPropertyNames(r);if(s.some(o=>i.includes(o))||s.every(o=>r[o].isFirstChange()))this.render();else{let o=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,o.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,o.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,o.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(r=>r.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Mf(this.ctx,this.getChartConfiguration()))}update(r){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(r))}hideDataset(r,i){this.chart&&(this.chart.getDatasetMeta(r).hidden=i,this.update())}isDatasetHidden(r){return this.chart?.getDatasetMeta(r)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(r){this.themeOverrides=r,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Gf({onHover:(r,i)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:r,active:i}))},onClick:(r,i)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:r,active:i}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}};t.\u0275fac=function(i){return new(i||t)(de(Sn),de(ot),de(E5),de(HM,8))},t.\u0275dir=at({type:t,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[zn]});let n=t;return n})();var xe="primary",Wc=Symbol("RouteTitle"),n_=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function lo(n){return new n_(n)}function QM(n,t,e){let r=e.path.split("/");if(r.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function x5(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!Ur(n[e],t[e]))return!1;return!0}function Ur(n,t){let e=n?r_(n):void 0,r=t?r_(t):void 0;if(!e||!r||e.length!=r.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!JM(n[i],t[i]))return!1;return!0}function r_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JM(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),r=[...t].sort();return e.every((i,s)=>r[s]===i)}else return n===t}function e1(n){return n.length>0?n[n.length-1]:null}function Mi(n){return pm(n)?n:Ki(n)?it(Promise.resolve(n)):fe(n)}var w5={exact:n1,subset:r1},t1={exact:D5,subset:S5,ignored:()=>!0};function GM(n,t,e){return w5[e.paths](n.root,t.root,e.matrixParams)&&t1[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function D5(n,t){return Ur(n,t)}function n1(n,t,e){if(!oo(n.segments,t.segments)||!Xf(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!n.children[r]||!n1(n.children[r],t.children[r],e))return!1;return!0}function S5(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>JM(n[e],t[e]))}function r1(n,t,e){return i1(n,t,t.segments,e)}function i1(n,t,e,r){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!oo(i,e)||t.hasChildren()||!Xf(i,e,r))}else if(n.segments.length===e.length){if(!oo(n.segments,e)||!Xf(n.segments,e,r))return!1;for(let i in t.children)if(!n.children[i]||!r1(n.children[i],t.children[i],r))return!1;return!0}else{let i=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!oo(n.segments,i)||!Xf(n.segments,i,r)||!n.children[xe]?!1:i1(n.children[xe],t,s,r)}}function Xf(n,t,e){return t.every((r,i)=>t1[e](n[i].parameters,r.parameters))}var zr=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Ue([],{}),e={},r=null){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){return I5.serialize(this)}},Ue=class{segments;children;parent=null;constructor(t,e){this.segments=t,this.children=e,Object.values(e).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kf(this)}},fs=class{path;parameters;_parameterMap;constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=lo(this.parameters),this._parameterMap}toString(){return o1(this)}};function T5(n,t){return oo(n,t)&&n.every((e,r)=>Ur(e.parameters,t[r].parameters))}function oo(n,t){return n.length!==t.length?!1:n.every((e,r)=>e.path===t[r].path)}function A5(n,t){let e=[];return Object.entries(n.children).forEach(([r,i])=>{r===xe&&(e=e.concat(t(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==xe&&(e=e.concat(t(i,r)))}),e}var co=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>new ps,providedIn:"root"})}return n})(),ps=class{parse(t){let e=new s_(t);return new zr(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Pc(t.root,!0)}`,r=O5(t.queryParams),i=typeof t.fragment=="string"?`#${M5(t.fragment)}`:"";return`${e}${r}${i}`}},I5=new ps;function Kf(n){return n.segments.map(t=>o1(t)).join("/")}function Pc(n,t){if(!n.hasChildren())return Kf(n);if(t){let e=n.children[xe]?Pc(n.children[xe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==xe&&r.push(`${i}:${Pc(s,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}else{let e=A5(n,(r,i)=>i===xe?[Pc(n.children[xe],!1)]:[`${i}:${Pc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[xe]!=null?`${Kf(n)}/${e[0]}`:`${Kf(n)}/(${e.join("//")})`}}function s1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(n){return s1(n).replace(/%3B/gi,";")}function M5(n){return encodeURI(n)}function i_(n){return s1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zf(n){return decodeURIComponent(n)}function WM(n){return Zf(n.replace(/\+/g,"%20"))}function o1(n){return`${i_(n.path)}${R5(n.parameters)}`}function R5(n){return Object.entries(n).map(([t,e])=>`;${i_(t)}=${i_(e)}`).join("")}function O5(n){let t=Object.entries(n).map(([e,r])=>Array.isArray(r)?r.map(i=>`${Wf(e)}=${Wf(i)}`).join("&"):`${Wf(e)}=${Wf(r)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var N5=/^[^\/()?;#]+/;function Q0(n){let t=n.match(N5);return t?t[0]:""}var P5=/^[^\/()?;=#]+/;function k5(n){let t=n.match(P5);return t?t[0]:""}var L5=/^[^=?&#]+/;function F5(n){let t=n.match(L5);return t?t[0]:""}var B5=/^[^&#]+/;function j5(n){let t=n.match(B5);return t?t[0]:""}var s_=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[xe]=new Ue(t,e)),r}parseSegment(){let t=Q0(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(t),new fs(Zf(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=k5(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let i=Q0(this.remaining);i&&(r=i,this.capture(r))}t[Zf(e)]=Zf(r)}parseQueryParam(t){let e=F5(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){let o=j5(this.remaining);o&&(r=o,this.capture(r))}let i=WM(e),s=WM(r);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Q0(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=xe);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[xe]:new Ue([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new oe(4011,!1)}};function a1(n){return n.segments.length>0?new Ue([],{[xe]:n}):n}function l1(n){let t={};for(let[r,i]of Object.entries(n.children)){let s=l1(i);if(r===xe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[r]=s)}let e=new Ue(n.segments,t);return V5(e)}function V5(n){if(n.numberOfChildren===1&&n.children[xe]){let t=n.children[xe];return new Ue(n.segments.concat(t.segments),t.children)}return n}function ja(n){return n instanceof zr}function c1(n,t,e=null,r=null){let i=u1(n);return d1(i,t,e,r)}function u1(n){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new Ue(s.url,o);return s===n&&(t=a),a}let r=e(n.root),i=a1(r);return t??i}function d1(n,t,e,r){let i=n;for(;i.parent;)i=i.parent;if(t.length===0)return J0(i,i,i,e,r);let s=H5(t);if(s.toRoot())return J0(i,i,new Ue([],{}),e,r);let o=U5(s,i,n),a=o.processChildren?Lc(o.segmentGroup,o.index,s.commands):f1(o.segmentGroup,o.index,s.commands);return J0(i,o.segmentGroup,a,e,r)}function qf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bc(n){return typeof n=="object"&&n!=null&&n.outlets}function J0(n,t,e,r,i){let s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===t?o=e:o=h1(n,t,e);let a=a1(l1(o));return new zr(a,s,i)}function h1(n,t,e){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===t?r[i]=e:r[i]=h1(s,t,e)}),new Ue(n.segments,r)}var Qf=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&qf(r[0]))throw new oe(4003,!1);let i=r.find(Bc);if(i&&i!==e1(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function H5(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Qf(!0,0,n);let t=0,e=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qf(e,t,r)}var La=class{segmentGroup;processChildren;index;constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}};function U5(n,t,e){if(n.isAbsolute)return new La(t,!0,0);if(!e)return new La(t,!1,NaN);if(e.parent===null)return new La(e,!0,0);let r=qf(n.commands[0])?0:1,i=e.segments.length-1+r;return $5(e,i,n.numberOfDoubleDots)}function $5(n,t,e){let r=n,i=t,s=e;for(;s>i;){if(s-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new La(r,!1,i-s)}function z5(n){return Bc(n[0])?n[0].outlets:{[xe]:n}}function f1(n,t,e){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Lc(n,t,e);let r=G5(n,t,e),i=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ue(n.segments.slice(0,r.pathIndex),{});return s.children[xe]=new Ue(n.segments.slice(r.pathIndex),n.children),Lc(s,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?o_(n,t,e):r.match?Lc(n,0,i):o_(n,t,e)}function Lc(n,t,e){if(e.length===0)return new Ue(n.segments,{});{let r=z5(e),i={};if(Object.keys(r).some(s=>s!==xe)&&n.children[xe]&&n.numberOfChildren===1&&n.children[xe].segments.length===0){let s=Lc(n.children[xe],t,e);return new Ue(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=f1(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ue(n.segments,i)}}function G5(n,t,e){let r=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=e.length)return s;let o=n.segments[i],a=e[r];if(Bc(a))break;let l=`${a}`,c=r<e.length-1?e[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!XM(l,c,o))return s;r+=2}else{if(!XM(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function o_(n,t,e){let r=n.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(Bc(s)){let l=W5(s.outlets);return new Ue(r,l)}if(i===0&&qf(e[0])){let l=n.segments[t];r.push(new fs(l.path,YM(e[0]))),i++;continue}let o=Bc(s)?s.outlets[xe]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&qf(a)?(r.push(new fs(o,YM(a))),i+=2):(r.push(new fs(o,{})),i++)}return new Ue(r,{})}function W5(n){let t={};return Object.entries(n).forEach(([e,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[e]=o_(new Ue([],{}),0,r))}),t}function YM(n){let t={};return Object.entries(n).forEach(([e,r])=>t[e]=`${r}`),t}function XM(n,t,e){return n==e.path&&Ur(t,e.parameters)}var Fa="imperative",Nt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Nt||{}),Mn=class{id;url;constructor(t,e){this.id=t,this.url=e}},gs=class extends Mn{type=Nt.NavigationStart;navigationTrigger;restoredState;constructor(t,e,r="imperative",i=null){super(t,e),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Mn{urlAfterRedirects;type=Nt.NavigationEnd;constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(sn||{}),Va=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Va||{}),$r=class extends Mn{reason;code;type=Nt.NavigationCancel;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gr=class extends Mn{reason;code;type=Nt.NavigationSkipped;constructor(t,e,r,i){super(t,e),this.reason=r,this.code=i}},Ha=class extends Mn{error;target;type=Nt.NavigationError;constructor(t,e,r,i){super(t,e),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jc=class extends Mn{urlAfterRedirects;state;type=Nt.RoutesRecognized;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jf=class extends Mn{urlAfterRedirects;state;type=Nt.GuardsCheckStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ep=class extends Mn{urlAfterRedirects;state;shouldActivate;type=Nt.GuardsCheckEnd;constructor(t,e,r,i,s){super(t,e),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tp=class extends Mn{urlAfterRedirects;state;type=Nt.ResolveStart;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},np=class extends Mn{urlAfterRedirects;state;type=Nt.ResolveEnd;constructor(t,e,r,i){super(t,e),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rp=class{route;type=Nt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ip=class{route;type=Nt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sp=class{snapshot;type=Nt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},op=class{snapshot;type=Nt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ap=class{snapshot;type=Nt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lp=class{snapshot;type=Nt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ua=class{routerEvent;position;anchor;type=Nt.Scroll;constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Vc=class{},$a=class{url;navigationBehaviorOptions;constructor(t,e){this.url=t,this.navigationBehaviorOptions=e}};function Y5(n){return!(n instanceof Vc)&&!(n instanceof $a)}function X5(n,t){return n.providers&&!n._injector&&(n._injector=oa(n.providers,t,`Route: ${n.path}`)),n._injector??t}function mr(n){return n.outlet||xe}function K5(n,t){let e=n.filter(r=>mr(r)===t);return e.push(...n.filter(r=>mr(r)!==t)),e}function Wa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var cp=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Wa(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new uo(this.rootInjector)}},uo=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,r){let i=this.getOrCreateContext(e);i.outlet=r,this.contexts.set(e,i)}onChildOutletDestroyed(e){let r=this.getContext(e);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let r=this.getContext(e);return r||(r=new cp(this.rootInjector),this.contexts.set(e,r)),r}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(r){return new(r||n)(he(Rt))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),up=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=a_(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){let e=a_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=l_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return l_(t,this._root).map(e=>e.value)}};function a_(n,t){if(n===t.value)return t;for(let e of t.children){let r=a_(n,e);if(r)return r}return null}function l_(n,t){if(n===t.value)return[t];for(let e of t.children){let r=l_(n,e);if(r.length)return r.unshift(t),r}return[]}var In=class{value;children;constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function ka(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Hc=class extends up{snapshot;constructor(t,e){super(t),this.snapshot=e,m_(this,t)}toString(){return this.snapshot.toString()}};function p1(n){let t=Z5(n),e=new ft([new fs("",{})]),r=new ft({}),i=new ft({}),s=new ft({}),o=new ft(""),a=new Ii(e,r,s,o,i,xe,n,t.root);return a.snapshot=t.root,new Hc(new In(a,[]),t)}function Z5(n){let t={},e={},r={},s=new ao([],t,r,"",e,xe,n,null,{});return new Uc("",new In(s,[]))}var Ii=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,e,r,i,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Ne(c=>c[Wc]))??fe(void 0),this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ne(t=>lo(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ne(t=>lo(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function dp(n,t,e="emptyOnly"){let r,{routeConfig:i}=n;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:H(H({},t.params),n.params),data:H(H({},t.data),n.data),resolve:H(H(H(H({},n.data),t.data),i?.data),n._resolvedData)}:r={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},i&&m1(i)&&(r.resolve[Wc]=i.title),r}var ao=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Wc]}constructor(t,e,r,i,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=lo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=lo(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Uc=class extends up{url;constructor(t,e){super(e),this.url=t,m_(this,e)}toString(){return g1(this._root)}};function m_(n,t){t.value._routerState=n,t.children.forEach(e=>m_(n,e))}function g1(n){let t=n.children.length>0?` { ${n.children.map(g1).join(", ")} } `:"";return`${n.value}${t}`}function e_(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Ur(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Ur(t.params,e.params)||n.paramsSubject.next(e.params),x5(t.url,e.url)||n.urlSubject.next(e.url),Ur(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function c_(n,t){let e=Ur(n.params,t.params)&&T5(n.url,t.url),r=!n.parent!=!t.parent;return e&&!r&&(!n.parent||c_(n.parent,t.parent))}function m1(n){return typeof n.title=="string"||n.title===null}var v1=new se(""),Yc=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=xe;activateEvents=new Qe;deactivateEvents=new Qe;attachEvents=new Qe;detachEvents=new Qe;routerOutletData=PS(void 0);parentContexts=z(uo);location=z(Ks);changeDetector=z(Zi);inputBinder=z(Xc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:r,previousValue:i}=e.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new u_(e,a,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=at({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[zn]})}return n})(),u_=class{route;childContexts;parent;outletData;constructor(t,e,r,i){this.route=t,this.childContexts=e,this.parent=r,this.outletData=i}get(t,e){return t===Ii?this.route:t===uo?this.childContexts:t===v1?this.outletData:this.parent.get(t,e)}},Xc=new se(""),v_=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:r}=e,i=yl([r.queryParams,r.params,r.data]).pipe(tn(([s,o,a],l)=>(a=H(H(H({},s),o),a),l===0?fe(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(e);return}let o=LS(r.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})(),y_=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=vt({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Et(0,"router-outlet")},dependencies:[Yc],encapsulation:2})}return n})();function b_(n){let t=n.children&&n.children.map(b_),e=t?ce(H({},n),{children:t}):H({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==xe&&(e.component=y_),e}function q5(n,t,e){let r=$c(n,t._root,e?e._root:void 0);return new Hc(r,t)}function $c(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let r=e.value;r._futureSnapshot=t.value;let i=Q5(n,t,e);return new In(r,i)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>$c(n,a)),o}}let r=J5(t.value),i=t.children.map(s=>$c(n,s));return new In(r,i)}}function Q5(n,t,e){return t.children.map(r=>{for(let i of e.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return $c(n,r,i);return $c(n,r)})}function J5(n){return new Ii(new ft(n.url),new ft(n.params),new ft(n.queryParams),new ft(n.fragment),new ft(n.data),n.outlet,n.component,n)}var za=class{redirectTo;navigationBehaviorOptions;constructor(t,e){this.redirectTo=t,this.navigationBehaviorOptions=e}},y1="ngNavigationCancelingError";function hp(n,t){let{redirectTo:e,navigationBehaviorOptions:r}=ja(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=b1(!1,sn.Redirect);return i.url=e,i.navigationBehaviorOptions=r,i}function b1(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[y1]=!0,e.cancellationCode=t,e}function ez(n){return _1(n)&&ja(n.url)}function _1(n){return!!n&&n[y1]}var tz=(n,t,e,r)=>Ne(i=>(new d_(t,i.targetRouterState,i.currentRouterState,e,r).activate(n),i)),d_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,e,r,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),e_(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){let i=ka(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,r);else s&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=ka(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let r=e.getContext(t.value.outlet),i=r&&t.value.component?r.children:e,s=ka(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,e,r){let i=ka(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new lp(s.value.snapshot))}),t.children.length&&this.forwardEvent(new op(t.value.snapshot))}activateRoutes(t,e,r){let i=t.value,s=e?e.value:null;if(e_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),e_(a.route.value),this.activateChildRoutes(t,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}else this.activateChildRoutes(t,null,r)}},fp=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Ba=class{component;route;constructor(t,e){this.component=t,this.route=e}};function nz(n,t,e){let r=n._root,i=t?t._root:null;return kc(r,i,e,[r.value])}function rz(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Ya(n,t){let e=Symbol(),r=t.get(n,e);return r===e?typeof n=="function"&&!km(n)?n:t.get(n):r}function kc(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ka(t);return n.children.forEach(o=>{iz(o,s[o.value.outlet],e,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Fc(a,e.getContext(o),i)),i}function iz(n,t,e,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=sz(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new fp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?kc(n,t,a?a.children:null,r,i):kc(n,t,e,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ba(a.outlet.component,o))}else o&&Fc(t,a,i),i.canActivateChecks.push(new fp(r)),s.component?kc(n,null,a?a.children:null,r,i):kc(n,null,e,r,i);return i}function sz(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!oo(n.url,t.url);case"pathParamsOrQueryParamsChange":return!oo(n.url,t.url)||!Ur(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!c_(n,t)||!Ur(n.queryParams,t.queryParams);case"paramsChange":default:return!c_(n,t)}}function Fc(n,t,e){let r=ka(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?t?Fc(o,t.children.getContext(s),e):Fc(o,null,e):Fc(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Ba(t.outlet.component,i)):e.canDeactivateChecks.push(new Ba(null,i)):e.canDeactivateChecks.push(new Ba(null,i))}function Kc(n){return typeof n=="function"}function oz(n){return typeof n=="boolean"}function az(n){return n&&Kc(n.canLoad)}function lz(n){return n&&Kc(n.canActivate)}function cz(n){return n&&Kc(n.canActivateChild)}function uz(n){return n&&Kc(n.canDeactivate)}function dz(n){return n&&Kc(n.canMatch)}function C1(n){return n instanceof ei||n?.name==="EmptyError"}var Yf=Symbol("INITIAL_VALUE");function Ga(){return tn(n=>yl(n.map(t=>t.pipe(ni(1),bm(Yf)))).pipe(Ne(t=>{for(let e of t)if(e!==!0){if(e===Yf)return Yf;if(e===!1||hz(e))return e}return!0}),hn(t=>t!==Yf),ni(1)))}function hz(n){return ja(n)||n instanceof za}function fz(n,t){return pt(e=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?fe(ce(H({},e),{guardsResult:!0})):pz(o,r,i,n).pipe(pt(a=>a&&oz(a)?gz(r,s,n,t):fe(a)),Ne(a=>ce(H({},e),{guardsResult:a})))})}function pz(n,t,e,r){return it(n).pipe(pt(i=>_z(i.component,i.route,e,t,r)),ri(i=>i!==!0,!0))}function gz(n,t,e,r){return it(t).pipe(Bi(i=>Vo(vz(i.route.parent,r),mz(i.route,r),bz(n,i.path,e),yz(n,i.route,e))),ri(i=>i!==!0,!0))}function mz(n,t){return n!==null&&t&&t(new ap(n)),fe(!0)}function vz(n,t){return n!==null&&t&&t(new sp(n)),fe(!0)}function yz(n,t,e){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(s=>bl(()=>{let o=Wa(t)??e,a=Ya(s,o),l=lz(a)?a.canActivate(t,n):Kt(o,()=>a(t,n));return Mi(l).pipe(ri())}));return fe(i).pipe(Ga())}function bz(n,t,e){let r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>rz(o)).filter(o=>o!==null).map(o=>bl(()=>{let a=o.guards.map(l=>{let c=Wa(o.node)??e,u=Ya(l,c),d=cz(u)?u.canActivateChild(r,n):Kt(c,()=>u(r,n));return Mi(d).pipe(ri())});return fe(a).pipe(Ga())}));return fe(s).pipe(Ga())}function _z(n,t,e,r,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return fe(!0);let o=s.map(a=>{let l=Wa(t)??i,c=Ya(a,l),u=uz(c)?c.canDeactivate(n,t,e,r):Kt(l,()=>c(n,t,e,r));return Mi(u).pipe(ri())});return fe(o).pipe(Ga())}function Cz(n,t,e,r){let i=t.canLoad;if(i===void 0||i.length===0)return fe(!0);let s=i.map(o=>{let a=Ya(o,n),l=az(a)?a.canLoad(t,e):Kt(n,()=>a(t,e));return Mi(l)});return fe(s).pipe(Ga(),E1(r))}function E1(n){return um(kt(t=>{if(typeof t!="boolean")throw hp(n,t)}),Ne(t=>t===!0))}function Ez(n,t,e,r){let i=t.canMatch;if(!i||i.length===0)return fe(!0);let s=i.map(o=>{let a=Ya(o,n),l=dz(a)?a.canMatch(t,e):Kt(n,()=>a(t,e));return Mi(l)});return fe(s).pipe(Ga(),E1(r))}var zc=class{segmentGroup;constructor(t){this.segmentGroup=t||null}},Gc=class extends Error{urlTree;constructor(t){super(),this.urlTree=t}};function Pa(n){return Bo(new zc(n))}function xz(n){return Bo(new oe(4e3,!1))}function wz(n){return Bo(b1(!1,sn.GuardRejected))}var h_=class{urlSerializer;urlTree;constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let r=[],i=e.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[xe])return xz(`${t.redirectTo}`);i=i.children[xe]}}applyRedirectCommands(t,e,r,i,s){return Dz(e,i,s).pipe(Ne(o=>{if(o instanceof zr)throw new Gc(o);let a=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),t,r);if(o[0]==="/")throw new Gc(a);return a}))}applyRedirectCreateUrlTree(t,e,r,i){let s=this.createSegmentGroup(t,e.root,r,i);return new zr(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let r={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=e[a]}else r[i]=s}),r}createSegmentGroup(t,e,r,i){let s=this.createSegments(t,e.segments,r,i),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,r,i)}),new Ue(s,o)}createSegments(t,e,r,i){return e.map(s=>s.path[0]===":"?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,e,r){let i=r[e.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(t,e){let r=0;for(let i of e){if(i.path===t.path)return e.splice(r),i;r++}return t}};function Dz(n,t,e){if(typeof n=="string")return fe(n);let r=n,{queryParams:i,fragment:s,routeConfig:o,url:a,outlet:l,params:c,data:u,title:d}=t;return Mi(Kt(e,()=>r({params:c,data:u,queryParams:i,fragment:s,routeConfig:o,url:a,outlet:l,title:d})))}var f_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Sz(n,t,e,r,i){let s=x1(n,t,e);return s.matched?(r=X5(t,r),Ez(r,t,e,i).pipe(Ne(o=>o===!0?s:H({},f_)))):fe(s)}function x1(n,t,e){if(t.path==="**")return Tz(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?H({},f_):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||QM)(e,n,t);if(!i)return H({},f_);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?H(H({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Tz(n){return{matched:!0,parameters:n.length>0?e1(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function KM(n,t,e,r){return e.length>0&&Mz(n,e,r)?{segmentGroup:new Ue(t,Iz(r,new Ue(e,n.children))),slicedSegments:[]}:e.length===0&&Rz(n,e,r)?{segmentGroup:new Ue(n.segments,Az(n,e,r,n.children)),slicedSegments:e}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:e}}function Az(n,t,e,r){let i={};for(let s of e)if(gp(n,t,s)&&!r[mr(s)]){let o=new Ue([],{});i[mr(s)]=o}return H(H({},r),i)}function Iz(n,t){let e={};e[xe]=t;for(let r of n)if(r.path===""&&mr(r)!==xe){let i=new Ue([],{});e[mr(r)]=i}return e}function Mz(n,t,e){return e.some(r=>gp(n,t,r)&&mr(r)!==xe)}function Rz(n,t,e){return e.some(r=>gp(n,t,r))}function gp(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Oz(n,t,e){return t.length===0&&!n.children[e]}var p_=class{};function Nz(n,t,e,r,i,s,o="emptyOnly"){return new g_(n,t,e,r,i,o,s).recognize()}var Pz=31,g_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,e,r,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new h_(this.urlSerializer,this.urlTree)}noMatchError(t){return new oe(4002,`'${t.segmentGroup}'`)}recognize(){let t=KM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Ne(({children:e,rootSnapshot:r})=>{let i=new In(r,e),s=new Uc("",i),o=c1(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(t){let e=new ao([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,t,xe,e).pipe(Ne(r=>({children:r,rootSnapshot:e})),ti(r=>{if(r instanceof Gc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof zc?this.noMatchError(r):r}))}processSegmentGroup(t,e,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(t,e,r,s):this.processSegment(t,e,r,r.segments,i,!0,s).pipe(Ne(o=>o instanceof In?[o]:[]))}processChildren(t,e,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return it(s).pipe(Bi(o=>{let a=r.children[o],l=K5(e,o);return this.processSegmentGroup(t,l,a,o,i)}),ym((o,a)=>(o.push(...a),o)),ji(null),vm(),pt(o=>{if(o===null)return Pa(r);let a=w1(o);return kz(a),fe(a)}))}processSegment(t,e,r,i,s,o,a){return it(e).pipe(Bi(l=>this.processSegmentAgainstRoute(l._injector??t,e,l,r,i,s,o,a).pipe(ti(c=>{if(c instanceof zc)return fe(null);throw c}))),ri(l=>!!l),ti(l=>{if(C1(l))return Oz(r,i,s)?fe(new p_):Pa(r);throw l}))}processSegmentAgainstRoute(t,e,r,i,s,o,a,l){return mr(r)!==o&&(o===xe||!gp(i,s,r))?Pa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,r,s,o,l):Pa(i)}expandSegmentAgainstRouteUsingRedirect(t,e,r,i,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=x1(e,i,s);if(!l)return Pa(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pz&&(this.allowRedirects=!1));let f=new ao(s,c,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ZM(i),mr(i),i.component??i._loadedComponent??null,i,qM(i)),p=dp(f,a,this.paramsInheritanceStrategy);return f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.applyRedirects.applyRedirectCommands(u,i.redirectTo,d,f,t).pipe(tn(m=>this.applyRedirects.lineralizeSegments(i,m)),pt(m=>this.processSegment(t,r,e,m.concat(h),o,!1,a)))}matchSegmentAgainstRoute(t,e,r,i,s,o){let a=Sz(e,r,i,t,this.urlSerializer);return r.path==="**"&&(e.children={}),a.pipe(tn(l=>l.matched?(t=r._injector??t,this.getChildConfig(t,r,i).pipe(tn(({routes:c})=>{let u=r._loadedInjector??t,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new ao(h,d,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,ZM(r),mr(r),r.component??r._loadedComponent??null,r,qM(r)),g=dp(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let{segmentGroup:m,slicedSegments:v}=KM(e,h,f,c);if(v.length===0&&m.hasChildren())return this.processChildren(u,c,m,p).pipe(Ne(b=>new In(p,b)));if(c.length===0&&v.length===0)return fe(new In(p,[]));let y=mr(r)===s;return this.processSegment(u,c,m,v,y?xe:s,!0,p).pipe(Ne(b=>new In(p,b instanceof In?[b]:[])))}))):Pa(e)))}getChildConfig(t,e,r){return e.children?fe({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?fe({routes:e._loadedRoutes,injector:e._loadedInjector}):Cz(t,e,r,this.urlSerializer).pipe(pt(i=>i?this.configLoader.loadChildren(t,e).pipe(kt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):wz(e))):fe({routes:[],injector:t})}};function kz(n){n.sort((t,e)=>t.value.outlet===xe?-1:e.value.outlet===xe?1:t.value.outlet.localeCompare(e.value.outlet))}function Lz(n){let t=n.value.routeConfig;return t&&t.path===""}function w1(n){let t=[],e=new Set;for(let r of n){if(!Lz(r)){t.push(r);continue}let i=t.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),e.add(i)):t.push(r)}for(let r of e){let i=w1(r.children);t.push(new In(r.value,i))}return t.filter(r=>!e.has(r))}function ZM(n){return n.data||{}}function qM(n){return n.resolve||{}}function Fz(n,t,e,r,i,s){return pt(o=>Nz(n,t,e,r,o.extractedUrl,i,s).pipe(Ne(({state:a,tree:l})=>ce(H({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Bz(n,t){return pt(e=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=e;if(!i.length)return fe(e);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of D1(l))o.add(c);let a=0;return it(o).pipe(Bi(l=>s.has(l)?jz(l,r,n,t):(l.data=dp(l,l.parent,n).resolve,fe(void 0))),kt(()=>a++),Ho(1),pt(l=>a===o.size?fe(e):un))})}function D1(n){let t=n.children.map(e=>D1(e)).flat();return[n,...t]}function jz(n,t,e,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!m1(i)&&(s[Wc]=i.title),bl(()=>(n.data=dp(n,n.parent,e).resolve,Vz(s,n,t,r).pipe(Ne(o=>(n._resolvedData=o,n.data=H(H({},n.data),o),null)))))}function Vz(n,t,e,r){let i=r_(n);if(i.length===0)return fe({});let s={};return it(i).pipe(pt(o=>Hz(n[o],t,e,r).pipe(ri(),kt(a=>{if(a instanceof za)throw hp(new ps,a);s[o]=a}))),Ho(1),Ne(()=>s),ti(o=>C1(o)?un:Bo(o)))}function Hz(n,t,e,r){let i=Wa(t)??r,s=Ya(n,i),o=s.resolve?s.resolve(t,e):Kt(i,()=>s(t,e));return Mi(o)}function t_(n){return tn(t=>{let e=n(t);return e?it(e).pipe(Ne(()=>t)):fe(t)})}var __=(()=>{class n{buildTitle(e){let r,i=e.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===xe);return r}getResolvedTitleForRoute(e){return e.data[Wc]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z(S1),providedIn:"root"})}return n})(),S1=(()=>{class n extends __{title;constructor(e){super(),this.title=e}updateTitle(e){let r=this.buildTitle(e);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(he(tT))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ho=new se("",{providedIn:"root",factory:()=>({})}),fo=new se(""),mp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(ob);loadComponent(e,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return fe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Mi(Kt(e,()=>r.loadComponent())).pipe(Ne(A1),tn(I1),kt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),_l(()=>{this.componentLoaders.delete(r)})),s=new Fo(i,()=>new Mt).pipe(Lo());return this.componentLoaders.set(r,s),s}loadChildren(e,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=T1(r,this.compiler,e,this.onLoadEndListener).pipe(_l(()=>{this.childrenLoaders.delete(r)})),o=new Fo(s,()=>new Mt).pipe(Lo());return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T1(n,t,e,r){return Mi(Kt(e,()=>n.loadChildren())).pipe(Ne(A1),tn(I1),pt(i=>i instanceof Th||Array.isArray(i)?fe(i):it(t.compileModuleAsync(i))),Ne(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(fo,[],{optional:!0,self:!0}).flat()),{routes:o.map(b_),injector:s}}))}function Uz(n){return n&&typeof n=="object"&&"default"in n}function A1(n){return Uz(n)?n.default:n}function I1(n){return fe(n)}var vp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z($z),providedIn:"root"})}return n})(),$z=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,r){return e}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),C_=new se(""),E_=new se("");function M1(n,t,e){let r=n.get(E_),i=n.get(mt);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),zz(n)));a.ready.catch(c=>{});let{onViewTransitionCreated:l}=r;return l&&Kt(n,()=>l({transition:a,from:t,to:e})),o}function zz(n){return new Promise(t=>{Zl({read:()=>setTimeout(t)},{injector:n})})}var x_=new se(""),yp=(()=>{class n{currentNavigation=ui(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new Mt;transitionAbortWithErrorSubject=new Mt;configLoader=z(mp);environmentInjector=z(Rt);destroyRef=z(ci);urlSerializer=z(co);rootContexts=z(uo);location=z(qi);inputBindingEnabled=z(Xc,{optional:!0})!==null;titleStrategy=z(__);options=z(ho,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z(vp);createViewTransition=z(C_,{optional:!0});navigationErrorHandler=z(x_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new rp(i)),r=i=>this.events.next(new ip(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let r=++this.navigationId;Qt(()=>{this.transitions?.next(ce(H({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(e){return this.transitions=new ft(null),this.transitions.pipe(hn(r=>r!==null),tn(r=>{let i=!1;return fe(r).pipe(tn(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",sn.SupersededByNewNavigation),un;this.currentTransition=r,this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ce(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>s.abortController.abort()});let o=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=s.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!o&&a!=="reload")return this.events.next(new Gr(s.id,this.urlSerializer.serialize(s.rawUrl),"",Va.IgnoredSameUrlNavigation)),s.resolve(!1),un;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return fe(s).pipe(tn(l=>(this.events.next(new gs(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?un:Promise.resolve(l))),Fz(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),kt(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(u=>(u.finalUrl=l.urlAfterRedirects,u));let c=new jc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}));if(o&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:c,source:u,restoredState:d,extras:h}=s,f=new gs(l,this.urlSerializer.serialize(c),u,d);this.events.next(f);let p=p1(this.rootComponentType).snapshot;return this.currentTransition=r=ce(H({},s),{targetSnapshot:p,urlAfterRedirects:c,extras:ce(H({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=c,g)),fe(r)}else return this.events.next(new Gr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Va.IgnoredByUrlHandlingStrategy)),s.resolve(!1),un}),kt(s=>{let o=new Jf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(o)}),Ne(s=>(this.currentTransition=r=ce(H({},s),{guards:nz(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),fz(this.environmentInjector,s=>this.events.next(s)),kt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw hp(this.urlSerializer,s.guardsResult);let o=new ep(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(o)}),hn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",sn.GuardRejected),!1)),t_(s=>{if(s.guards.canActivateChecks.length!==0)return fe(s).pipe(kt(o=>{let a=new tp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),tn(o=>{let a=!1;return fe(o).pipe(Bz(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(o,"",sn.NoDataFromResolver)}}))}),kt(o=>{let a=new np(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}))}),t_(s=>{let o=a=>{let l=[];if(a.routeConfig?.loadComponent){let c=Wa(a)??this.environmentInjector;l.push(this.configLoader.loadComponent(c,a.routeConfig).pipe(kt(u=>{a.component=u}),Ne(()=>{})))}for(let c of a.children)l.push(...o(c));return l};return yl(o(s.targetSnapshot.root)).pipe(ji(null),ni(1))}),t_(()=>this.afterPreactivation()),tn(()=>{let{currentSnapshot:s,targetSnapshot:o}=r,a=this.createViewTransition?.(this.environmentInjector,s.root,o.root);return a?it(a).pipe(Ne(()=>r)):fe(r)}),Ne(s=>{let o=q5(e.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ce(H({},s),{targetRouterState:o}),this.currentNavigation.update(a=>(a.targetRouterState=o,a)),r}),kt(()=>{this.events.next(new Vc)}),tz(this.rootContexts,e.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),ni(1),yd(new Pe(s=>{let o=r.abortController.signal,a=()=>s.next();return o.addEventListener("abort",a),()=>o.removeEventListener("abort",a)}).pipe(hn(()=>!i&&!r.targetRouterState),kt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",sn.Aborted)}))),kt({next:s=>{i=!0,this.lastSuccessfulNavigation=Qt(this.currentNavigation),this.events.next(new Rn(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),yd(this.transitionAbortWithErrorSubject.pipe(kt(s=>{throw s}))),_l(()=>{i||this.cancelNavigationTransition(r,"",sn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ti(s=>{if(this.destroyed)return r.resolve(!1),un;if(i=!0,_1(s))this.events.next(new $r(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),ez(s)?this.events.next(new $a(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let o=new Ha(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let a=Kt(this.environmentInjector,()=>this.navigationErrorHandler?.(o));if(a instanceof za){let{message:l,cancellationCode:c}=hp(this.urlSerializer,a);this.events.next(new $r(r.id,this.urlSerializer.serialize(r.extractedUrl),l,c)),this.events.next(new $a(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(o),s}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return un}))}))}cancelNavigationTransition(e,r,i){let s=new $r(e.id,this.urlSerializer.serialize(e.extractedUrl),r,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Qt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return e.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gz(n){return n!==Fa}var R1=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z(Wz),providedIn:"root"})}return n})(),pp=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},Wz=(()=>{class n extends pp{static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),O1=(()=>{class n{urlSerializer=z(co);options=z(ho,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(qi);urlHandlingStrategy=z(vp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:r,targetBrowserUrl:i}){let s=e!==void 0?this.urlHandlingStrategy.merge(e,r):r,o=i??s;return o instanceof zr?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:r,initialUrl:i}){r&&e?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=e):this.rawUrlTree=i}routerState=p1(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:()=>z(Yz),providedIn:"root"})}return n})(),Yz=(()=>{class n extends O1{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{e(r.url,r.state,"popstate")})})}handleRouterEvent(e,r){e instanceof gs?this.updateStateMemento():e instanceof Gr?this.commitTransition(r):e instanceof jc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof Vc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):e instanceof $r&&e.code!==sn.SupersededByNewNavigation&&e.code!==sn.Redirect?this.restoreHistory(r):e instanceof Ha?this.restoreHistory(r,!0):e instanceof Rn&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:r,id:i}){let{replaceUrl:s,state:o}=r;if(this.location.isCurrentPathEqualTo(e)||s){let a=this.browserPageId,l=H(H({},o),this.generateNgRouterState(i,a));this.location.replaceState(e,"",l)}else{let a=H(H({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",a)}}restoreHistory(e,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.getCurrentUrlTree()===e.finalUrl&&s===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,r){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bp(n,t){n.events.pipe(hn(e=>e instanceof Rn||e instanceof $r||e instanceof Ha||e instanceof Gr),Ne(e=>e instanceof Rn||e instanceof Gr?0:(e instanceof $r?e.code===sn.Redirect||e.code===sn.SupersededByNewNavigation:!1)?2:1),hn(e=>e!==2),ni(1)).subscribe(()=>{t()})}var Xz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Kz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},On=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(Ih);stateManager=z(O1);options=z(ho,{optional:!0})||{};pendingTasks=z(di);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z(yp);urlSerializer=z(co);location=z(qi);urlHandlingStrategy=z(vp);injector=z(Rt);_events=new Mt;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(R1);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(fo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(Xc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new bt;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=Qt(this.navigationTransitions.currentNavigation);if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof $r&&r.code!==sn.Redirect&&r.code!==sn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rn)this.navigated=!0;else if(r instanceof $a){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Gz(i.source)},o);this.scheduleNavigation(a,Fa,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Y5(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,r,i)=>{this.navigateToSyncWithBrowser(e,i,r)})}navigateToSyncWithBrowser(e,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=H({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,r,o,s).catch(l=>{this.disposed||this.injector.get($n)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Qt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(b_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=H(H({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=u1(h)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),d=this.currentUrlTree.root}return d1(d,e,u,c??null)}navigateByUrl(e,r={skipLocationChange:!1}){let i=ja(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Fa,null,r)}navigate(e,r={skipLocationChange:!1}){return Zz(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,r){let i;if(r===!0?i=H({},Xz):r===!1?i=H({},Kz):i=r,ja(e))return GM(this.currentUrlTree,e,i);let s=this.parseUrl(e);return GM(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(e,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,h)=>{a=d,l=h});let u=this.pendingTasks.add();return bp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zz(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new oe(4008,!1)}var Zc=class{};var N1=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(e,r,i,s){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(hn(e=>e instanceof Rn),Bi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){let i=[];for(let s of r){s.providers&&!s._injector&&(s._injector=oa(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return it(i).pipe(jo())}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(e,r):i=fe(null);let s=i.pipe(pt(o=>o===null?fe(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(r.loadComponent&&!r._loadedComponent){let o=this.loader.loadComponent(e,r);return it([s,o]).pipe(jo())}else return s})}static \u0275fac=function(r){return new(r||n)(he(On),he(Rt),he(Zc),he(mp))};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P1=new se(""),qz=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Fa;restoredId=0;store={};constructor(e,r,i,s,o={}){this.urlSerializer=e,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof gs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Rn?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof Gr&&e.code===Va.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Ua&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.zone.runOutsideAngular(()=>K(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ua(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){Hy()};static \u0275prov=re({token:n,factory:n.\u0275fac})}return n})();function D_(n,...t){return Ns([{provide:fo,multi:!0,useValue:n},[],{provide:Ii,useFactory:k1,deps:[On]},{provide:ql,multi:!0,useFactory:L1},t.map(e=>e.\u0275providers)])}function k1(n){return n.routerState.root}function qc(n,t){return{\u0275kind:n,\u0275providers:t}}function L1(){let n=z(nn);return t=>{let e=n.get(Rr);if(t!==e.components[0])return;let r=n.get(On),i=n.get(F1);n.get(S_)===1&&r.initialNavigation(),n.get(V1,null,{optional:!0})?.setUpPreloading(),n.get(P1,null,{optional:!0})?.init(),r.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var F1=new se("",{factory:()=>new Mt}),S_=new se("",{providedIn:"root",factory:()=>1});function B1(){let n=[{provide:vh,useValue:!0},{provide:S_,useValue:0},Mh(()=>{let t=z(nn);return t.get(vb,Promise.resolve()).then(()=>new Promise(r=>{let i=t.get(On),s=t.get(F1);bp(i,()=>{r(!0)}),t.get(yp).afterPreactivation=()=>(r(!0),s.closed?fe(void 0):s),i.initialNavigation()}))})];return qc(2,n)}function j1(){let n=[Mh(()=>{z(On).setUpLocationChangeListener()}),{provide:S_,useValue:2}];return qc(3,n)}var V1=new se("");function H1(n){return qc(0,[{provide:V1,useExisting:N1},{provide:Zc,useExisting:n}])}function U1(){return qc(8,[v_,{provide:Xc,useExisting:v_}])}function $1(n){dr("NgRouterViewTransitions");let t=[{provide:C_,useValue:M1},{provide:E_,useValue:H({skipNextTransition:!!n?.skipInitialTransition},n)}];return qc(9,t)}var z1=[qi,{provide:co,useClass:ps},On,uo,{provide:Ii,useFactory:k1,deps:[On]},mp,[]],T_=(()=>{class n{constructor(){}static forRoot(e,r){return{ngModule:n,providers:[z1,[],{provide:fo,multi:!0,useValue:e},[],r?.errorHandler?{provide:x_,useValue:r.errorHandler}:[],{provide:ho,useValue:r||{}},r?.useHash?Jz():e4(),Qz(),r?.preloadingStrategy?H1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?t4(r):[],r?.bindToComponentInputs?U1().\u0275providers:[],r?.enableViewTransitions?$1().\u0275providers:[],n4()]}}static forChild(e){return{ngModule:n,providers:[{provide:fo,multi:!0,useValue:e}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=ir({})}return n})();function Qz(){return{provide:P1,useFactory:()=>{let n=z(WS),t=z(ot),e=z(ho),r=z(yp),i=z(co);return e.scrollOffset&&n.setOffset(e.scrollOffset),new qz(i,r,n,t,e)}}}function Jz(){return{provide:_i,useClass:bb}}function e4(){return{provide:_i,useClass:Hh}}function t4(n){return[n.initialNavigation==="disabled"?j1().\u0275providers:[],n.initialNavigation==="enabledBlocking"?B1().\u0275providers:[]]}var w_=new se("");function n4(){return[{provide:w_,useFactory:L1},{provide:ql,multi:!0,useExisting:w_}]}var _p=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vt({type:n,selectors:[["app-home"]],decls:26,vars:0,consts:[[1,"flex","flex-col","items-center","w-full","h-full","p-2"],[1,"max-w-5xl","items-center"],[1,"p-8"],[1,"text-3xl","font-bold","mb-8","text-accent"],[1,"flex","flex-wrap","gap-6","mt-4"],["routerLink","/transcript",1,"bg-navy","text-gray-100","rounded-xl","shadow-lg","p-6","w-64","hover:shadow-accent","hover:bg-dark","transition-all"],[1,"text-xl","font-bold","mb-2","text-accent"],["routerLink","/insights",1,"bg-navy","text-gray-100","rounded-xl","shadow-lg","p-6","w-64","hover:shadow-accent","hover:bg-dark","transition-all"],["routerLink","/simulation",1,"bg-navy","text-gray-100","rounded-xl","shadow-lg","p-6","w-64","hover:shadow-accent","hover:bg-dark","transition-all"],["routerLink","/advisor",1,"bg-navy","text-gray-100","rounded-xl","shadow-lg","p-6","w-64","hover:shadow-accent","hover:bg-dark","transition-all"]],template:function(e,r){e&1&&(fn(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),G(4,"Welcome to the Advanced GPA Advisor"),pn(),fn(5,"div",4)(6,"a",5)(7,"h3",6),G(8,"Step 1: Upload Transcript"),pn(),fn(9,"p"),G(10,"Import your transcript and review your grades."),pn()(),fn(11,"a",7)(12,"h3",6),G(13,"Step 2: Explore Insights"),pn(),fn(14,"p"),G(15,"See your GPA trends, best/worst courses, and more."),pn()(),fn(16,"a",8)(17,"h3",6),G(18,"Step 3: Simulate GPA"),pn(),fn(19,"p"),G(20,"Plan future terms and see if you can reach your target GPA."),pn()(),fn(21,"a",9)(22,"h3",6),G(23,"Step 4: Ask the AI Advisor"),pn(),fn(24,"p"),G(25,"Get personalized advice and save your conversations."),pn()()()()()())},encapsulation:2})};var i4={34:((n,t,e)=>{var r=e(4901);n.exports=function(i){return typeof i=="object"?i!==null:r(i)}}),81:((n,t,e)=>{var r=e(9565),i=e(9306),s=e(8551),o=e(6823),a=e(851),l=TypeError;n.exports=function(c,u){var d=arguments.length<2?a(c):u;if(i(d))return s(r(d,c));throw new l(o(c)+" is not iterable")}}),116:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(2652),o=e(9306),a=e(8551),l=e(1767),c=e(9539),u=e(4549),d=u("find",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{find:function(f){a(this);try{o(f)}catch(m){c(this,"throw",m)}if(d)return i(d,this,f);var p=l(this),g=0;return s(p,function(m,v){if(f(m,g++))return v(m)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})}),283:((n,t,e)=>{var r=e(9504),i=e(9039),s=e(4901),o=e(9297),a=e(3724),l=e(350).CONFIGURABLE,c=e(3706),u=e(1181),d=u.enforce,h=u.get,f=String,p=Object.defineProperty,g=r("".slice),m=r("".replace),v=r([].join),y=a&&!i(function(){return p(function(){},"length",{value:8}).length!==8}),b=String(String).split("String"),C=n.exports=function(_,E,w){g(f(E),0,7)==="Symbol("&&(E="["+m(f(E),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),w&&w.getter&&(E="get "+E),w&&w.setter&&(E="set "+E),(!o(_,"name")||l&&_.name!==E)&&(a?p(_,"name",{value:E,configurable:!0}):_.name=E),y&&w&&o(w,"arity")&&_.length!==w.arity&&p(_,"length",{value:w.arity});try{w&&o(w,"constructor")&&w.constructor?a&&p(_,"prototype",{writable:!1}):_.prototype&&(_.prototype=void 0)}catch{}var x=d(_);return o(x,"source")||(x.source=v(b,typeof E=="string"?E:"")),_};Function.prototype.toString=C(function(){return s(this)&&h(this).source||c(this)},"toString")}),350:((n,t,e)=>{var r=e(3724),i=e(9297),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,a=i(s,"name"),l=a&&(function(){}).name==="something",c=a&&(!r||r&&o(s,"name").configurable);n.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}}),397:((n,t,e)=>{var r=e(7751);n.exports=r("document","documentElement")}),421:(n=>{n.exports={}}),456:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(9504),o=e(4154),a=e(5169),l=s(1.1.toString),c=i.Uint8Array,u=!c||!c.prototype.toHex||!(function(){try{var d=new c([255,255,255,255,255,255,255,255]);return d.toHex()==="ffffffffffffffff"}catch{return!1}})();c&&r({target:"Uint8Array",proto:!0,forced:u},{toHex:function(){o(this),a(this.buffer);for(var h="",f=0,p=this.length;f<p;f++){var g=l(this[f],16);h+=g.length===1?"0"+g:g}return h}})}),507:((n,t,e)=>{var r=e(9565);n.exports=function(i,s,o){for(var a=o?i:i.iterator,l=i.next,c,u;!(c=r(l,a)).done;)if(u=s(c.value),u!==void 0)return u}}),531:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(9306),o=e(8551),a=e(1767),l=e(8646),c=e(9462),u=e(9539),d=e(6395),h=e(684),f=e(4549),p=!d&&!h("flatMap",function(){}),g=!d&&!p&&f("flatMap",TypeError),m=d||p||g,v=c(function(){for(var y=this.iterator,b=this.mapper,C,_;;){if(_=this.inner)try{if(C=o(i(_.next,_.iterator)),!C.done)return C.value;this.inner=null}catch(E){u(y,"throw",E)}if(C=o(i(this.next,y)),this.done=!!C.done)return;try{this.inner=l(b(C.value,this.counter++),!1)}catch(E){u(y,"throw",E)}}});r({target:"Iterator",proto:!0,real:!0,forced:m},{flatMap:function(b){o(this);try{s(b)}catch(C){u(this,"throw",C)}return g?i(g,this,b):new v(a(this),{mapper:b,inner:null})}})}),616:((n,t,e)=>{var r=e(9039);n.exports=!r(function(){var i=(function(){}).bind();return typeof i!="function"||i.hasOwnProperty("prototype")})}),655:((n,t,e)=>{var r=e(6955),i=String;n.exports=function(s){if(r(s)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return i(s)}}),679:((n,t,e)=>{var r=e(1625),i=TypeError;n.exports=function(s,o){if(r(o,s))return s;throw new i("Incorrect invocation")}}),684:(n=>{n.exports=function(t,e){var r=typeof Iterator=="function"&&Iterator.prototype[t];if(r)try{r.call({next:null},e).next()}catch{return!0}}}),741:(n=>{var t=Math.ceil,e=Math.floor;n.exports=Math.trunc||function(i){var s=+i;return(s>0?e:t)(s)}}),757:((n,t,e)=>{var r=e(7751),i=e(4901),s=e(1625),o=e(7040),a=Object;n.exports=o?function(l){return typeof l=="symbol"}:function(l){var c=r("Symbol");return i(c)&&s(c.prototype,a(l))}}),851:((n,t,e)=>{var r=e(6955),i=e(5966),s=e(4117),o=e(6269),a=e(8227),l=a("iterator");n.exports=function(c){if(!s(c))return i(c,l)||i(c,"@@iterator")||o[r(c)]}}),944:(n=>{var t=TypeError;n.exports=function(e){var r=e&&e.alphabet;if(r===void 0||r==="base64"||r==="base64url")return r||"base64";throw new t("Incorrect `alphabet` option")}}),1072:((n,t,e)=>{var r=e(1828),i=e(8727);n.exports=Object.keys||function(o){return r(o,i)}}),1103:(n=>{n.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}}),1108:((n,t,e)=>{var r=e(6955);n.exports=function(i){var s=r(i);return s==="BigInt64Array"||s==="BigUint64Array"}}),1148:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(2652),o=e(9306),a=e(8551),l=e(1767),c=e(9539),u=e(4549),d=u("every",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{every:function(f){a(this);try{o(f)}catch(m){c(this,"throw",m)}if(d)return i(d,this,f);var p=l(this),g=0;return!s(p,function(m,v){if(!f(m,g++))return v()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})}),1181:((n,t,e)=>{var r=e(8622),i=e(4576),s=e(34),o=e(6699),a=e(9297),l=e(7629),c=e(6119),u=e(421),d="Object already initialized",h=i.TypeError,f=i.WeakMap,p,g,m,v=function(_){return m(_)?g(_):p(_,{})},y=function(_){return function(E){var w;if(!s(E)||(w=g(E)).type!==_)throw new h("Incompatible receiver, "+_+" required");return w}};if(r||l.state){var b=l.state||(l.state=new f);b.get=b.get,b.has=b.has,b.set=b.set,p=function(_,E){if(b.has(_))throw new h(d);return E.facade=_,b.set(_,E),E},g=function(_){return b.get(_)||{}},m=function(_){return b.has(_)}}else{var C=c("state");u[C]=!0,p=function(_,E){if(a(_,C))throw new h(d);return E.facade=_,o(_,C,E),E},g=function(_){return a(_,C)?_[C]:{}},m=function(_){return a(_,C)}}n.exports={set:p,get:g,has:m,enforce:v,getterFor:y}}),1291:((n,t,e)=>{var r=e(741);n.exports=function(i){var s=+i;return s!==s||s===0?0:r(s)}}),1385:((n,t,e)=>{var r=e(9539);n.exports=function(i,s,o){for(var a=i.length-1;a>=0;a--)if(i[a]!==void 0)try{o=r(i[a].iterator,s,o)}catch(l){s="throw",o=l}if(s==="throw")throw o;return o}}),1548:((n,t,e)=>{var r=e(4576),i=e(9039),s=e(9519),o=e(4215),a=r.structuredClone;n.exports=!!a&&!i(function(){if(o==="DENO"&&s>92||o==="NODE"&&s>94||o==="BROWSER"&&s>97)return!1;var l=new ArrayBuffer(8),c=a(l,{transfer:[l]});return l.byteLength!==0||c.byteLength!==8})}),1549:((n,t,e)=>{e(6632)}),1625:((n,t,e)=>{var r=e(9504);n.exports=r({}.isPrototypeOf)}),1689:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(8745),o=e(7680),a=e(6043),l=e(9306),c=e(1103),u=i.Promise,d=!1,h=!u||!u.try||c(function(){u.try(function(f){d=f===8},8)}).error||!d;r({target:"Promise",stat:!0,forced:h},{try:function(f){var p=arguments.length>1?o(arguments,1):[],g=a.f(this),m=c(function(){return s(l(f),void 0,p)});return(m.error?g.reject:g.resolve)(m.value),g.promise}})}),1698:((n,t,e)=>{var r=e(6518),i=e(4204),s=e(9835),o=e(4916),a=!o("union")||!s("union");r({target:"Set",proto:!0,real:!0,forced:a},{union:i})}),1701:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(9306),o=e(8551),a=e(1767),l=e(9462),c=e(6319),u=e(9539),d=e(684),h=e(4549),f=e(6395),p=!f&&!d("map",function(){}),g=!f&&!p&&h("map",TypeError),m=f||p||g,v=l(function(){var y=this.iterator,b=o(i(this.next,y)),C=this.done=!!b.done;if(!C)return c(y,this.mapper,[b.value,this.counter++],!0)});r({target:"Iterator",proto:!0,real:!0,forced:m},{map:function(b){o(this);try{s(b)}catch(C){u(this,"throw",C)}return g?i(g,this,b):new v(a(this),{mapper:b})}})}),1767:(n=>{n.exports=function(t){return{iterator:t,next:t.next,done:!1}}}),1828:((n,t,e)=>{var r=e(9504),i=e(9297),s=e(5397),o=e(9617).indexOf,a=e(421),l=r([].push);n.exports=function(c,u){var d=s(c),h=0,f=[],p;for(p in d)!i(a,p)&&i(d,p)&&l(f,p);for(;u.length>h;)i(d,p=u[h++])&&(~o(f,p)||l(f,p));return f}}),2106:((n,t,e)=>{var r=e(283),i=e(4913);n.exports=function(s,o,a){return a.get&&r(a.get,o,{getter:!0}),a.set&&r(a.set,o,{setter:!0}),i.f(s,o,a)}}),2140:((n,t,e)=>{var r=e(8227),i=r("toStringTag"),s={};s[i]="z",n.exports=String(s)==="[object z]"}),2195:((n,t,e)=>{var r=e(9504),i=r({}.toString),s=r("".slice);n.exports=function(o){return s(i(o),8,-1)}}),2211:((n,t,e)=>{var r=e(9039);n.exports=!r(function(){function i(){}return i.prototype.constructor=null,Object.getPrototypeOf(new i)!==i.prototype})}),2303:((n,t,e)=>{var r=e(4576),i=e(9504),s=r.Uint8Array,o=r.SyntaxError,a=r.parseInt,l=Math.min,c=/[^\da-f]/i,u=i(c.exec),d=i("".slice);n.exports=function(h,f){var p=h.length;if(p%2!==0)throw new o("String should be an even number of characters");for(var g=f?l(f.length,p/2):p/2,m=f||new s(g),v=0,y=0;y<g;){var b=d(h,v,v+=2);if(u(c,b))throw new o("String should only contain hex characters");m[y++]=a(b,16)}return{bytes:m,read:v}}}),2360:((n,t,e)=>{var r=e(8551),i=e(6801),s=e(8727),o=e(421),a=e(397),l=e(4055),c=e(6119),u=">",d="<",h="prototype",f="script",p=c("IE_PROTO"),g=function(){},m=function(_){return d+f+u+_+d+"/"+f+u},v=function(_){_.write(m("")),_.close();var E=_.parentWindow.Object;return _=null,E},y=function(){var _=l("iframe"),E="java"+f+":",w;return _.style.display="none",a.appendChild(_),_.src=String(E),w=_.contentWindow.document,w.open(),w.write(m("document.F=Object")),w.close(),w.F},b,C=function(){try{b=new ActiveXObject("htmlfile")}catch{}C=typeof document<"u"?document.domain&&b?v(b):y():v(b);for(var _=s.length;_--;)delete C[h][s[_]];return C()};o[p]=!0,n.exports=Object.create||function(E,w){var x;return E!==null?(g[h]=r(E),x=new g,g[h]=null,x[p]=E):x=C(),w===void 0?x:i.f(x,w)}}),2475:((n,t,e)=>{var r=e(6518),i=e(8527),s=e(4916),o=!s("isSupersetOf",function(a){return!a});r({target:"Set",proto:!0,real:!0,forced:o},{isSupersetOf:i})}),2489:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(9306),o=e(8551),a=e(1767),l=e(9462),c=e(6319),u=e(6395),d=e(9539),h=e(684),f=e(4549),p=!u&&!h("filter",function(){}),g=!u&&!p&&f("filter",TypeError),m=u||p||g,v=l(function(){for(var y=this.iterator,b=this.predicate,C=this.next,_,E,w;;){if(_=o(i(C,y)),E=this.done=!!_.done,E)return;if(w=_.value,c(y,b,[w,this.counter++],!0))return w}});r({target:"Iterator",proto:!0,real:!0,forced:m},{filter:function(b){o(this);try{s(b)}catch(C){d(this,"throw",C)}return g?i(g,this,b):new v(a(this),{predicate:b})}})}),2529:(n=>{n.exports=function(t,e){return{value:t,done:e}}}),2603:((n,t,e)=>{var r=e(655);n.exports=function(i,s){return i===void 0?arguments.length<2?"":s:r(i)}}),2652:((n,t,e)=>{var r=e(6080),i=e(9565),s=e(8551),o=e(6823),a=e(4209),l=e(6198),c=e(1625),u=e(81),d=e(851),h=e(9539),f=TypeError,p=function(m,v){this.stopped=m,this.result=v},g=p.prototype;n.exports=function(m,v,y){var b=y&&y.that,C=!!(y&&y.AS_ENTRIES),_=!!(y&&y.IS_RECORD),E=!!(y&&y.IS_ITERATOR),w=!!(y&&y.INTERRUPTED),x=r(v,b),S,A,I,O,k,$,U,P=function(D){return S&&h(S,"normal"),new p(!0,D)},M=function(D){return C?(s(D),w?x(D[0],D[1],P):x(D[0],D[1])):w?x(D,P):x(D)};if(_)S=m.iterator;else if(E)S=m;else{if(A=d(m),!A)throw new f(o(m)+" is not iterable");if(a(A)){for(I=0,O=l(m);O>I;I++)if(k=M(m[I]),k&&c(g,k))return k;return new p(!1)}S=u(m,A)}for($=_?m.next:S.next;!(U=i($,S)).done;){try{k=M(U.value)}catch(D){h(S,"throw",D)}if(typeof k=="object"&&k&&c(g,k))return k}return new p(!1)}}),2777:((n,t,e)=>{var r=e(9565),i=e(34),s=e(757),o=e(5966),a=e(4270),l=e(8227),c=TypeError,u=l("toPrimitive");n.exports=function(d,h){if(!i(d)||s(d))return d;var f=o(d,u),p;if(f){if(h===void 0&&(h="default"),p=r(f,d,h),!i(p)||s(p))return p;throw new c("Can't convert object to primitive value")}return h===void 0&&(h="number"),a(d,h)}}),2787:((n,t,e)=>{var r=e(9297),i=e(4901),s=e(8981),o=e(6119),a=e(2211),l=o("IE_PROTO"),c=Object,u=c.prototype;n.exports=a?c.getPrototypeOf:function(d){var h=s(d);if(r(h,l))return h[l];var f=h.constructor;return i(f)&&h instanceof f?f.prototype:h instanceof c?u:null}}),2796:((n,t,e)=>{var r=e(9039),i=e(4901),s=/#|\.prototype\./,o=function(d,h){var f=l[a(d)];return f===u?!0:f===c?!1:i(h)?r(h):!!h},a=o.normalize=function(d){return String(d).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";n.exports=o}),2804:(n=>{var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=t+"+/",r=t+"-_",i=function(s){for(var o={},a=0;a<64;a++)o[s.charAt(a)]=a;return o};n.exports={i2c:e,c2i:i(e),i2cUrl:r,c2iUrl:i(r)}}),2812:(n=>{var t=TypeError;n.exports=function(e,r){if(e<r)throw new t("Not enough arguments");return e}}),2839:((n,t,e)=>{var r=e(4576),i=r.navigator,s=i&&i.userAgent;n.exports=s?String(s):""}),2967:((n,t,e)=>{var r=e(6706),i=e(34),s=e(7750),o=e(3506);n.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var a=!1,l={},c;try{c=r(Object.prototype,"__proto__","set"),c(l,[]),a=l instanceof Array}catch{}return function(d,h){return s(d),o(h),i(d)&&(a?c(d,h):d.__proto__=h),d}})():void 0)}),3068:((n,t,e)=>{var r=e(6518),i=e(9504),s=e(2652),o=RangeError,a=TypeError,l=1/0,c=NaN,u=Math.abs,d=Math.pow,h=i([].push),f=d(2,1023),p=d(2,53)-1,g=Number.MAX_VALUE,m=d(2,971),v={},y={},b={},C={},_={},E=function(w,x){var S=w+x,A=x-(S-w);return{hi:S,lo:A}};r({target:"Math",stat:!0},{sumPrecise:function(x){var S=[],A=0,I=C;switch(s(x,function(W){if(++A>=p)throw new o("Maximum allowed index exceeded");if(typeof W!="number")throw new a("Value is not a number");I!==v&&(W!==W?I=v:W===l?I=I===y?v:b:W===-l?I=I===b?v:y:(W!==0||1/W===l)&&(I===C||I===_)&&(I=_,h(S,W)))}),I){case v:return c;case y:return-l;case b:return l;case C:return-0}for(var O=[],k=0,$,U,P,M,D,T,Y=0;Y<S.length;Y++){$=S[Y];for(var Q=0,ie=0;ie<O.length;ie++){if(U=O[ie],u($)<u(U)&&(T=$,$=U,U=T),P=E($,U),M=P.hi,D=P.lo,u(M)===l){var q=M===l?1:-1;k+=q,$=$-q*f-q*f,u($)<u(U)&&(T=$,$=U,U=T),P=E($,U),M=P.hi,D=P.lo}D!==0&&(O[Q++]=D),$=M}O.length=Q,$!==0&&h(O,$)}var Ee=O.length-1;if(M=0,D=0,k!==0){var je=Ee>=0?O[Ee]:0;if(Ee--,u(k)>1||k>0&&je>0||k<0&&je<0)return k>0?l:-l;if(P=E(k*f,je/2),M=P.hi,D=P.lo,D*=2,u(2*M)===l)return M>0?M===f&&D===-(m/2)&&Ee>=0&&O[Ee]<0?g:l:M===-f&&D===m/2&&Ee>=0&&O[Ee]>0?-g:-l;D!==0&&(O[++Ee]=D,D=0),M*=2}for(;Ee>=0&&(P=E(M,O[Ee--]),M=P.hi,D=P.lo,D===0););return Ee>=0&&(D<0&&O[Ee]<0||D>0&&O[Ee]>0)&&(U=D*2,$=M+U,U===$-M&&(M=$)),M}})}),3167:((n,t,e)=>{var r=e(4901),i=e(34),s=e(2967);n.exports=function(o,a,l){var c,u;return s&&r(c=a.constructor)&&c!==l&&i(u=c.prototype)&&u!==l.prototype&&s(o,u),o}}),3238:((n,t,e)=>{var r=e(4576),i=e(7811),s=e(7394),o=r.DataView;n.exports=function(a){if(!i||s(a)!==0)return!1;try{return new o(a),!1}catch{return!0}}}),3392:((n,t,e)=>{var r=e(9504),i=0,s=Math.random(),o=r(1.1.toString);n.exports=function(a){return"Symbol("+(a===void 0?"":a)+")_"+o(++i+s,36)}}),3440:((n,t,e)=>{var r=e(7080),i=e(4402),s=e(9286),o=e(5170),a=e(3789),l=e(8469),c=e(507),u=i.has,d=i.remove;n.exports=function(f){var p=r(this),g=a(f),m=s(p);return o(p)<=g.size?l(p,function(v){g.includes(v)&&d(m,v)}):c(g.getIterator(),function(v){u(m,v)&&d(m,v)}),m}}),3463:(n=>{var t=TypeError;n.exports=function(e){if(typeof e=="string")return e;throw new t("Argument is not a string")}}),3506:((n,t,e)=>{var r=e(3925),i=String,s=TypeError;n.exports=function(o){if(r(o))return o;throw new s("Can't set "+i(o)+" as a prototype")}}),3579:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(2652),o=e(9306),a=e(8551),l=e(1767),c=e(9539),u=e(4549),d=u("some",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{some:function(f){a(this);try{o(f)}catch(m){c(this,"throw",m)}if(d)return i(d,this,f);var p=l(this),g=0;return s(p,function(m,v){if(f(m,g++))return v()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})}),3650:((n,t,e)=>{var r=e(7080),i=e(4402),s=e(9286),o=e(3789),a=e(507),l=i.add,c=i.has,u=i.remove;n.exports=function(h){var f=r(this),p=o(h).getIterator(),g=s(f);return a(p,function(m){c(f,m)?u(g,m):l(g,m)}),g}}),3706:((n,t,e)=>{var r=e(9504),i=e(4901),s=e(7629),o=r(Function.toString);i(s.inspectSource)||(s.inspectSource=function(a){return o(a)}),n.exports=s.inspectSource}),3717:((n,t)=>{t.f=Object.getOwnPropertySymbols}),3724:((n,t,e)=>{var r=e(9039);n.exports=!r(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})}),3789:((n,t,e)=>{var r=e(9306),i=e(8551),s=e(9565),o=e(1291),a=e(1767),l="Invalid size",c=RangeError,u=TypeError,d=Math.max,h=function(f,p){this.set=f,this.size=d(p,0),this.has=r(f.has),this.keys=r(f.keys)};h.prototype={getIterator:function(){return a(i(s(this.keys,this.set)))},includes:function(f){return s(this.has,this.set,f)}},n.exports=function(f){i(f);var p=+f.size;if(p!==p)throw new u(l);var g=o(p);if(g<0)throw new c(l);return new h(f,g)}}),3838:((n,t,e)=>{var r=e(7080),i=e(5170),s=e(8469),o=e(3789);n.exports=function(l){var c=r(this),u=o(l);return i(c)>u.size?!1:s(c,function(d){if(!u.includes(d))return!1},!0)!==!1}}),3853:((n,t,e)=>{var r=e(6518),i=e(4449),s=e(4916),o=!s("isDisjointFrom",function(a){return!a});r({target:"Set",proto:!0,real:!0,forced:o},{isDisjointFrom:i})}),3925:((n,t,e)=>{var r=e(34);n.exports=function(i){return r(i)||i===null}}),3972:((n,t,e)=>{var r=e(34),i=String,s=TypeError;n.exports=function(o){if(o===void 0||r(o))return o;throw new s(i(o)+" is not an object or undefined")}}),4055:((n,t,e)=>{var r=e(4576),i=e(34),s=r.document,o=i(s)&&i(s.createElement);n.exports=function(a){return o?s.createElement(a):{}}}),4114:((n,t,e)=>{var r=e(6518),i=e(8981),s=e(6198),o=e(4527),a=e(6837),l=e(9039),c=l(function(){return[].push.call({length:4294967296},1)!==4294967297}),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(h){return h instanceof TypeError}},d=c||!u();r({target:"Array",proto:!0,arity:1,forced:d},{push:function(f){var p=i(this),g=s(p),m=arguments.length;a(g+m);for(var v=0;v<m;v++)p[g]=arguments[v],g++;return o(p,g),g}})}),4117:(n=>{n.exports=function(t){return t==null}}),4149:(n=>{var t=RangeError;n.exports=function(e){if(e===e)return e;throw new t("NaN is not allowed")}}),4154:((n,t,e)=>{var r=e(6955),i=TypeError;n.exports=function(s){if(r(s)==="Uint8Array")return s;throw new i("Argument is not an Uint8Array")}}),4204:((n,t,e)=>{var r=e(7080),i=e(4402).add,s=e(9286),o=e(3789),a=e(507);n.exports=function(c){var u=r(this),d=o(c).getIterator(),h=s(u);return a(d,function(f){i(h,f)}),h}}),4209:((n,t,e)=>{var r=e(8227),i=e(6269),s=r("iterator"),o=Array.prototype;n.exports=function(a){return a!==void 0&&(i.Array===a||o[s]===a)}}),4215:((n,t,e)=>{var r=e(4576),i=e(2839),s=e(2195),o=function(a){return i.slice(0,a.length)===a};n.exports=(function(){return o("Bun/")?"BUN":o("Cloudflare-Workers")?"CLOUDFLARE":o("Deno/")?"DENO":o("Node.js/")?"NODE":r.Bun&&typeof Bun.version=="string"?"BUN":r.Deno&&typeof Deno.version=="object"?"DENO":s(r.process)==="process"?"NODE":r.window&&r.document?"BROWSER":"REST"})()}),4226:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(3463),o=e(4154),a=e(5169),l=e(2303);i.Uint8Array&&r({target:"Uint8Array",proto:!0},{setFromHex:function(u){o(this),s(u),a(this.buffer);var d=l(u,this).read;return{read:d,written:d/2}}})}),4235:((n,t,e)=>{e(3068)}),4270:((n,t,e)=>{var r=e(9565),i=e(4901),s=e(34),o=TypeError;n.exports=function(a,l){var c,u;if(l==="string"&&i(c=a.toString)&&!s(u=r(c,a))||i(c=a.valueOf)&&!s(u=r(c,a))||l!=="string"&&i(c=a.toString)&&!s(u=r(c,a)))return u;throw new o("Can't convert object to primitive value")}}),4376:((n,t,e)=>{var r=e(2195);n.exports=Array.isArray||function(s){return r(s)==="Array"}}),4402:((n,t,e)=>{var r=e(9504),i=Set.prototype;n.exports={Set,add:r(i.add),has:r(i.has),remove:r(i.delete),proto:i}}),4449:((n,t,e)=>{var r=e(7080),i=e(4402).has,s=e(5170),o=e(3789),a=e(8469),l=e(507),c=e(9539);n.exports=function(d){var h=r(this),f=o(d);if(s(h)<=f.size)return a(h,function(g){if(f.includes(g))return!1},!0)!==!1;var p=f.getIterator();return l(p,function(g){if(i(h,g))return c(p,"normal",!1)})!==!1}}),4483:((n,t,e)=>{var r=e(4576),i=e(9429),s=e(1548),o=r.structuredClone,a=r.ArrayBuffer,l=r.MessageChannel,c=!1,u,d,h,f;if(s)c=function(p){o(p,{transfer:[p]})};else if(a)try{l||(u=i("worker_threads"),u&&(l=u.MessageChannel)),l&&(d=new l,h=new a(2),f=function(p){d.port1.postMessage(null,[p])},h.byteLength===2&&(f(h),h.byteLength===0&&(c=f)))}catch{}n.exports=c}),4495:((n,t,e)=>{var r=e(9519),i=e(9039),s=e(4576),o=s.String;n.exports=!!Object.getOwnPropertySymbols&&!i(function(){var a=Symbol("symbol detection");return!o(a)||!(Object(a)instanceof Symbol)||!Symbol.sham&&r&&r<41})}),4527:((n,t,e)=>{var r=e(3724),i=e(4376),s=TypeError,o=Object.getOwnPropertyDescriptor,a=r&&!(function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(l){return l instanceof TypeError}})();n.exports=a?function(l,c){if(i(l)&&!o(l,"length").writable)throw new s("Cannot set read only .length");return l.length=c}:function(l,c){return l.length=c}}),4549:((n,t,e)=>{var r=e(4576);n.exports=function(i,s){var o=r.Iterator,a=o&&o.prototype,l=a&&a[i],c=!1;if(l)try{l.call({next:function(){return{done:!0}},return:function(){c=!0}},-1)}catch(u){u instanceof s||(c=!1)}if(!c)return l}}),4576:(function(n){var t=function(e){return e&&e.Math===Math&&e};n.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||t(typeof this=="object"&&this)||(function(){return this})()||Function("return this")()}),4603:((n,t,e)=>{var r=e(6840),i=e(9504),s=e(655),o=e(2812),a=URLSearchParams,l=a.prototype,c=i(l.append),u=i(l.delete),d=i(l.forEach),h=i([].push),f=new a("a=1&a=2&b=3");f.delete("a",1),f.delete("b",void 0),f+""!="a=2"&&r(l,"delete",function(p){var g=arguments.length,m=g<2?void 0:arguments[1];if(g&&m===void 0)return u(this,p);var v=[];d(this,function(S,A){h(v,{key:A,value:S})}),o(g,1);for(var y=s(p),b=s(m),C=0,_=0,E=!1,w=v.length,x;C<w;)x=v[C++],E||x.key===y?(E=!0,u(this,x.key)):_++;for(;_<w;)x=v[_++],x.key===y&&x.value===b||c(this,x.key,x.value)},{enumerable:!0,unsafe:!0})}),4628:((n,t,e)=>{var r=e(6518),i=e(6043);r({target:"Promise",stat:!0},{withResolvers:function(){var o=i.f(this);return{promise:o.promise,resolve:o.resolve,reject:o.reject}}})}),4644:((n,t,e)=>{var r=e(7811),i=e(3724),s=e(4576),o=e(4901),a=e(34),l=e(9297),c=e(6955),u=e(6823),d=e(6699),h=e(6840),f=e(2106),p=e(1625),g=e(2787),m=e(2967),v=e(8227),y=e(3392),b=e(1181),C=b.enforce,_=b.get,E=s.Int8Array,w=E&&E.prototype,x=s.Uint8ClampedArray,S=x&&x.prototype,A=E&&g(E),I=w&&g(w),O=Object.prototype,k=s.TypeError,$=v("toStringTag"),U=y("TYPED_ARRAY_TAG"),P="TypedArrayConstructor",M=r&&!!m&&c(s.opera)!=="Opera",D=!1,T,Y,Q,ie={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},q={BigInt64Array:8,BigUint64Array:8},Ee=function(X){if(!a(X))return!1;var J=c(X);return J==="DataView"||l(ie,J)||l(q,J)},je=function(L){var X=g(L);if(a(X)){var J=_(X);return J&&l(J,P)?J[P]:je(X)}},W=function(L){if(!a(L))return!1;var X=c(L);return l(ie,X)||l(q,X)},V=function(L){if(W(L))return L;throw new k("Target is not a typed array")},N=function(L){if(o(L)&&(!m||p(A,L)))return L;throw new k(u(L)+" is not a typed array constructor")},F=function(L,X,J,ee){if(i){if(J)for(var ue in ie){var le=s[ue];if(le&&l(le.prototype,L))try{delete le.prototype[L]}catch{try{le.prototype[L]=X}catch{}}}(!I[L]||J)&&h(I,L,J?X:M&&w[L]||X,ee)}},R=function(L,X,J){var ee,ue;if(i){if(m){if(J){for(ee in ie)if(ue=s[ee],ue&&l(ue,L))try{delete ue[L]}catch{}}if(!A[L]||J)try{return h(A,L,J?X:M&&A[L]||X)}catch{}else return}for(ee in ie)ue=s[ee],ue&&(!ue[L]||J)&&h(ue,L,X)}};for(T in ie)Y=s[T],Q=Y&&Y.prototype,Q?C(Q)[P]=Y:M=!1;for(T in q)Y=s[T],Q=Y&&Y.prototype,Q&&(C(Q)[P]=Y);if((!M||!o(A)||A===Function.prototype)&&(A=function(){throw new k("Incorrect invocation")},M))for(T in ie)s[T]&&m(s[T],A);if((!M||!I||I===O)&&(I=A.prototype,M))for(T in ie)s[T]&&m(s[T].prototype,I);if(M&&g(S)!==I&&m(S,I),i&&!l(I,$)){D=!0,f(I,$,{configurable:!0,get:function(){return a(this)?this[U]:void 0}});for(T in ie)s[T]&&d(s[T],U,T)}n.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:D&&U,aTypedArray:V,aTypedArrayConstructor:N,exportTypedArrayMethod:F,exportTypedArrayStaticMethod:R,getTypedArrayConstructor:je,isView:Ee,isTypedArray:W,TypedArray:A,TypedArrayPrototype:I}}),4659:((n,t,e)=>{var r=e(3724),i=e(4913),s=e(6980);n.exports=function(o,a,l){r?i.f(o,a,s(0,l)):o[a]=l}}),4901:(n=>{var t=typeof document=="object"&&document.all;n.exports=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"}}),4913:((n,t,e)=>{var r=e(3724),i=e(5917),s=e(8686),o=e(8551),a=e(6969),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",f="writable";t.f=r?s?function(g,m,v){if(o(g),m=a(m),o(v),typeof g=="function"&&m==="prototype"&&"value"in v&&f in v&&!v[f]){var y=u(g,m);y&&y[f]&&(g[m]=v.value,v={configurable:h in v?v[h]:y[h],enumerable:d in v?v[d]:y[d],writable:!1})}return c(g,m,v)}:c:function(g,m,v){if(o(g),m=a(m),o(v),i)try{return c(g,m,v)}catch{}if("get"in v||"set"in v)throw new l("Accessors not supported");return"value"in v&&(g[m]=v.value),g}}),4916:((n,t,e)=>{var r=e(7751),i=function(o){return{size:o,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},s=function(o){return{size:o,has:function(){return!0},keys:function(){throw new Error("e")}}};n.exports=function(o,a){var l=r("Set");try{new l()[o](i(0));try{return new l()[o](i(-1)),!1}catch{if(!a)return!0;try{return new l()[o](s(-1/0)),!1}catch{var c=new l;return c.add(1),c.add(2),a(c[o](s(1/0)))}}}catch{return!1}}}),4972:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(8551),o=e(1767),a=e(4149),l=e(9590),c=e(9462),u=e(9539),d=e(4549),h=e(6395),f=!h&&d("take",RangeError),p=c(function(){var g=this.iterator;if(!this.remaining--)return this.done=!0,u(g,"normal",void 0);var m=s(i(this.next,g)),v=this.done=!!m.done;if(!v)return m.value});r({target:"Iterator",proto:!0,real:!0,forced:h||f},{take:function(m){s(this);var v;try{v=l(a(+m))}catch(y){u(this,"throw",y)}return f?i(f,this,v):new p(o(this),{remaining:v})}})}),4979:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(7751),o=e(6980),a=e(4913).f,l=e(9297),c=e(679),u=e(3167),d=e(2603),h=e(5002),f=e(8574),p=e(3724),g=e(6395),m="DOMException",v=s("Error"),y=s(m),b=function(){c(this,C);var P=arguments.length,M=d(P<1?void 0:arguments[0]),D=d(P<2?void 0:arguments[1],"Error"),T=new y(M,D),Y=new v(M);return Y.name=m,a(T,"stack",o(1,f(Y.stack,1))),u(T,this,b),T},C=b.prototype=y.prototype,_="stack"in new v(m),E="stack"in new y(1,2),w=y&&p&&Object.getOwnPropertyDescriptor(i,m),x=!!w&&!(w.writable&&w.configurable),S=_&&!x&&!E;r({global:!0,constructor:!0,forced:g||S},{DOMException:S?b:y});var A=s(m),I=A.prototype;if(I.constructor!==A){g||a(I,"constructor",o(1,A));for(var O in h)if(l(h,O)){var k=h[O],$=k.s;l(A,$)||a(A,$,o(6,k.c))}}}),5002:(n=>{n.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}}),5024:((n,t,e)=>{var r=e(6518),i=e(3650),s=e(9835),o=e(4916),a=!o("symmetricDifference")||!s("symmetricDifference");r({target:"Set",proto:!0,real:!0,forced:a},{symmetricDifference:i})}),5031:((n,t,e)=>{var r=e(7751),i=e(9504),s=e(8480),o=e(3717),a=e(8551),l=i([].concat);n.exports=r("Reflect","ownKeys")||function(u){var d=s.f(a(u)),h=o.f;return h?l(d,h(u)):d}}),5169:((n,t,e)=>{var r=e(3238),i=TypeError;n.exports=function(s){if(r(s))throw new i("ArrayBuffer is detached");return s}}),5170:((n,t,e)=>{var r=e(6706),i=e(4402);n.exports=r(i.proto,"size","get")||function(s){return s.size}}),5213:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(5370),o=e(9143),a=i.Uint8Array,l=!a||!a.fromBase64||!(function(){try{a.fromBase64("a");return}catch{}try{a.fromBase64("",null)}catch{return!0}})();a&&r({target:"Uint8Array",stat:!0,forced:l},{fromBase64:function(u){var d=o(u,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return s(a,d.bytes)}})}),5370:((n,t,e)=>{var r=e(6198);n.exports=function(i,s,o){for(var a=0,l=arguments.length>2?o:r(s),c=new i(l);l>a;)c[a]=s[a++];return c}}),5397:((n,t,e)=>{var r=e(7055),i=e(7750);n.exports=function(s){return r(i(s))}}),5610:((n,t,e)=>{var r=e(1291),i=Math.max,s=Math.min;n.exports=function(o,a){var l=r(o);return l<0?i(l+a,0):s(l,a)}}),5623:((n,t,e)=>{e(456)}),5636:((n,t,e)=>{var r=e(4576),i=e(9504),s=e(6706),o=e(7696),a=e(5169),l=e(7394),c=e(4483),u=e(1548),d=r.structuredClone,h=r.ArrayBuffer,f=r.DataView,p=Math.min,g=h.prototype,m=f.prototype,v=i(g.slice),y=s(g,"resizable","get"),b=s(g,"maxByteLength","get"),C=i(m.getInt8),_=i(m.setInt8);n.exports=(u||c)&&function(E,w,x){var S=l(E),A=w===void 0?S:o(w),I=!y||!y(E),O;if(a(E),u&&(E=d(E,{transfer:[E]}),S===A&&(x||I)))return E;if(S>=A&&(!x||I))O=v(E,0,A);else{var k=x&&!I&&b?{maxByteLength:b(E)}:void 0;O=new h(A,k);for(var $=new f(E),U=new f(O),P=p(A,S),M=0;M<P;M++)_(U,M,C($,M))}return u||c(E),O}}),5745:((n,t,e)=>{var r=e(7629);n.exports=function(i,s){return r[i]||(r[i]=s||{})}}),5781:((n,t,e)=>{var r=e(6518),i=e(7751),s=e(2812),o=e(655),a=e(7416),l=i("URL");r({target:"URL",stat:!0,forced:!a},{parse:function(u){var d=s(arguments.length,1),h=o(u),f=d<2||arguments[1]===void 0?void 0:o(arguments[1]);try{return new l(h,f)}catch{return null}}})}),5854:((n,t,e)=>{var r=e(2777),i=TypeError;n.exports=function(s){var o=r(s,"number");if(typeof o=="number")throw new i("Can't convert number to bigint");return BigInt(o)}}),5876:((n,t,e)=>{var r=e(6518),i=e(3838),s=e(4916),o=!s("isSubsetOf",function(a){return a});r({target:"Set",proto:!0,real:!0,forced:o},{isSubsetOf:i})}),5917:((n,t,e)=>{var r=e(3724),i=e(9039),s=e(4055);n.exports=!r&&!i(function(){return Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a!==7})}),5966:((n,t,e)=>{var r=e(9306),i=e(4117);n.exports=function(s,o){var a=s[o];return i(a)?void 0:r(a)}}),6043:((n,t,e)=>{var r=e(9306),i=TypeError,s=function(o){var a,l;this.promise=new o(function(c,u){if(a!==void 0||l!==void 0)throw new i("Bad Promise constructor");a=c,l=u}),this.resolve=r(a),this.reject=r(l)};n.exports.f=function(o){return new s(o)}}),6080:((n,t,e)=>{var r=e(7476),i=e(9306),s=e(616),o=r(r.bind);n.exports=function(a,l){return i(a),l===void 0?a:s?o(a,l):function(){return a.apply(l,arguments)}}}),6119:((n,t,e)=>{var r=e(5745),i=e(3392),s=r("keys");n.exports=function(o){return s[o]||(s[o]=i(o))}}),6193:((n,t,e)=>{var r=e(4215);n.exports=r==="NODE"}),6198:((n,t,e)=>{var r=e(8014);n.exports=function(i){return r(i.length)}}),6269:(n=>{n.exports={}}),6279:((n,t,e)=>{var r=e(6840);n.exports=function(i,s,o){for(var a in s)r(i,a,s[a],o);return i}}),6319:((n,t,e)=>{var r=e(8551),i=e(9539);n.exports=function(s,o,a,l){try{return l?o(r(a)[0],a[1]):o(a)}catch(c){i(s,"throw",c)}}}),6395:(n=>{n.exports=!1}),6518:((n,t,e)=>{var r=e(4576),i=e(7347).f,s=e(6699),o=e(6840),a=e(9433),l=e(7740),c=e(2796);n.exports=function(u,d){var h=u.target,f=u.global,p=u.stat,g,m,v,y,b,C;if(f?m=r:p?m=r[h]||a(h,{}):m=r[h]&&r[h].prototype,m)for(v in d){if(b=d[v],u.dontCallGetSet?(C=i(m,v),y=C&&C.value):y=m[v],g=c(f?v:h+(p?".":"#")+v,u.forced),!g&&y!==void 0){if(typeof b==typeof y)continue;l(b,y)}(u.sham||y&&y.sham)&&s(b,"sham",!0),o(m,v,b,u)}}}),6573:((n,t,e)=>{var r=e(3724),i=e(2106),s=e(3238),o=ArrayBuffer.prototype;r&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return s(this)}})}),6632:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(9143),o=e(4154),a=i.Uint8Array,l=!a||!a.prototype.setFromBase64||!(function(){var c=new a([255,255,255,255,255]);try{c.setFromBase64("",null);return}catch{}try{c.setFromBase64("a");return}catch{}try{c.setFromBase64("MjYyZg===")}catch{return c[0]===50&&c[1]===54&&c[2]===50&&c[3]===255&&c[4]===255}})();a&&r({target:"Uint8Array",proto:!0,forced:l},{setFromBase64:function(u){o(this);var d=s(u,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:d.read,written:d.written}}})}),6699:((n,t,e)=>{var r=e(3724),i=e(4913),s=e(6980);n.exports=r?function(o,a,l){return i.f(o,a,s(1,l))}:function(o,a,l){return o[a]=l,o}}),6706:((n,t,e)=>{var r=e(9504),i=e(9306);n.exports=function(s,o,a){try{return r(i(Object.getOwnPropertyDescriptor(s,o)[a]))}catch{}}}),6801:((n,t,e)=>{var r=e(3724),i=e(8686),s=e(4913),o=e(8551),a=e(5397),l=e(1072);t.f=r&&!i?Object.defineProperties:function(u,d){o(u);for(var h=a(d),f=l(d),p=f.length,g=0,m;p>g;)s.f(u,m=f[g++],h[m]);return u}}),6823:(n=>{var t=String;n.exports=function(e){try{return t(e)}catch{return"Object"}}}),6837:(n=>{var t=TypeError,e=9007199254740991;n.exports=function(r){if(r>e)throw t("Maximum allowed index exceeded");return r}}),6840:((n,t,e)=>{var r=e(4901),i=e(4913),s=e(283),o=e(9433);n.exports=function(a,l,c,u){u||(u={});var d=u.enumerable,h=u.name!==void 0?u.name:l;if(r(c)&&s(c,h,u),u.global)d?a[l]=c:o(l,c);else{try{u.unsafe?a[l]&&(d=!0):delete a[l]}catch{}d?a[l]=c:i.f(a,l,{value:c,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return a}}),6955:((n,t,e)=>{var r=e(2140),i=e(4901),s=e(2195),o=e(8227),a=o("toStringTag"),l=Object,c=s((function(){return arguments})())==="Arguments",u=function(d,h){try{return d[h]}catch{}};n.exports=r?s:function(d){var h,f,p;return d===void 0?"Undefined":d===null?"Null":typeof(f=u(h=l(d),a))=="string"?f:c?s(h):(p=s(h))==="Object"&&i(h.callee)?"Arguments":p}}),6969:((n,t,e)=>{var r=e(2777),i=e(757);n.exports=function(s){var o=r(s,"string");return i(o)?o:o+""}}),6980:(n=>{n.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}}),7040:((n,t,e)=>{var r=e(4495);n.exports=r&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}),7055:((n,t,e)=>{var r=e(9504),i=e(9039),s=e(2195),o=Object,a=r("".split);n.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(l){return s(l)==="String"?a(l,""):o(l)}:o}),7080:((n,t,e)=>{var r=e(4402).has;n.exports=function(i){return r(i),i}}),7347:((n,t,e)=>{var r=e(3724),i=e(9565),s=e(8773),o=e(6980),a=e(5397),l=e(6969),c=e(9297),u=e(5917),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(f,p){if(f=a(f),p=l(p),u)try{return d(f,p)}catch{}if(c(f,p))return o(!i(s.f,f,p),f[p])}}),7394:((n,t,e)=>{var r=e(4576),i=e(6706),s=e(2195),o=r.ArrayBuffer,a=r.TypeError;n.exports=o&&i(o.prototype,"byteLength","get")||function(l){if(s(l)!=="ArrayBuffer")throw new a("ArrayBuffer expected");return l.byteLength}}),7416:((n,t,e)=>{var r=e(9039),i=e(8227),s=e(3724),o=e(6395),a=i("iterator");n.exports=!r(function(){var l=new URL("b?a=1&b=2&c=3","https://a"),c=l.searchParams,u=new URLSearchParams("a=1&a=2&b=3"),d="";return l.pathname="c%20d",c.forEach(function(h,f){c.delete("b"),d+=f+h}),u.delete("a",2),u.delete("b",void 0),o&&(!l.toJSON||!u.has("a",1)||u.has("a",2)||!u.has("a",void 0)||u.has("b"))||!c.size&&(o||!s)||!c.sort||l.href!=="https://a/c%20d?a=1&c=3"||c.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!c[a]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||d!=="a1c3"||new URL("https://x",void 0).host!=="x"})}),7476:((n,t,e)=>{var r=e(2195),i=e(9504);n.exports=function(s){if(r(s)==="Function")return i(s)}}),7566:((n,t,e)=>{var r=e(6840),i=e(9504),s=e(655),o=e(2812),a=URLSearchParams,l=a.prototype,c=i(l.getAll),u=i(l.has),d=new a("a=1");(d.has("a",2)||!d.has("a",void 0))&&r(l,"has",function(f){var p=arguments.length,g=p<2?void 0:arguments[1];if(p&&g===void 0)return u(this,f);var m=c(this,f);o(p,1);for(var v=s(g),y=0;y<m.length;)if(m[y++]===v)return!0;return!1},{enumerable:!0,unsafe:!0})}),7588:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(2652),o=e(9306),a=e(8551),l=e(1767),c=e(9539),u=e(4549),d=u("forEach",TypeError);r({target:"Iterator",proto:!0,real:!0,forced:d},{forEach:function(f){a(this);try{o(f)}catch(m){c(this,"throw",m)}if(d)return i(d,this,f);var p=l(this),g=0;s(p,function(m){f(m,g++)},{IS_RECORD:!0})}})}),7629:((n,t,e)=>{var r=e(6395),i=e(4576),s=e(9433),o="__core-js_shared__",a=n.exports=i[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.45.0",mode:r?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})}),7642:((n,t,e)=>{var r=e(6518),i=e(3440),s=e(9039),o=e(4916),a=!o("difference",function(c){return c.size===0}),l=a||s(function(){var c={size:1,has:function(){return!0},keys:function(){var d=0;return{next:function(){var h=d++>1;return u.has(1)&&u.clear(),{done:h,value:2}}}}},u=new Set([1,2,3,4]);return u.difference(c).size!==3});r({target:"Set",proto:!0,real:!0,forced:l},{difference:i})}),7657:((n,t,e)=>{var r=e(9039),i=e(4901),s=e(34),o=e(2360),a=e(2787),l=e(6840),c=e(8227),u=e(6395),d=c("iterator"),h=!1,f,p,g;[].keys&&(g=[].keys(),"next"in g?(p=a(a(g)),p!==Object.prototype&&(f=p)):h=!0);var m=!s(f)||r(function(){var v={};return f[d].call(v)!==v});m?f={}:u&&(f=o(f)),i(f[d])||l(f,d,function(){return this}),n.exports={IteratorPrototype:f,BUGGY_SAFARI_ITERATORS:h}}),7680:((n,t,e)=>{var r=e(9504);n.exports=r([].slice)}),7696:((n,t,e)=>{var r=e(1291),i=e(8014),s=RangeError;n.exports=function(o){if(o===void 0)return 0;var a=r(o),l=i(a);if(a!==l)throw new s("Wrong length or index");return l}}),7740:((n,t,e)=>{var r=e(9297),i=e(5031),s=e(7347),o=e(4913);n.exports=function(a,l,c){for(var u=i(l),d=o.f,h=s.f,f=0;f<u.length;f++){var p=u[f];!r(a,p)&&!(c&&r(c,p))&&d(a,p,h(l,p))}}}),7750:((n,t,e)=>{var r=e(4117),i=TypeError;n.exports=function(s){if(r(s))throw new i("Can't call method on "+s);return s}}),7751:((n,t,e)=>{var r=e(4576),i=e(4901),s=function(o){return i(o)?o:void 0};n.exports=function(o,a){return arguments.length<2?s(r[o]):r[o]&&r[o][a]}}),7811:(n=>{n.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"}),7936:((n,t,e)=>{var r=e(6518),i=e(5636);i&&r({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})}),8004:((n,t,e)=>{var r=e(6518),i=e(9039),s=e(8750),o=e(4916),a=!o("intersection",function(l){return l.size===2&&l.has(1)&&l.has(2)})||i(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});r({target:"Set",proto:!0,real:!0,forced:a},{intersection:s})}),8014:((n,t,e)=>{var r=e(1291),i=Math.min;n.exports=function(s){var o=r(s);return o>0?i(o,9007199254740991):0}}),8100:((n,t,e)=>{var r=e(6518),i=e(5636);i&&r({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})}),8111:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(679),o=e(8551),a=e(4901),l=e(2787),c=e(2106),u=e(4659),d=e(9039),h=e(9297),f=e(8227),p=e(7657).IteratorPrototype,g=e(3724),m=e(6395),v="constructor",y="Iterator",b=f("toStringTag"),C=TypeError,_=i[y],E=m||!a(_)||_.prototype!==p||!d(function(){_({})}),w=function(){if(s(this,p),l(this)===p)throw new C("Abstract class Iterator not directly constructable")},x=function(S,A){g?c(p,S,{configurable:!0,get:function(){return A},set:function(I){if(o(this),this===p)throw new C("You can't redefine this property");h(this,S)?this[S]=I:u(this,S,I)}}):p[S]=A};h(p,b)||x(b,y),(E||!h(p,v)||p[v]===Object)&&x(v,w),w.prototype=p,r({global:!0,constructor:!0,forced:E},{Iterator:w})}),8227:((n,t,e)=>{var r=e(4576),i=e(5745),s=e(9297),o=e(3392),a=e(4495),l=e(7040),c=r.Symbol,u=i("wks"),d=l?c.for||c:c&&c.withoutSetter||o;n.exports=function(h){return s(u,h)||(u[h]=a&&s(c,h)?c[h]:d("Symbol."+h)),u[h]}}),8235:((n,t,e)=>{var r=e(9504),i=e(9297),s=SyntaxError,o=parseInt,a=String.fromCharCode,l=r("".charAt),c=r("".slice),u=r(/./.exec),d={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"	"},h=/^[\da-f]{4}$/i,f=/^[\u0000-\u001F]$/;n.exports=function(p,g){for(var m=!0,v="";g<p.length;){var y=l(p,g);if(y==="\\"){var b=c(p,g,g+2);if(i(d,b))v+=d[b],g+=2;else if(b==="\\u"){g+=2;var C=c(p,g,g+4);if(!u(h,C))throw new s("Bad Unicode escape at: "+g);v+=a(o(C,16)),g+=4}else throw new s('Unknown escape sequence: "'+b+'"')}else if(y==='"'){m=!1,g++;break}else{if(u(f,y))throw new s("Bad control character in string literal at: "+g);v+=y,g++}}if(m)throw new s("Unterminated string at: "+g);return{value:v,end:g}}}),8237:((n,t,e)=>{var r=e(6518),i=e(2652),s=e(9306),o=e(8551),a=e(1767),l=e(9539),c=e(4549),u=e(8745),d=e(9039),h=TypeError,f=d(function(){[].keys().reduce(function(){},void 0)}),p=!f&&c("reduce",h);r({target:"Iterator",proto:!0,real:!0,forced:f||p},{reduce:function(m){o(this);try{s(m)}catch(_){l(this,"throw",_)}var v=arguments.length<2,y=v?void 0:arguments[1];if(p)return u(p,this,v?[m]:[m,y]);var b=a(this),C=0;if(i(b,function(_){v?(v=!1,y=_):y=m(y,_,C),C++},{IS_RECORD:!0}),v)throw new h("Reduce of empty iterator with no initial value");return y}})}),8335:((n,t,e)=>{var r=e(6518),i=e(3724),s=e(4576),o=e(7751),a=e(9504),l=e(9565),c=e(4901),u=e(34),d=e(4376),h=e(9297),f=e(655),p=e(6198),g=e(4659),m=e(9039),v=e(8235),y=e(4495),b=s.JSON,C=s.Number,_=s.SyntaxError,E=b&&b.parse,w=o("Object","keys"),x=Object.getOwnPropertyDescriptor,S=a("".charAt),A=a("".slice),I=a(/./.exec),O=a([].push),k=/^\d$/,$=/^[1-9]$/,U=/^[\d-]$/,P=/^[\t\n\r ]$/,M=0,D=1,T=function(W,V){W=f(W);var N=new q(W,0,""),F=N.parse(),R=F.value,L=N.skip(P,F.end);if(L<W.length)throw new _('Unexpected extra character: "'+S(W,L)+'" after the parsed data at: '+L);return c(V)?Y({"":R},"",V,F):R},Y=function(W,V,N,F){var R=W[V],L=F&&R===F.value,X=L&&typeof F.source=="string"?{source:F.source}:{},J,ee,ue,le,me;if(u(R)){var $e=d(R),He=L?F.nodes:$e?[]:{};if($e)for(J=He.length,ue=p(R),le=0;le<ue;le++)Q(R,le,Y(R,""+le,N,le<J?He[le]:void 0));else for(ee=w(R),ue=p(ee),le=0;le<ue;le++)me=ee[le],Q(R,me,Y(R,me,N,h(He,me)?He[me]:void 0))}return l(N,W,V,R,X)},Q=function(W,V,N){if(i){var F=x(W,V);if(F&&!F.configurable)return}N===void 0?delete W[V]:g(W,V,N)},ie=function(W,V,N,F){this.value=W,this.end=V,this.source=N,this.nodes=F},q=function(W,V){this.source=W,this.index=V};q.prototype={fork:function(W){return new q(this.source,W)},parse:function(){var W=this.source,V=this.skip(P,this.index),N=this.fork(V),F=S(W,V);if(I(U,F))return N.number();switch(F){case"{":return N.object();case"[":return N.array();case'"':return N.string();case"t":return N.keyword(!0);case"f":return N.keyword(!1);case"n":return N.keyword(null)}throw new _('Unexpected character: "'+F+'" at: '+V)},node:function(W,V,N,F,R){return new ie(V,F,W?null:A(this.source,N,F),R)},object:function(){for(var W=this.source,V=this.index+1,N=!1,F={},R={};V<W.length;){if(V=this.until(['"',"}"],V),S(W,V)==="}"&&!N){V++;break}var L=this.fork(V).string(),X=L.value;V=L.end,V=this.until([":"],V)+1,V=this.skip(P,V),L=this.fork(V).parse(),g(R,X,L),g(F,X,L.value),V=this.until([",","}"],L.end);var J=S(W,V);if(J===",")N=!0,V++;else if(J==="}"){V++;break}}return this.node(D,F,this.index,V,R)},array:function(){for(var W=this.source,V=this.index+1,N=!1,F=[],R=[];V<W.length;){if(V=this.skip(P,V),S(W,V)==="]"&&!N){V++;break}var L=this.fork(V).parse();if(O(R,L),O(F,L.value),V=this.until([",","]"],L.end),S(W,V)===",")N=!0,V++;else if(S(W,V)==="]"){V++;break}}return this.node(D,F,this.index,V,R)},string:function(){var W=this.index,V=v(this.source,this.index+1);return this.node(M,V.value,W,V.end)},number:function(){var W=this.source,V=this.index,N=V;if(S(W,N)==="-"&&N++,S(W,N)==="0")N++;else if(I($,S(W,N)))N=this.skip(k,N+1);else throw new _("Failed to parse number at: "+N);if(S(W,N)==="."&&(N=this.skip(k,N+1)),S(W,N)==="e"||S(W,N)==="E"){N++,(S(W,N)==="+"||S(W,N)==="-")&&N++;var F=N;if(N=this.skip(k,N),F===N)throw new _("Failed to parse number's exponent value at: "+N)}return this.node(M,C(A(W,V,N)),V,N)},keyword:function(W){var V=""+W,N=this.index,F=N+V.length;if(A(this.source,N,F)!==V)throw new _("Failed to parse value at: "+N);return this.node(M,W,N,F)},skip:function(W,V){for(var N=this.source;V<N.length&&I(W,S(N,V));V++);return V},until:function(W,V){V=this.skip(P,V);for(var N=S(this.source,V),F=0;F<W.length;F++)if(W[F]===N)return V;throw new _('Unexpected character: "'+N+'" at: '+V)}};var Ee=m(function(){var W="9007199254740993",V;return E(W,function(N,F,R){V=R.source}),V!==W}),je=y&&!m(function(){return 1/E("-0 	")!==-1/0});r({target:"JSON",stat:!0,forced:Ee},{parse:function(V,N){return je&&!c(N)?E(V):T(V,N)}})}),8469:((n,t,e)=>{var r=e(9504),i=e(507),s=e(4402),o=s.Set,a=s.proto,l=r(a.forEach),c=r(a.keys),u=c(new o).next;n.exports=function(d,h,f){return f?i({iterator:c(d),next:u},h):l(d,h)}}),8480:((n,t,e)=>{var r=e(1828),i=e(8727),s=i.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(a){return r(a,s)}}),8527:((n,t,e)=>{var r=e(7080),i=e(4402).has,s=e(5170),o=e(3789),a=e(507),l=e(9539);n.exports=function(u){var d=r(this),h=o(u);if(s(d)<h.size)return!1;var f=h.getIterator();return a(f,function(p){if(!i(d,p))return l(f,"normal",!1)})!==!1}}),8551:((n,t,e)=>{var r=e(34),i=String,s=TypeError;n.exports=function(o){if(r(o))return o;throw new s(i(o)+" is not an object")}}),8574:((n,t,e)=>{var r=e(9504),i=Error,s=r("".replace),o=(function(c){return String(new i(c).stack)})("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(o);n.exports=function(c,u){if(l&&typeof c=="string"&&!i.prepareStackTrace)for(;u--;)c=s(c,a,"");return c}}),8622:((n,t,e)=>{var r=e(4576),i=e(4901),s=r.WeakMap;n.exports=i(s)&&/native code/.test(String(s))}),8646:((n,t,e)=>{var r=e(9565),i=e(8551),s=e(1767),o=e(851);n.exports=function(a,l){(!l||typeof a!="string")&&i(a);var c=o(a);return s(i(c!==void 0?r(c,a):a))}}),8686:((n,t,e)=>{var r=e(3724),i=e(9039);n.exports=r&&i(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})}),8721:((n,t,e)=>{var r=e(3724),i=e(9504),s=e(2106),o=URLSearchParams.prototype,a=i(o.forEach);r&&!("size"in o)&&s(o,"size",{get:function(){var c=0;return a(this,function(){c++}),c},configurable:!0,enumerable:!0})}),8727:(n=>{n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}),8745:((n,t,e)=>{var r=e(616),i=Function.prototype,s=i.apply,o=i.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(r?o.bind(s):function(){return o.apply(s,arguments)})}),8750:((n,t,e)=>{var r=e(7080),i=e(4402),s=e(5170),o=e(3789),a=e(8469),l=e(507),c=i.Set,u=i.add,d=i.has;n.exports=function(f){var p=r(this),g=o(f),m=new c;return s(p)>g.size?l(g.getIterator(),function(v){d(p,v)&&u(m,v)}):a(p,function(v){g.includes(v)&&u(m,v)}),m}}),8773:((n,t)=>{var e={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,i=r&&!e.call({1:2},1);t.f=i?function(o){var a=r(this,o);return!!a&&a.enumerable}:e}),8981:((n,t,e)=>{var r=e(7750),i=Object;n.exports=function(s){return i(r(s))}}),9039:(n=>{n.exports=function(t){try{return!!t()}catch{return!0}}}),9143:((n,t,e)=>{var r=e(4576),i=e(9504),s=e(3972),o=e(3463),a=e(9297),l=e(2804),c=e(944),u=e(5169),d=l.c2i,h=l.c2iUrl,f=r.SyntaxError,p=r.TypeError,g=i("".charAt),m=function(b,C){for(var _=b.length;C<_;C++){var E=g(b,C);if(E!==" "&&E!=="	"&&E!==`
`&&E!=="\f"&&E!=="\r")break}return C},v=function(b,C,_){var E=b.length;E<4&&(b+=E===2?"AA":"A");var w=(C[g(b,0)]<<18)+(C[g(b,1)]<<12)+(C[g(b,2)]<<6)+C[g(b,3)],x=[w>>16&255,w>>8&255,w&255];if(E===2){if(_&&x[1]!==0)throw new f("Extra bits");return[x[0]]}if(E===3){if(_&&x[2]!==0)throw new f("Extra bits");return[x[0],x[1]]}return x},y=function(b,C,_){for(var E=C.length,w=0;w<E;w++)b[_+w]=C[w];return _+E};n.exports=function(b,C,_,E){o(b),s(C);var w=c(C)==="base64"?d:h,x=C?C.lastChunkHandling:void 0;if(x===void 0&&(x="loose"),x!=="loose"&&x!=="strict"&&x!=="stop-before-partial")throw new p("Incorrect `lastChunkHandling` option");_&&u(_.buffer);var S=b.length,A=_||[],I=0,O=0,k="",$=0;if(E)for(;;){if($=m(b,$),$===S){if(k.length>0){if(x==="stop-before-partial")break;if(x==="loose"){if(k.length===1)throw new f("Malformed padding: exactly one additional character");I=y(A,v(k,w,!1),I)}else throw new f("Missing padding")}O=S;break}var U=g(b,$);if(++$,U==="="){if(k.length<2)throw new f("Padding is too early");if($=m(b,$),k.length===2){if($===S){if(x==="stop-before-partial")break;throw new f("Malformed padding: only one =")}g(b,$)==="="&&(++$,$=m(b,$))}if($<S)throw new f("Unexpected character after padding");I=y(A,v(k,w,x==="strict"),I),O=S;break}if(!a(w,U))throw new f("Unexpected character");var P=E-I;if(P===1&&k.length===2||P===2&&k.length===3||(k+=U,k.length===4&&(I=y(A,v(k,w,!1),I),k="",O=$,I===E)))break}return{bytes:A,read:O,written:I}}}),9286:((n,t,e)=>{var r=e(4402),i=e(8469),s=r.Set,o=r.add;n.exports=function(a){var l=new s;return i(a,function(c){o(l,c)}),l}}),9297:((n,t,e)=>{var r=e(9504),i=e(8981),s=r({}.hasOwnProperty);n.exports=Object.hasOwn||function(a,l){return s(i(a),l)}}),9306:((n,t,e)=>{var r=e(4901),i=e(6823),s=TypeError;n.exports=function(o){if(r(o))return o;throw new s(i(o)+" is not a function")}}),9314:((n,t,e)=>{var r=e(6518),i=e(9565),s=e(8551),o=e(1767),a=e(4149),l=e(9590),c=e(9539),u=e(9462),d=e(684),h=e(4549),f=e(6395),p=!f&&!d("drop",0),g=!f&&!p&&h("drop",RangeError),m=f||p||g,v=u(function(){for(var y=this.iterator,b=this.next,C,_;this.remaining;)if(this.remaining--,C=s(i(b,y)),_=this.done=!!C.done,_)return;if(C=s(i(b,y)),_=this.done=!!C.done,!_)return C.value});r({target:"Iterator",proto:!0,real:!0,forced:m},{drop:function(b){s(this);var C;try{C=l(a(+b))}catch(_){c(this,"throw",_)}return g?i(g,this,C):new v(o(this),{remaining:C})}})}),9429:((n,t,e)=>{var r=e(4576),i=e(6193);n.exports=function(s){if(i){try{return r.process.getBuiltinModule(s)}catch{}try{return Function('return require("'+s+'")')()}catch{}}}}),9432:((n,t,e)=>{e(5213)}),9433:((n,t,e)=>{var r=e(4576),i=Object.defineProperty;n.exports=function(s,o){try{i(r,s,{value:o,configurable:!0,writable:!0})}catch{r[s]=o}return o}}),9462:((n,t,e)=>{var r=e(9565),i=e(2360),s=e(6699),o=e(6279),a=e(8227),l=e(1181),c=e(5966),u=e(7657).IteratorPrototype,d=e(2529),h=e(9539),f=e(1385),p=a("toStringTag"),g="IteratorHelper",m="WrapForValidIterator",v="normal",y="throw",b=l.set,C=function(w){var x=l.getterFor(w?m:g);return o(i(u),{next:function(){var A=x(this);if(w)return A.nextHandler();if(A.done)return d(void 0,!0);try{var I=A.nextHandler();return A.returnHandlerResult?I:d(I,A.done)}catch(O){throw A.done=!0,O}},return:function(){var S=x(this),A=S.iterator;if(S.done=!0,w){var I=c(A,"return");return I?r(I,A):d(void 0,!0)}if(S.inner)try{h(S.inner.iterator,v)}catch(O){return h(A,y,O)}if(S.openIters)try{f(S.openIters,v)}catch(O){return h(A,y,O)}return A&&h(A,v),d(void 0,!0)}})},_=C(!0),E=C(!1);s(E,p,"Iterator Helper"),n.exports=function(w,x,S){var A=function(O,k){k?(k.iterator=O.iterator,k.next=O.next):k=O,k.type=x?m:g,k.returnHandlerResult=!!S,k.nextHandler=w,k.counter=0,k.done=!1,b(this,k)};return A.prototype=x?_:E,A}}),9486:((n,t,e)=>{var r=e(6518),i=e(4576),s=e(9504),o=e(3972),a=e(4154),l=e(5169),c=e(2804),u=e(944),d=c.i2c,h=c.i2cUrl,f=s("".charAt),p=i.Uint8Array,g=!p||!p.prototype.toBase64||!(function(){try{var m=new p;m.toBase64(null)}catch{return!0}})();p&&r({target:"Uint8Array",proto:!0,forced:g},{toBase64:function(){var v=a(this),y=arguments.length?o(arguments[0]):void 0,b=u(y)==="base64"?d:h,C=!!y&&!!y.omitPadding;l(this.buffer);for(var _="",E=0,w=v.length,x,S=function(A){return f(b,x>>6*A&63)};E+2<w;E+=3)x=(v[E]<<16)+(v[E+1]<<8)+v[E+2],_+=S(3)+S(2)+S(1)+S(0);return E+2===w?(x=(v[E]<<16)+(v[E+1]<<8),_+=S(3)+S(2)+S(1)+(C?"":"=")):E+1===w&&(x=v[E]<<16,_+=S(3)+S(2)+(C?"":"==")),_}})}),9504:((n,t,e)=>{var r=e(616),i=Function.prototype,s=i.call,o=r&&i.bind.bind(s,s);n.exports=r?o:function(a){return function(){return s.apply(a,arguments)}}}),9519:((n,t,e)=>{var r=e(4576),i=e(2839),s=r.process,o=r.Deno,a=s&&s.versions||o&&o.version,l=a&&a.v8,c,u;l&&(c=l.split("."),u=c[0]>0&&c[0]<4?1:+(c[0]+c[1])),!u&&i&&(c=i.match(/Edge\/(\d+)/),(!c||c[1]>=74)&&(c=i.match(/Chrome\/(\d+)/),c&&(u=+c[1]))),n.exports=u}),9539:((n,t,e)=>{var r=e(9565),i=e(8551),s=e(5966);n.exports=function(o,a,l){var c,u;i(o);try{if(c=s(o,"return"),!c){if(a==="throw")throw l;return l}c=r(c,o)}catch(d){u=!0,c=d}if(a==="throw")throw l;if(u)throw c;return i(c),l}}),9565:((n,t,e)=>{var r=e(616),i=Function.prototype.call;n.exports=r?i.bind(i):function(){return i.apply(i,arguments)}}),9577:((n,t,e)=>{var r=e(9928),i=e(4644),s=e(1108),o=e(1291),a=e(5854),l=i.aTypedArray,c=i.getTypedArrayConstructor,u=i.exportTypedArrayMethod,d=(function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(f){return f===8}})(),h=d&&(function(){try{new Int8Array(1).with(-.5,1)}catch{return!0}})();u("with",function(f,p){var g=l(this),m=o(f),v=s(g)?a(p):+p;return r(g,c(g),m,v)},!d||h)}),9590:((n,t,e)=>{var r=e(1291),i=RangeError;n.exports=function(s){var o=r(s);if(o<0)throw new i("The argument can't be less than 0");return o}}),9617:((n,t,e)=>{var r=e(5397),i=e(5610),s=e(6198),o=function(a){return function(l,c,u){var d=r(l),h=s(d);if(h===0)return!a&&-1;var f=i(u,h),p;if(a&&c!==c){for(;h>f;)if(p=d[f++],p!==p)return!0}else for(;h>f;f++)if((a||f in d)&&d[f]===c)return a||f||0;return!a&&-1}};n.exports={includes:o(!0),indexOf:o(!1)}}),9631:((n,t,e)=>{e(9486)}),9797:((n,t,e)=>{e(4226)}),9835:(n=>{n.exports=function(t){try{var e=new Set,r={size:0,has:function(){return!0},keys:function(){return Object.defineProperty({},"next",{get:function(){return e.clear(),e.add(4),function(){return{done:!0}}}})}},i=e[t](r);return i.size===1&&i.values().next().value===4}catch{return!1}}}),9928:((n,t,e)=>{var r=e(6198),i=e(1291),s=RangeError;n.exports=function(o,a,l,c){var u=r(o),d=i(l),h=d<0?u+d:d;if(h>=u||h<0)throw new s("Incorrect index");for(var f=new a(u),p=0;p<u;p++)f[p]=p===h?c:o[p];return f}})},G1={};function we(n){var t=G1[n];if(t!==void 0)return t.exports;var e=G1[n]={exports:{}};return i4[n].call(e.exports,e,e.exports,we),e.exports}we.d=(n,t)=>{for(var e in t)we.o(t,e)&&!we.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:t[e]})};we.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t);var due=we(4114),hue=we(6573),fue=we(8100),pue=we(7936),gue=we(8111),mue=we(8237),vue=we(1689),yue=we(9577),bue=we(4235),_ue=we(9432),Cue=we(1549),Eue=we(9797),xue=we(9631),wue=we(5623),Due=we(4979),Sue=we(5781),on=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),P_=[.001,0,0,.001,0,0],Ap=1.35,s4=.35,Tue=s4/Ap,Nn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ms={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},oR="pdfjs_internal_editor_",ve={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Be={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},o4={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Gt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ip={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},St={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};var Ka={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};var dg={ERRORS:0,WARNINGS:1,INFOS:5},su={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Cp={moveTo:0,lineTo:1,curveTo:2,closePath:3},a4={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},hg=dg.WARNINGS;function l4(n){Number.isInteger(n)&&(hg=n)}function c4(){return hg}function fg(n){hg>=dg.INFOS&&console.log(`Info: ${n}`)}function ge(n){hg>=dg.WARNINGS&&console.log(`Warning: ${n}`)}function Ke(n){throw new Error(n)}function At(n,t){n||Ke(t)}function u4(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function aR(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"&&(e.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),e.tryConvertEncoding))try{n=p4(n)}catch{}let r=t?URL.parse(n,t):URL.parse(n);return u4(r)?r:null}function lR(n,t,e=!1){let r=URL.parse(n);return r?(r.hash=t,r.href):e&&aR(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Ie(n,t,e,r=!1){return Object.defineProperty(n,t,{value:e,enumerable:!r,configurable:!0,writable:!1}),e}var Eo=(function(){function t(e,r){this.message=e,this.name=r}return t.prototype=new Error,t.constructor=t,t})(),Op=class extends Eo{constructor(t,e){super(t,"PasswordException"),this.code=e}},iu=class extends Eo{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},ou=class extends Eo{constructor(t){super(t,"InvalidPDFException")}},tl=class extends Eo{constructor(t,e,r){super(t,"ResponseException"),this.status=e,this.missing=r}},k_=class extends Eo{constructor(t){super(t,"FormatError")}},Xr=class extends Eo{constructor(t){super(t,"AbortException")}};function cR(n){(typeof n!="object"||n?.length===void 0)&&Ke("Invalid argument for bytesToString");let t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);let r=[];for(let i=0;i<t;i+=e){let s=Math.min(i+e,t),o=n.subarray(i,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")}function Eu(n){typeof n!="string"&&Ke("Invalid argument for stringToBytes");let t=n.length,e=new Uint8Array(t);for(let r=0;r<t;++r)e[r]=n.charCodeAt(r)&255;return e}function d4(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function h4(){let n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function f4(){try{return new Function(""),!0}catch{return!1}}var Pt=class{static get isLittleEndian(){return Ie(this,"isLittleEndian",h4())}static get isEvalSupported(){return Ie(this,"isEvalSupported",f4())}static get isOffscreenCanvasSupported(){return Ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Ie(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){let{platform:t,userAgent:e}=navigator;return Ie(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return Ie(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}},A_=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0")),ne=class{static makeHexColor(t,e,r){return`#${A_[t]}${A_[e]}${A_[r]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let r;t[0]?(t[0]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[3],e[3]*=t[3]):(r=e[0],e[0]=e[1],e[1]=r,r=e[2],e[2]=e[3],e[3]=r,t[1]<0&&(r=e[1],e[1]=e[3],e[3]=r),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(r=e[0],e[0]=e[2],e[2]=r),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,r=0){let i=t[r],s=t[r+1];t[r]=i*e[0]+s*e[2]+e[4],t[r+1]=i*e[1]+s*e[3]+e[5]}static applyTransformToBezier(t,e,r=0){let i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5];for(let u=0;u<6;u+=2){let d=t[r+u],h=t[r+u+1];t[r+u]=d*i+h*o+l,t[r+u+1]=d*s+h*a+c}}static applyInverseTransform(t,e){let r=t[0],i=t[1],s=e[0]*e[3]-e[1]*e[2];t[0]=(r*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/s,t[1]=(-r*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/s}static axialAlignedBoundingBox(t,e,r){let i=e[0],s=e[1],o=e[2],a=e[3],l=e[4],c=e[5],u=t[0],d=t[1],h=t[2],f=t[3],p=i*u+l,g=p,m=i*h+l,v=m,y=a*d+c,b=y,C=a*f+c,_=C;if(s!==0||o!==0){let E=s*u,w=s*h,x=o*d,S=o*f;p+=x,v+=x,m+=S,g+=S,y+=E,_+=E,C+=w,b+=w}r[0]=Math.min(r[0],p,m,g,v),r[1]=Math.min(r[1],y,C,b,_),r[2]=Math.max(r[2],p,m,g,v),r[3]=Math.max(r[3],y,C,b,_)}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){let r=t[0],i=t[1],s=t[2],o=t[3],a=r**2+i**2,l=r*s+i*o,c=s**2+o**2,u=(a+c)/2,d=Math.sqrt(u**2-(a*c-l**2));e[0]=Math.sqrt(u+d||1),e[1]=Math.sqrt(u-d||1)}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let r=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(r>i)return null;let s=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return s>o?null:[r,s,i,o]}static pointBoundingBox(t,e,r){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}static rectBoundingBox(t,e,r,i,s){s[0]=Math.min(s[0],t,r),s[1]=Math.min(s[1],e,i),s[2]=Math.max(s[2],t,r),s[3]=Math.max(s[3],e,i)}static#e(t,e,r,i,s,o,a,l,c,u){if(c<=0||c>=1)return;let d=1-c,h=c*c,f=h*c,p=d*(d*(d*t+3*c*e)+3*h*r)+f*i,g=d*(d*(d*s+3*c*o)+3*h*a)+f*l;u[0]=Math.min(u[0],p),u[1]=Math.min(u[1],g),u[2]=Math.max(u[2],p),u[3]=Math.max(u[3],g)}static#t(t,e,r,i,s,o,a,l,c,u,d,h){if(Math.abs(c)<1e-12){Math.abs(u)>=1e-12&&this.#e(t,e,r,i,s,o,a,l,-d/u,h);return}let f=u**2-4*d*c;if(f<0)return;let p=Math.sqrt(f),g=2*c;this.#e(t,e,r,i,s,o,a,l,(-u+p)/g,h),this.#e(t,e,r,i,s,o,a,l,(-u-p)/g,h)}static bezierBoundingBox(t,e,r,i,s,o,a,l,c){c[0]=Math.min(c[0],t,a),c[1]=Math.min(c[1],e,l),c[2]=Math.max(c[2],t,a),c[3]=Math.max(c[3],e,l),this.#t(t,r,s,a,e,i,o,l,3*(-t+3*(r-s)+a),6*(t-2*r+s),3*(r-t),c),this.#t(t,r,s,a,e,i,o,l,3*(-e+3*(i-o)+l),6*(e-2*i+o),3*(i-e),c)}};function p4(n){return decodeURIComponent(escape(n))}var I_=null,W1=null;function g4(n){return I_||(I_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,W1=new Map([["\uFB05","\u017Ft"]])),n.replaceAll(I_,(t,e,r)=>e?e.normalize("NFKC"):W1.get(r))}function uR(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();let n=new Uint8Array(32);return crypto.getRandomValues(n),cR(n)}var iE="pdfjs_internal_id_";function m4(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;let[r,i,...s]=e;if(!n(r)&&!Number.isInteger(r)||!t(i))return!1;let o=s.length,a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(let l of s)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function an(n,t,e){return Math.min(Math.max(n,t),e)}function dR(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(cR(n))}function v4(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):Eu(atob(n))}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});typeof AbortSignal.any!="function"&&(AbortSignal.any=function(n){let t=new AbortController,{signal:e}=t;for(let r of n)if(r.aborted)return t.abort(r.reason),e;for(let r of n)r.addEventListener("abort",()=>{t.abort(r.reason)},{signal:e});return e});var Aue=we(1701),Iue=we(4972),Mue=we(4628),Rue=we(7642),Oue=we(8004),Nue=we(3853),Pue=we(5876),kue=we(2475),Lue=we(5024),Fue=we(1698),Bue=we(4603),jue=we(7566),Vue=we(8721),Hue=we(9314),Uue=we(1148),$ue=we(3579),zue=we(8335),Ri="http://www.w3.org/2000/svg",bs=class{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF};function xu(n,t="text"){return K(this,null,function*(){if(nu(n,document.baseURI)){let e=yield fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,r)=>{let i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}r(new Error(i.statusText))}},i.send(null)})})}var au=class n{constructor({viewBox:t,userUnit:e,scale:r,rotation:i,offsetX:s=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=o,r*=e;let l=(t[2]+t[0])/2,c=(t[3]+t[1])/2,u,d,h,f;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,h=0,f=1;break;case 90:u=0,d=1,h=1,f=0;break;case 270:u=0,d=-1,h=-1,f=0;break;case 0:u=1,d=0,h=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,f=-f);let p,g,m,v;u===0?(p=Math.abs(c-t[1])*r+s,g=Math.abs(l-t[0])*r+o,m=(t[3]-t[1])*r,v=(t[2]-t[0])*r):(p=Math.abs(l-t[0])*r+s,g=Math.abs(c-t[1])*r+o,m=(t[2]-t[0])*r,v=(t[3]-t[1])*r),this.transform=[u*r,d*r,h*r,f*r,p-u*r*l-h*r*c,g-d*r*l-f*r*c],this.width=m,this.height=v}get rawDims(){let t=this.viewBox;return Ie(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:r=this.offsetX,offsetY:i=this.offsetY,dontFlip:s=!1}={}){return new n({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:s})}convertToViewportPoint(t,e){let r=[t,e];return ne.applyTransform(r,this.transform),r}convertToViewportRectangle(t){let e=[t[0],t[1]];ne.applyTransform(e,this.transform);let r=[t[2],t[3]];return ne.applyTransform(r,this.transform),[e[0],e[1],r[0],r[1]]}convertToPdfPoint(t,e){let r=[t,e];return ne.applyInverseTransform(r,this.transform),r}},lu=class extends Eo{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}};function pg(n){let t=n.length,e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function sE(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function y4(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function b4(n,t="document.pdf"){if(typeof n!="string")return t;if(pg(n))return ge('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;let r=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!r)return t;let i=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},s=/\.pdf$/i,o=r.pathname.split("/").at(-1);if(s.test(o))return i(o);if(r.searchParams.size>0){let a=Array.from(r.searchParams.values()).reverse();for(let c of a)if(s.test(c))return i(c);let l=Array.from(r.searchParams.keys()).reverse();for(let c of l)if(s.test(c))return i(c)}if(r.hash){let l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(r.hash);if(l)return i(l[0])}return t}var Np=class{started=Object.create(null);times=[];time(t){t in this.started&&ge(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||ge(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:r}of this.times)e=Math.max(r.length,e);for(let{name:r,start:i,end:s}of this.times)t.push(`${r.padEnd(e)} ${s-i}ms
`);return t.join("")}};function nu(n,t){let e=t?URL.parse(n,t):URL.parse(n);return e?.protocol==="http:"||e?.protocol==="https:"}function Jn(n){n.preventDefault()}function Tt(n){n.preventDefault(),n.stopPropagation()}function _4(n){console.log("Deprecated API usage: "+n)}var cu=class{static#e;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");let e=this.#e.exec(t);if(!e)return null;let r=parseInt(e[1],10),i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;let c=e[7]||"Z",u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,c==="-"?(o+=u,a+=d):c==="+"&&(o-=u,a-=d),new Date(Date.UTC(r,i,s,o,a,l))}};function C4(n,{scale:t=1,rotation:e=0}){let{width:r,height:i}=n.attributes.style,s=[0,0,parseInt(r),parseInt(i)];return new au({viewBox:s,userUnit:1,scale:t,rotation:e})}function gg(n){if(n.startsWith("#")){let t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(ge(`Not a valid color format: "${n}"`),[0,0,0])}function E4(n){let t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(let e of n.keys()){t.style.color=e;let r=window.getComputedStyle(t).color;n.set(e,gg(r))}t.remove()}function dt(n){let{a:t,b:e,c:r,d:i,e:s,f:o}=n.getTransform();return[t,e,r,i,s,o]}function Wr(n){let{a:t,b:e,c:r,d:i,e:s,f:o}=n.getTransform().invertSelf();return[t,e,r,i,s,o]}function yo(n,t,e=!1,r=!0){if(t instanceof au){let{pageWidth:i,pageHeight:s}=t.rawDims,{style:o}=n,a=Pt.isCSSRoundSupported,l=`var(--total-scale-factor) * ${i}px`,c=`var(--total-scale-factor) * ${s}px`,u=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,d=a?`round(down, ${c}, var(--scale-round-y))`:`calc(${c})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}r&&n.setAttribute("data-main-rotation",t.rotation)}var Pi=class n{constructor(){let{pixelRatio:t}=n;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,r,i,s=-1){let o=1/0,a=1/0,l=1/0;r=n.capPixels(r,s),r>0&&(o=Math.sqrt(r/(t*e))),i!==-1&&(a=i/t,l=i/e);let c=Math.min(o,a,l);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){let r=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,r):r}return t}},L_=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"],F_=class n{#e=null;#t=null;#n;#r=null;#s=null;#i=null;#o=null;static#a=null;constructor(t){this.#n=t,n.#a||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){let t=this.#e=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");let e=this.#n._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",Jn,{signal:e}),t.addEventListener("pointerdown",n.#l,{signal:e}));let r=this.#r=document.createElement("div");r.className="buttons",t.append(r);let i=this.#n.toolbarPosition;if(i){let{style:s}=t,o=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];s.insetInlineEnd=`${100*o}%`,s.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#e}static#l(t){t.stopPropagation()}#c(t){this.#n._focusEventsAllowed=!1,Tt(t)}#h(t){this.#n._focusEventsAllowed=!0,Tt(t)}#u(t){let e=this.#n._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#c.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Jn,{signal:e}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#i?.shown()}addDeleteButton(){let{editorType:t,_uiManager:e}=this.#n,r=document.createElement("button");r.classList.add("basic","deleteButton"),r.tabIndex=0,r.setAttribute("data-l10n-id",n.#a[t]),this.#u(r)&&r.addEventListener("click",i=>{e.delete()},{signal:e._signal}),this.#r.append(r)}get#f(){let t=document.createElement("div");return t.className="divider",t}addAltText(t){return K(this,null,function*(){let e=yield t.render();this.#u(e),this.#r.append(e,this.#f),this.#s=t})}addComment(t){if(this.#i)return;let e=t.render();e&&(this.#u(e),this.#r.append(e,this.#f),this.#i=t,t.toolbar=this)}addColorPicker(t){if(this.#t)return;this.#t=t;let e=t.renderButton();this.#u(e),this.#r.append(e,this.#f)}addEditSignatureButton(t){return K(this,null,function*(){let e=this.#o=yield t.renderEditButton(this.#n);this.#u(e),this.#r.append(e,this.#f)})}addButton(t,e){return K(this,null,function*(){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":yield this.addAltText(e);break;case"editSignature":yield this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}})}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}},B_=class{#e=null;#t=null;#n;constructor(t){this.#n=t}#r(){let t=this.#t=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");let e=this.#n._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",Jn,{signal:e});let r=this.#e=document.createElement("div");return r.className="buttons",t.append(r),this.#n.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#s(t,e){let r=0,i=0;for(let s of t){let o=s.y+s.height;if(o<r)continue;let a=s.x+(e?s.width:0);if(o>r){i=a,r=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,r]}show(t,e,r){let[i,s]=this.#s(e,r),{style:o}=this.#t||=this.#r();t.append(this.#t),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(t,e,r,i){let s=document.createElement("button");s.classList.add("basic",t),s.tabIndex=0,s.setAttribute("data-l10n-id",e);let o=document.createElement("span");s.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",r);let a=this.#n._signal;a instanceof AbortSignal&&!a.aborted&&(s.addEventListener("contextmenu",Jn,{signal:a}),s.addEventListener("click",i,{signal:a})),this.#e.append(s)}};function hR(n,t,e){for(let r of e)t.addEventListener(r,n[r].bind(n))}var j_=class{#e=0;get id(){return`${oR}${this.#e++}`}},V_=class n{#e=uR();#t=0;#n=null;static get _isSVGFittingCanvas(){let t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',r=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;let s=i.decode().then(()=>(r.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(r.getImageData(0,0,1,1).data.buffer)[0]===0));return Ie(this,"_isSVGFittingCanvas",s)}#r(t,e){return K(this,null,function*(){this.#n||=new Map;let r=this.#n.get(t);if(r===null)return null;if(r?.bitmap)return r.refCounter+=1,r;try{r||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof e=="string"?(r.url=e,i=yield xu(e,"blob")):e instanceof File?i=r.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){let s=n._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,u)=>{a.onload=()=>{r.bitmap=a,r.isSvg=!0,c()},o.onload=()=>K(this,null,function*(){let d=r.svgUrl=o.result;a.src=(yield s)?`${d}#svgView(preserveAspectRatio(none))`:d}),a.onerror=o.onerror=u});o.readAsDataURL(i),yield l}else r.bitmap=yield createImageBitmap(i);r.refCounter=1}catch(i){ge(i),r=null}return this.#n.set(t,r),r&&this.#n.set(r.id,r),r})}getFromFile(t){return K(this,null,function*(){let{lastModified:e,name:r,size:i,type:s}=t;return this.#r(`${e}_${r}_${i}_${s}`,t)})}getFromUrl(t){return K(this,null,function*(){return this.#r(t,t)})}getFromBlob(t,e){return K(this,null,function*(){let r=yield e;return this.#r(t,r)})}getFromId(t){return K(this,null,function*(){this.#n||=new Map;let e=this.#n.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){let{blobPromise:r}=e;return delete e.blobPromise,this.getFromBlob(e.id,r)}return this.getFromUrl(e.url)})}getFromCanvas(t,e){this.#n||=new Map;let r=this.#n.get(t);if(r?.bitmap)return r.refCounter+=1,r;let i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),r={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(t,r),this.#n.set(r.id,r),r}getSvgUrl(t){let e=this.#n.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#n||=new Map;let e=this.#n.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;let{bitmap:r}=e;if(!e.url&&!e.file){let i=new OffscreenCanvas(r.width,r.height);i.getContext("bitmaprenderer").transferFromImageBitmap(r),e.blobPromise=i.convertToBlob()}r.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#e}_`)}},H_=class{#e=[];#t=!1;#n;#r=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:e,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),this.#t)return;let l={cmd:t,undo:e,post:r,type:s};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(l);return}if(o&&this.#e[this.#r].type===s){a&&(l.undo=this.#e[this.#r].undo),this.#e[this.#r]=l;return}let c=this.#r+1;c===this.#n?this.#e.splice(0,1):(this.#r=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#r===-1)return;this.#t=!0;let{undo:t,post:e}=this.#e[this.#r];t(),e?.(),this.#t=!1,this.#r-=1}redo(){if(this.#r<this.#e.length-1){this.#r+=1,this.#t=!0;let{cmd:t,post:e}=this.#e[this.#r];t(),e?.(),this.#t=!1}}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}cleanType(t){if(this.#r!==-1){for(let e=this.#r;e>=0;e--)if(this.#e[e].type!==t){this.#e.splice(e+1,this.#r-e),this.#r=e;return}this.#e.length=0,this.#r=-1}}destroy(){this.#e=null}},bo=class{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=Pt.platform;for(let[r,i,s={}]of t)for(let o of r){let a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:s}),this.allKeys.add(o.split("+").at(-1)))}}#e(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;let r=this.callbacks.get(this.#e(e));if(!r)return;let{callback:i,options:{bubbles:s=!1,args:o=[],checker:a=null}}=r;a&&!a(t,e)||(i.bind(t,...o,e)(),s||Tt(e))}},U_=class n{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return E4(t),Ie(this,"_colors",t)}convert(t){let e=gg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[r,i]of this._colors)if(i.every((s,o)=>s===e[o]))return n._colorsMapping.get(r);return e}getHexCode(t){let e=this._colors.get(t);return e?ne.makeHexColor(...e):t}},uu=(()=>{class n{#e=new AbortController;#t=null;#n=null;#r=new Map;#s=new Map;#i=null;#o=null;#a=null;#l=new H_;#c=null;#h=null;#u=null;#f=0;#g=new Set;#p=null;#d=null;#m=new Set;_editorUndoBar=null;#b=!1;#v=!1;#C=!1;#E=null;#y=null;#x=null;#A=null;#S=!1;#w=null;#O=new j_;#T=!1;#I=!1;#k=!1;#N=null;#P=null;#L=null;#R=null;#j=null;#D=ve.NONE;#_=new Set;#V=null;#H=null;#$=null;#X=null;#W=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#F=[0,0];#z=null;#G=null;#Q=null;#J=null;#B=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){let e=n.prototype,r=a=>a.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:l})=>{if(l instanceof HTMLInputElement){let{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Ie(this,"_keyboardManager",new bo([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(l)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:l})=>!(l instanceof HTMLButtonElement)&&a.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:r}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:r}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:r}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:r}]]))}constructor(e,r,i,s,o,a,l,c,u,d,h,f,p,g,m,v){let y=this._signal=this.#e.signal;this.#G=e,this.#Q=r,this.#J=i,this.#i=s,this.#c=o,this.#H=a,this.#W=c,this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:y}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),l._on("setpreference",this.onSetPreference.bind(this),{signal:y}),l._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:y}),window.addEventListener("pointerdown",()=>{this.#I=!0},{capture:!0,signal:y}),window.addEventListener("pointerup",()=>{this.#I=!1},{capture:!0,signal:y}),this.#le(),this.#he(),this.#te(),this.#o=c.annotationStorage,this.#E=c.filterFactory,this.#$=u,this.#A=d||null,this.#b=h,this.#v=f,this.#C=p,this.#j=g||null,this.viewParameters={realScale:bs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=v!==!1}destroy(){this.#B?.resolve(),this.#B=null,this.#e?.abort(),this.#e=null,this._signal=null;for(let e of this.#s.values())e.destroy();this.#s.clear(),this.#r.clear(),this.#m.clear(),this.#R?.clear(),this.#t=null,this.#_.clear(),this.#l.destroy(),this.#i?.destroy(),this.#c?.destroy(),this.#H?.destroy(),this.#w?.hide(),this.#w=null,this.#L?.destroy(),this.#L=null,this.#n=null,this.#y&&(clearTimeout(this.#y),this.#y=null),this.#z&&(clearTimeout(this.#z),this.#z=null),this._editorUndoBar?.destroy(),this.#W=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#C}get hcmFilter(){return Ie(this,"hcmFilter",this.#$?this.#E.addHCMFilter(this.#$.foreground,this.#$.background):"none")}get direction(){return Ie(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Ie(this,"_highlightColors",this.#A?new Map(this.#A.split(",").map(e=>(e=e.split("=").map(r=>r.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){let{_highlightColors:e}=this;if(!e)return Ie(this,"highlightColors",null);let r=new Map,i=!!this.#$;for(let[s,o]of e){let a=s.endsWith("_HCM");if(i&&a){r.set(s.replace("_HCM",""),o);continue}!i&&!a&&r.set(s,o)}return Ie(this,"highlightColors",r)}get highlightColorNames(){return Ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;let r=this.highlightColorNames.get(e);return this._highlightColors.get(r)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#L=e}editAltText(e,r=!1){this.#i?.editAltText(this,e,r)}hasCommentManager(){return!!this.#c}editComment(e,r){this.#c?.open(this,e,r)}getSignature(e){this.#H?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#H}switchToMode(e,r){this._eventBus.on("annotationeditormodechanged",r,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,r){this._eventBus.dispatch("setpreference",{source:this,name:e,value:r})}onSetPreference({name:e,value:r}){switch(e){case"enableNewAltTextWhenAddingImage":this.#C=r;break}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,r){for(let i of this.#s.values()){let{x:s,y:o,width:a,height:l}=i.div.getBoundingClientRect();if(e>=s&&e<=s+a&&r>=o&&r<=o+l)return i}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#m.add(e)}removeShouldRescale(e){this.#m.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*bs.PDF_TO_CSS_UNITS;for(let r of this.#m)r.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){let{currentLayer:r}=this;if(r.hasTextLayer(e))return r;for(let i of this.#s.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",r=!1){let i=document.getSelection();if(!i||i.isCollapsed)return;let{anchorNode:s,anchorOffset:o,focusNode:a,focusOffset:l}=i,c=i.toString(),d=this.#q(i).closest(".textLayer"),h=this.getSelectionBoxes(d);if(!h)return;i.empty();let f=this.#ee(d),p=this.#D===ve.NONE,g=()=>{let m=f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:h,anchorNode:s,anchorOffset:o,focusNode:a,focusOffset:l,text:c});p&&this.showAllEditors("highlight",!0,!0),r&&m?.editComment()};if(p){this.switchToMode(ve.HIGHLIGHT,g);return}g()}commentSelection(e=""){this.highlightSelection(e,!0)}#oe(){let e=document.getSelection();if(!e||e.isCollapsed)return;let i=this.#q(e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#w||=new B_(this),this.#w.show(i,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#o&&!this.#o.has(e.id)&&this.#o.setValue(e.id,e)}a11yAlert(e,r=null){let i=this.#J;i&&(i.setAttribute("data-l10n-id",e),r?i.setAttribute("data-l10n-args",JSON.stringify(r)):i.removeAttribute("data-l10n-args"))}#ae(){let e=document.getSelection();if(!e||e.isCollapsed){this.#V&&(this.#w?.hide(),this.#V=null,this.#M({hasSelectedText:!1}));return}let{anchorNode:r}=e;if(r===this.#V)return;let s=this.#q(e).closest(".textLayer");if(!s){this.#V&&(this.#w?.hide(),this.#V=null,this.#M({hasSelectedText:!1}));return}if(this.#w?.hide(),this.#V=r,this.#M({hasSelectedText:!0}),!(this.#D!==ve.HIGHLIGHT&&this.#D!==ve.NONE)&&(this.#D===ve.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){let o=this.#D===ve.HIGHLIGHT?this.#ee(s):null;if(o?.toggleDrawing(),this.#I){let a=new AbortController,l=this.combinedSignal(a),c=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),o?.toggleDrawing(!0),u.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",c,{signal:l}),window.addEventListener("blur",c,{signal:l})}else o?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(e=""){this.#D===ve.HIGHLIGHT?this.highlightSelection(e):this.#b&&this.#oe()}#le(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#ce(){if(this.#x)return;this.#x=new AbortController;let e=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ue(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;let{activeElement:e}=document;for(let r of this.#_)if(r.div.contains(e)){this.#P=[r,e],r._focusEventsAllowed=!1;break}}focus(){if(!this.#P)return;let[e,r]=this.#P;this.#P=null,r.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),r.focus()}#te(){if(this.#N)return;this.#N=new AbortController;let e=this.combinedSignal(this.#N);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#de(){this.#N?.abort(),this.#N=null}#ne(){if(this.#h)return;this.#h=new AbortController;let e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#re(){this.#h?.abort(),this.#h=null}#he(){let e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#ne()}removeEditListeners(){this.#de(),this.#re()}dragOver(e){for(let{type:r}of e.dataTransfer.items)for(let i of this.#d)if(i.isHandlingMimeForPasting(r)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(let r of e.dataTransfer.items)for(let i of this.#d)if(i.isHandlingMimeForPasting(r.type)){i.paste(r,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;let r=[];for(let i of this.#_){let s=i.serialize(!0);s&&r.push(s)}r.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(r))}cut(e){this.copy(e),this.delete()}paste(e){return K(this,null,function*(){e.preventDefault();let{clipboardData:r}=e;for(let o of r.items)for(let a of this.#d)if(a.isHandlingMimeForPasting(o.type)){a.paste(o,this.currentLayer);return}let i=r.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){ge(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();let s=this.currentLayer;try{let o=[];for(let c of i){let u=yield s.deserialize(c);if(!u)return;o.push(u)}let a=()=>{for(let c of o)this.#ie(c);this.#se(o)},l=()=>{for(let c of o)c.remove()};this.addCommands({cmd:a,undo:l,mustExec:!0})}catch(o){ge(`paste: "${o.message}".`)}})}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#D!==ve.NONE&&!this.isEditorHandlingKeyboard&&n._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(e){Object.entries(e).some(([i,s])=>this.#Y[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#D===ve.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[Be.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#ne(),this.#M({isEditing:this.#D!==ve.NONE,isEmpty:this.#Z(),hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:this.#l.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ue(),this.#re(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(let r of this.#d)this.#U(r.defaultPropertiesToUpdate)}}getId(){return this.#O.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}updateMode(e,r=null,i=!1,s=!1,o=!1){return K(this,null,function*(){if(this.#D!==e&&!(this.#B&&(yield this.#B.promise,!this.#B))){if(this.#B=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#D===ve.POPUP&&this.#c?.hideSidebar(),this.#D=e,e===ve.NONE){this.setEditingState(!1),this.#pe(),this._editorUndoBar?.hide(),this.#B.resolve();return}e===ve.SIGNATURE&&(yield this.#H?.loadSignatures()),e===ve.POPUP&&(this.#n||=yield this.#W.getAnnotationsByType(new Set(this.#d.map(a=>a._editorType))),this.#c?.showSidebar(this.#n)),this.setEditingState(!0),yield this.#fe(),this.unselectAll();for(let a of this.#s.values())a.updateMode(e);if(!r){i&&this.addNewEditorFromKeyboard(),this.#B.resolve();return}for(let a of this.#r.values())a.annotationElementId===r||a.id===r?(this.setSelected(a),o?a.editComment():s&&a.enterInEditMode()):a.unselect();this.#B.resolve()}})}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#D&&this._eventBus.dispatch("switchannotationeditormode",H({source:this},e))}updateParams(e,r){if(this.#d){switch(e){case Be.CREATE:this.currentLayer.addNewEditor(r);return;case Be.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(e,r),this.showAllEditors("highlight",r);break}if(this.hasSelection)for(let i of this.#_)i.updateParams(e,r);else for(let i of this.#d)i.updateDefaultParams(e,r)}}showAllEditors(e,r,i=!1){for(let o of this.#r.values())o.editorType===e&&o.show(r);(this.#X?.get(Be.HIGHLIGHT_SHOW_ALL)??!0)!==r&&this.#U([[Be.HIGHLIGHT_SHOW_ALL,r]])}enableWaiting(e=!1){if(this.#k!==e){this.#k=e;for(let r of this.#s.values())e?r.disableClick():r.enableClick(),r.div.classList.toggle("waiting",e)}}#fe(){return K(this,null,function*(){if(!this.#T){this.#T=!0;let e=[];for(let r of this.#s.values())e.push(r.enable());yield Promise.all(e);for(let r of this.#r.values())r.enable()}})}#pe(){if(this.unselectAll(),this.#T){this.#T=!1;for(let e of this.#s.values())e.disable();for(let e of this.#r.values())e.disable()}}getEditors(e){let r=[];for(let i of this.#r.values())i.pageIndex===e&&r.push(i);return r}getEditor(e){return this.#r.get(e)}addEditor(e){this.#r.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.focusMainContainer(),this.#y=null},0)),this.#r.delete(e.id),e.annotationElementId&&this.#R?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#o?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){let r=this.#s.get(e.pageIndex);r?r.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#ge(){let e=null;for(e of this.#_);return e}updateUI(e){this.#ge===e&&this.#U(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#U(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(let r of this.#_)r!==e&&r.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#l.undo(),this.#M({hasSomethingToUndo:this.#l.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Z()}),this._editorUndoBar?.hide()}redo(){this.#l.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#l.hasSomethingToRedo(),isEmpty:this.#Z()})}addCommands(e){this.#l.add(e),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Z()})}cleanUndoStack(e){this.#l.cleanType(e)}#Z(){if(this.#r.size===0)return!0;if(this.#r.size===1)for(let e of this.#r.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();let e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;let r=e?[e]:[...this.#_],i=()=>{this._editorUndoBar?.show(s,r.length===1?r[0].editorType:r.length);for(let o of r)o.remove()},s=()=>{for(let o of r)this.#ie(o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#se(e){for(let r of this.#_)r.unselect();this.#_.clear();for(let r of e)r.isEmpty()||(this.#_.add(r),r.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(let e of this.#_)e.commit();this.#se(this.#r.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#D!==ve.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(let e of this.#_)e.unselect();this.#_.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(e,r,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#F[0]+=e,this.#F[1]+=r;let[s,o]=this.#F,a=[...this.#_],l=1e3;this.#z&&clearTimeout(this.#z),this.#z=setTimeout(()=>{this.#z=null,this.#F[0]=this.#F[1]=0,this.addCommands({cmd:()=>{for(let c of a)this.#r.has(c.id)&&(c.translateInPage(s,o),c.translationDone())},undo:()=>{for(let c of a)this.#r.has(c.id)&&(c.translateInPage(-s,-o),c.translationDone())},mustExec:!1})},l);for(let c of a)c.translateInPage(e,r),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(let e of this.#_)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);let e=this.#p;this.#p=null;let r=!1;for(let[{x:s,y:o,pageIndex:a},l]of e)l.newX=s,l.newY=o,l.newPageIndex=a,r||=s!==l.savedX||o!==l.savedY||a!==l.savedPageIndex;if(!r)return!1;let i=(s,o,a,l)=>{if(this.#r.has(s.id)){let c=this.#s.get(l);c?s._setParentAndPosition(c,o,a):(s.pageIndex=l,s.x=o,s.y=a)}};return this.addCommands({cmd:()=>{for(let[s,{newX:o,newY:a,newPageIndex:l}]of e)i(s,o,a,l)},undo:()=>{for(let[s,{savedX:o,savedY:a,savedPageIndex:l}]of e)i(s,o,a,l)},mustExec:!0}),!0}dragSelectedEditors(e,r){if(this.#p)for(let i of this.#p.keys())i.drag(e,r)}rebuild(e){if(e.parent===null){let r=this.getLayer(e.pageIndex);r?(r.changeParent(e),r.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#D}get imageManager(){return Ie(this,"imageManager",new V_)}getSelectionBoxes(e){if(!e)return null;let r=document.getSelection();for(let u=0,d=r.rangeCount;u<d;u++)if(!e.contains(r.getRangeAt(u).commonAncestorContainer))return null;let{x:i,y:s,width:o,height:a}=e.getBoundingClientRect(),l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,d,h,f)=>({x:(d-s)/a,y:1-(u+h-i)/o,width:f/a,height:h/o});break;case"180":l=(u,d,h,f)=>({x:1-(u+h-i)/o,y:1-(d+f-s)/a,width:h/o,height:f/a});break;case"270":l=(u,d,h,f)=>({x:1-(d+f-s)/a,y:(u-i)/o,width:f/a,height:h/o});break;default:l=(u,d,h,f)=>({x:(u-i)/o,y:(d-s)/a,width:h/o,height:f/a});break}let c=[];for(let u=0,d=r.rangeCount;u<d;u++){let h=r.getRangeAt(u);if(!h.collapsed)for(let{x:f,y:p,width:g,height:m}of h.getClientRects())g===0||m===0||c.push(l(f,p,g,m))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:r}){(this.#a||=new Map).set(e,r)}removeChangedExistingAnnotation({annotationElementId:e}){this.#a?.delete(e)}renderAnnotationElement(e){let r=this.#a?.get(e.data.id);if(!r)return;let i=this.#o.getRawValue(r);i&&(this.#D===ve.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,r,i){let s=this.#R?.get(e);s&&(s.setCanvas(r,i),this.#R.delete(e))}addMissingCanvas(e,r){(this.#R||=new Map).set(e,r)}}return n})(),Y1=(()=>{class n{#e=null;#t=!1;#n=null;#r=null;#s=null;#i=null;#o=!1;#a=null;#l=null;#c=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#l=e,this.#u=e._uiManager.useNewAltTextFlow,n.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){n._l10n??=e}render(){return K(this,null,function*(){let e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";let r=this.#r=document.createElement("span");e.append(r),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",n.#f.missing),r.setAttribute("data-l10n-id",n.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));let i=this.#l._uiManager._signal;e.addEventListener("contextmenu",Jn,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});let s=o=>{o.preventDefault(),this.#l._uiManager.editAltText(this.#l),this.#u&&this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#o=!0,s(o))},{signal:i}),yield this.#p(),e})}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#o}),this.#o=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}setGuessedText(e){return K(this,null,function*(){this.#e===null&&(this.#c=e,this.#h=yield n._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())})}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){let r=this.#a=document.createElement("div");r.className="noAltTextBadge",this.#l.div.append(r)}this.#a.classList.toggle("hidden",!e)}serialize(e){let r=this.#e;return!e&&this.#c===r&&(r=this.#h),{altText:r,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:r,guessedText:i,textWithDisclaimer:s,cancel:o=!1}){i&&(this.#c=i,this.#h=s),!(this.#e===e&&this.#t===r)&&(o||(this.#e=e,this.#t=r),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#l._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#r=null,this.#s=null,this.#a?.remove(),this.#a=null}#p(){return K(this,null,function*(){let e=this.#n;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",n.#f[this.#g]),this.#r?.setAttribute("data-l10n-id",n.#f[`${this.#g}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let r=this.#s;if(!r){this.#s=r=document.createElement("span"),r.className="tooltip",r.setAttribute("role","tooltip"),r.id=`alt-text-tooltip-${this.#l.id}`;let s=100,o=this.#l._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#s.classList.add("show"),this.#l._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s?.classList.remove("show")},{signal:o})}this.#t?r.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(r.removeAttribute("data-l10n-id"),r.textContent=this.#e),r.parentNode||e.append(r),this.#l.getElementForAltText()?.setAttribute("aria-describedby",r.id)})}}return n})(),qa=class{#e=null;#t=!1;#n=null;#r=null;#s=null;#i=null;#o=!1;constructor(t){this.#n=t,this.toolbar=null}render(){if(!this.#n._uiManager.hasCommentManager())return null;let t=this.#e=document.createElement("button");t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");let e=this.#n._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",Jn,{signal:e}),t.addEventListener("pointerdown",i=>i.stopPropagation(),{signal:e});let r=i=>{i.preventDefault(),this.edit()};return t.addEventListener("click",r,{capture:!0,signal:e}),t.addEventListener("keydown",i=>{i.target===t&&i.key==="Enter"&&(this.#t=!0,r(i))},{signal:e}),t}edit(){let{bottom:t,left:e,right:r}=this.#n.getClientDimensions(),i={top:t};this.#n._uiManager.direction==="ltr"?i.right=r:i.left=e,this.#n._uiManager.editComment(this.#n,i)}finish(){this.#e&&(this.#e.focus({focusVisible:this.#t}),this.#t=!1)}isDeleted(){return this.#o||this.#s===""}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,date:this.#i,deleted:this.#o}}set data(t){if(t===null){this.#s="",this.#o=!0;return}this.#s=t,this.#i=new Date,this.#o=!1}setInitialText(t){this.#r=t,this.data=t}toggle(t=!1){this.#e&&(this.#e.disabled=!t)}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#s="",this.#i=null,this.#n=null,this.#t=!1,this.#o=!1}},Pp=class n{#e;#t=!1;#n=null;#r;#s;#i;#o;#a=null;#l;#c=null;#h;#u=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:o=null,signal:a}){this.#e=t,this.#n=r,this.#r=e,this.#s=i,this.#i=s,this.#o=o,this.#h=new AbortController,this.#l=AbortSignal.any([a,this.#h.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#l})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Pi.pixelRatio}#f(t){if(this.#r?.())return;if(t.touches.length===1){if(this.#a)return;let i=this.#a=new AbortController,s=AbortSignal.any([this.#l,i.signal]),o=this.#e,a={capture:!0,signal:s,passive:!1},l=c=>{c.pointerType==="touch"&&(this.#a?.abort(),this.#a=null)};o.addEventListener("pointerdown",c=>{c.pointerType==="touch"&&(Tt(c),l(c))},a),o.addEventListener("pointerup",l,a),o.addEventListener("pointercancel",l,a);return}if(!this.#u){this.#u=new AbortController;let i=AbortSignal.any([this.#l,this.#u.signal]),s=this.#e,o={signal:i,capture:!1,passive:!1};s.addEventListener("touchmove",this.#g.bind(this),o);let a=this.#p.bind(this);s.addEventListener("touchend",a,o),s.addEventListener("touchcancel",a,o),o.capture=!0,s.addEventListener("pointerdown",Tt,o),s.addEventListener("pointermove",Tt,o),s.addEventListener("pointercancel",Tt,o),s.addEventListener("pointerup",Tt,o),this.#s?.()}if(Tt(t),t.touches.length!==2||this.#n?.()){this.#c=null;return}let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]),this.#c={touch0X:e.screenX,touch0Y:e.screenY,touch1X:r.screenX,touch1Y:r.screenY}}#g(t){if(!this.#c||t.touches.length!==2)return;Tt(t);let[e,r]=t.touches;e.identifier>r.identifier&&([e,r]=[r,e]);let{screenX:i,screenY:s}=e,{screenX:o,screenY:a}=r,l=this.#c,{touch0X:c,touch0Y:u,touch1X:d,touch1Y:h}=l,f=d-c,p=h-u,g=o-i,m=a-s,v=Math.hypot(g,m)||1,y=Math.hypot(f,p)||1;if(!this.#t&&Math.abs(y-v)<=n.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=o,l.touch1Y=a,!this.#t){this.#t=!0;return}let b=[(i+o)/2,(s+a)/2];this.#i?.(b,y,v)}#p(t){t.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#o?.()),this.#c&&(Tt(t),this.#c=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#a?.abort(),this.#a=null}},tt=class n{#e=null;#t=null;#n=null;#r=null;#s=!1;#i=null;#o="";#a=!1;#l=null;#c=null;#h=null;#u=null;#f="";#g=!1;#p=null;#d=!1;#m=!1;#b=!1;#v=null;#C=0;#E=0;#y=null;#x=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#S=n._zIndex++;static _borderLineWidth=-1;static _colorManager=new U_;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){let t=n.prototype._resizeWithKeyboard,e=uu.TRANSLATE_SMALL,r=uu.TRANSLATE_BIG;return Ie(this,"_resizerKeyboardManager",new bo([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-r,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[r,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-r]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,r]}],[["Escape","mac+Escape"],n.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;let{rotation:e,rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[r,i],this.pageTranslation=[s,o];let[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){let e=new $_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(n._l10n??=t,n._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),n._borderLineWidth!==-1)return;let r=getComputedStyle(document.documentElement);n._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Ke("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){let[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):this.#F(),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,r,i){let[s,o]=this.parentDimensions;[r,i]=this.screenToPageTranslation(r,i),this.x=(t+r)/s,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){let[r,i]=this.parentDimensions;this.setAt(t*r,e*i,this.width*r,this.height*i),this._onTranslated()}#w([t,e],r,i){[r,i]=this.screenToPageTranslation(r,i),this.x+=r/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#w(this.parentDimensions,t,e)}translateInPage(t,e){this.#p||=[this.x,this.y,this.width,this.height],this.#w(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#p||=[this.x,this.y,this.width,this.height];let{div:r,parentDimensions:[i,s]}=this;if(this.x+=t/i,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){let{x:d,y:h}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,h)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this,[l,c]=this.getBaseTranslation();o+=l,a+=c;let{style:u}=r;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),r.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#p&&(this.#p[0]!==this.x||this.#p[1]!==this.y)}get _hasBeenResized(){return!!this.#p&&(this.#p[2]!==this.width||this.#p[3]!==this.height)}getBaseTranslation(){let[t,e]=this.parentDimensions,{_borderLineWidth:r}=n,i=r/t,s=r/e;switch(this.rotation){case 90:return[-i,s];case 180:return[i,s];case 270:return[i,-s];default:return[-i,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){let{div:{style:e},pageDimensions:[r,i]}=this,{x:s,y:o,width:a,height:l}=this;if(a*=r,l*=i,s*=r,o*=i,this._mustFixPosition)switch(t){case 0:s=an(s,0,r-a),o=an(o,0,i-l);break;case 90:s=an(s,0,r-l),o=an(o,a,i);break;case 180:s=an(s,a,r),o=an(o,l,i);break;case 270:s=an(s,l,r),o=an(o,0,i-a);break}this.x=s/=r,this.y=o/=i;let[c,u]=this.getBaseTranslation();s+=c,o+=u,e.left=`${(100*s).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#O(t,e,r){switch(r){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return n.#O(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return n.#O(t,e,360-this.parentRotation)}#T(t){switch(t){case 90:{let[e,r]=this.pageDimensions;return[0,-e/r,r/e,0]}case 180:return[-1,0,0,-1];case 270:{let[e,r]=this.pageDimensions;return[0,e/r,-r/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{parentScale:t,pageDimensions:[e,r]}=this;return[e*t,r*t]}setDims(t,e){let[r,i]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*t/r).toFixed(2)}%`,this.#a||(s.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){let{style:t}=this.div,{height:e,width:r}=t,i=r.endsWith("%"),s=!this.#a&&e.endsWith("%");if(i&&s)return;let[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(r)/o).toFixed(2)}%`),!this.#a&&!s&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#I(){if(this.#l)return;this.#l=document.createElement("div"),this.#l.classList.add("resizers");let t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(let r of t){let i=document.createElement("div");this.#l.append(i),i.classList.add("resizer",r),i.setAttribute("data-resizer-name",r),i.addEventListener("pointerdown",this.#k.bind(this,r),{signal:e}),i.addEventListener("contextmenu",Jn,{signal:e}),i.tabIndex=-1}this.div.prepend(this.#l)}#k(t,e){e.preventDefault();let{isMac:r}=Pt.platform;if(e.button!==0||e.ctrlKey&&r)return;this.#n?.toggle(!1);let i=this._isDraggable;this._isDraggable=!1,this.#c=[e.screenX,e.screenY];let s=new AbortController,o=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#L.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Tt,{passive:!1,signal:o}),window.addEventListener("contextmenu",Jn,{signal:o}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;let c=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#P()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#N(t,e,r,i){this.width=r,this.height=i,this.x=t,this.y=e;let[s,o]=this.parentDimensions;this.setDims(s*r,o*i),this.fixAndSetPosition(),this._onResized()}_onResized(){}#P(){if(!this.#h)return;let{savedX:t,savedY:e,savedWidth:r,savedHeight:i}=this.#h;this.#h=null;let s=this.x,o=this.y,a=this.width,l=this.height;s===t&&o===e&&a===r&&l===i||this.addCommands({cmd:this.#N.bind(this,s,o,a,l),undo:this.#N.bind(this,t,e,r,i),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#L(t,e){let[r,i]=this.parentDimensions,s=this.x,o=this.y,a=this.width,l=this.height,c=n.MIN_SIZE/r,u=n.MIN_SIZE/i,d=this.#T(this.rotation),h=(P,M)=>[d[0]*P+d[2]*M,d[1]*P+d[3]*M],f=this.#T(360-this.rotation),p=(P,M)=>[f[0]*P+f[2]*M,f[1]*P+f[3]*M],g,m,v=!1,y=!1;switch(t){case"topLeft":v=!0,g=(P,M)=>[0,0],m=(P,M)=>[P,M];break;case"topMiddle":g=(P,M)=>[P/2,0],m=(P,M)=>[P/2,M];break;case"topRight":v=!0,g=(P,M)=>[P,0],m=(P,M)=>[0,M];break;case"middleRight":y=!0,g=(P,M)=>[P,M/2],m=(P,M)=>[0,M/2];break;case"bottomRight":v=!0,g=(P,M)=>[P,M],m=(P,M)=>[0,0];break;case"bottomMiddle":g=(P,M)=>[P/2,M],m=(P,M)=>[P/2,0];break;case"bottomLeft":v=!0,g=(P,M)=>[0,M],m=(P,M)=>[P,0];break;case"middleLeft":y=!0,g=(P,M)=>[0,M/2],m=(P,M)=>[P,M/2];break}let b=g(a,l),C=m(a,l),_=h(...C),E=n._round(s+_[0]),w=n._round(o+_[1]),x=1,S=1,A,I;if(e.fromKeyboard)({deltaX:A,deltaY:I}=e);else{let{screenX:P,screenY:M}=e,[D,T]=this.#c;[A,I]=this.screenToPageTranslation(P-D,M-T),this.#c[0]=P,this.#c[1]=M}if([A,I]=p(A/r,I/i),v){let P=Math.hypot(a,l);x=S=Math.max(Math.min(Math.hypot(C[0]-b[0]-A,C[1]-b[1]-I)/P,1/a,1/l),c/a,u/l)}else y?x=an(Math.abs(C[0]-b[0]-A),c,1)/a:S=an(Math.abs(C[1]-b[1]-I),u,1)/l;let O=n._round(a*x),k=n._round(l*S);_=h(...m(O,k));let $=E-_[0],U=w-_[1];this.#p||=[this.x,this.y,this.width,this.height],this.width=O,this.height=k,this.x=$,this.y=U,this.setDims(r*O,i*k),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}addEditToolbar(){return K(this,null,function*(){if(this._editToolbar||this.#m)return this._editToolbar;this._editToolbar=new F_(this),this.div.append(this._editToolbar.render());let{toolbarButtons:t}=this;if(t)for(let[e,r]of t)yield this._editToolbar.addButton(e,r);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar})}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(t){let e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Y1.initialize(n._l10n),this.#n=new Y1(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}setGuessedAltText(t){return K(this,null,function*(){yield this.#n?.setGuessedText(t)})}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}addCommentButton(){return this.#r?this.#r:this.#r=new qa(this)}get commentColor(){return null}get comment(){let t=this.#r;return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){this.#r||(this.#r=new qa(this)),this.#r.data=t}setCommentData(t){this.#r||(this.#r=new qa(this)),this.#r.setInitialText(t)}get hasEditedComment(){return this.#r?.hasBeenEdited()}editComment(){return K(this,null,function*(){this.#r||(this.#r=new qa(this)),this.#r.edit()})}addComment(t){if(this.hasEditedComment){let[,,,i]=t.rect,[s]=this.pageDimensions,[o]=this.pageTranslation,a=o+s+1,l=i-100,c=a+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,l,c,i]}}}render(){let t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#H();let[e,r]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*r/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/r).toFixed(2)}%`);let[i,s]=this.getInitialTranslation();return this.translate(i,s),hR(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new Pp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#R.bind(this),onPinching:this.#j.bind(this),onPinchEnd:this.#D.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),t}#R(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#j(t,e,r){let s=.7*(r/e)+1-.7;if(s===1)return;let o=this.#T(this.rotation),a=(E,w)=>[o[0]*E+o[2]*w,o[1]*E+o[3]*w],[l,c]=this.parentDimensions,u=this.x,d=this.y,h=this.width,f=this.height,p=n.MIN_SIZE/l,g=n.MIN_SIZE/c;s=Math.max(Math.min(s,1/h,1/f),p/h,g/f);let m=n._round(h*s),v=n._round(f*s);if(m===h&&v===f)return;this.#p||=[u,d,h,f];let y=a(h/2,f/2),b=n._round(u+y[0]),C=n._round(d+y[1]),_=a(m/2,v/2);this.x=b-_[0],this.y=C-_[1],this.width=m,this.height=v,this.setDims(l*m,c*v),this.fixAndSetPosition(),this._onResizing()}#D(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#P()}pointerdown(t){let{isMac:e}=Pt.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#V(t);return}this.#_(t)}#_(t){let{isMac:e}=Pt.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#V(t){let{isSelected:e}=this;this._uiManager.setUpDragSession();let r=!1,i=new AbortController,s=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:s},a=c=>{i.abort(),this.#i=null,this.#g=!1,this._uiManager.endDragSession()||this.#_(c),r&&this._onStopDragging()};e&&(this.#C=t.clientX,this.#E=t.clientY,this.#i=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",c=>{r||(r=!0,this._onStartDragging());let{clientX:u,clientY:d,pointerId:h}=c;if(h!==this.#i){Tt(c);return}let[f,p]=this.screenToPageTranslation(u-this.#C,d-this.#E);this.#C=u,this.#E=d,this._uiManager.dragSelectedEditors(f,p)},o),window.addEventListener("touchmove",Tt,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#o&&(this.#x||c.isPrimary)&&a(c),Tt(c)},o));let l=c=>{if(!this.#i||this.#i===c.pointerId){a(c);return}Tt(c)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.#v=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,r){t.changeParent(this),this.x=e,this.y=r,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,r=this.rotation){let i=this.parentScale,[s,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=t/i,u=e/i,d=this.x*s,h=this.y*o,f=this.width*s,p=this.height*o;switch(r){case 0:return[d+c+a,o-h-u-p+l,d+c+f+a,o-h-u+l];case 90:return[d+u+a,o-h+c+l,d+u+p+a,o-h+c+f+l];case 180:return[d-c-f+a,o-h+u+l,d-c+a,o-h+u+p+l];case 270:return[d-u-p+a,o-h-c-f+l,d-u+a,o-h-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[r,i,s,o]=t,a=s-r,l=o-i;switch(this.rotation){case 0:return[r,e-o,a,l];case 90:return[r,e-i,l,a];case 180:return[s,e-i,a,l];case 270:return[s,e-o,l,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#m=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#m=!1,!0):!1}isInEditMode(){return this.#m}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){let{top:t,left:e,bottom:r,right:i}=this.getClientDimensions(),{innerHeight:s,innerWidth:o}=window;return e<o&&i>0&&t<s&&r>0}#H(){if(this.#u||!this.div)return;this.#u=new AbortController;let t=this._uiManager.combinedSignal(this.#u);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#H()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){Ke("An editor must be serializable")}static deserialize(t,e,r){return K(this,null,function*(){let i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:r,annotationElementId:t.annotationElementId});i.rotation=t.rotation,i.#e=t.accessibilityData,i._isCopy=t.isCopy||!1;let[s,o]=i.pageDimensions,[a,l,c,u]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/s,i.y=l/o,i.width=c/s,i.height=u/o,i})}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#u?.abort(),this.#u=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#v&&(clearTimeout(this.#v),this.#v=null),this.#F(),this.removeEditToolbar(),this.#y){for(let t of this.#y.values())clearTimeout(t);this.#y=null}this.parent=null,this.#x?.destroy(),this.#x=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#l.classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};let e=this.#l.children;if(!this.#t){this.#t=Array.from(e);let o=this.#$.bind(this),a=this.#X.bind(this),l=this._uiManager._signal;for(let c of this.#t){let u=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#W.bind(this,u),{signal:l}),c.setAttribute("data-l10n-id",n._l10nResizer[u])}}let r=this.#t[0],i=0;for(let o of e){if(o===r)break;i++}let s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==i){if(s<i)for(let a=0;a<i-s;a++)this.#l.append(this.#l.firstChild);else if(s>i)for(let a=0;a<s-i;a++)this.#l.firstChild.before(this.#l.lastChild);let o=0;for(let a of e){let c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",n._l10nResizer[c])}}this.#Y(0),this.#b=!0,this.#l.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#$(t){n._resizerKeyboardManager.exec(this,t)}#X(t){this.#b&&t.relatedTarget?.parentNode!==this.#l&&this.#F()}#W(t){this.#f=this.#b?t:""}#Y(t){if(this.#t)for(let e of this.#t)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#b&&this.#L(this.#f,{deltaX:t,deltaY:e,fromKeyboard:!0})}#F(){this.#b=!1,this.#Y(-1),this.#P()}_stopResizingWithKeyboard(){this.#F(),this.div.focus()}select(){if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}}unselect(){this.isSelected&&(this.isSelected=!1,this.#l?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#d}set isEditing(t){this.#d=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#a=!0;let r=t/e,{style:i}=this.div;i.aspectRatio=r,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#y||=new Map;let{action:r}=t,i=this.#y.get(r);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),this.#y.delete(r),this.#y.size===0&&(this.#y=null)},n._telemetryTimeout),this.#y.set(r,i);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){let r=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),r.before(e)}return e}resetAnnotationElement(t){let{firstChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}},$_=class extends tt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}},X1=3285377520,qn=4294901760,Yr=65535,kp=class{constructor(t){this.h1=t?t&4294967295:X1,this.h2=t?t&4294967295:X1}update(t){let e,r;if(typeof t=="string"){e=new Uint8Array(t.length*2),r=0;for(let g=0,m=t.length;g<m;g++){let v=t.charCodeAt(g);v<=255?e[r++]=v:(e[r++]=v>>>8,e[r++]=v&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),r=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");let i=r>>2,s=r-i*4,o=new Uint32Array(e.buffer,0,i),a=0,l=0,c=this.h1,u=this.h2,d=3432918353,h=461845907,f=d&Yr,p=h&Yr;for(let g=0;g<i;g++)g&1?(a=o[g],a=a*d&qn|a*f&Yr,a=a<<15|a>>>17,a=a*h&qn|a*p&Yr,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[g],l=l*d&qn|l*f&Yr,l=l<<15|l>>>17,l=l*h&qn|l*p&Yr,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,s){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*d&qn|a*f&Yr,a=a<<15|a>>>17,a=a*h&qn|a*p&Yr,i&1?c^=a:u^=a}this.h1=c,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&qn|t*36045&Yr,e=e*4283543511&qn|((e<<16|t>>>16)*2950163797&qn)>>>16,t^=e>>>1,t=t*444984403&qn|t*60499&Yr,e=e*3301882366&qn|((e<<16|t>>>16)*3120437893&qn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}},z_=Object.freeze({map:null,hash:"",transfer:void 0}),du=class{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let r=this.#n.get(t);return r===void 0?e:Object.assign(e,r)}getRawValue(t){return this.#n.get(t)}remove(t){if(this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(let e of this.#n.values())if(e instanceof tt)return;this.onAnnotationEditor(null)}}setValue(t,e){let r=this.#n.get(t),i=!1;if(r!==void 0)for(let[s,o]of Object.entries(e))r[s]!==o&&(i=!0,r[s]=o);else i=!0,this.#n.set(t,e);i&&this.#r(),e instanceof tt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Lp(this)}get serializable(){if(this.#n.size===0)return z_;let t=new Map,e=new kp,r=[],i=Object.create(null),s=!1;for(let[o,a]of this.#n){let l=a instanceof tt?a.serialize(!1,i):a;l&&(t.set(o,l),e.update(`${o}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(let o of t.values())o.bitmap&&r.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:r}:z_}get editorStats(){let t=null,e=new Map;for(let r of this.#n.values()){if(!(r instanceof tt))continue;let i=r.telemetryFinalData;if(!i)continue;let{type:s}=i;e.has(s)||e.set(s,Object.getPrototypeOf(r).constructor),t||=Object.create(null);let o=t[s]||=new Map;for(let[a,l]of Object.entries(i)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));let u=c.get(l)??0;c.set(l,u+1)}}for(let[r,i]of e)t[r]=i.computeTelemetryFinalData(t[r]);return t}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;let t=[];for(let e of this.#n.values())!(e instanceof tt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return this.#t={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}},Lp=class extends du{#e;constructor(t){super();let{map:e,hash:r,transfer:i}=t.serializable,s=structuredClone(e,i?{transfer:i}:null);this.#e={map:s,hash:r,transfer:i}}get print(){Ke("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Ie(this,"modifiedIds",{ids:new Set,hash:""})}},G_=class{#e=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}loadSystemFont(i){return K(this,arguments,function*({systemFontInfo:t,disableFontFace:e,_inspectFont:r}){if(!(!t||this.#e.has(t.loadedName))){if(At(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:s,src:o,style:a}=t,l=new FontFace(s,o,a);this.addNativeFontFace(l);try{yield l.load(),this.#e.add(s),r?.(t)}catch{ge(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Ke("Not implemented: loadSystemFont without the Font Loading API.")}})}bind(t){return K(this,null,function*(){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){yield this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){let r=t.createNativeFontFace();if(r){this.addNativeFontFace(r);try{yield r.loaded}catch(i){throw ge(`Failed to load font '${r.family}': '${i}'.`),t.disableFontFace=!0,i}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;yield new Promise(r=>{let i=this._queueLoadingCallback(r);this._prepareFontLoadEvent(t,i)})}})}get isFontLoadingAPISupported(){let t=!!this._document?.fonts;return Ie(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Ie(this,"isSyncFontLoadingSupported",on||Pt.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(At(!i.done,"completeRequest() cannot be called twice."),i.done=!0;r.length>0&&r[0].done;){let s=r.shift();setTimeout(s.callback,0)}}let{loadingRequests:r}=this,i={done:!1,complete:e,callback:t};return r.push(i),i}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ie(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function r(C,_){return C.charCodeAt(_)<<24|C.charCodeAt(_+1)<<16|C.charCodeAt(_+2)<<8|C.charCodeAt(_+3)&255}function i(C,_,E,w){let x=C.substring(0,_),S=C.substring(_+E);return x+w+S}let s,o,a=this._document.createElement("canvas");a.width=1,a.height=1;let l=a.getContext("2d"),c=0;function u(C,_){if(++c>30){ge("Load test font never loaded."),_();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(u.bind(null,C,_))}let d=`lt${Date.now()}${this.loadTestFontId++}`,h=this._loadTestFont;h=i(h,976,d.length,d);let p=16,g=1482184792,m=r(h,p);for(s=0,o=d.length-3;s<o;s+=4)m=m-g+r(d,s)|0;s<d.length&&(m=m-g+r(d+"XXX",s)|0),h=i(h,p,4,d4(m));let v=`url(data:font/opentype;base64,${btoa(h)});`,y=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(y);let b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(let C of[t.loadedName,d]){let _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=C,b.append(_)}this._document.body.append(b),u(d,()=>{b.remove(),e.complete()})}},W_=class{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(let r in t)this[r]=t[r];this._inspectFont=e}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{let e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;let t=`url(data:${this.mimetype};base64,${dR(this.data)});`,e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let r=this.loadedName+"_path_"+e,i;try{i=t.get(r)}catch(o){ge(`getPathGenerator - ignoring character: "${o}".`)}let s=new Path2D(i||"");return this.fontExtraProperties||t.delete(r),this.compiledGlyphs[e]=s}};function x4(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(on)return n;let t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function w4(n){if(on&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return Eu(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Ep(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}var Y_=n=>typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0,D4=n=>typeof n=="object"&&typeof n?.name=="string",S4=m4.bind(null,Y_,D4),X_=class{#e=new Map;#t=Promise.resolve();postMessage(t,e){let r={data:structuredClone(t,e?{transfer:e}:null)};this.#t.then(()=>{for(let[i]of this.#e)i.call(this,r)})}addEventListener(t,e,r=null){let i=null;if(r?.signal instanceof AbortSignal){let{signal:s}=r;if(s.aborted){ge("LoopbackPort - cannot use an `aborted` signal.");return}let o=()=>this.removeEventListener(t,e);i=()=>s.removeEventListener("abort",o),s.addEventListener("abort",o)}this.#e.set(e,i)}removeEventListener(t,e){this.#e.get(e)?.(),this.#e.delete(e)}terminate(){for(let[,t]of this.#e)t?.();this.#e.clear()}},xp={DATA:1,ERROR:2},Dt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function K1(){}function _n(n){if(n instanceof Xr||n instanceof ou||n instanceof Op||n instanceof tl||n instanceof iu)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ke('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Xr(n.message);case"InvalidPDFException":return new ou(n.message);case"PasswordException":return new Op(n.message,n.code);case"ResponseException":return new tl(n.message,n.status,n.missing);case"UnknownErrorException":return new iu(n.message,n.details)}return new iu(n.message,n.toString())}var po=class{#e=new AbortController;constructor(t,e,r){this.sourceName=t,this.targetName=e,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),r.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#r(t);return}if(t.callback){let r=t.callbackId,i=this.callbackCapabilities[r];if(!i)throw new Error(`Cannot resolve callback ${r}`);if(delete this.callbackCapabilities[r],t.callback===xp.DATA)i.resolve(t.data);else if(t.callback===xp.ERROR)i.reject(_n(t.reason));else throw new Error("Unexpected callback case");return}let e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){let r=this.sourceName,i=t.sourceName,s=this.comObj;Promise.try(e,t.data).then(function(o){s.postMessage({sourceName:r,targetName:i,callback:xp.DATA,callbackId:t.callbackId,data:o})},function(o){s.postMessage({sourceName:r,targetName:i,callback:xp.ERROR,callbackId:t.callbackId,reason:_n(o)})});return}if(t.streamId){this.#n(t);return}e(t.data)}on(t,e){let r=this.actionHandler;if(r[t])throw new Error(`There is already an actionName called "${t}"`);r[t]=e}send(t,e,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},r)}sendWithPromise(t,e,r){let i=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[i]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},r)}catch(o){s.reject(o)}return s.promise}sendWithStream(t,e,r,i){let s=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{let u=Promise.withResolvers();return this.streamControllers[s]={controller:c,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:t,streamId:s,data:e,desiredSize:c.desiredSize},i),u.promise},pull:c=>{let u=Promise.withResolvers();return this.streamControllers[s].pullCall=u,l.postMessage({sourceName:o,targetName:a,stream:Dt.PULL,streamId:s,desiredSize:c.desiredSize}),u.promise},cancel:c=>{At(c instanceof Error,"cancel must have a valid reason");let u=Promise.withResolvers();return this.streamControllers[s].cancelCall=u,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:Dt.CANCEL,streamId:s,reason:_n(c)}),u.promise}},r)}#n(t){let e=t.streamId,r=this.sourceName,i=t.sourceName,s=this.comObj,o=this,a=this.actionHandler[t.action],l={enqueue(c,u=1,d){if(this.isCancelled)return;let h=this.desiredSize;this.desiredSize-=u,h>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:r,targetName:i,stream:Dt.ENQUEUE,streamId:e,chunk:c},d)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Dt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(c){At(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:r,targetName:i,stream:Dt.ERROR,streamId:e,reason:_n(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Dt.START_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Dt.START_COMPLETE,streamId:e,reason:_n(c)})})}#r(t){let e=t.streamId,r=this.sourceName,i=t.sourceName,s=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Dt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(_n(t.reason));break;case Dt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(_n(t.reason));break;case Dt.PULL:if(!a){s.postMessage({sourceName:r,targetName:i,stream:Dt.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||K1).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Dt.PULL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Dt.PULL_COMPLETE,streamId:e,reason:_n(c)})});break;case Dt.ENQUEUE:if(At(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Dt.CLOSE:if(At(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#s(o,e);break;case Dt.ERROR:At(o,"error should have stream controller"),o.controller.error(_n(t.reason)),this.#s(o,e);break;case Dt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(_n(t.reason)),this.#s(o,e);break;case Dt.CANCEL:if(!a)break;let l=_n(t.reason);Promise.try(a.onCancel||K1,l).then(function(){s.postMessage({sourceName:r,targetName:i,stream:Dt.CANCEL_COMPLETE,streamId:e,success:!0})},function(c){s.postMessage({sourceName:r,targetName:i,stream:Dt.CANCEL_COMPLETE,streamId:e,reason:_n(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}#s(t,e){return K(this,null,function*(){yield Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]})}destroy(){this.#e?.abort(),this.#e=null}},Fp=class{#e=!1;constructor({enableHWA:t=!1}){this.#e=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");let r=this._createCanvas(t,e);return{canvas:r,context:r.getContext("2d",{willReadFrequently:!this.#e})}}reset(t,e,r){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||r<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=r}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Ke("Abstract method `_createCanvas` called.")}},K_=class extends Fp{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){let r=this._document.createElement("canvas");return r.width=t,r.height=e,r}},Bp=class{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}fetch(e){return K(this,arguments,function*({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");let r=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(r).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${r}`)})})}_fetch(t){return K(this,null,function*(){Ke("Abstract method `_fetch` called.")})}},jp=class extends Bp{_fetch(t){return K(this,null,function*(){let e=yield xu(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Eu(e)})}},Gue=we(2489),Vp=class{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,r,i,s){return"none"}destroy(t=!1){}},Z_=class extends Vp{#e;#t;#n;#r;#s;#i;#o=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#r=t,this.#s=e}get#a(){return this.#t||=new Map}get#l(){return this.#i||=new Map}get#c(){if(!this.#n){let t=this.#s.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let r=this.#s.createElementNS(Ri,"svg");r.setAttribute("width",0),r.setAttribute("height",0),this.#n=this.#s.createElementNS(Ri,"defs"),t.append(r),r.append(this.#n),this.#s.body.append(t)}return this.#n}#h(t){if(t.length===1){let l=t[0],c=new Array(256);for(let d=0;d<256;d++)c[d]=l[d]/255;let u=c.join(",");return[u,u,u]}let[e,r,i]=t,s=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)s[l]=e[l]/255,o[l]=r[l]/255,a[l]=i[l]/255;return[s.join(","),o.join(","),a.join(",")]}#u(t){if(this.#e===void 0){this.#e="";let e=this.#s.URL;e!==this.#s.baseURI&&(pg(e)?ge('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=lR(e,""))}return`url(${this.#e}#${t})`}addFilter(t){if(!t)return"none";let e=this.#a.get(t);if(e)return e;let[r,i,s]=this.#h(t),o=t.length===1?r:`${r}${i}${s}`;if(e=this.#a.get(o),e)return this.#a.set(t,e),e;let a=`g_${this.#r}_transfer_map_${this.#o++}`,l=this.#u(a);this.#a.set(t,l),this.#a.set(o,l);let c=this.#p(a);return this.#m(r,i,s,c),l}addHCMFilter(t,e){let r=`${t}-${e}`,i="base",s=this.#l.get(i);if(s?.key===r||(s?(s.filter?.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},this.#l.set(i,s)),!t||!e))return s.url;let o=this.#v(t);t=ne.makeHexColor(...o);let a=this.#v(e);if(e=ne.makeHexColor(...a),this.#c.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return s.url;let l=new Array(256);for(let f=0;f<=255;f++){let p=f/255;l[f]=p<=.03928?p/12.92:((p+.055)/1.055)**2.4}let c=l.join(","),u=`g_${this.#r}_hcm_filter`,d=s.filter=this.#p(u);this.#m(c,c,c,d),this.#g(d);let h=(f,p)=>{let g=o[f]/255,m=a[f]/255,v=new Array(p+1);for(let y=0;y<=p;y++)v[y]=g+y/p*(m-g);return v.join(",")};return this.#m(h(0,5),h(1,5),h(2,5),d),s.url=this.#u(u),s.url}addAlphaFilter(t){let e=this.#a.get(t);if(e)return e;let[r]=this.#h([t]),i=`alpha_${r}`;if(e=this.#a.get(i),e)return this.#a.set(t,e),e;let s=`g_${this.#r}_alpha_map_${this.#o++}`,o=this.#u(s);this.#a.set(t,o),this.#a.set(i,o);let a=this.#p(s);return this.#b(r,a),o}addLuminosityFilter(t){let e=this.#a.get(t||"luminosity");if(e)return e;let r,i;if(t?([r]=this.#h([t]),i=`luminosity_${r}`):i="luminosity",e=this.#a.get(i),e)return this.#a.set(t,e),e;let s=`g_${this.#r}_luminosity_map_${this.#o++}`,o=this.#u(s);this.#a.set(t,o),this.#a.set(i,o);let a=this.#p(s);return this.#f(a),t&&this.#b(r,a),o}addHighlightHCMFilter(t,e,r,i,s){let o=`${e}-${r}-${i}-${s}`,a=this.#l.get(t);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#l.set(t,a)),!e||!r))return a.url;let[l,c]=[e,r].map(this.#v.bind(this)),u=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),d=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[h,f]=[i,s].map(this.#v.bind(this));d<u&&([u,d,h,f]=[d,u,f,h]),this.#c.style.color="";let p=(v,y,b)=>{let C=new Array(256),_=(d-u)/b,E=v/255,w=(y-v)/(255*b),x=0;for(let S=0;S<=b;S++){let A=Math.round(u+S*_),I=E+S*w;for(let O=x;O<=A;O++)C[O]=I;x=A+1}for(let S=x;S<256;S++)C[S]=C[x-1];return C.join(",")},g=`g_${this.#r}_hcm_${t}_filter`,m=a.filter=this.#p(g);return this.#g(m),this.#m(p(h[0],f[0],5),p(h[1],f[1],5),p(h[2],f[2],5),m),a.url=this.#u(g),a.url}destroy(t=!1){t&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#o=0)}#f(t){let e=this.#s.createElementNS(Ri,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){let e=this.#s.createElementNS(Ri,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#p(t){let e=this.#s.createElementNS(Ri,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#c.append(e),e}#d(t,e,r){let i=this.#s.createElementNS(Ri,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",r),t.append(i)}#m(t,e,r,i){let s=this.#s.createElementNS(Ri,"feComponentTransfer");i.append(s),this.#d(s,"feFuncR",t),this.#d(s,"feFuncG",e),this.#d(s,"feFuncB",r)}#b(t,e){let r=this.#s.createElementNS(Ri,"feComponentTransfer");e.append(r),this.#d(r,"feFuncA",t)}#v(t){return this.#c.style.color=t,gg(getComputedStyle(this.#c).getPropertyValue("color"))}},Hp=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return K(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");let r=`${this.baseUrl}${t}`;return this._fetch(r).catch(i=>{throw new Error(`Unable to load font data at: ${r}`)})})}_fetch(t){return K(this,null,function*(){Ke("Abstract method `_fetch` called.")})}},Up=class extends Hp{_fetch(t){return K(this,null,function*(){let e=yield xu(t,"arraybuffer");return new Uint8Array(e)})}},$p=class{constructor({baseUrl:t=null}){this.baseUrl=t}fetch(e){return K(this,arguments,function*({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");let r=`${this.baseUrl}${t}`;return this._fetch(r).catch(i=>{throw new Error(`Unable to load wasm data at: ${r}`)})})}_fetch(t){return K(this,null,function*(){Ke("Abstract method `_fetch` called.")})}},zp=class extends $p{_fetch(t){return K(this,null,function*(){let e=yield xu(t,"arraybuffer");return new Uint8Array(e)})}};if(on){let n;try{let t=process.getBuiltinModule("module").createRequire(import.meta.url);try{n=t("@napi-rs/canvas")}catch(e){ge(`Cannot load "@napi-rs/canvas" package: "${e}".`)}}catch(t){ge(`Cannot access the \`require\` function: "${t}".`)}globalThis.DOMMatrix||(n?.DOMMatrix?globalThis.DOMMatrix=n.DOMMatrix:ge("Cannot polyfill `DOMMatrix`, rendering may be broken.")),globalThis.ImageData||(n?.ImageData?globalThis.ImageData=n.ImageData:ge("Cannot polyfill `ImageData`, rendering may be broken.")),globalThis.Path2D||(n?.Path2D?globalThis.Path2D=n.Path2D:ge("Cannot polyfill `Path2D`, rendering may be broken.")),globalThis.navigator?.language||(globalThis.navigator={language:"en-US",platform:"",userAgent:""})}function oE(n){return K(this,null,function*(){let e=yield process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)})}var q_=class extends Vp{},Q_=class extends Fp{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}},J_=class extends Bp{_fetch(t){return K(this,null,function*(){return oE(t)})}},eC=class extends Hp{_fetch(t){return K(this,null,function*(){return oE(t)})}},tC=class extends $p{_fetch(t){return K(this,null,function*(){return oE(t)})}},Wue=we(7588),Xa="__forcedDependency",nC=class{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[Xa]:[]};#n=new Map;#r=[];#s=[];#i=[[1,0,0,1,0,0]];#o=[-1/0,-1/0,1/0,1/0];#a=new Float64Array([1/0,1/0,-1/0,-1/0]);#l=-1;#c=new Set;#h=new Map;#u=new Map;#f;#g;constructor(t){this.#f=t.width,this.#g=t.height}save(t){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[Xa]:{__proto__:this.#t[Xa]}},this.#o={__proto__:this.#o},this.#r.push([t,null]),this}restore(t){let e=Object.getPrototypeOf(this.#e);if(e===null)return this;this.#e=e,this.#t=Object.getPrototypeOf(this.#t),this.#o=Object.getPrototypeOf(this.#o);let r=this.#r.pop();return r!==void 0&&(r[1]=t),this}recordOpenMarker(t){return this.#r.push([t,null]),this}getOpenMarker(){return this.#r.length===0?null:this.#r.at(-1)[0]}recordCloseMarker(t){let e=this.#r.pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return this.#s.push([t,null]),this}endMarkedContent(t){let e=this.#s.pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return this.#i.push(ne.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(t,e){return this.#e[t]=e,this}recordIncrementalData(t,e){return this.#t[t].push(e),this}resetIncrementalData(t,e){return this.#t[t].length=0,this}recordNamedData(t,e){return this.#n.set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Xa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(let e of t)e in this.#e&&this.recordFutureForcedDependency(e,this.#e[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(let t of this.#c)this.recordFutureForcedDependency(Xa,t);return this}resetBBox(t){return this.#l=t,this.#a[0]=1/0,this.#a[1]=1/0,this.#a[2]=-1/0,this.#a[3]=-1/0,this}get hasPendingBBox(){return this.#l!==-1}recordClipBox(t,e,r,i,s,o){let a=ne.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform()),l=[1/0,1/0,-1/0,-1/0];ne.axialAlignedBoundingBox([r,s,i,o],a,l);let c=ne.intersect(this.#o,l);return c?(this.#o[0]=c[0],this.#o[1]=c[1],this.#o[2]=c[2],this.#o[3]=c[3]):(this.#o[0]=this.#o[1]=1/0,this.#o[2]=this.#o[3]=-1/0),this}recordBBox(t,e,r,i,s,o){let a=this.#o;if(a[0]===1/0)return this;let l=ne.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform());if(a[0]===-1/0)return ne.axialAlignedBoundingBox([r,s,i,o],l,this.#a),this;let c=[1/0,1/0,-1/0,-1/0];return ne.axialAlignedBoundingBox([r,s,i,o],l,c),this.#a[0]=Math.min(this.#a[0],Math.max(c[0],a[0])),this.#a[1]=Math.min(this.#a[1],Math.max(c[1],a[1])),this.#a[2]=Math.max(this.#a[2],Math.min(c[2],a[2])),this.#a[3]=Math.max(this.#a[3],Math.min(c[3],a[3])),this}recordCharacterBBox(t,e,r,i=1,s=0,o=0,a){let l=r.bbox,c,u;if(l&&(c=l[2]!==l[0]&&l[3]!==l[1]&&this.#u.get(r),c!==!1&&(u=[0,0,0,0],ne.axialAlignedBoundingBox(l,r.fontMatrix,u),(i!==1||s!==0||o!==0)&&ne.scaleMinMax([i,0,0,-i,s,o],u),c)))return this.recordBBox(t,e,u[0],u[2],u[1],u[3]);if(!a)return this.recordFullPageBBox(t);let d=a();return l&&u&&c===void 0&&(c=u[0]<=s-d.actualBoundingBoxLeft&&u[2]>=s+d.actualBoundingBoxRight&&u[1]<=o-d.actualBoundingBoxAscent&&u[3]>=o+d.actualBoundingBoxDescent,this.#u.set(r,c),c)?this.recordBBox(t,e,u[0],u[2],u[1],u[3]):this.recordBBox(t,e,s-d.actualBoundingBoxLeft,s+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#a[0]=Math.max(0,this.#o[0]),this.#a[1]=Math.max(0,this.#o[1]),this.#a[2]=Math.min(this.#f,this.#o[2]),this.#a[3]=Math.min(this.#g,this.#o[3]),this}getSimpleIndex(t){return this.#e[t]}recordDependencies(t,e){let r=this.#c,i=this.#e,s=this.#t;for(let o of e)o in this.#e?r.add(i[o]):o in s&&s[o].forEach(r.add,r);return this}copyDependenciesFromIncrementalOperation(t,e){let r=this.#h,i=this.#c;for(let s of this.#t[e])r.get(s).dependencies.forEach(i.add,i.add(s));return this}recordNamedDependency(t,e){return this.#n.has(e)&&this.#c.add(this.#n.get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[Xa]);let r=new Set(this.#c),i=this.#r.concat(this.#s),s=this.#l===t?{minX:this.#a[0],minY:this.#a[1],maxX:this.#a[2],maxY:this.#a[3]}:null;return this.#h.set(t,{bbox:s,pairs:i,dependencies:r}),e||(this.#l=-1),this.#c.clear(),this}bboxToClipBoxDropOperation(t){return this.#l!==-1&&(this.#l=-1,this.#o[0]=Math.max(this.#o[0],this.#a[0]),this.#o[1]=Math.max(this.#o[1],this.#a[1]),this.#o[2]=Math.min(this.#o[2],this.#a[2]),this.#o[3]=Math.min(this.#o[3],this.#a[3])),this.#c.clear(),this}_takePendingDependencies(){let t=this.#c;return this.#c=new Set,t}_extractOperation(t){let e=this.#h.get(t);return this.#h.delete(t),e}_pushPendingDependencies(t){for(let e of t)this.#c.add(e)}take(){return this.#u.clear(),Array.from(this.#h,([t,{bbox:e,pairs:r,dependencies:i}])=>(r.forEach(s=>s.forEach(i.add,i)),i.delete(t),{minX:(e?.minX??0)/this.#f,maxX:(e?.maxX??this.#f)/this.#f,minY:(e?.minY??0)/this.#g,maxY:(e?.maxY??this.#g)/this.#g,dependencies:Array.from(i).sort((s,o)=>s-o),idx:t}))}},Gp=class n{#e;#t;#n=0;#r;#s=0;constructor(t,e){if(t instanceof n)return t;this.#e=t,this.#r=t._takePendingDependencies(),this.#t=e}save(t){return this.#s++,this.#e.save(this.#t),this}restore(t){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#e.pushBaseTransform(t),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(t,e){return this.#e.recordSimpleData(t,this.#t),this}recordIncrementalData(t,e){return this.#e.recordIncrementalData(t,this.#t),this}resetIncrementalData(t,e){return this.#e.resetIncrementalData(t,this.#t),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return this.#e.recordFutureForcedDependency(t,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#e.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#e.hasPendingBBox||this.#e.resetBBox(this.#t),this}get hasPendingBBox(){return this.#e.hasPendingBBox}recordClipBox(t,e,r,i,s,o){return this.#e.recordClipBox(this.#t,e,r,i,s,o),this}recordBBox(t,e,r,i,s,o){return this.#e.recordBBox(this.#t,e,r,i,s,o),this}recordCharacterBBox(t,e,r,i,s,o,a){return this.#e.recordCharacterBBox(this.#t,e,r,i,s,o,a),this}recordFullPageBBox(t){return this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(t){return this.#e.getSimpleIndex(t)}recordDependencies(t,e){return this.#e.recordDependencies(this.#t,e),this}copyDependenciesFromIncrementalOperation(t,e){return this.#e.copyDependenciesFromIncrementalOperation(this.#t,e),this}recordNamedDependency(t,e){return this.#e.recordNamedDependency(this.#t,e),this}recordOperation(t){this.#e.recordOperation(this.#t,!0);let e=this.#e._extractOperation(this.#t);for(let r of e.dependencies)this.#r.add(r);return this.#r.delete(this.#t),this.#r.delete(null),this}bboxToClipBoxDropOperation(t){return this.#e.bboxToClipBoxDropOperation(this.#t),this}recordNestedDependencies(){this.#e._pushPendingDependencies(this.#r)}take(){throw new Error("Unreachable")}},Qn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Wt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rC(n,t){if(!t)return;let e=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,r),n.clip(i)}var hu=class{isModifyingCurrentTransform(){return!1}getPattern(){Ke("Abstract method `getPattern` called.")}},iC=class extends hu{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(let r of this._colorStops)e.addColorStop(r[0],r[1]);return e}getPattern(t,e,r,i){let s;if(i===Wt.STROKE||i===Wt.FILL){let o=e.current.getClippedPathBoundingBox(i,dt(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=e.cachedCanvases.getCanvas("pattern",a,l),u=c.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),r=ne.transform(r,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),rC(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),s=t.createPattern(c.canvas,"no-repeat");let d=new DOMMatrix(r);s.setTransform(d)}else rC(t,this._bbox),s=this._createGradient(t);return s}};function M_(n,t,e,r,i,s,o,a){let l=t.coords,c=t.colors,u=n.data,d=n.width*4,h;l[e+1]>l[r+1]&&(h=e,e=r,r=h,h=s,s=o,o=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=o,o=a,a=h),l[e+1]>l[r+1]&&(h=e,e=r,r=h,h=s,s=o,o=h);let f=(l[e]+t.offsetX)*t.scaleX,p=(l[e+1]+t.offsetY)*t.scaleY,g=(l[r]+t.offsetX)*t.scaleX,m=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(p>=y)return;let b=c[s],C=c[s+1],_=c[s+2],E=c[o],w=c[o+1],x=c[o+2],S=c[a],A=c[a+1],I=c[a+2],O=Math.round(p),k=Math.round(y),$,U,P,M,D,T,Y,Q;for(let ie=O;ie<=k;ie++){if(ie<m){let V=ie<p?0:(p-ie)/(p-m);$=f-(f-g)*V,U=b-(b-E)*V,P=C-(C-w)*V,M=_-(_-x)*V}else{let V;ie>y?V=1:m===y?V=0:V=(m-ie)/(m-y),$=g-(g-v)*V,U=E-(E-S)*V,P=w-(w-A)*V,M=x-(x-I)*V}let q;ie<p?q=0:ie>y?q=1:q=(p-ie)/(p-y),D=f-(f-v)*q,T=b-(b-S)*q,Y=C-(C-A)*q,Q=_-(_-I)*q;let Ee=Math.round(Math.min($,D)),je=Math.round(Math.max($,D)),W=d*ie+Ee*4;for(let V=Ee;V<=je;V++)q=($-V)/($-D),q<0?q=0:q>1&&(q=1),u[W++]=U-(U-T)*q|0,u[W++]=P-(P-Y)*q|0,u[W++]=M-(M-Q)*q|0,u[W++]=255}}function T4(n,t,e){let r=t.coords,i=t.colors,s,o;switch(t.type){case"lattice":let a=t.verticesPerRow,l=Math.floor(r.length/a)-1,c=a-1;for(s=0;s<l;s++){let u=s*a;for(let d=0;d<c;d++,u++)M_(n,e,r[u],r[u+1],r[u+a],i[u],i[u+1],i[u+a]),M_(n,e,r[u+a+1],r[u+1],r[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(s=0,o=r.length;s<o;s+=3)M_(n,e,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}var sC=class extends hu{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,r){let a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(c*t[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),f=c/d,p=u/h,g={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/f,scaleY:1/p},m=d+4,v=h+4,y=r.getCanvas("mesh",m,v),b=y.context,C=b.createImageData(d,h);if(e){let E=C.data;for(let w=0,x=E.length;w<x;w+=4)E[w]=e[0],E[w+1]=e[1],E[w+2]=e[2],E[w+3]=255}for(let E of this._figures)T4(C,E,g);return b.putImageData(C,2,2),{canvas:y.canvas,offsetX:a-2*f,offsetY:l-2*p,scaleX:f,scaleY:p}}isModifyingCurrentTransform(){return!0}getPattern(t,e,r,i){rC(t,this._bbox);let s=new Float32Array(2);if(i===Wt.SHADING)ne.singularValueDecompose2dScale(dt(t),s);else if(this.matrix){ne.singularValueDecompose2dScale(this.matrix,s);let[a,l]=s;ne.singularValueDecompose2dScale(e.baseTransform,s),s[0]*=a,s[1]*=l}else ne.singularValueDecompose2dScale(e.baseTransform,s);let o=this._createMeshCanvas(s,i===Wt.SHADING?null:this._background,e.cachedCanvases);return i!==Wt.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}},oC=class extends hu{getPattern(){return"hotpink"}};function A4(n){switch(n[0]){case"RadialAxial":return new iC(n);case"Mesh":return new sC(n);case"Dummy":return new oC}throw new Error(`Unknown IR type: ${n[0]}`)}var Z1={COLORED:1,UNCOLORED:2},I4=(()=>{class n{static MAX_PATTERN_SIZE=3e3;constructor(e,r,i,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=r,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e){let{bbox:r,operatorList:i,paintType:s,tilingType:o,color:a,canvasGraphicsFactory:l}=this,{xstep:c,ystep:u}=this;c=Math.abs(c),u=Math.abs(u),fg("TilingType: "+o);let d=r[0],h=r[1],f=r[2],p=r[3],g=f-d,m=p-h,v=new Float32Array(2);ne.singularValueDecompose2dScale(this.matrix,v);let[y,b]=v;ne.singularValueDecompose2dScale(this.baseTransform,v);let C=y*v[0],_=b*v[1],E=g,w=m,x=!1,S=!1,A=Math.ceil(c*C),I=Math.ceil(u*_),O=Math.ceil(g*C),k=Math.ceil(m*_);A>=O?E=c:x=!0,I>=k?w=u:S=!0;let $=this.getSizeAndScale(E,this.ctx.canvas.width,C),U=this.getSizeAndScale(w,this.ctx.canvas.height,_),P=e.cachedCanvases.getCanvas("pattern",$.size,U.size),M=P.context,D=l.createCanvasGraphics(M);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,s,a),M.translate(-$.scale*d,-U.scale*h),D.transform(0,$.scale,0,0,U.scale,0,0),M.save(),D.dependencyTracker?.save(),this.clipBbox(D,d,h,f,p),D.baseTransform=dt(D.ctx),D.executeOperatorList(i),D.endDrawing(),D.dependencyTracker?.restore().recordNestedDependencies?.(),M.restore(),x||S){let T=P.canvas;x&&(E=c),S&&(w=u);let Y=this.getSizeAndScale(E,this.ctx.canvas.width,C),Q=this.getSizeAndScale(w,this.ctx.canvas.height,_),ie=Y.size,q=Q.size,Ee=e.cachedCanvases.getCanvas("pattern-workaround",ie,q),je=Ee.context,W=x?Math.floor(g/c):0,V=S?Math.floor(m/u):0;for(let N=0;N<=W;N++)for(let F=0;F<=V;F++)je.drawImage(T,ie*N,q*F,ie,q,0,0,ie,q);return{canvas:Ee.canvas,scaleX:Y.scale,scaleY:Q.scale,offsetX:d,offsetY:h}}return{canvas:P.canvas,scaleX:$.scale,scaleY:U.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,r,i){let s=Math.max(n.MAX_PATTERN_SIZE,r),o=Math.ceil(e*i);return o>=s?o=s:i=o/e,{scale:i,size:o}}clipBbox(e,r,i,s,o){let a=s-r,l=o-i;e.ctx.rect(r,i,a,l),ne.axialAlignedBoundingBox([r,i,s,o],dt(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,r,i){let s=e.ctx,o=e.current;switch(r){case Z1.COLORED:let{fillStyle:a,strokeStyle:l}=this.ctx;s.fillStyle=o.fillColor=a,s.strokeStyle=o.strokeColor=l;break;case Z1.UNCOLORED:s.fillStyle=s.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new k_(`Unsupported paint type: ${r}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,r,i,s){let o=i;s!==Wt.SHADING&&(o=ne.transform(o,r.baseTransform),this.matrix&&(o=ne.transform(o,this.matrix)));let a=this.createPatternCanvas(r),l=new DOMMatrix(o);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);let c=e.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}return n})();function M4({src:n,srcPos:t=0,dest:e,width:r,height:i,nonBlackColor:s=4294967295,inverseDecode:o=!1}){let a=Pt.isLittleEndian?4278190080:255,[l,c]=o?[s,a]:[a,s],u=r>>3,d=r&7,h=n.length;e=new Uint32Array(e.buffer);let f=0;for(let p=0;p<i;p++){for(let m=t+u;t<m;t++){let v=t<h?n[t]:255;e[f++]=v&128?c:l,e[f++]=v&64?c:l,e[f++]=v&32?c:l,e[f++]=v&16?c:l,e[f++]=v&8?c:l,e[f++]=v&4?c:l,e[f++]=v&2?c:l,e[f++]=v&1?c:l}if(d===0)continue;let g=t<h?n[t++]:255;for(let m=0;m<d;m++)e[f++]=g&1<<7-m?c:l}return{srcPos:t,destPos:f}}var q1=16,Q1=100,R4=15,J1=10,Cn=16,R_=new DOMMatrix,Pn=new Float32Array(2),Qa=new Float32Array([1/0,1/0,-1/0,-1/0]);function O4(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,r){t.translate(e,r),this.__originalTranslate(e,r)},n.scale=function(e,r){t.scale(e,r),this.__originalScale(e,r)},n.transform=function(e,r,i,s,o,a){t.transform(e,r,i,s,o,a),this.__originalTransform(e,r,i,s,o,a)},n.setTransform=function(e,r,i,s,o,a){t.setTransform(e,r,i,s,o,a),this.__originalSetTransform(e,r,i,s,o,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,r){t.moveTo(e,r),this.__originalMoveTo(e,r)},n.lineTo=function(e,r){t.lineTo(e,r),this.__originalLineTo(e,r)},n.bezierCurveTo=function(e,r,i,s,o,a){t.bezierCurveTo(e,r,i,s,o,a),this.__originalBezierCurveTo(e,r,i,s,o,a)},n.rect=function(e,r,i,s){t.rect(e,r,i,s),this.__originalRect(e,r,i,s)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}var aC=class{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,r){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,r)):(i=this.canvasFactory.create(e,r),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}};function wp(n,t,e,r,i,s,o,a,l,c){let[u,d,h,f,p,g]=dt(n);if(d===0&&h===0){let y=o*u+p,b=Math.round(y),C=a*f+g,_=Math.round(C),E=(o+l)*u+p,w=Math.abs(Math.round(E)-b)||1,x=(a+c)*f+g,S=Math.abs(Math.round(x)-_)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(f),b,_),n.drawImage(t,e,r,i,s,0,0,w,S),n.setTransform(u,d,h,f,p,g),[w,S]}if(u===0&&f===0){let y=a*h+p,b=Math.round(y),C=o*d+g,_=Math.round(C),E=(a+c)*h+p,w=Math.abs(Math.round(E)-b)||1,x=(o+l)*d+g,S=Math.abs(Math.round(x)-_)||1;return n.setTransform(0,Math.sign(d),Math.sign(h),0,b,_),n.drawImage(t,e,r,i,s,0,0,S,w),n.setTransform(u,d,h,f,p,g),[S,w]}n.drawImage(t,e,r,i,s,o,a,l,c);let m=Math.hypot(u,d),v=Math.hypot(h,f);return[m*l,v*c]}var Wp=class{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=P_;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Gt.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,r){r?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Qa.slice()}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Wt.FILL,e=null){let r=this.minMax.slice();if(t===Wt.STROKE){e||Ke("Stroke bounding box must include transform."),ne.singularValueDecompose2dScale(e,Pn);let i=Pn[0]*this.lineWidth/2,s=Pn[1]*this.lineWidth/2;r[0]-=i,r[1]-=s,r[2]+=i,r[3]+=s}return r}updateClipFromPath(){let t=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Qa,0)}getClippedPathBoundingBox(t=Wt.FILL,e=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(t,e))}};function eR(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}let e=t.height,r=t.width,i=e%Cn,s=(e-i)/Cn,o=i===0?s:s+1,a=n.createImageData(r,Cn),l=0,c,u=t.data,d=a.data,h,f,p,g;if(t.kind===Ip.GRAYSCALE_1BPP){let m=u.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),y=v.length,b=r+7>>3,C=4294967295,_=Pt.isLittleEndian?4278190080:255;for(h=0;h<o;h++){for(p=h<s?Cn:i,c=0,f=0;f<p;f++){let E=m-l,w=0,x=E>b?r:E*8-7,S=x&-8,A=0,I=0;for(;w<S;w+=8)I=u[l++],v[c++]=I&128?C:_,v[c++]=I&64?C:_,v[c++]=I&32?C:_,v[c++]=I&16?C:_,v[c++]=I&8?C:_,v[c++]=I&4?C:_,v[c++]=I&2?C:_,v[c++]=I&1?C:_;for(;w<x;w++)A===0&&(I=u[l++],A=128),v[c++]=I&A?C:_,A>>=1}for(;c<y;)v[c++]=0;n.putImageData(a,0,h*Cn)}}else if(t.kind===Ip.RGBA_32BPP){for(f=0,g=r*Cn*4,h=0;h<s;h++)d.set(u.subarray(l,l+g)),l+=g,n.putImageData(a,0,f),f+=Cn;h<o&&(g=r*i*4,d.set(u.subarray(l,l+g)),n.putImageData(a,0,f))}else if(t.kind===Ip.RGB_24BPP)for(p=Cn,g=r*p,h=0;h<o;h++){for(h>=s&&(p=i,g=r*p),c=0,f=g;f--;)d[c++]=u[l++],d[c++]=u[l++],d[c++]=u[l++],d[c++]=255;n.putImageData(a,0,h*Cn)}else throw new Error(`bad image kind: ${t.kind}`)}function tR(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}let e=t.height,r=t.width,i=e%Cn,s=(e-i)/Cn,o=i===0?s:s+1,a=n.createImageData(r,Cn),l=0,c=t.data,u=a.data;for(let d=0;d<o;d++){let h=d<s?Cn:i;({srcPos:l}=M4({src:c,srcPos:l,dest:u,width:r,height:h,nonBlackColor:0})),n.putImageData(a,0,d*Cn)}}function Qc(n,t){let e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(let r of e)n[r]!==void 0&&(t[r]=n[r]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Dp(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);let{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function nR(n,t){if(t)return!0;ne.singularValueDecompose2dScale(n,Pn);let e=Math.fround(Pi.pixelRatio*bs.PDF_TO_CSS_UNITS);return Pn[0]<=e&&Pn[1]<=e}var N4=["butt","round","square"],P4=["miter","round","bevel"],k4={},rR={},Ja=class n{constructor(t,e,r,i,s,{optionalContentConfig:o,markedContentStack:a=null},l,c,u){this.ctx=t,this.current=new Wp(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=i,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new aC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(t,e,r=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):r}beginDrawing({transform:t,viewport:e,transparency:r=!1,background:i=null}){let s=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=a,r){let l=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...dt(this.compositeCtx))}this.ctx.save(),Dp(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=dt(this.ctx)}executeOperatorList(t,e,r,i,s){let o=t.argsArray,a=t.fnArray,l=e||0,c=o.length;if(c===l)return l;let u=c-l>J1&&typeof r=="function",d=u?Date.now()+R4:0,h=0,f=this.commonObjs,p=this.objs,g,m;for(;;){if(i!==void 0&&l===i.nextBreakPoint)return i.breakIt(l,r),l;if(!s||s.has(l))if(g=a[l],m=o[l]??null,g!==su.dependency)m===null?this[g](l):this[g](l,...m);else for(let v of m){this.dependencyTracker?.recordNamedData(v,l);let y=v.startsWith("g_")?f:p;if(!y.has(v))return y.get(v,r),l}if(l++,l===c)return l;if(u&&++h>J1){if(Date.now()>d)return r(),l;h=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(let t of this._cachedBitmapsMap.values()){for(let e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){let r=t.width??t.displayWidth,i=t.height??t.displayHeight,s=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=r,l=i,c="prescale1",u,d;for(;s>2&&a>1||o>2&&l>1;){let h=a,f=l;s>2&&a>1&&(h=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),s/=a/h),o>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/f),u=this.cachedCanvases.getCanvas(c,h,f),d=u.context,d.clearRect(0,0,h,f),d.drawImage(t,0,0,a,l,0,0,h,f),t=u.canvas,a=h,l=f,c=c==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t,e){let r=this.ctx,{width:i,height:s}=e,o=this.current.fillColor,a=this.current.patternFill,l=dt(r),c,u,d,h;if((e.bitmap||e.data)&&e.count>1){let A=e.bitmap||e.data.buffer;u=JSON.stringify(a?l:[l.slice(0,4),o]),c=this._cachedBitmapsMap.get(A),c||(c=new Map,this._cachedBitmapsMap.set(A,c));let I=c.get(u);if(I&&!a){let O=Math.round(Math.min(l[0],l[2])+l[4]),k=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(t,Qn.transformAndFill),{canvas:I,offsetX:O,offsetY:k}}d=I}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),tR(h.context,e));let f=ne.transform(l,[1/i,0,0,-1/s,0,0]);f=ne.transform(f,[1,0,0,1,0,-s]);let p=Qa.slice();ne.axialAlignedBoundingBox([0,0,i,s],f,p);let[g,m,v,y]=p,b=Math.round(v-g)||1,C=Math.round(y-m)||1,_=this.cachedCanvases.getCanvas("fillCanvas",b,C),E=_.context,w=g,x=m;E.translate(-w,-x),E.transform(...f),d||(d=this._scaleImage(h.canvas,Wr(E)),d=d.img,c&&a&&c.set(u,d)),E.imageSmoothingEnabled=nR(dt(E),e.interpolate),wp(E,d,0,0,d.width,d.height,0,0,i,s),E.globalCompositeOperation="source-in";let S=ne.transform(Wr(E),[1,0,0,1,-w,-x]);return E.fillStyle=a?o.getPattern(r,this,S,Wt.FILL):o,E.fillRect(0,0,i,s),c&&!a&&(this.cachedCanvases.delete("fillCanvas"),c.set(u,_.canvas)),this.dependencyTracker?.recordDependencies(t,Qn.transformAndFill),{canvas:_.canvas,offsetX:Math.round(w),offsetY:Math.round(x)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=N4[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=P4[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,r){this.dependencyTracker?.recordSimpleData("dash",t);let i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=r)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(let[r,i]of e)switch(r){case"LW":this.setLineWidth(t,i);break;case"LC":this.setLineCap(t,i);break;case"LJ":this.setLineJoin(t,i);break;case"ML":this.setMiterLimit(t,i);break;case"D":this.setDash(t,i[0],i[1]);break;case"RI":this.setRenderingIntent(t,i);break;case"FL":this.setFlatness(t,i);break;case"Font":this.setFont(t,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");let e=this.ctx.canvas.width,r=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,r);this.suspendedCtx=this.ctx;let o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Qc(this.suspendedCtx,o),O4(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Qc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask,r=this.suspendedCtx;this.composeSMask(r,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,r,i){let s=i[0],o=i[1],a=i[2]-s,l=i[3]-o;a===0||l===0||(this.genericComposeSMask(e.context,r,a,l,e.subtype,e.backdrop,e.transferMap,s,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(r.canvas,0,0),t.restore())}genericComposeSMask(t,e,r,i,s,o,a,l,c,u,d){let h=t.canvas,f=l-u,p=c-d;if(o)if(f<0||p<0||f+r>h.width||p+i>h.height){let m=this.cachedCanvases.getCanvas("maskExtension",r,i),v=m.context;v.drawImage(h,-f,-p),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,r,i),v.globalCompositeOperation="source-over",h=m.canvas,f=p=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);let m=new Path2D;m.rect(f,p,r,i),t.clip(m),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(f,p,r,i),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),s==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):s==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));let g=new Path2D;g.rect(l,c,r,i),e.clip(g),e.globalCompositeOperation="destination-in",e.drawImage(h,f,p,r,i,l,c,r,i),e.restore()}save(t){this.inSMaskMode&&Qc(this.ctx,this.suspendedCtx),this.ctx.save();let e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Qc(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,r,i,s,o,a){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,r,i,s,o,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,r,i){let[s]=r;if(!i){s||=r[0]=new Path2D,this[e](t,s);return}if(this.dependencyTracker!==null){let o=e===su.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,i[0]-o,i[2]+o,i[1]-o,i[3]+o).recordDependencies(t,["transform"])}if(!(s instanceof Path2D)){let o=r[0]=new Path2D;for(let a=0,l=s.length;a<l;)switch(s[a++]){case Cp.moveTo:o.moveTo(s[a++],s[a++]);break;case Cp.lineTo:o.lineTo(s[a++],s[a++]);break;case Cp.curveTo:o.bezierCurveTo(s[a++],s[a++],s[a++],s[a++],s[a++],s[a++]);break;case Cp.closePath:o.closePath();break;default:ge(`Unrecognized drawing path operator: ${s[a-1]}`);break}s=o}ne.axialAlignedBoundingBox(i,dt(this.ctx),this.current.minMax),this[e](t,s),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,r=!0){let i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){let o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Wr(i),Wt.STROKE),o){let a=new Path2D;a.addPath(e,i.getTransform().invertSelf().multiplySelf(o)),e=a}this.rescaleAndStroke(e,!1),i.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Qn.stroke),r&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Wt.STROKE,dt(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,r=!0){let i=this.ctx,s=this.current.fillColor,o=this.current.patternFill,a=!1;if(o){let c=s.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(t),i.save(),i.fillStyle=s.getPattern(i,this,Wr(i),Wt.FILL),c){let u=new Path2D;u.addPath(e,i.getTransform().invertSelf().multiplySelf(c)),e=u}a=!0}let l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(i.fill(e,"evenodd"),this.pendingEOFill=!1):i.fill(e)),this.dependencyTracker?.recordDependencies(t,Qn.fill),a&&(i.restore(),this.dependencyTracker?.restore(t)),r&&this.consumePath(t,e,l)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Qn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=k4}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=rR}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){let e=this.pendingTextPaths,r=this.ctx;if(this.dependencyTracker){let{dependencyTracker:i}=this;e!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",t),i.recordCloseMarker(t)}if(e!==void 0){let i=new Path2D,s=r.getTransform().invertSelf();for(let{transform:o,x:a,y:l,fontSize:c,path:u}of e)u&&i.addPath(u,new DOMMatrix(o).preMultiplySelf(s).translate(a,l).scale(c,-c));r.clip(i)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,r){this.dependencyTracker?.recordSimpleData("font",t).recordNamedDependency(t,e);let i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||P_,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ge("Invalid font matrix for font "+e),r<0?(r=-r,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=r,i.isType3Font)return;let o=i.loadedName||"sans-serif",a=i.systemFontInfo?.css||`"${o}", ${i.fallbackName}`,l="normal";i.black?l="900":i.bold&&(l="bold");let c=i.italic?"italic":"normal",u=r;r<q1?u=q1:r>Q1&&(u=Q1),this.current.fontSizeScale=r/u,this.ctx.font=`${c} ${l} ${u}px ${a}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,r){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=r}setLeadingMoveText(t,e,r){this.setLeading(t,-r),this.moveText(t,e,r)}setTextMatrix(t,e){this.dependencyTracker?.recordSimpleData("textMatrix",t);let{current:r}=this;r.textMatrix=e,r.textMatrixScale=Math.hypot(e[0],e[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,e,r){let i=new Path2D;return i.addPath(t,new DOMMatrix(r).invertSelf().multiplySelf(e)),i}paintChar(t,e,r,i,s,o){let a=this.ctx,l=this.current,c=l.font,u=l.textRenderingMode,d=l.fontSize/l.fontSizeScale,h=u&Gt.FILL_STROKE_MASK,f=!!(u&Gt.ADD_TO_PATH_FLAG),p=l.patternFill&&!c.missingFile,g=l.patternStroke&&!c.missingFile,m;if((c.disableFontFace||f||p||g)&&!c.missingFile&&(m=c.getPathGenerator(this.commonObjs,e)),m&&(c.disableFontFace||p||g)){a.save(),a.translate(r,i),a.scale(d,-d),this.dependencyTracker?.recordCharacterBBox(t,a,c);let v;if(h===Gt.FILL||h===Gt.FILL_STROKE)if(s){v=a.getTransform(),a.setTransform(...s);let y=this.#n(m,v,s);a.fill(y)}else a.fill(m);if(h===Gt.STROKE||h===Gt.FILL_STROKE)if(o){v||=a.getTransform(),a.setTransform(...o);let{a:y,b,c:C,d:_}=v,E=ne.inverseTransform(o),w=ne.transform([y,b,C,_,0,0],E);ne.singularValueDecompose2dScale(w,Pn),a.lineWidth*=Math.max(Pn[0],Pn[1])/d,a.stroke(this.#n(m,v,o))}else a.lineWidth/=d,a.stroke(m);a.restore()}else(h===Gt.FILL||h===Gt.FILL_STROKE)&&(a.fillText(e,r,i),this.dependencyTracker?.recordCharacterBBox(t,a,c,d,r,i,()=>a.measureText(e))),(h===Gt.STROKE||h===Gt.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,a,c,d,r,i,()=>a.measureText(e)).recordDependencies(t,Qn.stroke),a.strokeText(e,r,i));f&&((this.pendingTextPaths||=[]).push({transform:dt(a),x:r,y:i,fontSize:d,path:m}),this.dependencyTracker?.recordCharacterBBox(t,a,c,d,r,i))}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,r=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){r=!0;break}return Ie(this,"isFontSubpixelAAEnabled",r)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Qn.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Gt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());let r=this.current,i=r.font;if(i.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t);return}let s=r.fontSize;if(s===0){this.dependencyTracker?.recordOperation(t);return}let o=this.ctx,a=r.fontSizeScale,l=r.charSpacing,c=r.wordSpacing,u=r.fontDirection,d=r.textHScale*u,h=e.length,f=i.vertical,p=f?1:-1,g=i.defaultVMetrics,m=s*r.fontMatrix[0],v=r.textRenderingMode===Gt.FILL&&!i.disableFontFace&&!r.patternFill;o.save(),r.textMatrix&&o.transform(...r.textMatrix),o.translate(r.x,r.y+r.textRise),u>0?o.scale(d,-1):o.scale(d,1);let y,b;if(r.patternFill){o.save();let x=r.fillColor.getPattern(o,this,Wr(o),Wt.FILL);y=dt(o),o.restore(),o.fillStyle=x}if(r.patternStroke){o.save();let x=r.strokeColor.getPattern(o,this,Wr(o),Wt.STROKE);b=dt(o),o.restore(),o.strokeStyle=x}let C=r.lineWidth,_=r.textMatrixScale;if(_===0||C===0){let x=r.textRenderingMode&Gt.FILL_STROKE_MASK;(x===Gt.STROKE||x===Gt.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=_;if(a!==1&&(o.scale(a,a),C/=a),o.lineWidth=C,i.isInvalidPDFjsFont){let x=[],S=0;for(let I of e)x.push(I.unicode),S+=I.width;let A=x.join("");if(o.fillText(A,0,0),this.dependencyTracker!==null){let I=o.measureText(A);this.dependencyTracker.recordBBox(t,this.ctx,-I.actualBoundingBoxLeft,I.actualBoundingBoxRight,-I.actualBoundingBoxAscent,I.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}r.x+=S*m*d,o.restore(),this.compose();return}let E=0,w;for(w=0;w<h;++w){let x=e[w];if(typeof x=="number"){E+=p*x*s/1e3;continue}let S=!1,A=(x.isSpace?c:0)+l,I=x.fontChar,O=x.accent,k,$,U=x.width;if(f){let D=x.vmetric||g,T=-(x.vmetric?D[1]:U*.5)*m,Y=D[2]*m;U=D?-D[0]:U,k=T/a,$=(E+Y)/a}else k=E/a,$=0;let P;if(i.remeasure&&U>0){P=o.measureText(I);let D=P.width*1e3/s*a;if(U<D&&this.isFontSubpixelAAEnabled){let T=U/D;S=!0,o.save(),o.scale(T,1),k/=T}else U!==D&&(k+=(U-D)/2e3*s/a)}if(this.contentVisible&&(x.isInFont||i.missingFile)){if(v&&!O)o.fillText(I,k,$),this.dependencyTracker?.recordCharacterBBox(t,o,P?{bbox:null}:i,s/a,k,$,()=>P??o.measureText(I));else if(this.paintChar(t,I,k,$,y,b),O){let D=k+s*O.offset.x/a,T=$-s*O.offset.y/a;this.paintChar(t,O.fontChar,D,T,y,b)}}let M=f?U*m-A*u:U*m+A*u;E+=M,S&&o.restore()}f?r.y-=E:r.x+=E*d,o.restore(),this.compose(),this.dependencyTracker?.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){let r=this.ctx,i=this.current,s=i.font,o=i.fontSize,a=i.fontDirection,l=s.vertical?1:-1,c=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||P_,f=e.length,p=i.textRenderingMode===Gt.INVISIBLE,g,m,v,y;if(p||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,r.save(),i.textMatrix&&r.transform(...i.textMatrix),r.translate(i.x,i.y+i.textRise),r.scale(d,a);let b=this.dependencyTracker;for(this.dependencyTracker=b?new Gp(b,t):null,g=0;g<f;++g){if(m=e[g],typeof m=="number"){y=l*m*o/1e3,this.ctx.translate(y,0),i.x+=y*d;continue}let C=(m.isSpace?u:0)+c,_=s.charProcOperatorList[m.operatorListId];_?this.contentVisible&&(this.save(),r.scale(o,o),r.transform(...h),this.executeOperatorList(_),this.restore()):ge(`Type3 character "${m.operatorListId}" is not available.`);let E=[m.width,0];ne.applyTransform(E,h),v=E[0]*o+C,r.translate(v,0),i.x+=v*d}r.restore(),b&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=b)}setCharWidth(t,e,r){}setCharWidthAndBounds(t,e,r,i,s,o,a){let l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),this.dependencyTracker?.recordBBox(t,this.ctx,i,o,s,a).recordClipBox(t,this.ctx,i,o,s,a),this.endPath(t)}getColorN_Pattern(t,e){let r;if(e[0]==="TilingPattern"){let i=this.baseTransform||dt(this.ctx),s={createCanvasGraphics:o=>new n(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Gp(this.dependencyTracker,t):null)};r=new I4(e,this.ctx,s,i)}else r=this._getPattern(t,e[1],e[2]);return r}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,r=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=A4(this.getObject(t,e)),this.cachedPatterns.set(e,i)),r&&(i.matrix=r),i}shadingFill(t,e){if(!this.contentVisible)return;let r=this.ctx;this.save(t);let i=this._getPattern(t,e);r.fillStyle=i.getPattern(r,this,Wr(r),Wt.SHADING);let s=Wr(r);if(s){let{width:o,height:a}=r.canvas,l=Qa.slice();ne.axialAlignedBoundingBox([0,0,o,a],s,l);let[c,u,d,h]=l;this.ctx.fillRect(c,u,d-c,h-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Qn.transform).recordDependencies(t,Qn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Ke("Should not call beginInlineImage")}beginImageData(){Ke("Should not call beginImageData")}paintFormXObjectBegin(t,e,r){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=dt(this.ctx),r)){ne.axialAlignedBoundingBox(r,this.baseTransform,this.current.minMax);let[i,s,o,a]=r,l=new Path2D;l.rect(i,s,o-i,a-s),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(t,this.ctx,i,o,s,a),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let r=this.ctx;e.isolated||fg("TODO: Support non-isolated groups."),e.knockout&&ge("Knockout groups not supported.");let i=dt(r);if(e.matrix&&r.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=Qa.slice();ne.axialAlignedBoundingBox(e.bbox,dt(r),s);let o=[0,0,r.canvas.width,r.canvas.height];s=ne.intersect(s,o)||[0,0,0,0];let a=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-a,1),u=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);let h=this.cachedCanvases.getCanvas(d,c,u),f=h.context;f.translate(-a,-l),f.transform(...i);let p=new Path2D,[g,m,v,y]=e.bbox;if(p.rect(g,m,v-g,y-m),e.matrix){let b=new Path2D;b.addPath(p,new DOMMatrix(e.matrix)),p=b}f.clip(p),e.smask&&this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:l,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(r.setTransform(1,0,0,1,0,0),r.translate(a,l),r.save()),Qc(r,f),this.ctx=f,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;let r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();let s=dt(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...s);let o=Qa.slice();ne.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],s,o),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,r,i,s,o){if(this.#e(),Dp(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),r){let a=r[2]-r[0],l=r[3]-r[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=r[0],i[5]-=r[1],r=r.slice(),r[0]=r[1]=0,r[2]=a,r[3]=l,ne.singularValueDecompose2dScale(dt(this.ctx),Pn);let{viewportScale:c}=this,u=Math.ceil(a*this.outputScaleX*c),d=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(u,d);let{canvas:h,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(Pn[0],0,0,-Pn[1],0,l*Pn[1]),Dp(this.ctx)}else{Dp(this.ctx),this.endPath(t);let c=new Path2D;c.rect(r[0],r[1],a,l),this.ctx.clip(c)}}this.current=new Wp(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...i),this.transform(t,...s)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;let r=e.count;e=this.getObject(t,e.data,e),e.count=r;let i=this.ctx,s=this._createMaskCanvas(t,e),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,s.offsetX,s.offsetX+o.width,s.offsetY,s.offsetY+o.height).recordOperation(t),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,r,i=0,s=0,o,a){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);let l=this.ctx;l.save();let c=dt(l);l.transform(r,i,s,o,0,0);let u=this._createMaskCanvas(t,e);l.setTransform(1,0,0,1,u.offsetX-c[4],u.offsetY-c[5]),this.dependencyTracker?.resetBBox(t);for(let d=0,h=a.length;d<h;d+=2){let f=ne.transform(c,[r,i,s,o,a[d],a[d+1]]);l.drawImage(u.canvas,f[4],f[5]),this.dependencyTracker?.recordBBox(t,this.ctx,f[4],f[4]+u.canvas.width,f[5],f[5]+u.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;let r=this.ctx,i=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Qn.transformAndFill);for(let o of e){let{data:a,width:l,height:c,transform:u}=o,d=this.cachedCanvases.getCanvas("maskCanvas",l,c),h=d.context;h.save();let f=this.getObject(t,a,o);tR(h,f),h.globalCompositeOperation="source-in",h.fillStyle=s?i.getPattern(h,this,Wr(r),Wt.FILL):i,h.fillRect(0,0,l,c),h.restore(),r.save(),r.transform(...u),r.scale(1,-1),wp(r,d.canvas,0,0,l,c,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,l,0,c),r.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;let r=this.getObject(t,e);if(!r){ge("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,r)}paintImageXObjectRepeat(t,e,r,i,s){if(!this.contentVisible)return;let o=this.getObject(t,e);if(!o){ge("Dependent image isn't ready yet");return}let a=o.width,l=o.height,c=[];for(let u=0,d=s.length;u<d;u+=2)c.push({transform:[r,0,0,i,s[u],s[u+1]],x:0,y:0,w:a,h:l});this.paintInlineImageXObjectGroup(t,o,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;let{bitmap:e,width:r,height:i}=t,s=this.cachedCanvases.getCanvas("inlineImage",r,i),o=s.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",s.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;let r=e.width,i=e.height,s=this.ctx;this.save(t);let{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/r,-1/i);let a;if(e.bitmap)a=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)a=e;else{let u=this.cachedCanvases.getCanvas("inlineImage",r,i).context;eR(u,e),a=this.applyTransferMapsToCanvas(u)}let l=this._scaleImage(a,Wr(s));s.imageSmoothingEnabled=nR(dt(s),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,s,0,r,-i,0).recordDependencies(t,Qn.imageXObject).recordOperation(t),wp(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,r){if(!this.contentVisible)return;let i=this.ctx,s;if(e.bitmap)s=e.bitmap;else{let o=e.width,a=e.height,c=this.cachedCanvases.getCanvas("inlineImage",o,a).context;eR(c,e),s=this.applyTransferMapsToCanvas(c)}this.dependencyTracker?.resetBBox(t);for(let o of r)i.save(),i.transform(...o.transform),i.scale(1,-1),wp(i,s,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Qn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,r){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,r){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(r)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,r){let i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(r);let s=this.ctx;this.pendingClip?(i||(this.pendingClip===rR?s.clip(e,"evenodd"):s.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=dt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),r=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(r,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){let{lineWidth:t}=this.current,{a:e,b:r,c:i,d:s}=this.ctx.getTransform(),o,a;if(r===0&&i===0){let l=Math.abs(e),c=Math.abs(s);if(l===c)if(t===0)o=a=1/l;else{let u=l*t;o=a=u<1?1/u:1}else if(t===0)o=1/l,a=1/c;else{let u=l*t,d=c*t;o=u<1?1/u:1,a=d<1?1/d:1}}else{let l=Math.abs(e*s-r*i),c=Math.hypot(e,r),u=Math.hypot(i,s);if(t===0)o=u/l,a=c/l;else{let d=t*l;o=u>d?u/d:1,a=c>d?c/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){let{ctx:r,current:{lineWidth:i}}=this,[s,o]=this.getScaleForStroking();if(s===o){r.lineWidth=(i||1)*s,r.stroke(t);return}let a=r.getLineDash();e&&r.save(),r.scale(s,o),R_.a=1/s,R_.d=1/o;let l=new Path2D;if(l.addPath(t,R_),a.length>0){let c=Math.max(s,o);r.setLineDash(a.map(u=>u/c)),r.lineDashOffset/=c}r.lineWidth=i||1,r.stroke(l),e&&r.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};for(let n in su)Ja.prototype[n]!==void 0&&(Ja.prototype[su[n]]=Ja.prototype[n]);var Ni=class{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#e=t}static get workerSrc(){return this.#t}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#t=t}},lC=class{#e;#t;constructor({parsedData:t,rawData:e}){this.#e=t,this.#t=e}getRaw(){return this.#t}get(t){return this.#e.get(t)??null}[Symbol.iterator](){return this.#e.entries()}},Za=Symbol("INTERNAL"),cC=class{#e=!1;#t=!1;#n=!1;#r=!0;constructor(t,{name:e,intent:r,usage:i,rbGroups:s}){this.#e=!!(t&Nn.DISPLAY),this.#t=!!(t&Nn.PRINT),this.name=e,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(this.#n)return this.#r;if(!this.#r)return!1;let{print:t,view:e}=this.usage;return this.#e?e?.viewState!=="OFF":this.#t?t?.printState!=="OFF":!0}_setVisible(t,e,r=!1){t!==Za&&Ke("Internal method `_setVisible` called."),this.#n=r,this.#r=e}},uC=class{#e=null;#t=new Map;#n=null;#r=null;constructor(t,e=Nn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#r=t.order;for(let r of t.groups)this.#t.set(r.id,new cC(e,r));if(t.baseState==="OFF")for(let r of this.#t.values())r._setVisible(Za,!1);for(let r of t.on)this.#t.get(r)._setVisible(Za,!0);for(let r of t.off)this.#t.get(r)._setVisible(Za,!1);this.#n=this.getHash()}}#s(t){let e=t.length;if(e<2)return!0;let r=t[0];for(let i=1;i<e;i++){let s=t[i],o;if(Array.isArray(s))o=this.#s(s);else if(this.#t.has(s))o=this.#t.get(s).visible;else return ge(`Optional content group not found: ${s}`),!0;switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return r==="And"}isVisible(t){if(this.#t.size===0)return!0;if(!t)return fg("Optional content group not defined."),!0;if(t.type==="OCG")return this.#t.has(t.id)?this.#t.get(t.id).visible:(ge(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#s(t.expression);if(!t.policy||t.policy==="AnyOn"){for(let e of t.ids){if(!this.#t.has(e))return ge(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(let e of t.ids){if(!this.#t.has(e))return ge(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(let e of t.ids){if(!this.#t.has(e))return ge(`Optional content group not found: ${e}`),!0;if(!this.#t.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(let e of t.ids){if(!this.#t.has(e))return ge(`Optional content group not found: ${e}`),!0;if(this.#t.get(e).visible)return!1}return!0}return ge(`Unknown optional content policy ${t.policy}.`),!0}return ge(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,r=!0){let i=this.#t.get(t);if(!i){ge(`Optional content group not found: ${t}`);return}if(r&&e&&i.rbGroups.length)for(let s of i.rbGroups)for(let o of s)o!==t&&this.#t.get(o)?._setVisible(Za,!1,!0);i._setVisible(Za,!!e,!0),this.#e=null}setOCGState({state:t,preserveRB:e}){let r;for(let i of t){switch(i){case"ON":case"OFF":case"Toggle":r=i;continue}let s=this.#t.get(i);if(s)switch(r){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!s.visible,e);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroup(t){return this.#t.get(t)||null}getHash(){if(this.#e!==null)return this.#e;let t=new kp;for(let[e,r]of this.#t)t.update(`${e}:${r.visible}`);return this.#e=t.hexdigest()}[Symbol.iterator](){return this.#t.entries()}},dC=class{constructor(t,{disableRange:e=!1,disableStream:r=!1}){At(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');let{length:i,initialData:s,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,s?.length>0){let l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!r,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),t.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){let r=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{let i=this._rangeReaders.some(function(s){return s._begin!==t?!1:(s._enqueue(r),!0)});At(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){At(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new hC(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new fC(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}},hC=class{constructor(t,e,r=!1,i=null){this._stream=t,this._done=r||!1,this._filename=sE(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(let s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){return K(this,null,function*(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}},fC=class{constructor(t,e,r){this._stream=t,this._begin=e,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){return K(this,null,function*(){if(this._queuedChunk){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}};function L4(n){let t=!0,e=r("filename\\*","i").exec(n);if(e){e=e[1];let u=a(e);return u=unescape(u),u=l(u),u=c(u),s(u)}if(e=o(n),e){let u=c(e);return s(u)}if(e=r("filename","i").exec(n),e){e=e[1];let u=a(e);return u=c(u),s(u)}function r(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function i(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{let h=new TextDecoder(u,{fatal:!0}),f=Eu(d);d=h.decode(f),t=!1}catch{}}return d}function s(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function o(u){let d=[],h,f=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(h=f.exec(u))!==null;){let[,g,m,v]=h;if(g=parseInt(g,10),g in d){if(g===0)break;continue}d[g]=[m,v]}let p=[];for(let g=0;g<d.length&&g in d;++g){let[m,v]=d[g];v=a(v),m&&(v=unescape(v),g===0&&(v=l(v))),p.push(v)}return p.join("")}function a(u){if(u.startsWith('"')){let d=u.slice(1).split('\\"');for(let h=0;h<d.length;++h){let f=d[h].indexOf('"');f!==-1&&(d[h]=d[h].slice(0,f),d.length=h+1),d[h]=d[h].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){let d=u.indexOf("'");if(d===-1)return u;let h=u.slice(0,d),p=u.slice(d+1).replace(/^[^']*'/,"");return i(h,p)}function c(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,h,f,p){if(f==="q"||f==="Q")return p=p.replaceAll("_"," "),p=p.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,m){return String.fromCharCode(parseInt(m,16))}),i(h,p);try{p=atob(p)}catch{}return i(h,p)})}return""}function fR(n,t){let e=new Headers;if(!n||!t||typeof t!="object")return e;for(let r in t){let i=t[r];i!==void 0&&e.append(r,i)}return e}function mg(n){return URL.parse(n)?.origin??null}function pR({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:r}){let i={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(i.suggestedLength=s,s<=2*e)||r||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function gR(n){let t=n.get("Content-Disposition");if(t){let e=L4(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(sE(e))return e}return null}function wu(n,t){return new tl(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function mR(n){return n===200||n===206}function vR(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function yR(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ge(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}var pC=class{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=fR(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return At(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new gC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new mC(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},gC=class{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;let r=new Headers(t.headers),i=e.url;fetch(i,vR(r,this._withCredentials,this._abortController)).then(s=>{if(t._responseOrigin=mg(s.url),!mR(s.status))throw wu(s.status,i);this._reader=s.body.getReader(),this._headersCapability.resolve();let o=s.headers,{allowRangeRequests:a,suggestedLength:l}=pR({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=gR(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Xr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return K(this,null,function*(){yield this._headersCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:yR(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},mC=class{constructor(t,e,r){this._stream=t,this._reader=null,this._loaded=0;let i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;let s=new Headers(t.headers);s.append("Range",`bytes=${e}-${r-1}`);let o=i.url;fetch(o,vR(s,this._withCredentials,this._abortController)).then(a=>{let l=mg(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!mR(a.status))throw wu(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){return K(this,null,function*(){yield this._readCapability.promise;let{value:t,done:e}=yield this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:yR(t),done:!1})})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}},O_=200,N_=206;function F4(n){let t=n.response;return typeof t!="string"?t:Eu(t).buffer}var vC=class{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:r}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=fR(this.isHttp,e),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){let e=new XMLHttpRequest,r=this.currXhrId++,i=this.pendingRequests[r]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(let[s,o]of this.headers)e.setRequestHeader(s,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=N_):i.expectedStatus=O_,e.responseType="arraybuffer",At(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,r),e.onprogress=this.onProgress.bind(this,r),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),r}onProgress(t,e){let r=this.pendingRequests[t];r&&r.onProgress?.(e)}onStateChange(t,e){let r=this.pendingRequests[t];if(!r)return;let i=r.xhr;if(i.readyState>=2&&r.onHeadersReceived&&(r.onHeadersReceived(),delete r.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){r.onError(i.status);return}let s=i.status||O_;if(!(s===O_&&r.expectedStatus===N_)&&s!==r.expectedStatus){r.onError(i.status);return}let a=F4(i);if(s===N_){let l=i.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?r.onDone({begin:parseInt(c[1],10),chunk:a}):(ge('Missing or invalid "Content-Range" header.'),r.onError(0))}else a?r.onDone({begin:0,chunk:a}):r.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}},yC=class{constructor(t){this._source=t,this._manager=new vC(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return At(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new bC(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let r=new _C(this._manager,t,e);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},bC=class{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=mg(e.responseURL);let r=e.getAllResponseHeaders(),i=new Headers(r?r.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{let[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:o}=pR({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=gR(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=wu(t,this._url),this._headersCapability.reject(this._storedError);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}read(){return K(this,null,function*(){if(yield this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0,this._headersCapability.reject(t);for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}},_C=class{constructor(t,e,r){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:r,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){let t=mg(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){let e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(let r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=wu(t,this._url);for(let e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}read(){return K(this,null,function*(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){let e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};let t=Promise.withResolvers();return this._requests.push(t),t.promise})}cancel(t){this._done=!0;for(let e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}},B4=/^[a-z][a-z0-9\-+.]+:/i;function j4(n){if(B4.test(n))return new URL(n);let t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}var CC=class{constructor(t){this.source=t,this.url=j4(t.url),At(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return At(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new EC(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let r=new xC(this,t,e);return this._rangeRequestReaders.push(r),r}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(let e of this._rangeRequestReaders.slice(0))e.cancel(t)}},EC=class{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();let r=process.getBuiltinModule("fs");r.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(r.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=wu(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){return K(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Xr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}},xC=class{constructor(t,e,r){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();let i=t.source;this._isStreamingSupported=!i.disableStream;let s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:r-1}))}get isStreamingSupported(){return this._isStreamingSupported}read(){return K(this,null,function*(){if(yield this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}},Jc=Symbol("INITIAL_DATA"),Yp=class{#e=Object.create(null);#t(t){return this.#e[t]||=ce(H({},Promise.withResolvers()),{data:Jc})}get(t,e=null){if(e){let i=this.#t(t);return i.promise.then(()=>e(i.data)),null}let r=this.#e[t];if(!r||r.data===Jc)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return r.data}has(t){let e=this.#e[t];return!!e&&e.data!==Jc}delete(t){let e=this.#e[t];return!e||e.data===Jc?!1:(delete this.#e[t],!0)}resolve(t,e=null){let r=this.#t(t);r.data=e,r.resolve()}clear(){for(let t in this.#e){let{data:e}=this.#e[t];e?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(let t in this.#e){let{data:e}=this.#e[t];e!==Jc&&(yield[t,e])}}},V4=1e5,iR=30,fu=class n{#e=Promise.withResolvers();#t=null;#n=!1;#r=!!globalThis.FontInspector?.enabled;#s=null;#i=null;#o=0;#a=0;#l=null;#c=null;#h=0;#u=0;#f=Object.create(null);#g=[];#p=null;#d=[];#m=new WeakMap;#b=null;static#v=new Map;static#C=new Map;static#E=new WeakMap;static#y=null;static#x=new Set;constructor({textContentSource:t,container:e,viewport:r}){if(t instanceof ReadableStream)this.#p=t;else if(typeof t=="object")this.#p=new ReadableStream({start(l){l.enqueue(t),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=e,this.#u=r.scale*Pi.pixelRatio,this.#h=r.rotation,this.#i={div:null,properties:null,ctx:null};let{pageWidth:i,pageHeight:s,pageX:o,pageY:a}=r.rawDims;this.#b=[1,0,0,-1,-o,a+s],this.#a=i,this.#o=s,n.#I(),yo(e,r),this.#e.promise.finally(()=>{n.#x.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){let{isWindows:t,isFirefox:e}=Pt.platform;return Ie(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){let t=()=>{this.#l.read().then(({value:e,done:r})=>{if(r){this.#e.resolve();return}this.#s??=e.lang,Object.assign(this.#f,e.styles),this.#A(e.items),t()},this.#e.reject)};return this.#l=this.#p.getReader(),n.#x.add(this),t(),this.#e.promise}update({viewport:t,onBefore:e=null}){let r=t.scale*Pi.pixelRatio,i=t.rotation;if(i!==this.#h&&(e?.(),this.#h=i,yo(this.#c,{rotation:i})),r!==this.#u){e?.(),this.#u=r;let s={div:null,properties:null,ctx:n.#O(this.#s)};for(let o of this.#d)s.properties=this.#m.get(o),s.div=o,this.#w(s)}}cancel(){let t=new Xr("TextLayer task cancelled.");this.#l?.cancel(t).catch(()=>{}),this.#l=null,this.#e.reject(t)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#g}#A(t){if(this.#n)return;this.#i.ctx??=n.#O(this.#s);let e=this.#d,r=this.#g;for(let i of t){if(e.length>V4){ge("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){let s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),s.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}r.push(i.str),this.#S(i)}}#S(t){let e=document.createElement("span"),r={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#d.push(e);let i=ne.transform(this.#b,t.transform),s=Math.atan2(i[1],i[0]),o=this.#f[t.fontName];o.vertical&&(s+=Math.PI/2);let a=this.#r&&o.fontSubstitution||o.fontFamily;a=n.fontFamilyMap.get(a)||a;let l=Math.hypot(i[2],i[3]),c=l*n.#k(a,o,this.#s),u,d;s===0?(u=i[4],d=i[5]-c):(u=i[4]+c*Math.sin(s),d=i[5]-c*Math.cos(s));let h="calc(var(--total-scale-factor) *",f=e.style;this.#t===this.#c?(f.left=`${(100*u/this.#a).toFixed(2)}%`,f.top=`${(100*d/this.#o).toFixed(2)}%`):(f.left=`${h}${u.toFixed(2)}px)`,f.top=`${h}${d.toFixed(2)}px)`),f.fontSize=`${h}${(n.#y*l).toFixed(2)}px)`,f.fontFamily=a,r.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#r&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),s!==0&&(r.angle=s*(180/Math.PI));let p=!1;if(t.str.length>1)p=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){let g=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);g!==m&&Math.max(g,m)/Math.min(g,m)>1.5&&(p=!0)}if(p&&(r.canvasWidth=o.vertical?t.height:t.width),this.#m.set(e,r),this.#i.div=e,this.#i.properties=r,this.#w(this.#i),r.hasText&&this.#t.append(e),r.hasEOL){let g=document.createElement("br");g.setAttribute("role","presentation"),this.#t.append(g)}}#w(t){let{div:e,properties:r,ctx:i}=t,{style:s}=e,o="";if(n.#y>1&&(o=`scale(${1/n.#y})`),r.canvasWidth!==0&&r.hasText){let{fontFamily:a}=s,{canvasWidth:l,fontSize:c}=r;n.#T(i,c*this.#u,a);let{width:u}=i.measureText(e.textContent);u>0&&(o=`scaleX(${l*this.#u/u}) ${o}`)}r.angle!==0&&(o=`rotate(${r.angle}deg) ${o}`),o.length>0&&(s.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(let{canvas:t}of this.#C.values())t.remove();this.#C.clear()}}static#O(t=null){let e=this.#C.get(t||="");if(!e){let r=document.createElement("canvas");r.className="hiddenCanvasElement",r.lang=t,document.body.append(r),e=r.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#C.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#T(t,e,r){let i=this.#E.get(t);e===i.size&&r===i.family||(t.font=`${e}px ${r}`,i.size=e,i.family=r)}static#I(){if(this.#y!==null)return;let t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#y=t.getBoundingClientRect().height,t.remove()}static#k(t,e,r){let i=this.#v.get(t);if(i)return i;let s=this.#O(r);s.canvas.width=s.canvas.height=iR,this.#T(s,iR,t);let o=s.measureText(""),a=o.fontBoundingBoxAscent,l=Math.abs(o.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let c=.8;return a?c=a/(a+l):(Pt.platform.isFirefox&&ge("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?c=e.ascent:e.descent&&(c=1+e.descent)),this.#v.set(t,c),c}},pu=class n{static textContent(t){let e=[],r={items:e,styles:Object.create(null)};function i(s){if(!s)return;let o=null,a=s.name;if(a==="#text")o=s.value;else if(n.shouldBuildText(a))s?.attributes?.textContent?o=s.attributes.textContent:s.value&&(o=s.value);else return;if(o!==null&&e.push({str:o}),!!s.children)for(let l of s.children)i(l)}return i(t),r}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}},H4=100;function aE(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});let t=new wC,{docId:e}=t,r=n.url?x4(n.url):null,i=n.data?w4(n.data):null,s=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof Xp?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16,u=n.worker instanceof gu?n.worker:null,d=n.verbosity,h=typeof n.docBaseUrl=="string"&&!pg(n.docBaseUrl)?n.docBaseUrl:null,f=Ep(n.cMapUrl),p=n.cMapPacked!==!1,g=n.CMapReaderFactory||(on?J_:jp),m=Ep(n.iccUrl),v=Ep(n.standardFontDataUrl),y=n.StandardFontDataFactory||(on?eC:Up),b=Ep(n.wasmUrl),C=n.WasmFactory||(on?tC:zp),_=n.stopAtErrors!==!0,E=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,w=n.isEvalSupported!==!1,x=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!on,S=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!on&&(Pt.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,I=typeof n.disableFontFace=="boolean"?n.disableFontFace:on,O=n.fontExtraProperties===!0,k=n.enableXfa===!0,$=n.ownerDocument||globalThis.document,U=n.disableRange===!0,P=n.disableStream===!0,M=n.disableAutoFetch===!0,D=n.pdfBug===!0,T=n.CanvasFactory||(on?Q_:K_),Y=n.FilterFactory||(on?q_:Z_),Q=n.enableHWA===!0,ie=n.useWasm!==!1,q=l?l.length:n.length??NaN,Ee=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!on&&!I,je=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(g===jp&&y===Up&&C===zp&&f&&v&&b&&nu(f,document.baseURI)&&nu(v,document.baseURI)&&nu(b,document.baseURI)),W=null;l4(d);let V={canvasFactory:new T({ownerDocument:$,enableHWA:Q}),filterFactory:new Y({docId:e,ownerDocument:$}),cMapReaderFactory:je?null:new g({baseUrl:f,isCompressed:p}),standardFontDataFactory:je?null:new y({baseUrl:v}),wasmFactory:je?null:new C({baseUrl:b})};u||(u=gu.create({verbosity:d,port:Ni.workerPort}),t._worker=u);let N={docId:e,apiVersion:"5.4.149",data:i,password:a,disableAutoFetch:M,rangeChunkSize:c,length:q,docBaseUrl:h,enableXfa:k,evaluatorOptions:{maxImageSize:E,disableFontFace:I,ignoreErrors:_,isEvalSupported:w,isOffscreenCanvasSupported:x,isImageDecoderSupported:S,canvasMaxAreaInBytes:A,fontExtraProperties:O,useSystemFonts:Ee,useWasm:ie,useWorkerFetch:je,cMapUrl:f,iccUrl:m,standardFontDataUrl:v,wasmUrl:b}},F={ownerDocument:$,pdfBug:D,styleElement:W,loadingParams:{disableAutoFetch:M,enableXfa:k}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let R=u.messageHandler.sendWithPromise("GetDocRequest",N,i?[i.buffer]:null),L;if(l)L=new dC(l,{disableRange:U,disableStream:P});else if(!i){if(!r)throw new Error("getDocument - no `url` parameter provided.");let X=nu(r)?pC:on?CC:yC;L=new X({url:r,length:q,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:U,disableStream:P})}return R.then(X=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");let J=new po(e,X,u.port),ee=new TC(J,t,L,F,V,Q);t._transport=ee,J.send("Ready",null)})}).catch(t._capability.reject),t}var wC=class n{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${n.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}destroy(){return K(this,null,function*(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),yield this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null})}getData(){return K(this,null,function*(){return this._transport.getData()})}},Xp=class{#e=Promise.withResolvers();#t=[];#n=[];#r=[];#s=[];constructor(t,e,r=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=r,this.contentDispositionFilename=i}addRangeListener(t){this.#s.push(t)}addProgressListener(t){this.#r.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#t.push(t)}onDataRange(t,e){for(let r of this.#s)r(t,e)}onDataProgress(t,e){this.#e.promise.then(()=>{for(let r of this.#r)r(t,e)})}onDataProgressiveRead(t){this.#e.promise.then(()=>{for(let e of this.#n)e(t)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(let t of this.#t)t()})}transportReady(){this.#e.resolve()}requestDataRange(t,e){Ke("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},DC=class{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}},SC=class{#e=!1;constructor(t,e,r,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=r,this._stats=i?new Np:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new Yp,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:r=0,offsetY:i=0,dontFlip:s=!1}={}){return new au({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:r,offsetY:i,dontFlip:s})}getAnnotations({intent:t="display"}={}){let{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ie(this,"isPureXfa",!!this._transport._htmlForXfa)}getXfa(){return K(this,null,function*(){return this._transport._htmlForXfa?.children[this._pageIndex]||null})}render({canvasContext:t,canvas:e=t.canvas,viewport:r,intent:i="display",annotationMode:s=ms.ENABLE,transform:o=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1,recordOperations:f=!1,filteredOperationIndexes:p=null}){this._stats?.time("Overall");let g=this._transport.getRenderingIntent(i,s,d,h),{renderingIntent:m,cacheKey:v}=g;this.#e=!1,l||=this._transport.getOptionalContentConfig(m);let y=this._intentStates.get(v);y||(y=Object.create(null),this._intentStates.set(v,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);let b=!!(m&Nn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(g));let C=!this.recordedGroups&&(f||this._pdfBug&&globalThis.StepperManager?.enabled),_=x=>{if(y.renderTasks.delete(E),C){let S=E.gfx?.dependencyTracker.take();S?(E.stepper?.setOperatorGroups(S),f&&(this.recordedGroups=S)):f&&(this.recordedGroups=[])}b&&(this.#e=!0),this.#t(),x?(E.capability.reject(x),this._abortOperatorList({intentState:y,reason:x instanceof Error?x:new Error(x)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new IC({callback:_,params:{canvas:e,canvasContext:t,dependencyTracker:C?new nC(e):null,viewport:r,transform:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!b,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,filteredOperationIndexes:p});(y.renderTasks||=new Set).add(E);let w=E.task;return Promise.all([y.displayReadyCapability.promise,l]).then(([x,S])=>{if(this.destroyed){_();return}if(this._stats?.time("Rendering"),!(S.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:x,optionalContentConfig:S}),E.operatorListChanged()}).catch(_),w}getOperatorList({intent:t="display",annotationMode:e=ms.ENABLE,printAnnotationStorage:r=null,isEditing:i=!1}={}){function s(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}let o=this._transport.getRenderingIntent(t,e,r,i,!0),a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>pu.textContent(r));let e=this.streamTextContent(t);return new Promise(function(r,i){function s(){o.read().then(function({value:l,done:c}){if(c){r(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),s()},i)}let o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let t=[];for(let e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(let r of e.renderTasks)t.push(r.completed),r.cancel();return this.objs.clear(),this.#e=!1,Promise.all(t)}cleanup(t=!1){this.#e=!0;let e=this.#t();return t&&e&&(this._stats&&=new Np),e}#t(){if(!this.#e||this.destroyed)return!1;for(let{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(t,e){let r=this._intentStates.get(e);r&&(this._stats?.timeEnd("Page Request"),r.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let r=0,i=t.length;r<i;r++)e.operatorList.fnArray.push(t.fnArray[r]),e.operatorList.argsArray.push(t.argsArray[r]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(let r of e.renderTasks)r.operatorListChanged();t.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:r,modifiedIds:i}){let{map:s,transfer:o}=r,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:s,modifiedIds:i},o).getReader(),c=this._intentStates.get(e);c.streamReader=l;let u=()=>{l.read().then(({value:d,done:h})=>{if(h){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,c),u())},d=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(let h of c.renderTasks)h.operatorListChanged();this.#t()}if(c.displayReadyCapability)c.displayReadyCapability.reject(d);else if(c.opListReadCapability)c.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:r=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(e instanceof lu){let i=H4;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Xr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(let[i,s]of this._intentStates)if(s===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}},ys,vr,Oi,go,ug,mo,vo,ln,Mp,bR,_R,ru,el,Rp,lt=class lt{constructor({name:t=null,port:e=null,verbosity:r=c4()}={}){_r(this,ln);_r(this,ys,Promise.withResolvers());_r(this,vr,null);_r(this,Oi,null);_r(this,go,null);if(this.name=t,this.destroyed=!1,this.verbosity=r,e){if(rt(lt,vo).has(e))throw new Error("Cannot use more than one PDFWorker per port.");rt(lt,vo).set(e,this),Cr(this,ln,bR).call(this,e)}else Cr(this,ln,_R).call(this)}get promise(){return rt(this,ys).promise}get port(){return rt(this,Oi)}get messageHandler(){return rt(this,vr)}destroy(){this.destroyed=!0,rt(this,go)?.terminate(),cn(this,go,null),rt(lt,vo).delete(rt(this,Oi)),cn(this,Oi,null),rt(this,vr)?.destroy(),cn(this,vr,null)}static create(t){let e=rt(this,vo).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new lt(t)}static get workerSrc(){if(Ni.workerSrc)return Ni.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ie(this,"_setupFakeWorkerGlobal",K(this,null,function*(){return rt(this,el,Rp)?rt(this,el,Rp):(yield import(this.workerSrc)).WorkerMessageHandler}))}};ys=new WeakMap,vr=new WeakMap,Oi=new WeakMap,go=new WeakMap,ug=new WeakMap,mo=new WeakMap,vo=new WeakMap,ln=new WeakSet,Mp=function(){rt(this,ys).resolve(),rt(this,vr).send("configure",{verbosity:this.verbosity})},bR=function(t){cn(this,Oi,t),cn(this,vr,new po("main","worker",t)),rt(this,vr).on("ready",()=>{}),Cr(this,ln,Mp).call(this)},_R=function(){if(rt(lt,mo)||rt(lt,el,Rp)){Cr(this,ln,ru).call(this);return}let{workerSrc:t}=lt;try{lt._isSameOrigin(window.location,t)||(t=lt._createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t,{type:"module"}),r=new po("main","worker",e),i=()=>{s.abort(),r.destroy(),e.terminate(),this.destroyed?rt(this,ys).reject(new Error("Worker was destroyed")):Cr(this,ln,ru).call(this)},s=new AbortController;e.addEventListener("error",()=>{rt(this,go)||i()},{signal:s.signal}),r.on("test",a=>{if(s.abort(),this.destroyed||!a){i();return}cn(this,vr,r),cn(this,Oi,e),cn(this,go,e),Cr(this,ln,Mp).call(this)}),r.on("ready",a=>{if(s.abort(),this.destroyed){i();return}try{o()}catch{Cr(this,ln,ru).call(this)}});let o=()=>{let a=new Uint8Array;r.send("test",a,[a.buffer])};o();return}catch{fg("The worker has been disabled.")}Cr(this,ln,ru).call(this)},ru=function(){rt(lt,mo)||(ge("Setting up fake worker."),cn(lt,mo,!0)),lt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){rt(this,ys).reject(new Error("Worker was destroyed"));return}let e=new X_;cn(this,Oi,e);let r=`fake${SE(lt,ug)._++}`,i=new po(r+"_worker",r,e);t.setup(i,e),cn(this,vr,new po(r,r+"_worker",e)),Cr(this,ln,Mp).call(this)}).catch(t=>{rt(this,ys).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},el=new WeakSet,Rp=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},_r(lt,el),_r(lt,ug,0),_r(lt,mo,!1),_r(lt,vo,new WeakMap),on&&(cn(lt,mo,!0),Ni.workerSrc||="./pdf.worker.mjs"),lt._isSameOrigin=(t,e)=>{let r=URL.parse(t);if(!r?.origin||r.origin==="null")return!1;let i=new URL(e,r);return r.origin===i.origin},lt._createCDNWrapper=t=>{let e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},lt.fromPort=t=>{if(_4("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return lt.create(t)};var gu=lt,TC=class{#e=new Map;#t=new Map;#n=new Map;#r=new Map;#s=null;constructor(t,e,r,i,s,o){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Yp,this.fontLoader=new G_({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#i(t,e=null){let r=this.#e.get(t);if(r)return r;let i=this.messageHandler.sendWithPromise(t,e);return this.#e.set(t,i),i}get annotationStorage(){return Ie(this,"annotationStorage",new du)}getRenderingIntent(t,e=ms.ENABLE,r=null,i=!1,s=!1){let o=Nn.DISPLAY,a=z_;switch(t){case"any":o=Nn.ANY;break;case"display":break;case"print":o=Nn.PRINT;break;default:ge(`getRenderingIntent - invalid intent: ${t}`)}let l=o&Nn.PRINT&&r instanceof Lp?r:this.annotationStorage;switch(e){case ms.DISABLE:o+=Nn.ANNOTATIONS_DISABLE;break;case ms.ENABLE:break;case ms.ENABLE_FORMS:o+=Nn.ANNOTATIONS_FORMS;break;case ms.ENABLE_STORAGE:o+=Nn.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ge(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=Nn.IS_EDITING),s&&(o+=Nn.OPLIST);let{ids:c,hash:u}=l.modifiedIds,d=[o,a.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));let t=[];for(let r of this.#t.values())t.push(r._destroy());this.#t.clear(),this.#n.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),fu.cleanup(),this._networkStream?.cancelAllRequests(new Xr("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(r,i)=>{At(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},i.onPull=()=>{this._fullReader.read().then(function({value:s,done:o}){if(o){i.close();return}At(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{i.error(s)})},i.onCancel=s=>{this._fullReader.cancel(s),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",r=>K(this,null,function*(){yield this._fullReader.headersReady;let{isStreamingSupported:i,isRangeSupported:s,contentLength:o}=this._fullReader;return(!i||!s)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{e.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:i,isRangeSupported:s,contentLength:o}})),t.on("GetRangeReader",(r,i)=>{At(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let s=this._networkStream.getRangeReader(r.begin,r.end);if(!s){i.close();return}i.onPull=()=>{s.read().then(function({value:o,done:a}){if(a){i.close();return}At(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{s.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,e._capability.resolve(new DC(r,this))}),t.on("DocException",r=>{e._capability.reject(_n(r))}),t.on("PasswordRequest",r=>{this.#s=Promise.withResolvers();try{if(!e.onPassword)throw _n(r);let i=s=>{s instanceof Error?this.#s.reject(s):this.#s.resolve({password:s})};e.onPassword(i,r.code)}catch(i){this.#s.reject(i)}return this.#s.promise}),t.on("DataLoaded",r=>{e.onProgress?.({loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),t.on("StartRenderPage",r=>{if(this.destroyed)return;this.#t.get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),t.on("commonobj",([r,i,s])=>{if(this.destroyed||this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){let c=s.error;ge(`Error during font loading: ${c}`),this.commonObjs.resolve(r,c);break}let o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(c,u)=>globalThis.FontInspector.fontAdded(c,u):null,a=new W_(s,o);this.fontLoader.bind(a).catch(()=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!a.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(r,a)});break;case"CopyLocalImage":let{imageRef:l}=s;At(l,"The imageRef must be defined.");for(let c of this.#t.values())for(let[,u]of c.objs)if(u?.ref===l)return u.dataLen?(this.commonObjs.resolve(r,structuredClone(u)),u.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([r,i,s,o])=>{if(this.destroyed)return;let a=this.#t.get(i);if(!a.objs.has(r)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(s){case"Image":case"Pattern":a.objs.resolve(r,o);break;default:throw new Error(`Got unknown object type ${s}`)}}}),t.on("DocProgress",r=>{this.destroyed||e.onProgress?.({loaded:r.loaded,total:r.total})}),t.on("FetchBinaryData",r=>K(this,null,function*(){if(this.destroyed)throw new Error("Worker was destroyed.");let i=this[r.type];if(!i)throw new Error(`${r.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(r)}))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ge("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");let{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));let e=t-1,r=this.#n.get(e);if(r)return r;let i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&this.#r.set(s.refStr,t);let o=new SC(e,s,this,this._params.pdfBug);return this.#t.set(e,o),o});return this.#n.set(e,i),i}getPageIndex(t){return Y_(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#i("GetOptionalContentConfig").then(e=>new uC(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=this.#e.get(t);if(e)return e;let r=this.messageHandler.sendWithPromise(t,null).then(i=>({info:i[0],metadata:i[1]?new lC(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(t=!1){return K(this,null,function*(){if(!this.destroyed){yield this.messageHandler.sendWithPromise("Cleanup",null);for(let e of this.#t.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),fu.cleanup()}})}cachedPageNumber(t){if(!Y_(t))return null;let e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#r.get(e)??null}},AC=class{#e=null;onContinue=null;onError=null;constructor(t){this.#e=t}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;let{annotationCanvasMap:e}=this.#e;return t.form||t.canvas&&e?.size>0}},IC=class n{#e=null;static#t=new WeakSet;constructor({callback:t,params:e,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:h=null,enableHWA:f=!1,filteredOperationIndexes:p=null}){this.callback=t,this.params=e,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=d,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new AC(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=f,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=p}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(n.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");n.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{viewport:r,transform:i,background:s,dependencyTracker:o}=this.params,a=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ja(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:i,viewport:r,transparency:t,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),n.#t.delete(this._canvas),t||=new lu(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){return K(this,null,function*(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),n.#t.delete(this._canvas),this.callback())))})}},U4="5.4.149",$4="9e2e9e209",Kp=class n{#e=null;#t=null;#n;#r=null;#s=!1;#i=!1;#o=null;#a;#l=null;#c=null;static#h=null;static get _keyboardManager(){return Ie(this,"_keyboardManager",new bo([[["Escape","mac+Escape"],n.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],n.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],n.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],n.prototype._moveToPrevious],[["Home","mac+Home"],n.prototype._moveToBeginning],[["End","mac+End"],n.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#i=!1,this.#o=t):this.#i=!0,this.#c=t?._uiManager||e,this.#a=this.#c._eventBus,this.#n=t?.color?.toUpperCase()||this.#c?.highlightColors.values().next().value||"#FFFF98",n.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){let t=this.#e=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#o&&(t.ariaControls=`${this.#o.id}_colorpicker_dropdown`);let e=this.#c._signal;t.addEventListener("click",this.#p.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});let r=this.#t=document.createElement("span");return r.className="swatch",r.ariaHidden="true",r.style.backgroundColor=this.#n,t.append(r),t}renderMainDropdown(){let t=this.#r=this.#u();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#u(){let t=document.createElement("div"),e=this.#c._signal;t.addEventListener("contextmenu",Jn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#o&&(t.id=`${this.#o.id}_colorpicker_dropdown`);for(let[r,i]of this.#c.highlightColors){let s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",i),s.title=r,s.setAttribute("data-l10n-id",n.#h[r]);let o=document.createElement("span");s.append(o),o.className="swatch",o.style.backgroundColor=i,s.ariaSelected=i===this.#n,s.addEventListener("click",this.#f.bind(this,i),{signal:e}),t.append(s)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:Be.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#e){this.#p(t);return}let e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#m){this.#p(t);return}if(t.target===this.#e){this.#r.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#r?.firstChild||t.target===this.#e){this.#m&&this._hideDropdownFromKeyboard();return}this.#m||this.#p(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#m){this.#p(t);return}this.#r.firstChild?.focus()}_moveToEnd(t){if(!this.#m){this.#p(t);return}this.#r.lastChild?.focus()}#g(t){n._keyboardManager.exec(this,t)}#p(t){if(this.#m){this.hideDropdown();return}if(this.#s=t.detail===0,this.#l||(this.#l=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#c.combinedSignal(this.#l)})),this.#e.ariaExpanded="true",this.#r){this.#r.classList.remove("hidden");return}let e=this.#r=this.#u();this.#e.append(e)}#d(t){this.#r?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#r?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#l?.abort(),this.#l=null}get#m(){return this.#r&&!this.#r.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#m){this.#o?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(t){if(this.#t&&(this.#t.style.backgroundColor=t),!this.#r)return;let e=this.#c.highlightColors.values();for(let r of this.#r.children)r.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#r?.remove(),this.#r=null}},Zp=class n{#e=null;#t=null;#n=null;static#r=null;constructor(t){this.#t=t,this.#n=t._uiManager,n.#r||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;let{editorType:t,colorType:e,colorValue:r}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=r||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",n.#r[t]),i.addEventListener("input",()=>{this.#n.updateParams(e,i.value)},{signal:this.#n._signal}),i}update(t){this.#e&&(this.#e.value=t)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}},Yue=we(116),Xue=we(531);function sR(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function eu(n){return Math.max(0,Math.min(255,255*n))}var qp=class{static CMYK_G([t,e,r,i]){return["G",1-Math.min(1,.3*t+.59*r+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=eu(t),[t,t,t]}static G_HTML([t]){let e=sR(t);return`#${e}${e}${e}`}static RGB_G([t,e,r]){return["G",.3*t+.59*e+.11*r]}static RGB_rgb(t){return t.map(eu)}static RGB_HTML(t){return`#${t.map(sR).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,r,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,r,i]){return[eu(1-Math.min(1,t+i)),eu(1-Math.min(1,r+i)),eu(1-Math.min(1,e+i))]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,r]){let i=1-t,s=1-e,o=1-r,a=Math.min(i,s,o);return["CMYK",i,s,o,a]}};var MC=class{create(t,e,r=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");let i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),r||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Ke("Abstract method `_createSVG` called.")}},nl=class extends MC{_createSVG(t){return document.createElementNS(Ri,t)}},Qp=class{static setupStorage(t,e,r,i,s){let o=i.getValue(e,{value:null});switch(r.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),s==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(r.attributes.type==="radio"||r.attributes.type==="checkbox"){if(o.value===r.attributes.xfaOn?t.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&t.removeAttribute("checked"),s==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),s==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(let a of r.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{let l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;i.setValue(e,{value:c})});break}}static setAttributes({html:t,element:e,storage:r=null,intent:i,linkService:s}){let{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(let[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,c)}a&&s.addLinkAttributes(t,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(t,o.dataId,e,r)}static render(t){let e=t.annotationStorage,r=t.linkService,i=t.xfaHtml,s=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:s,linkService:r});let a=s!=="richText",l=t.div;if(l.append(o),t.viewport){let d=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=d}a&&l.setAttribute("class","xfaLayer xfaFont");let c=[];if(i.children.length===0){if(i.value){let d=document.createTextNode(i.value);o.append(d),a&&pu.shouldBuildText(i.name)&&c.push(d)}return{textDivs:c}}let u=[[i,-1,o]];for(;u.length>0;){let[d,h,f]=u.at(-1);if(h+1===d.children.length){u.pop();continue}let p=d.children[++u.at(-1)[1]];if(p===null)continue;let{name:g}=p;if(g==="#text"){let v=document.createTextNode(p.value);c.push(v),f.append(v);continue}let m=p?.attributes?.xmlns?document.createElementNS(p.attributes.xmlns,g):document.createElement(g);if(f.append(m),p.attributes&&this.setAttributes({html:m,element:p,storage:e,intent:s,linkService:r}),p.children?.length>0)u.push([p,-1,m]);else if(p.value){let v=document.createTextNode(p.value);a&&pu.shouldBuildText(g)&&c.push(v),m.append(v)}}for(let d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}},z4=9,_o=new WeakSet,G4=new Date().getTimezoneOffset()*60*1e3,Jp=class{static create(t){switch(t.data.annotationType){case St.LINK:return new mu(t);case St.TEXT:return new RC(t);case St.WIDGET:switch(t.data.fieldType){case"Tx":return new OC(t);case"Btn":return t.data.radioButton?new eg(t):t.data.checkBox?new PC(t):new kC(t);case"Ch":return new LC(t);case"Sig":return new NC(t)}return new ki(t);case St.POPUP:return new vu(t);case St.FREETEXT:return new tg(t);case St.LINE:return new BC(t);case St.SQUARE:return new jC(t);case St.CIRCLE:return new VC(t);case St.POLYLINE:return new ng(t);case St.CARET:return new UC(t);case St.INK:return new yu(t);case St.POLYGON:return new HC(t);case St.HIGHLIGHT:return new rg(t);case St.UNDERLINE:return new $C(t);case St.SQUIGGLY:return new zC(t);case St.STRIKEOUT:return new GC(t);case St.STAMP:return new ig(t);case St.FILEATTACHMENT:return new WC(t);default:return new yt(t)}}},yt=class n{#e=null;#t=!1;#n=null;constructor(t,{isRenderable:e=!1,ignoreBorder:r=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(r)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){let{quadPoints:t,rect:e}=this.data,r=-1/0,i=-1/0;if(t?.length>=8){for(let s=0;s<t.length;s+=8)t[s+1]>i?(i=t[s+1],r=t[s+2]):t[s+1]===i&&(r=Math.max(r,t[s+2]));return[r,i]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;let[t,e,r]=this.data.color,s=255*(1-(this.data.opacity??1));return this.#r(Math.min(t+s,255),Math.min(e+s,255),Math.min(r+s,255))}#r(t,e,r){t/=255,e/=255,r/=255;let i=Math.max(t,e,r),s=Math.min(t,e,r),o=(i+s)/2,a=((1+Math.sqrt(o))/2*100).toFixed(2);if(i===s)return`hsl(0, 0%, ${a}%)`;let l=i-s,c;i===t?c=(e-r)/l+(e<r?6:0):i===e?c=(r-t)/l+2:c=(t-e)/l+4,c=(c*60).toFixed(2);let u=(l/(1-Math.abs(2*o-1))*100).toFixed(2);return`hsl(${c}, ${u}%, ${a}%)`}_normalizePoint(t){let{page:{view:e},viewport:{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-s)/r,t[1]=100*(t[1]-o)/i,t}updateEdited(t){if(!this.container)return;t.rect&&(this.#e||={rect:this.data.rect.slice(0)});let{rect:e,popup:r}=t;e&&this.#s(e);let i=this.#n?.popup||this.popup;!i&&r?.text&&(this._createPopup(r),i=this.#n.popup),i&&(i.updateEdited(t),r?.deleted&&(i.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(t){let{container:{style:e},data:{rect:r,rotation:i},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}}}=this;r?.splice(0,4,...t),e.left=`${100*(t[0]-a)/s}%`,e.top=`${100*(o-t[3]+l)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/s}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)}_createContainer(t){let{data:e,parent:{page:r,viewport:i}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",e.id),!(this instanceof ki)&&!(this instanceof mu)&&(s.tabIndex=0);let{style:o}=s;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(s.title=e.alternativeText),e.noRotate&&s.classList.add("norotate"),!e.rect||this instanceof vu){let{rotation:g}=e;return!e.hasOwnCanvas&&g!==0&&this.setRotation(g,s),s}let{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;let g=e.borderStyle.horizontalCornerRadius,m=e.borderStyle.verticalCornerRadius;if(g>0||m>0){let y=`calc(${g}px * var(--total-scale-factor)) / calc(${m}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof eg){let y=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;o.borderRadius=y}switch(e.borderStyle.style){case Ka.SOLID:o.borderStyle="solid";break;case Ka.DASHED:o.borderStyle="dashed";break;case Ka.BEVELED:ge("Unimplemented border style: beveled");break;case Ka.INSET:ge("Unimplemented border style: inset");break;case Ka.UNDERLINE:o.borderBottomStyle="solid";break;default:break}let v=e.borderColor||null;v?(this.#t=!0,o.borderColor=ne.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}let c=ne.normalizeRect([e.rect[0],r.view[3]-e.rect[1]+r.view[1],e.rect[2],r.view[3]-e.rect[3]+r.view[1]]),{pageWidth:u,pageHeight:d,pageX:h,pageY:f}=i.rawDims;o.left=`${100*(c[0]-h)/u}%`,o.top=`${100*(c[1]-f)/d}%`;let{rotation:p}=e;return e.hasOwnCanvas||p===0?(o.width=`${100*a/u}%`,o.height=`${100*l/d}%`):this.setRotation(p,s),s}setRotation(t,e=this.container){if(!this.data.rect)return;let{pageWidth:r,pageHeight:i}=this.parent.viewport.rawDims,{width:s,height:o}=this;t%180!==0&&([s,o]=[o,s]),e.style.width=`${100*s/r}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(e,r,i)=>{let s=i.detail[e],o=s[0],a=s.slice(1);i.target.style[r]=qp[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[r]:qp[`${o}_rgb`](a)})};return Ie(this,"_commonActions",{display:e=>{let{display:r}=e.detail,i=r%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:r===1||r===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{let{hidden:r}=e.detail;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:r,noView:r})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{let r=e.detail.rotation;this.setRotation(r),this.annotationStorage.setValue(this.data.id,{rotation:r})}})}_dispatchEventFromSandbox(t,e){let r=this._commonActions;for(let i of Object.keys(e.detail))(t[i]||r[i])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let r=this._commonActions;for(let[i,s]of Object.entries(e)){let o=r[i];if(o){let a={detail:{[i]:s},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;let{quadPoints:t}=this.data;if(!t)return;let[e,r,i,s]=this.data.rect.map(g=>Math.fround(g));if(t.length===8){let[g,m,v,y]=t.subarray(2,6);if(i===g&&s===m&&e===v&&r===y)return}let{style:o}=this.container,a;if(this.#t){let{borderColor:g,borderWidth:m}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${g}" stroke-width="${m}">`],this.container.classList.add("hasBorder")}let l=i-e,c=s-r,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";let h=u.createElement("defs");d.append(h);let f=u.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),h.append(f);for(let g=2,m=t.length;g<m;g+=8){let v=t[g],y=t[g+1],b=t[g+2],C=t[g+3],_=u.createElement("rect"),E=(b-e)/l,w=(s-y)/c,x=(v-b)/l,S=(y-C)/c;_.setAttribute("x",E),_.setAttribute("y",w),_.setAttribute("width",x),_.setAttribute("height",S),f.append(_),a?.push(`<rect vector-effect="non-scaling-stroke" x="${E}" y="${w}" width="${x}" height="${S}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath=`url(#${p})`}_createPopup(t=null){let{data:e}=this,r,i;t?(r={str:t.text},i=t.date):(r=e.contentsObj,i=e.modificationDate);let s=this.#n=new vu({data:{color:e.color,titleObj:e.titleObj,modificationDate:i,contentsObj:r,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent.div.append(s.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}render(){Ke("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){let r=[];if(this._fieldObjects){let i=this._fieldObjects[t];if(i)for(let{page:s,id:o,exportValues:a}of i){if(s===-1||o===e)continue;let l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!_o.has(c)){ge(`_getElementsByName - element not allowed: ${o}`);continue}r.push({id:o,exportValue:l,domElement:c})}return r}for(let i of document.getElementsByName(t)){let{exportValue:s}=i,o=i.getAttribute("data-element-id");o!==e&&_o.has(i)&&r.push({id:o,exportValue:s,domElement:i})}return r}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){let t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(let e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;let{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}},mu=class extends yt{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(r,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(r,t.action,t.overlaidText),i=!0):t.attachment?(this.#t(r,t.attachment,t.overlaidText,t.attachmentDest),i=!0):t.setOCGState?(this.#n(r,t.setOCGState,t.overlaidText),i=!0):t.dest?(this._bindLink(r,t.dest,t.overlaidText),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),i=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(r,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(r),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,r=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#e(),r&&(t.title=r)}_bindNamedAction(t,e,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),r&&(t.title=r),this.#e()}#t(t,e,r="",i=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:r&&(t.title=r),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,i),!1),this.#e()}#n(t,e,r=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),r&&(t.title=r),this.#e()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let i of Object.keys(e.actions)){let s=r.get(i);s&&(t[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#e()}_bindResetFormAction(t,e){let r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ge('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{r?.();let{fields:i,refs:s,include:o}=e,a=[];if(i.length!==0||s.length!==0){let u=new Set(s);for(let d of i){let h=this._fieldObjects[d]||[];for(let{id:f}of h)u.add(f)}for(let d of Object.values(this._fieldObjects))for(let h of d)u.has(h.id)===o&&a.push(h)}else for(let u of Object.values(this._fieldObjects))a.push(...u);let l=this.annotationStorage,c=[];for(let u of a){let{id:d}=u;switch(c.push(d),u.type){case"text":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}case"checkbox":case"radiobutton":{let f=u.defaultValue===u.exportValues;l.setValue(d,{value:f});break}case"combobox":case"listbox":{let f=u.defaultValue||"";l.setValue(d,{value:f});break}default:continue}let h=document.querySelector(`[data-element-id="${d}"]`);if(h){if(!_o.has(h)){ge(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;h.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}},RC=class extends yt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}},ki=class extends yt{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Pt.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,r,i,s){r.includes("mouse")?t.addEventListener(r,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(r,o=>{if(r==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(r==="focus"){if(e.focused)return;e.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:s(o)}})})}_setEventListeners(t,e,r,i){for(let[s,o]of r)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,s,o,i),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":ne.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||z4,s=t.style,o,a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(c/(Ap*i))||1,d=c/u;o=Math.min(i,l(d/Ap))}else{let c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,l(c/Ap))}s.fontSize=`calc(${o}px * var(--total-scale-factor))`,s.color=ne.makeHexColor(r[0],r[1],r[2]),this.data.textAlignment!==null&&(s.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}},OC=class extends ki{constructor(t){let e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,r,i){let s=this.annotationStorage;for(let o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=r),s.setValue(o.id,{[i]:r})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let r=null;if(this.renderForms){let i=t.getValue(e,{value:this.data.fieldValue}),s=i.value||"",o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&s.length>o&&(s=s.slice(0,o));let a=i.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));let l={userValue:s,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(r=document.createElement("textarea"),r.textContent=a??s,this.data.doNotScroll&&(r.style.overflowY="hidden")):(r=document.createElement("input"),r.type=this.data.password?"password":"text",r.setAttribute("value",a??s),this.data.doNotScroll&&(r.style.overflowX="hidden")),this.data.hasOwnCanvas&&(r.hidden=!0),_o.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,r.name=this.data.fieldName,r.tabIndex=0;let{datetimeFormat:c,datetimeType:u,timeStep:d}=this.data,h=!!u&&this.enableScripting;c&&(r.title=c),this._setRequired(r,this.data.required),o&&(r.maxLength=o),r.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(r,"value",p.target.value,"value"),l.formattedValue=null}),r.addEventListener("resetform",p=>{let g=this.data.defaultFieldValue??"";r.value=l.userValue=g,l.formattedValue=null});let f=p=>{let{formattedValue:g}=l;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){r.addEventListener("focus",g=>{if(l.focused)return;let{target:m}=g;if(h&&(m.type=u,d&&(m.step=d)),l.userValue){let v=l.userValue;if(h)if(u==="time"){let y=new Date(v),b=[y.getHours(),y.getMinutes(),y.getSeconds()];m.value=b.map(C=>C.toString().padStart(2,"0")).join(":")}else m.value=new Date(v-G4).toISOString().split(u==="date"?"T":".",1)[0];else m.value=v}l.lastCommittedValue=m.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),r.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);let m={value(v){l.userValue=v.detail.value??"",h||t.setValue(e,{value:l.userValue.toString()}),v.target.value=l.userValue},formattedValue(v){let{formattedValue:y}=v.detail;l.formattedValue=y,y!=null&&v.target!==document.activeElement&&(v.target.value=y);let b={formattedValue:y};h&&(b.value=y),t.setValue(e,b)},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{let{charLimit:y}=v.detail,{target:b}=v;if(y===0){b.removeAttribute("maxLength");return}b.setAttribute("maxLength",y);let C=l.userValue;!C||C.length<=y||(C=C.slice(0,y),b.value=l.userValue=C,t.setValue(e,{value:C}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:b.selectionStart,selEnd:b.selectionEnd}}))}};this._dispatchEventFromSandbox(m,g)}),r.addEventListener("keydown",g=>{l.commitKey=1;let m=-1;if(g.key==="Escape"?m=0:g.key==="Enter"&&!this.data.multiLine?m=2:g.key==="Tab"&&(l.commitKey=3),m===-1)return;let{value:v}=g.target;l.lastCommittedValue!==v&&(l.lastCommittedValue=v,l.userValue=v,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:m,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});let p=f;f=null,r.addEventListener("blur",g=>{if(!l.focused||!g.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);let{target:m}=g,{value:v}=m;if(h){if(v&&u==="time"){let y=v.split(":").map(b=>parseInt(b,10));v=new Date(2e3,0,1,y[0],y[1],y[2]||0).valueOf(),m.step=""}else v=new Date(v).valueOf();m.type="text"}l.userValue=v,l.lastCommittedValue!==v&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:l.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}),p(g)}),this.data.actions?.Keystroke&&r.addEventListener("beforeinput",g=>{l.lastCommittedValue=null;let{data:m,target:v}=g,{value:y,selectionStart:b,selectionEnd:C}=v,_=b,E=C;switch(g.inputType){case"deleteWordBackward":{let w=y.substring(0,b).match(/\w*[^\w]*$/);w&&(_-=w[0].length);break}case"deleteWordForward":{let w=y.substring(b).match(/^[^\w]*\w*/);w&&(E+=w[0].length);break}case"deleteContentBackward":b===C&&(_-=1);break;case"deleteContentForward":b===C&&(E+=1);break}g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:y,change:m||"",willCommit:!1,selStart:_,selEnd:E}})}),this._setEventListeners(r,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&r.addEventListener("blur",f),this.data.comb){let g=(this.data.rect[2]-this.data.rect[0])/o;r.classList.add("comb"),r.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else r=document.createElement("div"),r.textContent=this.data.fieldValue,r.style.verticalAlign="middle",r.style.display="table-cell",this.data.hasOwnCanvas&&(r.hidden=!0);return this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}},NC=class extends ki{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}},PC=class extends ki{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,r=e.id,i=t.getValue(r,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(r,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let s=document.createElement("input");return _o.add(s),s.setAttribute("data-element-id",r),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.setAttribute("exportValue",e.exportValue),s.tabIndex=0,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,r)){let u=l&&c.exportValue===e.exportValue;c.domElement&&(c.domElement.checked=u),t.setValue(c.id,{value:u})}t.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{let a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",o=>{let a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(r,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},eg=class extends ki{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,r=e.id,i=t.getValue(r,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(r,{value:i})),i)for(let o of this._getElementsByName(e.fieldName,r))t.setValue(o.id,{value:!1});let s=document.createElement("input");if(_o.add(s),s.setAttribute("data-element-id",r),s.disabled=e.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=e.fieldName,i&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",o=>{let{name:a,checked:l}=o.target;for(let c of this._getElementsByName(a,r))t.setValue(c.id,{value:!1});t.setValue(r,{value:l})}),s.addEventListener("resetform",o=>{let a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){let o=e.buttonValue;s.addEventListener("updatefromsandbox",a=>{let l={value:c=>{let u=o===c.detail.value;for(let d of this._getElementsByName(c.target.name)){let h=u&&d.id===r;d.domElement&&(d.domElement.checked=h),t.setValue(d.id,{value:h})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}},kC=class extends mu{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",r=>{this._dispatchEventFromSandbox({},r)})),t}},LC=class extends ki{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,r=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");_o.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{let d=this.data.defaultFieldValue;for(let h of i.options)h.selected=h.value===d});for(let u of this.data.options){let d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,r.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),s=!1),i.append(d)}let o=null;if(s){let u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}let a=u=>{let d=u?"value":"textContent",{options:h,multiple:f}=i;return f?Array.prototype.filter.call(h,p=>p.selected).map(p=>p[d]):h.selectedIndex===-1?null:h[h.selectedIndex][d]},l=a(!1),c=u=>{let d=u.target.options;return Array.prototype.map.call(d,h=>({displayValue:h.textContent,exportValue:h.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{let d={value(h){o?.();let f=h.detail.value,p=new Set(Array.isArray(f)?f:[f]);for(let g of i.options)g.selected=p.has(g.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(h){i.multiple=!0},remove(h){let f=i.options,p=h.detail.remove;f[p].selected=!1,i.remove(p),f.length>0&&Array.prototype.findIndex.call(f,m=>m.selected)===-1&&(f[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},clear(h){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(h){let{index:f,displayValue:p,exportValue:g}=h.detail.insert,m=i.children[f],v=document.createElement("option");v.textContent=p,v.value=g,m?m.before(v):i.append(v),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},items(h){let{items:f}=h.detail;for(;i.length!==0;)i.remove(0);for(let p of f){let{displayValue:g,exportValue:m}=p,v=document.createElement("option");v.textContent=g,v.value=m,i.append(v)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:c(h)}),l=a(!1)},indices(h){let f=new Set(h.detail.indices);for(let p of h.target.options)p.selected=f.has(p.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(h){h.target.disabled=!h.detail.editable}};this._dispatchEventFromSandbox(d,u)}),i.addEventListener("input",u=>{let d=a(!0),h=a(!1);t.setValue(e,{value:d}),u.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:h,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}},vu=class extends yt{constructor(t){let{data:e,elements:r}=t;super(t,{isRenderable:yt._hasPopupData(e)}),this.elements=r,this.popup=null}render(){let{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";let e=this.popup=new FC({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),r=[];for(let i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",r.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",r.map(i=>`${iE}${i}`).join(",")),this.container}},FC=class{#e=this.#P.bind(this);#t=this.#D.bind(this);#n=this.#j.bind(this);#r=this.#R.bind(this);#s=null;#i=null;#o=null;#a=null;#l=null;#c=null;#h=null;#u=null;#f=!1;#g=null;#p=null;#d=null;#m=null;#b=null;#v=null;#C=null;#E=null;#y=null;#x=null;#A=!1;constructor({container:t,color:e,elements:r,titleObj:i,modificationDate:s,contentsObj:o,richText:a,parent:l,rect:c,parentRect:u,open:d,eventBus:h=null}){this.#i=t,this.#y=i,this.#o=o,this.#E=a,this.#h=l,this.#s=e,this.#C=c,this.#u=u,this.#l=r,this.#c=h,this.#a=cu.toDateObject(s),this.trigger=r.flatMap(f=>f.getElementsToTriggerPopup()),this.#S(),this.#i.hidden=!0,d&&this.#R()}#S(){if(this.#p)return;this.#p=new AbortController;let{signal:t}=this.#p;for(let e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("mouseenter",this.#n,{signal:t}),e.addEventListener("mouseleave",this.#t,{signal:t}),e.classList.add("popupTriggerArea");for(let e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t});this.#O()}#w(){let t=this.#l.find(e=>e.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition),this.#v=t.commentButtonColor)}#O(){if(this.#m||(this.#b||this.#w(),!this.#b))return;let t=this.#m=document.createElement("button");t.className="annotationCommentButton";let e=this.#l[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;let{signal:r}=this.#p;t.addEventListener("hover",this.#r,{signal:r}),t.addEventListener("keydown",this.#e,{signal:r}),t.addEventListener("click",()=>{let[{data:{id:s},annotationEditorType:o}]=this.#l;this.#c?.dispatch("switchannotationeditormode",{source:this,editId:s,mode:o,editComment:!0})},{signal:r});let{style:i}=t;i.left=`calc(${this.#b[0]}%)`,i.top=`calc(${this.#b[1]}% - var(--comment-button-dim))`,this.#v&&(i.backgroundColor=this.#v),e.after(t)}render(){if(this.#g)return;let t=this.#g=document.createElement("div");if(t.className="popup",this.#s){let i=t.style.outlineColor=ne.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}let e=document.createElement("span");if(e.className="header",this.#y?.str){let i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#y}if(t.append(e),this.#a){let i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),i.dateTime=this.#a.toISOString(),e.append(i)}let r=this.#T;if(r)Qp.render({xfaHtml:r,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{let i=this._formatContents(this.#o);t.append(i)}this.#i.append(t)}get#T(){let t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#I(){return this.#T?.attributes?.style?.fontSize||0}get#k(){return this.#T?.attributes?.style?.color||null}#N(t){let e=[],r={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:this.#k,fontSize:this.#I?`calc(${this.#I}px * var(--total-scale-factor))`:""}};for(let s of t.split(`
`))e.push({name:"span",value:s,attributes:i});return r}_formatContents({str:t,dir:e}){let r=document.createElement("p");r.classList.add("popupContent"),r.dir=e;let i=t.split(/(?:\r\n?|\n)/);for(let s=0,o=i.length;s<o;++s){let a=i[s];r.append(document.createTextNode(a)),s<o-1&&r.append(document.createElement("br"))}return r}#P(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#R()}updateEdited({rect:t,popup:e,deleted:r}){if(r||e?.deleted){this.remove();return}this.#S(),this.#x||={contentsObj:this.#o,richText:this.#E},t&&(this.#d=null),e&&(this.#E=this.#N(e.text),this.#a=cu.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#x&&({contentsObj:this.#o,richText:this.#E}=this.#x,this.#x=null,this.#g?.remove(),this.#g=null,this.#d=null)}remove(){this.#p?.abort(),this.#p=null,this.#g?.remove(),this.#g=null,this.#A=!1,this.#f=!1;for(let t of this.trigger)t.classList.remove("popupTriggerArea")}#L(){if(this.#d!==null)return;let{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:r,pageX:i,pageY:s}}}=this.#h,o=!!this.#u,a=o?this.#u:this.#C;for(let p of this.#l)if(!a||ne.intersect(p.data.rect,a)!==null){a=p.data.rect,o=!0;break}let l=ne.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,d=l[0]+u,h=l[1];this.#d=[100*(d-i)/e,100*(h-s)/r];let{style:f}=this.#i;f.left=`${this.#d[0]}%`,f.top=`${this.#d[1]}%`}#R(){this.#f=!this.#f,this.#f?(this.#j(),this.#i.addEventListener("click",this.#r),this.#i.addEventListener("keydown",this.#e)):(this.#D(),this.#i.removeEventListener("click",this.#r),this.#i.removeEventListener("keydown",this.#e))}#j(){this.#g||this.render(),this.isVisible?this.#f&&this.#i.classList.add("focused"):(this.#L(),this.#i.hidden=!1,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)+1e3)}#D(){this.#i.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#i.hidden=!0,this.#i.style.zIndex=parseInt(this.#i.style.zIndex)-1e3)}forceHide(){this.#A=this.isVisible,this.#A&&(this.#i.hidden=!0)}maybeShow(){this.#S(),this.#A&&(this.#g||this.#j(),this.#A=!1,this.#i.hidden=!1)}get isVisible(){return this.#i.hidden===!1}},tg=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=ve.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(let e of this.textContent){let r=document.createElement("span");r.textContent=e,t.append(r)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},BC=class extends yt{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),s.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),s.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),s.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),i.append(s),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},jC=class extends yt{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",s/2),o.setAttribute("y",s/2),o.setAttribute("width",e-s),o.setAttribute("height",r-s),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},VC=class extends yt{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let{data:t,width:e,height:r}=this,i=this.svgFactory.create(e,r,!0),s=t.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",r/2),o.setAttribute("rx",e/2-s/2),o.setAttribute("ry",r/2-s/2),o.setAttribute("stroke-width",s||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},ng=class extends yt{#e=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,vertices:e,borderStyle:r,popupRef:i},width:s,height:o}=this;if(!e)return this.container;let a=this.svgFactory.create(s,o,!0),l=[];for(let u=0,d=e.length;u<d;u+=2){let h=e[u]-t[0],f=t[3]-e[u+1];l.push(`${h},${f}`)}l=l.join(" ");let c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}},HC=class extends ng{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}},UC=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}},yu=class extends yt{#e=null;#t=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ve.HIGHLIGHT:ve.INK}#n(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);let{data:{rect:t,rotation:e,inkLists:r,borderStyle:i,popupRef:s}}=this,{transform:o,width:a,height:l}=this.#n(e,t),c=this.svgFactory.create(a,l,!0),u=this.#e=this.svgFactory.createElement("svg:g");c.append(u),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke-linecap","round"),u.setAttribute("stroke-linejoin","round"),u.setAttribute("stroke-miterlimit",10),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),u.setAttribute("transform",o);for(let d=0,h=r.length;d<h;d++){let f=this.svgFactory.createElement(this.svgElementName);this.#t.push(f),f.setAttribute("points",r[d].join(",")),u.append(f)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);let{thickness:e,points:r,rect:i}=t,s=this.#e;if(e>=0&&s.setAttribute("stroke-width",e||1),r)for(let o=0,a=this.#t.length;o<a;o++)this.#t[o].setAttribute("points",r[o].join(","));if(i){let{transform:o,width:a,height:l}=this.#n(this.data.rotation,i);s.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),s.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){let{inkLists:t,rect:e}=this.data;if(t?.length>=1){let r=-1/0,i=-1/0;for(let s of t)for(let o=0,a=s.length;o<a;o+=2)s[o+1]>i?(i=s[o+1],r=s[o]):s[o+1]===i&&(r=Math.max(r,s[o]));if(r!==1/0)return[r,i]}return e?[e[2],e[3]]:null}},rg=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ve.HIGHLIGHT}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){let r=document.createElement("mark");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},$C=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){let r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},zC=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){let r=document.createElement("u");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},GC=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){let{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){let r=document.createElement("s");r.classList.add("overlaidText"),r.textContent=t,this.container.append(r)}return this.container}},ig=class extends yt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ve.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}},WC=class extends yt{#e=null;constructor(t){super(t,{isRenderable:!0});let{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",H({source:this},e))}render(){this.container.classList.add("fileAttachmentAnnotation");let{container:t,data:e}=this,r;e.hasAppearance||e.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),r.addEventListener("dblclick",this.#t.bind(this)),this.#e=r;let{isMac:i}=Pt.platform;return t.addEventListener("keydown",s=>{s.key==="Enter"&&(i?s.metaKey:s.ctrlKey)&&this.#t()}),!e.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}},YC=class n{#e=null;#t=null;#n=new Map;#r=null;constructor({div:t,accessibilityManager:e,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:o,structTreeLayer:a}){this.div=t,this.#e=e,this.#t=r,this.#r=a||null,this.page=s,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return this.#n.size>0}#s(t,e,r){return K(this,null,function*(){let i=t.firstChild||t,s=i.id=`${iE}${e}`,o=yield this.#r?.getAriaAttributes(s);if(o)for(let[a,l]of o)i.setAttribute(a,l);r?r.at(-1).container.after(t):(this.div.append(t),this.#e?.moveElementInDOM(this.div,t,i,!1))})}render(t){return K(this,null,function*(){let{annotations:e}=t,r=this.div;yo(r,this.viewport);let i=new Map,s={data:null,layer:r,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new nl,annotationStorage:t.annotationStorage||new du,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(let o of e){if(o.noHTML)continue;let a=o.annotationType===St.POPUP;if(a){let u=i.get(o.id);if(!u)continue;s.elements=u}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;s.data=o;let l=Jp.create(s);if(!l.isRenderable)continue;if(!a&&o.popupRef){let u=i.get(o.popupRef);u?u.push(l):i.set(o.popupRef,[l])}let c=l.render();o.hidden&&(c.style.visibility="hidden"),yield this.#s(c,o.id,s.elements),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#i()})}addLinkAnnotations(t,e){return K(this,null,function*(){let r={data:null,layer:this.div,linkService:e,svgFactory:new nl,parent:this};for(let i of t){i.borderStyle||=n._defaultBorderStyle,r.data=i;let s=Jp.create(r);if(!s.isRenderable)continue;let o=s.render();yield this.#s(o,i.id,null)}})}update({viewport:t}){let e=this.div;this.viewport=t,yo(e,{rotation:t.rotation}),this.#i(),e.hidden=!1}#i(){if(!this.#t)return;let t=this.div;for(let[e,r]of this.#t){let i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;r.className="annotationContent";let{firstChild:s}=i;s?s.nodeName==="CANVAS"?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r);let o=this.#n.get(e);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,i.id,r),o._hasNoCanvas=!1):o.canvas=r)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}static get _defaultBorderStyle(){return Ie(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Ka.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},Sp=/\r\n?|\n/g,XC=class n extends tt{#e;#t="";#n=`${this.id}-editor`;#r=null;#s;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){let t=n.prototype,e=s=>s.isEmpty(),r=uu.TRANSLATE_SMALL,i=uu.TRANSLATE_BIG;return Ie(this,"_keyboardManager",new bo([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}]]))}static _type="freetext";static _editorType=ve.FREETEXT;constructor(t){super(ce(H({},t),{name:"freeTextEditor"})),this.#e=t.color||n._defaultColor||tt._defaultLineColor,this.#s=t.fontSize||n._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,e){tt.initialize(t,e);let r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Be.FREETEXT_SIZE:n._defaultFontSize=e;break;case Be.FREETEXT_COLOR:n._defaultColor=e;break}}updateParams(t,e){switch(t){case Be.FREETEXT_SIZE:this.#i(e);break;case Be.FREETEXT_COLOR:this.#o(e);break}}static get defaultPropertiesToUpdate(){return[[Be.FREETEXT_SIZE,n._defaultFontSize],[Be.FREETEXT_COLOR,n._defaultColor||tt._defaultLineColor]]}get propertiesToUpdate(){return[[Be.FREETEXT_SIZE,this.#s],[Be.FREETEXT_COLOR,this.#e]]}get toolbarButtons(){return this._colorPicker||=new Zp(this),[["colorPicker",this._colorPicker]]}get colorType(){return Be.FREETEXT_COLOR}get colorValue(){return this.#e}#i(t){let e=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#l()},r=this.#s;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#o(t){let e=i=>{this.#e=this.editorDiv.style.color=i,this._colorPicker?.update(i)},r=this.#e;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){let t=this.parentScale;return[-n._internalPadding*t,-(n._internalPadding+this.#s)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#r=new AbortController;let t=this._uiManager.combinedSignal(this.#r);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#r?.abort(),this.#r=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){let t=[];this.editorDiv.normalize();let e=null;for(let r of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(n.#c(r)),e=r);return t.join(`
`)}#l(){let[t,e]=this.parentDimensions,r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{let{currentLayer:i,div:s}=this,o=s.style.display,a=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",i.div.append(this.div),r=s.getBoundingClientRect(),s.remove(),s.style.display=o,s.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/e):(this.width=r.height/t,this.height=r.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();let t=this.#t,e=this.#t=this.#a().trimEnd();if(t===e)return;let r=i=>{if(this.#t=i,!i){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{r(e)},undo:()=>{r(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){n._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;let{style:r}=this.editorDiv;if(r.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,r.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){let[i,s]=this.parentDimensions;if(this.annotationElementId){let{position:o}=this._initialData,[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);let[c,u]=this.pageDimensions,[d,h]=this.pageTranslation,f,p;switch(this.rotation){case 0:f=t+(o[0]-d)/c,p=e+this.height-(o[1]-h)/u;break;case 90:f=t+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[l,-a];break;case 180:f=t-this.width+(o[0]-d)/c,p=e-(o[1]-h)/u,[a,l]=[-a,-l];break;case 270:f=t+(o[0]-d-this.height*u)/c,p=e+(o[1]-h-this.width*c)/u,[a,l]=[-l,a];break}this.setAt(f*i,p*s,a,l)}else this._moveAfterPaste(t,e);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Sp,"")}editorDivPaste(t){let e=t.clipboardData||window.clipboardData,{types:r}=e;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();let i=n.#f(e.getData("text")||"").replaceAll(Sp,`
`);if(!i)return;let s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();let o=s.getRangeAt(0);if(!i.includes(`
`)){o.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),s.collapseToStart();return}let{startContainer:a,startOffset:l}=o,c=[],u=[];if(a.nodeType===Node.TEXT_NODE){let f=a.parentElement;if(u.push(a.nodeValue.slice(l).replaceAll(Sp,"")),f!==this.editorDiv){let p=c;for(let g of this.editorDiv.childNodes){if(g===f){p=u;continue}p.push(n.#c(g))}}c.push(a.nodeValue.slice(0,l).replaceAll(Sp,""))}else if(a===this.editorDiv){let f=c,p=0;for(let g of this.editorDiv.childNodes)p++===l&&(f=u),f.push(n.#c(g))}this.#t=`${c.join(`
`)}${i}${u.join(`
`)}`,this.#h();let d=new Range,h=Math.sumPrecise(c.map(f=>f.length));for(let{firstChild:f}of this.editorDiv.childNodes)if(f.nodeType===Node.TEXT_NODE){let p=f.nodeValue.length;if(h<=p){d.setStart(f,h),d.setEnd(f,h);break}h-=p}s.removeAllRanges(),s.addRange(d)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(let t of this.#t.split(`
`)){let e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#u(){return this.#t.replaceAll("\xA0"," ")}static#f(t){return t.replaceAll(" ","\xA0")}get contentDiv(){return this.editorDiv}getPDFRect(){let t=n._internalPadding*this.parentScale;return this.getRect(t,t)}static deserialize(t,e,r){return K(this,null,function*(){let i=null;if(t instanceof tg){let{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:u,popupRef:d,contentsObj:h},textContent:f,textPosition:p,parent:{page:{pageNumber:g}}}=t;if(!f||f.length===0)return null;i=t={annotationType:ve.FREETEXT,color:Array.from(a),fontSize:o,value:f.join(`
`),position:p,pageIndex:g-1,rect:l.slice(0),rotation:c,annotationElementId:u,id:u,deleted:!1,popupRef:d,comment:h?.str||null}}let s=yield Cs(n,this,"deserialize").call(this,t,e,r);return s.#s=t.fontSize,s.#e=ne.makeHexColor(...t.color),s.#t=n.#f(t.value),s._initialData=i,t.comment&&s.setCommentData(t.comment),s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let e=this.getPDFRect(),r=tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),i={annotationType:ve.FREETEXT,color:r,fontSize:this.#s,value:this.#u(),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#g(i)?null:(i.id=this.annotationElementId,i)}#g(t){let{value:e,fontSize:r,color:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==r||t.color.some((o,a)=>o!==i[a])||t.pageIndex!==s}renderAnnotationElement(t){let e=super.renderAnnotationElement(t);if(!e)return null;let{style:r}=e;r.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,r.color=this.#e,e.replaceChildren();for(let s of this.#t.split(`
`)){let o=document.createElement("div");o.append(s?document.createTextNode(s):document.createElement("br")),e.append(o)}let i={rect:this.getPDFRect()};return i.popup=this.hasEditedComment?this.comment:{text:this.#t},t.updateEdited(i),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}},te=(()=>{class n{static PRECISION=1e-4;toSVGPath(){Ke("Abstract method `toSVGPath` must be implemented.")}get box(){Ke("Abstract getter `box` must be implemented.")}serialize(e,r){Ke("Abstract method `serialize` must be implemented.")}static _rescale(e,r,i,s,o,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=r+e[l]*s,a[l+1]=i+e[l+1]*o;return a}static _rescaleAndSwap(e,r,i,s,o,a){a||=new Float32Array(e.length);for(let l=0,c=e.length;l<c;l+=2)a[l]=r+e[l+1]*s,a[l+1]=i+e[l]*o;return a}static _translate(e,r,i,s){s||=new Float32Array(e.length);for(let o=0,a=e.length;o<a;o+=2)s[o]=r+e[o],s[o+1]=i+e[o+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,r,i,s,o){switch(o){case 90:return[1-r/i,e/s];case 180:return[1-e/i,1-r/s];case 270:return[r/i,1-e/s];default:return[e/i,r/s]}}static _normalizePagePoint(e,r,i){switch(i){case 90:return[1-r,e];case 180:return[1-e,1-r];case 270:return[r,1-e];default:return[e,r]}}static createBezierPoints(e,r,i,s,o,a){return[(e+5*i)/6,(r+5*s)/6,(5*i+o)/6,(5*s+a)/6,(i+o)/2,(s+a)/2]}}return n})(),sg=class n{#e;#t=[];#n;#r;#s=[];#i=new Float32Array(18);#o;#a;#l;#c;#h;#u;#f=[];static#g=8;static#p=2;static#d=n.#g+n.#p;constructor({x:t,y:e},r,i,s,o,a=0){this.#e=r,this.#u=s*i,this.#r=o,this.#i.set([NaN,NaN,NaN,NaN,t,e],6),this.#n=a,this.#c=n.#g*i,this.#l=n.#d*i,this.#h=i,this.#f.push(t,e)}isEmpty(){return isNaN(this.#i[8])}#m(){let t=this.#i.subarray(4,6),e=this.#i.subarray(16,18),[r,i,s,o]=this.#e;return[(this.#o+(t[0]-e[0])/2-r)/s,(this.#a+(t[1]-e[1])/2-i)/o,(this.#o+(e[0]-t[0])/2-r)/s,(this.#a+(e[1]-t[1])/2-i)/o]}add({x:t,y:e}){this.#o=t,this.#a=e;let[r,i,s,o]=this.#e,[a,l,c,u]=this.#i.subarray(8,12),d=t-c,h=e-u,f=Math.hypot(d,h);if(f<this.#l)return!1;let p=f-this.#c,g=p/f,m=g*d,v=g*h,y=a,b=l;a=c,l=u,c+=m,u+=v,this.#f?.push(t,e);let C=-v/p,_=m/p,E=C*this.#u,w=_*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([c+E,u+w],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([c-E,u-w],16),isNaN(this.#i[6])?(this.#s.length===0&&(this.#i.set([a+E,l+w],2),this.#s.push(NaN,NaN,NaN,NaN,(a+E-r)/s,(l+w-i)/o),this.#i.set([a-E,l-w],14),this.#t.push(NaN,NaN,NaN,NaN,(a-E-r)/s,(l-w-i)/o)),this.#i.set([y,b,a,l,c,u],6),!this.isEmpty()):(this.#i.set([y,b,a,l,c,u],6),Math.abs(Math.atan2(b-l,y-a)-Math.atan2(v,m))<Math.PI/2?([a,l,c,u]=this.#i.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((a+c)/2-r)/s,((l+u)/2-i)/o),[a,l,y,b]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((y+a)/2-r)/s,((b+l)/2-i)/o),!0):([y,b,a,l,c,u]=this.#i.subarray(0,6),this.#s.push(((y+5*a)/6-r)/s,((b+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),[c,u,a,l,y,b]=this.#i.subarray(12,18),this.#t.push(((y+5*a)/6-r)/s,((b+5*l)/6-i)/o,((5*a+c)/6-r)/s,((5*l+u)/6-i)/o,((a+c)/2-r)/s,((l+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";let t=this.#s,e=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#b();let r=[];r.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?r.push(`L${t[i+4]} ${t[i+5]}`):r.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);this.#C(r);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?r.push(`L${e[i+4]} ${e[i+5]}`):r.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return this.#v(r),r.join(" ")}#b(){let[t,e,r,i]=this.#e,[s,o,a,l]=this.#m();return`M${(this.#i[2]-t)/r} ${(this.#i[3]-e)/i} L${(this.#i[4]-t)/r} ${(this.#i[5]-e)/i} L${s} ${o} L${a} ${l} L${(this.#i[16]-t)/r} ${(this.#i[17]-e)/i} L${(this.#i[14]-t)/r} ${(this.#i[15]-e)/i} Z`}#v(t){let e=this.#t;t.push(`L${e[4]} ${e[5]} Z`)}#C(t){let[e,r,i,s]=this.#e,o=this.#i.subarray(4,6),a=this.#i.subarray(16,18),[l,c,u,d]=this.#m();t.push(`L${(o[0]-e)/i} ${(o[1]-r)/s} L${l} ${c} L${u} ${d} L${(a[0]-e)/i} ${(a[1]-r)/s}`)}newFreeDrawOutline(t,e,r,i,s,o){return new og(t,e,r,i,s,o)}getOutlines(){let t=this.#s,e=this.#t,r=this.#i,[i,s,o,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let d=0,h=l.length-2;d<h;d+=2)l[d]=(this.#f[d]-i)/o,l[d+1]=(this.#f[d+1]-s)/a;if(l[l.length-2]=(this.#o-i)/o,l[l.length-1]=(this.#a-s)/a,isNaN(r[6])&&!this.isEmpty())return this.#E(l);let c=new Float32Array(this.#s.length+24+this.#t.length),u=t.length;for(let d=0;d<u;d+=2){if(isNaN(t[d])){c[d]=c[d+1]=NaN;continue}c[d]=t[d],c[d+1]=t[d+1]}u=this.#x(c,u);for(let d=e.length-6;d>=6;d-=6)for(let h=0;h<6;h+=2){if(isNaN(e[d+h])){c[u]=c[u+1]=NaN,u+=2;continue}c[u]=e[d+h],c[u+1]=e[d+h+1],u+=2}return this.#y(c,u),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#n,this.#r)}#E(t){let e=this.#i,[r,i,s,o]=this.#e,[a,l,c,u]=this.#m(),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-r)/s,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-r)/s,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,(e[16]-r)/s,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-r)/s,(e[15]-i)/o],0),this.newFreeDrawOutline(d,t,this.#e,this.#h,this.#n,this.#r)}#y(t,e){let r=this.#t;return t.set([NaN,NaN,NaN,NaN,r[4],r[5]],e),e+=6}#x(t,e){let r=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[s,o,a,l]=this.#e,[c,u,d,h]=this.#m();return t.set([NaN,NaN,NaN,NaN,(r[0]-s)/a,(r[1]-o)/l,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,h,NaN,NaN,NaN,NaN,(i[0]-s)/a,(i[1]-o)/l],e),e+=24}},og=class extends te{#e;#t=new Float32Array(4);#n;#r;#s;#i;#o;constructor(t,e,r,i,s,o){super(),this.#o=t,this.#s=e,this.#e=r,this.#i=i,this.#n=s,this.#r=o,this.lastPoint=[NaN,NaN],this.#a(o);let[a,l,c,u]=this.#t;for(let d=0,h=t.length;d<h;d+=2)t[d]=(t[d]-a)/c,t[d+1]=(t[d+1]-l)/u;for(let d=0,h=e.length;d<h;d+=2)e[d]=(e[d]-a)/c,e[d+1]=(e[d+1]-l)/u}toSVGPath(){let t=[`M${this.#o[4]} ${this.#o[5]}`];for(let e=6,r=this.#o.length;e<r;e+=6){if(isNaN(this.#o[e])){t.push(`L${this.#o[e+4]} ${this.#o[e+5]}`);continue}t.push(`C${this.#o[e]} ${this.#o[e+1]} ${this.#o[e+2]} ${this.#o[e+3]} ${this.#o[e+4]} ${this.#o[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,r,i],s){let o=r-t,a=i-e,l,c;switch(s){case 0:l=te._rescale(this.#o,t,i,o,-a),c=te._rescale(this.#s,t,i,o,-a);break;case 90:l=te._rescaleAndSwap(this.#o,t,e,o,a),c=te._rescaleAndSwap(this.#s,t,e,o,a);break;case 180:l=te._rescale(this.#o,r,e,-o,a),c=te._rescale(this.#s,r,e,-o,a);break;case 270:l=te._rescaleAndSwap(this.#o,r,i,-o,-a),c=te._rescaleAndSwap(this.#s,r,i,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#a(t){let e=this.#o,r=e[4],i=e[5],s=[r,i,r,i],o=r,a=i,l=t?Math.max:Math.min;for(let u=6,d=e.length;u<d;u+=6){let h=e[u+4],f=e[u+5];if(isNaN(e[u]))ne.pointBoundingBox(h,f,s),a<f?(o=h,a=f):a===f&&(o=l(o,h));else{let p=[1/0,1/0,-1/0,-1/0];ne.bezierBoundingBox(r,i,...e.slice(u,u+6),p),ne.rectBoundingBox(...p,s),a<p[3]?(o=p[2],a=p[3]):a===p[3]&&(o=l(o,p[2]))}r=h,i=f}let c=this.#t;c[0]=s[0]-this.#n,c[1]=s[1]-this.#n,c[2]=s[2]-s[0]+2*this.#n,c[3]=s[3]-s[1]+2*this.#n,this.lastPoint=[o,a]}get box(){return this.#t}newOutliner(t,e,r,i,s,o=0){return new sg(t,e,r,i,s,o)}getNewOutline(t,e){let[r,i,s,o]=this.#t,[a,l,c,u]=this.#e,d=s*c,h=o*u,f=r*c+a,p=i*u+l,g=this.newOutliner({x:this.#s[0]*d+f,y:this.#s[1]*h+p},this.#e,this.#i,t,this.#r,e??this.#n);for(let m=2;m<this.#s.length;m+=2)g.add({x:this.#s[m]*d+f,y:this.#s[m+1]*h+p});return g.getOutlines()}},bu=class{#e;#t;#n=[];#r=[];constructor(t,e=0,r=0,i=!0){let s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(let{x:p,y:g,width:m,height:v}of t){let y=Math.floor((p-e)/a)*a,b=Math.ceil((p+m+e)/a)*a,C=Math.floor((g-e)/a)*a,_=Math.ceil((g+v+e)/a)*a,E=[y,C,_,!0],w=[b,C,_,!1];this.#n.push(E,w),ne.rectBoundingBox(y,C,b,_,s)}let l=s[2]-s[0]+2*r,c=s[3]-s[1]+2*r,u=s[0]-r,d=s[1]-r,h=this.#n.at(i?-1:-2),f=[h[0],h[2]];for(let p of this.#n){let[g,m,v]=p;p[0]=(g-u)/l,p[1]=(m-d)/c,p[2]=(v-d)/c}this.#e=new Float32Array([u,d,l,c]),this.#t=f}getOutlines(){this.#n.sort((e,r)=>e[0]-r[0]||e[1]-r[1]||e[2]-r[2]);let t=[];for(let e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#a(e),t.push(...this.#l(e)));return this.#s(t)}#s(t){let e=[],r=new Set;for(let o of t){let[a,l,c]=o;e.push([a,l,o],[a,c,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){let l=e[o][2],c=e[o+1][2];l.push(c),c.push(l),r.add(l),r.add(c)}let i=[],s;for(;r.size>0;){let o=r.values().next().value,[a,l,c,u,d]=o;r.delete(o);let h=a,f=l;for(s=[a,c],i.push(s);;){let p;if(r.has(u))p=u;else if(r.has(d))p=d;else break;r.delete(p),[a,l,c,u,d]=p,h!==a&&(s.push(h,f,a,f===l?l:c),h=a),f=f===l?c:l}s.push(h,f)}return new KC(i,this.#e,this.#t)}#i(t){let e=this.#r,r=0,i=e.length-1;for(;r<=i;){let s=r+i>>1,o=e[s][0];if(o===t)return s;o<t?r=s+1:i=s-1}return i+1}#o([,t,e]){let r=this.#i(t);this.#r.splice(r,0,[t,e])}#a([,t,e]){let r=this.#i(t);for(let i=r;i<this.#r.length;i++){let[s,o]=this.#r[i];if(s!==t)break;if(s===t&&o===e){this.#r.splice(i,1);return}}for(let i=r-1;i>=0;i--){let[s,o]=this.#r[i];if(s!==t)break;if(s===t&&o===e){this.#r.splice(i,1);return}}}#l(t){let[e,r,i]=t,s=[[e,r,i]],o=this.#i(i);for(let a=0;a<o;a++){let[l,c]=this.#r[a];for(let u=0,d=s.length;u<d;u++){let[,h,f]=s[u];if(!(c<=h||f<=l)){if(h>=l){if(f>c)s[u][1]=c;else{if(d===1)return[];s.splice(u,1),u--,d--}continue}s[u][2]=l,f>c&&s.push([e,c,f])}}}return s}},KC=class extends te{#e;#t;constructor(t,e,r){super(),this.#t=t,this.#e=e,this.lastPoint=r}toSVGPath(){let t=[];for(let e of this.#t){let[r,i]=e;t.push(`M${r} ${i}`);for(let s=2;s<e.length;s+=2){let o=e[s],a=e[s+1];o===r?(t.push(`V${a}`),i=a):a===i&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,e,r,i],s){let o=[],a=r-t,l=i-e;for(let c of this.#t){let u=new Array(c.length);for(let d=0;d<c.length;d+=2)u[d]=t+c[d]*a,u[d+1]=i-c[d+1]*l;o.push(u)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}},_u=class extends sg{newFreeDrawOutline(t,e,r,i,s,o){return new ZC(t,e,r,i,s,o)}},ZC=class extends og{newOutliner(t,e,r,i,s,o=0){return new _u(t,e,r,i,s,o)}},ag=class n extends tt{#e=null;#t=0;#n;#r=null;#s=null;#i=null;#o=null;#a=0;#l=null;#c=null;#h=null;#u=!1;#f=null;#g;#p=null;#d="";#m;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ve.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){let t=n.prototype;return Ie(this,"_keyboardManager",new bo([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super(ce(H({},t),{name:"highlightEditor"})),this.color=t.color||n._defaultColor,this.#m=t.thickness||n._defaultThickness,this.#g=t.opacity||n._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#d=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#u=!0,this.#C(t),this.#S()):this.#n&&(this.#e=t.anchorNode,this.#t=t.anchorOffset,this.#o=t.focusNode,this.#a=t.focusOffset,this.#v(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#m,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){let t=new bu(this.#n,.001);this.#c=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;let e=new bu(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=e.getOutlines();let{lastPoint:r}=this.#i;this.#f=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#C({highlightOutlines:t,highlightId:e,clipPathId:r}){this.#c=t;let i=1.5;if(this.#i=t.getNewOutline(this.#m/2+i,.0025),e>=0)this.#h=e,this.#r=r,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){let u=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:n.#w(this.#c.box,(u-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:n.#w(this.#i.box,u),path:{d:this.#i.toSVGPath()}})}let[s,o,a,l]=t.box;switch(this.rotation){case 0:this.x=s,this.y=o,this.width=a,this.height=l;break;case 90:{let[u,d]=this.parentDimensions;this.x=o,this.y=1-s,this.width=a*d/u,this.height=l*u/d;break}case 180:this.x=1-s,this.y=1-o,this.width=a,this.height=l;break;case 270:{let[u,d]=this.parentDimensions;this.x=1-o,this.y=s,this.width=a*d/u,this.height=l*u/d;break}}let{lastPoint:c}=this.#i;this.#f=[(c[0]-s)/a,(c[1]-o)/l]}static initialize(t,e){tt.initialize(t,e),n._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Be.HIGHLIGHT_COLOR:n._defaultColor=e;break;case Be.HIGHLIGHT_THICKNESS:n._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#f}updateParams(t,e){switch(t){case Be.HIGHLIGHT_COLOR:this.#E(e);break;case Be.HIGHLIGHT_THICKNESS:this.#y(e);break}}static get defaultPropertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,n._defaultColor],[Be.HIGHLIGHT_THICKNESS,n._defaultThickness]]}get propertiesToUpdate(){return[[Be.HIGHLIGHT_COLOR,this.color||n._defaultColor],[Be.HIGHLIGHT_THICKNESS,this.#m||n._defaultThickness],[Be.HIGHLIGHT_FREE,this.#u]]}#E(t){let e=(s,o)=>{this.color=s,this.#g=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:s,"fill-opacity":o}}),this.#s?.updateColor(s)},r=this.color,i=this.#g;this.addCommands({cmd:e.bind(this,t,n._defaultOpacity),undo:e.bind(this,r,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#y(t){let e=this.#m,r=i=>{this.#m=i,this.#x(i)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Be.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Kp({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#I())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#I())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#A(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#A():t&&(this.#S(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#x(t){if(!this.#u)return;this.#C({highlightOutlines:this.#c.getNewOutline(t/2)}),this.fixAndSetPosition();let[e,r]=this.parentDimensions;this.setDims(this.width*e,this.height*r)}#A(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#S(t=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#r}=t.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#g},rootClass:{highlight:!0,free:this.#u},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#l&&(this.#l.style.clipPath=this.#r))}static#w([t,e,r,i],s){switch(s){case 90:return[1-e-i,t,i,r];case 180:return[1-t-r,1-e-i,r,i];case 270:return[e,1-t-r,i,r]}return[t,e,r,i]}rotate(t){let{drawLayer:e}=this.parent,r;this.#u?(t=(t-this.rotation+360)%360,r=n.#w(this.#c.box,t)):r=n.#w([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#h,{bbox:r,root:{"data-main-rotation":t}}),e.updateProperties(this.#p,{bbox:n.#w(this.#i.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;let t=super.render();this.#d&&(t.setAttribute("aria-label",this.#d),t.setAttribute("role","mark")),this.#u?t.classList.add("free"):this.div.addEventListener("keydown",this.#O.bind(this),{signal:this._uiManager._signal});let e=this.#l=document.createElement("div");t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#r;let[r,i]=this.parentDimensions;return this.setDims(this.width*r,this.height*i),hR(this,this.#l,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#O(t){n._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#T(!0);break;case 1:case 3:this.#T(!1);break}}#T(t){if(!this.#e)return;let e=window.getSelection();t?e.setPosition(this.#e,this.#t):e.setPosition(this.#o,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#u||this.#T(!1))}get _mustFixPosition(){return!this.#u}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!t}}))}#I(){return this.#u?this.rotation:0}#k(){if(this.#u)return null;let[t,e]=this.pageDimensions,[r,i]=this.pageTranslation,s=this.#n,o=new Float32Array(s.length*8),a=0;for(let{x:l,y:c,width:u,height:d}of s){let h=l*t+r,f=(1-c)*e+i;o[a]=o[a+4]=h,o[a+1]=o[a+3]=f,o[a+2]=o[a+6]=h+u*t,o[a+5]=o[a+7]=f-d*e,a+=8}return o}#N(t){return this.#c.serialize(t,this.#I())}static startHighlighting(t,e,{target:r,x:i,y:s}){let{x:o,y:a,width:l,height:c}=r.getBoundingClientRect(),u=new AbortController,d=t.combinedSignal(u),h=f=>{u.abort(),this.#L(t,f)};window.addEventListener("blur",h,{signal:d}),window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("pointerdown",Tt,{capture:!0,passive:!1,signal:d}),window.addEventListener("contextmenu",Jn,{signal:d}),r.addEventListener("pointermove",this.#P.bind(this,t),{signal:d}),this._freeHighlight=new _u({x:i,y:s},[o,a,l,c],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#P(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#L(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static deserialize(t,e,r){return K(this,null,function*(){let i=null;if(t instanceof rg){let{data:{quadPoints:p,rect:g,rotation:m,id:v,color:y,opacity:b,popupRef:C,contentsObj:_},parent:{page:{pageNumber:E}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(y),opacity:b,quadPoints:p,boxes:null,pageIndex:E-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,popupRef:C,comment:_?.str||null}}else if(t instanceof yu){let{data:{inkLists:p,rect:g,rotation:m,id:v,color:y,borderStyle:{rawWidth:b},popupRef:C,contentsObj:_},parent:{page:{pageNumber:E}}}=t;i=t={annotationType:ve.HIGHLIGHT,color:Array.from(y),thickness:b,inkLists:p,boxes:null,pageIndex:E-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,popupRef:C,comment:_?.str||null}}let{color:s,quadPoints:o,inkLists:a,opacity:l}=t,c=yield Cs(n,this,"deserialize").call(this,t,e,r);c.color=ne.makeHexColor(...s),c.#g=l||1,a&&(c.#m=t.thickness),c._initialData=i,t.comment&&c.setCommentData(t.comment);let[u,d]=c.pageDimensions,[h,f]=c.pageTranslation;if(o){let p=c.#n=[];for(let g=0;g<o.length;g+=8)p.push({x:(o[g]-h)/u,y:1-(o[g+1]-f)/d,width:(o[g+2]-o[g])/u,height:(o[g+1]-o[g+5])/d});c.#v(),c.#S(),c.rotate(c.rotation)}else if(a){c.#u=!0;let p=a[0],g={x:p[0]-h,y:d-(p[1]-f)},m=new _u(g,[0,0,u,d],1,c.#m/2,!0,.001);for(let b=0,C=p.length;b<C;b+=2)g.x=p[b]-h,g.y=d-(p[b+1]-f),m.add(g);let{id:v,clipPathId:y}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:m.toSVGPath()}},!0,!0);c.#C({highlightOutlines:m.getOutlines(),highlightId:v,clipPathId:y}),c.#S(),c.rotate(c.parentRotation)}return c})}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();let e=this.getPDFRect(),r=tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i={annotationType:ve.HIGHLIGHT,color:r,opacity:this.#g,thickness:this.#m,quadPoints:this.#k(),outlines:this.#N(e),pageIndex:this.pageIndex,rect:e,rotation:this.#I(),structTreeParentId:this._structTreeParentId};return this.addComment(i),this.annotationElementId&&!this.#R(i)?null:(i.id=this.annotationElementId,i)}#R(t){let{color:e}=this._initialData;return this.hasEditedComment||t.color.some((r,i)=>r!==e[i])}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}static canCreateNewEmptyEditor(){return!1}},lg=class{#e=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(let[e,r]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,r)}updateSVGProperty(t,e){this.#e[t]=e}toSVGProperties(){let t=this.#e;return this.#e=Object.create(null),{root:t}}reset(){this.#e=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Ke("Not implemented")}},CR=(()=>{class n extends tt{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#r=null;static#s=null;static#i=NaN;static#o=null;static#a=null;static#l=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:r,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),r>=0?(this._drawId=r,this.parent.drawLayer.finalizeDraw(r,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,r){let{id:i}=r.drawLayer.draw(n._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,r){let i=new Set(Object.keys(e));for(let[s,o]of Object.entries(r))i.has(s)?Object.assign(e[s],o):e[s]=o;return e}static getDefaultDrawingOptions(e){Ke("Not implemented")}static get typesMap(){Ke("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,r){let i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,r),this._currentParent&&(n.#n.updateProperty(i,r),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,r){let i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,r)}static get defaultPropertiesToUpdate(){let e=[],r=this._defaultDrawingOptions;for(let[i,s]of this.typesMap)e.push([i,r[s]]);return e}get propertiesToUpdate(){let e=[],{_drawingOptions:r}=this;for(let[i,s]of this.constructor.typesMap)e.push([i,r[s]]);return e}_updateProperty(e,r,i){let s=this._drawingOptions,o=s[r],a=l=>{s.updateProperty(r,l);let c=this.#e.updateProperty(r,l);c&&this.#d(c),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties()),e===this.colorType&&this._colorPicker?.update(l)};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,r){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let r=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),r=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),r&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,r,i,s]){let{parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[r,1-e,i*(a/o),s*(o/a)];case 180:return[1-e,1-r,i,s];case 270:return[1-r,e,i*(a/o),s*(o/a)];default:return[e,r,i,s]}}#p(){let{x:e,y:r,width:i,height:s,parentDimensions:[o,a],rotation:l}=this;switch(l){case 90:return[1-r,e,i*(o/a),s*(a/o)];case 180:return[1-e,1-r,i,s];case 270:return[r,1-e,i*(o/a),s*(a/o)];default:return[e,r,i,s]}}#d(e){if([this.x,this.y,this.width,this.height]=this.#g(e),this.div){this.fixAndSetPosition();let[r,i]=this.parentDimensions;this.setDims(this.width*r,this.height*i)}this._onResized()}#m(){let{x:e,y:r,width:i,height:s,rotation:o,parentRotation:a,parentDimensions:[l,c]}=this;switch((o*4+a)/90){case 1:return[1-r-s,e,s,i];case 2:return[1-e-i,1-r-s,i,s];case 3:return[r,1-e-i,s,i];case 4:return[e,r-i*(l/c),s*(c/l),i*(l/c)];case 5:return[1-r,e,i*(l/c),s*(c/l)];case 6:return[1-e-s*(c/l),1-r,s*(c/l),i*(l/c)];case 7:return[r-i*(l/c),1-e-s*(c/l),i*(l/c),s*(c/l)];case 8:return[e-i,r-s,i,s];case 9:return[1-r,e-i,s,i];case 10:return[1-e,1-r,i,s];case 11:return[r-s,1-e,s,i];case 12:return[e-s*(c/l),r,s*(c/l),i*(l/c)];case 13:return[1-r-i*(l/c),e-s*(c/l),i*(l/c),s*(c/l)];case 14:return[1-e,1-r-i*(l/c),s*(c/l),i*(l/c)];case 15:return[r,1-e,i*(l/c),s*(c/l)];default:return[e,r,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,n._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,r;this._isCopy&&(e=this.x,r=this.y);let i=super.render();i.classList.add("draw");let s=document.createElement("div");i.append(s),s.setAttribute("aria-hidden","true"),s.className="internal";let[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,r),i}static createDrawerInstance(e,r,i,s,o){Ke("Not implemented")}static startDrawing(e,r,i,s){let{target:o,offsetX:a,offsetY:l,pointerId:c,pointerType:u}=s;if(n.#o&&n.#o!==u)return;let{viewport:{rotation:d}}=e,{width:h,height:f}=o.getBoundingClientRect(),p=n.#r=new AbortController,g=e.combinedSignal(p);if(n.#i||=c,n.#o??=u,window.addEventListener("pointerup",m=>{n.#i===m.pointerId?this._endDraw(m):n.#a?.delete(m.pointerId)},{signal:g}),window.addEventListener("pointercancel",m=>{n.#i===m.pointerId?this._currentParent.endDrawingSession():n.#a?.delete(m.pointerId)},{signal:g}),window.addEventListener("pointerdown",m=>{n.#o===m.pointerType&&((n.#a||=new Set).add(m.pointerId),n.#n.isCancellable()&&(n.#n.removeLastElement(),n.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",Jn,{signal:g}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:g}),o.addEventListener("touchmove",m=>{m.timeStamp===n.#l&&Tt(m)},{signal:g}),e.toggleDrawing(),r._editorUndoBar?.hide(),n.#n){e.drawLayer.updateProperties(this._currentDrawId,n.#n.startNew(a,l,h,f,d));return}r.updateUIForDefaultProperties(this),n.#n=this.createDrawerInstance(a,l,h,f,d),n.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(n.#s.toSVGProperties(),n.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(n.#l=-1,!n.#n)return;let{offsetX:r,offsetY:i,pointerId:s}=e;if(n.#i===s){if(n.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,n.#n.add(r,i)),n.#l=e.timeStamp,Tt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,n.#n=null,n.#s=null,n.#o=null,n.#l=NaN),n.#r&&(n.#r.abort(),n.#r=null,n.#i=NaN,n.#a=null)}static _endDraw(e){let r=this._currentParent;if(r){if(r.toggleDrawing(!0),this._cleanup(!1),e?.target===r.div&&r.drawLayer.updateProperties(this._currentDrawId,n.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){let i=n.#n,s=this._currentDrawId,o=i.getLastElement();r.addCommands({cmd:()=>{r.drawLayer.updateProperties(s,i.setLastElement(o))},undo:()=>{r.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Be.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){let r=this._currentParent;if(!r)return null;if(r.toggleDrawing(!0),r.cleanUndoStack(Be.DRAW_STEP),!n.#n.isEmpty()){let{pageDimensions:[i,s],scale:o}=r,a=r.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:n.#n.getOutlines(i*o,s*o,o,this._INNER_MARGIN),drawingOptions:n.#s,mustBeCommitted:!e});return this._cleanup(!0),a}return r.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,r,i,s,o,a){Ke("Not implemented")}static deserialize(e,r,i){return K(this,null,function*(){let{rawDims:{pageWidth:s,pageHeight:o,pageX:a,pageY:l}}=r.viewport,c=this.deserializeDraw(a,l,s,o,this._INNER_MARGIN,e),u=yield Cs(n,this,"deserialize").call(this,e,r,i);return u.createDrawingOptions(e),u.#c({drawOutlines:c}),u.#f(),u.onScaleChanging(),u.rotate(),u})}serializeDraw(e){let[r,i]=this.pageTranslation,[s,o]=this.pageDimensions;return this.#e.serialize([r,i,s,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}return n})(),qC=class{#e=new Float64Array(6);#t;#n;#r;#s;#i;#o="";#a=0;#l=new Co;#c;#h;constructor(t,e,r,i,s,o){this.#c=r,this.#h=i,this.#r=s,this.#s=o,[t,e]=this.#u(t,e);let a=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e],this.#n=[{line:a,points:this.#i}],this.#e.set(a,0)}updateProperty(t,e){t==="stroke-width"&&(this.#s=e)}#u(t,e){return te._normalizePoint(t,e,this.#c,this.#h,this.#r)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(t,e){[t,e]=this.#u(t,e);let[r,i,s,o]=this.#e.subarray(2,6),a=t-s,l=e-o;return Math.hypot(this.#c*a,this.#h*l)<=2?null:(this.#i.push(t,e),isNaN(r)?(this.#e.set([s,o,t,e],2),this.#t.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([r,i,s,o,t,e],0),this.#t.push(...te.createBezierPoints(r,i,s,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){let r=this.add(t,e);return r||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,r,i,s){this.#c=r,this.#h=i,this.#r=s,[t,e]=this.#u(t,e);let o=this.#t=[NaN,NaN,NaN,NaN,t,e];this.#i=[t,e];let a=this.#n.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#n.push({line:o,points:this.#i}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#t=t.line,this.#i=t.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#l.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#l.removeLastElement();this.#n.pop(),this.#o="";for(let t=0,e=this.#n.length;t<e;t++){let{line:r,points:i}=this.#n[t];this.#t=r,this.#i=i,this.#a=0,this.toSVGPath()}return{path:{d:this.#o}}}toSVGPath(){let t=te.svgRound(this.#t[4]),e=te.svgRound(this.#t[5]);if(this.#i.length===2)return this.#o=`${this.#o} M ${t} ${e} Z`,this.#o;if(this.#i.length<=6){let i=this.#o.lastIndexOf("M");this.#o=`${this.#o.slice(0,i)} M ${t} ${e}`,this.#a=6}if(this.#i.length===4){let i=te.svgRound(this.#t[10]),s=te.svgRound(this.#t[11]);return this.#o=`${this.#o} L ${i} ${s}`,this.#a=12,this.#o}let r=[];this.#a===0&&(r.push(`M ${t} ${e}`),this.#a=6);for(let i=this.#a,s=this.#t.length;i<s;i+=6){let[o,a,l,c,u,d]=this.#t.slice(i,i+6).map(te.svgRound);r.push(`C${o} ${a} ${l} ${c} ${u} ${d}`)}return this.#o+=r.join(" "),this.#a=this.#t.length,this.#o}getOutlines(t,e,r,i){let s=this.#n.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#l.build(this.#n,t,e,r,this.#r,this.#s,i),this.#e=null,this.#t=null,this.#n=null,this.#o=null,this.#l}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}},Co=class extends te{#e;#t=0;#n;#r;#s;#i;#o;#a;#l;build(t,e,r,i,s,o,a){this.#s=e,this.#i=r,this.#o=i,this.#a=s,this.#l=o,this.#n=a??0,this.#r=t,this.#u()}get thickness(){return this.#l}setLastElement(t){return this.#r.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#r.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){let t=[];for(let{line:e}of this.#r){if(t.push(`M${te.svgRound(e[4])} ${te.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${te.svgRound(e[10])} ${te.svgRound(e[11])}`);continue}for(let r=6,i=e.length;r<i;r+=6){let[s,o,a,l,c,u]=e.subarray(r,r+6).map(te.svgRound);t.push(`C${s} ${o} ${a} ${l} ${c} ${u}`)}}return t.join("")}serialize([t,e,r,i],s){let o=[],a=[],[l,c,u,d]=this.#h(),h,f,p,g,m,v,y,b,C;switch(this.#a){case 0:C=te._rescale,h=t,f=e+i,p=r,g=-i,m=t+l*r,v=e+(1-c-d)*i,y=t+(l+u)*r,b=e+(1-c)*i;break;case 90:C=te._rescaleAndSwap,h=t,f=e,p=r,g=i,m=t+c*r,v=e+l*i,y=t+(c+d)*r,b=e+(l+u)*i;break;case 180:C=te._rescale,h=t+r,f=e,p=-r,g=i,m=t+(1-l-u)*r,v=e+c*i,y=t+(1-l)*r,b=e+(c+d)*i;break;case 270:C=te._rescaleAndSwap,h=t+r,f=e+i,p=-r,g=-i,m=t+(1-c-d)*r,v=e+(1-l-u)*i,y=t+(1-c)*r,b=e+(1-l)*i;break}for(let{line:_,points:E}of this.#r)o.push(C(_,h,f,p,g,s?new Array(_.length):null)),a.push(C(E,h,f,p,g,s?new Array(E.length):null));return{lines:o,points:a,rect:[m,v,y,b]}}static deserialize(t,e,r,i,s,{paths:{lines:o,points:a},rotation:l,thickness:c}){let u=[],d,h,f,p,g;switch(l){case 0:g=te._rescale,d=-t/r,h=e/i+1,f=1/r,p=-1/i;break;case 90:g=te._rescaleAndSwap,d=-e/i,h=-t/r,f=1/i,p=1/r;break;case 180:g=te._rescale,d=t/r+1,h=-e/i,f=-1/r,p=1/i;break;case 270:g=te._rescaleAndSwap,d=e/i+1,h=t/r+1,f=-1/i,p=-1/r;break}if(!o){o=[];for(let v of a){let y=v.length;if(y===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1]]));continue}if(y===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,v[0],v[1],NaN,NaN,NaN,NaN,v[2],v[3]]));continue}let b=new Float32Array(3*(y-2));o.push(b);let[C,_,E,w]=v.subarray(0,4);b.set([NaN,NaN,NaN,NaN,C,_],0);for(let x=4;x<y;x+=2){let S=v[x],A=v[x+1];b.set(te.createBezierPoints(C,_,E,w,S,A),(x-2)*3),[C,_,E,w]=[E,w,S,A]}}}for(let v=0,y=o.length;v<y;v++)u.push({line:g(o[v].map(b=>b??NaN),d,h,f,p),points:g(a[v].map(b=>b??NaN),d,h,f,p)});let m=new this.prototype.constructor;return m.build(u,r,i,1,l,c,s),m}#c(t=this.#l){let e=this.#n+t/2*this.#o;return this.#a%180===0?[e/this.#s,e/this.#i]:[e/this.#i,e/this.#s]}#h(){let[t,e,r,i]=this.#e,[s,o]=this.#c(0);return[t+s,e+o,r-2*s,i-2*o]}#u(){let t=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(let{line:i}of this.#r){if(i.length<=12){for(let a=4,l=i.length;a<l;a+=6)ne.pointBoundingBox(i[a],i[a+1],t);continue}let s=i[4],o=i[5];for(let a=6,l=i.length;a<l;a+=6){let[c,u,d,h,f,p]=i.subarray(a,a+6);ne.bezierBoundingBox(s,o,c,u,d,h,f,p,t),s=f,o=p}}let[e,r]=this.#c();t[0]=an(t[0]-e,0,1),t[1]=an(t[1]-r,0,1),t[2]=an(t[2]+e,0,1),t[3]=an(t[3]+r,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#e}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){let[e,r]=this.#c();this.#l=t;let[i,s]=this.#c(),[o,a]=[i-e,s-r],l=this.#e;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([t,e],r){let[i,s]=this.#c();this.#s=t,this.#i=e,this.#o=r;let[o,a]=this.#c(),l=o-i,c=a-s,u=this.#e;return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u}updateRotation(t){return this.#t=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(te.svgRound).join(" ")}get defaultProperties(){let[t,e]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(e)}`}}}get rotationTransform(){let[,,t,e]=this.#e,r=0,i=0,s=0,o=0,a=0,l=0;switch(this.#t){case 90:i=e/t,s=-t/e,a=t;break;case 180:r=-1,o=-1,a=t,l=e;break;case 270:i=-e/t,s=t/e,l=e;break;default:return""}return`matrix(${r} ${i} ${s} ${o} ${te.svgRound(a)} ${te.svgRound(l)})`}getPathResizingSVGProperties([t,e,r,i]){let[s,o]=this.#c(),[a,l,c,u]=this.#e;if(Math.abs(c-s)<=te.PRECISION||Math.abs(u-o)<=te.PRECISION){let g=t+r/2-(a+c/2),m=e+i/2-(l+u/2);return{path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(e)}`,transform:`${this.rotationTransform} translate(${g} ${m})`}}}let d=(r-2*s)/(c-2*s),h=(i-2*o)/(u-2*o),f=c/r,p=u/i;return{path:{"transform-origin":`${te.svgRound(a)} ${te.svgRound(l)}`,transform:`${this.rotationTransform} scale(${f} ${p}) translate(${te.svgRound(s)} ${te.svgRound(o)}) scale(${d} ${h}) translate(${te.svgRound(-s)} ${te.svgRound(-o)})`}}}getPathResizedSVGProperties([t,e,r,i]){let[s,o]=this.#c(),a=this.#e,[l,c,u,d]=a;if(a[0]=t,a[1]=e,a[2]=r,a[3]=i,Math.abs(u-s)<=te.PRECISION||Math.abs(d-o)<=te.PRECISION){let m=t+r/2-(l+u/2),v=e+i/2-(c+d/2);for(let{line:y,points:b}of this.#r)te._translate(y,m,v,y),te._translate(b,m,v,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}let h=(r-2*s)/(u-2*s),f=(i-2*o)/(d-2*o),p=-h*(l+s)+t+s,g=-f*(c+o)+e+o;if(h!==1||f!==1||p!==0||g!==0)for(let{line:m,points:v}of this.#r)te._rescale(m,p,g,h,f,m),te._rescale(v,p,g,h,f,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${te.svgRound(t)} ${te.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],r){let[i,s]=r,o=this.#e,a=t-o[0],l=e-o[1];if(this.#s===i&&this.#i===s)for(let{line:c,points:u}of this.#r)te._translate(c,a,l,c),te._translate(u,a,l,u);else{let c=this.#s/i,u=this.#i/s;this.#s=i,this.#i=s;for(let{line:d,points:h}of this.#r)te._rescale(d,a,l,c,u,d),te._rescale(h,a,l,c,u,h);o[2]*=c,o[3]*=u}return o[0]=t,o[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${te.svgRound(t)} ${te.svgRound(e)}`}}}get defaultSVGProperties(){let t=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${te.svgRound(t[0])} ${te.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}},cg=class n extends lg{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},QC=class n extends CR{static _type="ink";static _editorType=ve.INK;static _defaultDrawingOptions=null;constructor(t){super(ce(H({},t),{name:"inkEditor"})),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){tt.initialize(t,e),this._defaultDrawingOptions=new cg(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return Ie(this,"typesMap",new Map([[Be.INK_THICKNESS,"stroke-width"],[Be.INK_COLOR,"stroke"],[Be.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,r,i,s){return new qC(t,e,r,i,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,r,i,s,o){return Co.deserialize(t,e,r,i,s,o)}static deserialize(t,e,r){return K(this,null,function*(){let i=null;if(t instanceof yu){let{data:{inkLists:o,rect:a,rotation:l,id:c,color:u,opacity:d,borderStyle:{rawWidth:h},popupRef:f,contentsObj:p},parent:{page:{pageNumber:g}}}=t;i=t={annotationType:ve.INK,color:Array.from(u),thickness:h,opacity:d,paths:{points:o},boxes:null,pageIndex:g-1,rect:a.slice(0),rotation:l,annotationElementId:c,id:c,deleted:!1,popupRef:f,comment:p?.str||null}}let s=yield Cs(n,this,"deserialize").call(this,t,e,r);return s._initialData=i,t.comment&&s.setCommentData(t.comment),s})}get toolbarButtons(){return this._colorPicker||=new Zp(this),[["colorPicker",this._colorPicker]]}get colorType(){return Be.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();let{_drawId:t,_drawingOptions:e,parent:r}=this;e.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){let t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:r}){this._drawingOptions=n.getDefaultDrawingOptions({stroke:ne.makeHexColor(...t),"stroke-width":e,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let{lines:e,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{stroke:s,"stroke-opacity":o,"stroke-width":a}}=this,l={annotationType:ve.INK,color:tt._colorManager.convert(s),opacity:o,thickness:a,paths:{lines:e,points:r},pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),t?(l.isCopy=!0,l):this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(t){let{color:e,thickness:r,opacity:i,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,a)=>o!==e[a])||t.thickness!==r||t.opacity!==i||t.pageIndex!==s}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let{points:e,rect:r}=this.serializeDraw(!1),i={rect:r,thickness:this._drawingOptions["stroke-width"],points:e};return this.hasEditedComment&&(i.popup=this.comment),t.updateEdited(i),null}},Cu=class extends Co{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}},Tp=8,tu=3,vs=class{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(t,e,r,i){return r-=t,i-=e,r===0?i>0?0:4:r===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#r(t,e,r,i,s,o,a){let l=this.#t(r,i,s,o);for(let c=0;c<8;c++){let u=(-c+l-a+16)%8,d=this.#n[2*u],h=this.#n[2*u+1];if(t[(r+d)*e+(i+h)]!==0)return u}return-1}static#s(t,e,r,i,s,o,a){let l=this.#t(r,i,s,o);for(let c=0;c<8;c++){let u=(c+l+a+16)%8,d=this.#n[2*u],h=this.#n[2*u+1];if(t[(r+d)*e+(i+h)]!==0)return u}return-1}static#i(t,e,r,i){let s=t.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=t[u]<=i?1:0;for(let u=1;u<r-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*r-1-u]=0;let a=1,l,c=[];for(let u=1;u<r-1;u++){l=1;for(let d=1;d<e-1;d++){let h=u*e+d,f=o[h];if(f===0)continue;let p=u,g=d;if(f===1&&o[h-1]===0)a+=1,g-=1;else if(f>=1&&o[h+1]===0)a+=1,g+=1,f>1&&(l=f);else{f!==1&&(l=Math.abs(f));continue}let m=[d,u],v=g===d+1,y={isHole:v,points:m,id:a,parent:0};c.push(y);let b;for(let I of c)if(I.id===l){b=I;break}b?b.isHole?y.parent=v?b.parent:l:y.parent=v?l:b.parent:y.parent=v?l:0;let C=this.#r(o,e,u,d,p,g,0);if(C===-1){o[h]=-a,o[h]!==1&&(l=Math.abs(o[h]));continue}let _=this.#n[2*C],E=this.#n[2*C+1],w=u+_,x=d+E;p=w,g=x;let S=u,A=d;for(;;){let I=this.#s(o,e,S,A,p,g,1);_=this.#n[2*I],E=this.#n[2*I+1];let O=S+_,k=A+E;m.push(k,O);let $=S*e+A;if(o[$+1]===0?o[$]=-a:o[$]===1&&(o[$]=a),O===u&&k===d&&S===w&&A===x){o[h]!==1&&(l=Math.abs(o[h]));break}else p=S,g=A,S=O,A=k}}}return c}static#o(t,e,r,i){if(r-e<=4){for(let w=e;w<r-2;w+=2)i.push(t[w],t[w+1]);return}let s=t[e],o=t[e+1],a=t[r-4]-s,l=t[r-3]-o,c=Math.hypot(a,l),u=a/c,d=l/c,h=u*o-d*s,f=l/a,p=1/c,g=Math.atan(f),m=Math.cos(g),v=Math.sin(g),y=p*(Math.abs(m)+Math.abs(v)),b=p*(1-y+y**2),C=Math.max(Math.atan(Math.abs(v+m)*b),Math.atan(Math.abs(v-m)*b)),_=0,E=e;for(let w=e+2;w<r-2;w+=2){let x=Math.abs(h-u*t[w+1]+d*t[w]);x>_&&(E=w,_=x)}_>(c*C)**2?(this.#o(t,e,E+2,i),this.#o(t,E,r,i)):i.push(s,o)}static#a(t){let e=[],r=t.length;return this.#o(t,0,r,e),e.push(t[r-2],t[r-1]),e.length<=4?null:e}static#l(t,e,r,i,s,o){let a=new Float32Array(o**2),l=-2*i**2,c=o>>1;for(let g=0;g<o;g++){let m=(g-c)**2;for(let v=0;v<o;v++)a[g*o+v]=Math.exp((m+(v-c)**2)/l)}let u=new Float32Array(256),d=-2*s**2;for(let g=0;g<256;g++)u[g]=Math.exp(g**2/d);let h=t.length,f=new Uint8Array(h),p=new Uint32Array(256);for(let g=0;g<r;g++)for(let m=0;m<e;m++){let v=g*e+m,y=t[v],b=0,C=0;for(let E=0;E<o;E++){let w=g+E-c;if(!(w<0||w>=r))for(let x=0;x<o;x++){let S=m+x-c;if(S<0||S>=e)continue;let A=t[w*e+S],I=a[E*o+x]*u[Math.abs(A-y)];b+=A*I,C+=I}}let _=f[v]=Math.round(b/C);p[_]++}return[f,p]}static#c(t){let e=new Uint32Array(256);for(let r of t)e[r]++;return e}static#h(t){let e=t.length,r=new Uint8ClampedArray(e>>2),i=-1/0,s=1/0;for(let a=0,l=r.length;a<l;a++){let c=r[a]=t[a<<2];i=Math.max(i,c),s=Math.min(s,c)}let o=255/(i-s);for(let a=0,l=r.length;a<l;a++)r[a]=(r[a]-s)*o;return r}static#u(t){let e,r=-1/0,i=-1/0,s=t.findIndex(l=>l!==0),o=s,a=s;for(e=s;e<256;e++){let l=t[e];l>r&&(e-o>i&&(i=e-o,a=e-1),r=l,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){let e=t,{width:r,height:i}=t,{maxDim:s}=this.#e,o=r,a=i;if(r>s||i>s){let h=r,f=i,p=Math.log2(Math.max(r,i)/s),g=Math.floor(p);p=p===g?g-1:g;for(let v=0;v<p;v++){o=Math.ceil(h/2),a=Math.ceil(f/2);let y=new OffscreenCanvas(o,a);y.getContext("2d").drawImage(t,0,0,h,f,0,0,o,a),h=o,f=a,t!==e&&t.close(),t=y.transferToImageBitmap()}let m=Math.min(s/o,s/a);o=Math.round(o*m),a=Math.round(a*m)}let c=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});c.fillStyle="white",c.fillRect(0,0,o,a),c.filter="grayscale(1)",c.drawImage(t,0,0,t.width,t.height,0,0,o,a);let u=c.getImageData(0,0,o,a).data;return[this.#h(u),o,a]}static extractContoursFromText(t,{fontFamily:e,fontStyle:r,fontWeight:i},s,o,a,l){let c=new OffscreenCanvas(1,1),u=c.getContext("2d",{alpha:!1}),d=200,h=u.font=`${r} ${i} ${d}px ${e}`,{actualBoundingBoxLeft:f,actualBoundingBoxRight:p,actualBoundingBoxAscent:g,actualBoundingBoxDescent:m,fontBoundingBoxAscent:v,fontBoundingBoxDescent:y,width:b}=u.measureText(t),C=1.5,_=Math.ceil(Math.max(Math.abs(f)+Math.abs(p)||0,b)*C),E=Math.ceil(Math.max(Math.abs(g)+Math.abs(m)||d,Math.abs(v)+Math.abs(y)||d)*C);c=new OffscreenCanvas(_,E),u=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=h,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,_,E),u.fillStyle="black",u.fillText(t,_*(C-1)/2,E*(3-C)/2);let w=this.#h(u.getImageData(0,0,_,E).data),x=this.#c(w),S=this.#u(x),A=this.#i(w,_,E,S);return this.processDrawnLines({lines:{curves:A,width:_,height:E},pageWidth:s,pageHeight:o,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,r,i,s){let[o,a,l]=this.#f(t),[c,u]=this.#l(o,a,l,Math.hypot(a,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),d=this.#u(u),h=this.#i(c,a,l,d);return this.processDrawnLines({lines:{curves:h,width:a,height:l},pageWidth:e,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:o,areContours:a}){i%180!==0&&([e,r]=[r,e]);let{curves:l,width:c,height:u}=t,d=t.thickness??0,h=[],f=Math.min(e/c,r/u),p=f/e,g=f/r,m=[];for(let{points:y}of l){let b=o?this.#a(y):y;if(!b)continue;m.push(b);let C=b.length,_=new Float32Array(C),E=new Float32Array(3*(C===2?2:C-2));if(h.push({line:E,points:_}),C===2){_[0]=b[0]*p,_[1]=b[1]*g,E.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[w,x,S,A]=b;w*=p,x*=g,S*=p,A*=g,_.set([w,x,S,A],0),E.set([NaN,NaN,NaN,NaN,w,x],0);for(let I=4;I<C;I+=2){let O=_[I]=b[I]*p,k=_[I+1]=b[I+1]*g;E.set(te.createBezierPoints(w,x,S,A,O,k),(I-2)*3),[w,x,S,A]=[S,A,O,k]}}if(h.length===0)return null;let v=a?new Cu:new Co;return v.build(h,e,r,1,i,a?0:d,s),{outline:v,newCurves:m,areContours:a,thickness:d,width:c,height:u}}static compressSignature(o){return K(this,arguments,function*({outlines:t,areContours:e,thickness:r,width:i,height:s}){let a=1/0,l=-1/0,c=0;for(let C of t){c+=C.length;for(let _=2,E=C.length;_<E;_++){let w=C[_]-C[_-2];a=Math.min(a,w),l=Math.max(l,w)}}let u;a>=-128&&l<=127?u=Int8Array:a>=-32768&&l<=32767?u=Int16Array:u=Int32Array;let d=t.length,h=Tp+tu*d,f=new Uint32Array(h),p=0;f[p++]=h*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*u.BYTES_PER_ELEMENT,f[p++]=0,f[p++]=i,f[p++]=s,f[p++]=e?0:1,f[p++]=Math.max(0,Math.floor(r??0)),f[p++]=d,f[p++]=u.BYTES_PER_ELEMENT;for(let C of t)f[p++]=C.length-2,f[p++]=C[0],f[p++]=C[1];let g=new CompressionStream("deflate-raw"),m=g.writable.getWriter();yield m.ready,m.write(f);let v=u.prototype.constructor;for(let C of t){let _=new v(C.length-2);for(let E=2,w=C.length;E<w;E++)_[E-2]=C[E]-C[E-2];m.write(_)}m.close();let y=yield new Response(g.readable).arrayBuffer(),b=new Uint8Array(y);return dR(b)})}static decompressSignature(t){return K(this,null,function*(){try{let o=v4(t),{readable:a,writable:l}=new DecompressionStream("deflate-raw"),c=l.getWriter();yield c.ready,c.write(o).then(()=>K(null,null,function*(){yield c.ready,yield c.close()})).catch(()=>{});let u=null,d=0;try{for(var e=TE(a),r,i,s;r=!(i=yield e.next()).done;r=!1){let w=i.value;u||=new Uint8Array(new Uint32Array(w.buffer,0,4)[0]),u.set(w,d),d+=w.length}}catch{s=[i]}finally{try{r&&(i=e.return)&&(yield i.call(e))}finally{if(s)throw s[0]}}let h=new Uint32Array(u.buffer,0,u.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);let p=h[2],g=h[3],m=h[4]===0,v=h[5],y=h[6],b=h[7],C=[],_=(Tp+tu*y)*Uint32Array.BYTES_PER_ELEMENT,E;switch(b){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(u.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(u.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(u.buffer,_);break}d=0;for(let w=0;w<y;w++){let x=h[tu*w+Tp],S=new Float32Array(x+2);C.push(S);for(let A=0;A<tu-1;A++)S[A]=h[tu*w+Tp+A+1];for(let A=0;A<x;A++)S[A+2]=S[A]+E[d++]}return{areContours:m,thickness:v,outlines:C,width:p,height:g}}catch(o){return ge(`decompressSignature: ${o}`),null}})}},JC=class n extends lg{constructor(){super(),super.updateProperties({fill:tt._defaultLineColor,"stroke-width":0})}clone(){let t=new n;return t.updateAll(this),t}},eE=class n extends cg{constructor(t){super(t),super.updateProperties({stroke:tt._defaultLineColor,"stroke-width":1})}clone(){let t=new n(this._viewParameters);return t.updateAll(this),t}},tE=class n extends CR{#e=!1;#t=null;#n=null;#r=null;static _type="signature";static _editorType=ve.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super(ce(H({},t),{mustBeCommitted:!0,name:"signatureEditor"})),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){tt.initialize(t,e),this._defaultDrawingOptions=new JC,this._defaultDrawnSignatureOptions=new eE(e.viewParameters)}static getDefaultDrawingOptions(t){let e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return Ie(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(t){let e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e,{_isCopy:r}=this;if(r&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#n){let{lines:i,mustSmooth:s,areContours:o,description:a,uuid:l,heightInPage:c}=this.#n,{rawDims:{pageWidth:u,pageHeight:d},rotation:h}=this.parent.viewport,f=vs.processDrawnLines({lines:i,pageWidth:u,pageHeight:d,rotation:h,innerMargin:n._INNER_MARGIN,mustSmooth:s,areContours:o});this.addSignature(f,c,a,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return r&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#r=t,this.addEditToolbar()}getUuid(){return this.#r}get description(){return this.#t}set description(t){this.#t=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){let{newCurves:t,areContours:e,thickness:r,width:i,height:s}=this.#n,o=Math.max(i,s),a=vs.processDrawnLines({lines:{curves:t.map(l=>({points:l})),thickness:r,width:i,height:s},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:a.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,r,i){let{x:s,y:o}=this,{outline:a}=this.#n=t;this.#e=a instanceof Cu,this.description=r;let l;this.#e?l=n.getDefaultDrawingOptions():(l=n._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:l});let[c,u]=this.parentDimensions,[,d]=this.pageDimensions,h=e/d;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(c*this.width,u*this.height),this.x=s,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!r}}),this.div.hidden=!1}getFromImage(t){let{rawDims:{pageWidth:e,pageHeight:r},rotation:i}=this.parent.viewport;return vs.process(t,e,r,i,n._INNER_MARGIN)}getFromText(t,e){let{rawDims:{pageWidth:r,pageHeight:i},rotation:s}=this.parent.viewport;return vs.extractContoursFromText(t,e,r,i,s,n._INNER_MARGIN)}getDrawnSignature(t){let{rawDims:{pageWidth:e,pageHeight:r},rotation:i}=this.parent.viewport;return vs.processDrawnLines({lines:t,pageWidth:e,pageHeight:r,rotation:i,innerMargin:n._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=n.getDefaultDrawingOptions():(this._drawingOptions=n._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;let{lines:e,points:r,rect:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":s}}=this,o={annotationType:ve.SIGNATURE,isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:s,pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(o),t?(o.paths={lines:e,points:r},o.uuid=this.#r,o.isCopy=!0):o.lines=e,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(t,e,r,i,s,o){return o.areContours?Cu.deserialize(t,e,r,i,s,o):Co.deserialize(t,e,r,i,s,o)}static deserialize(t,e,r){return K(this,null,function*(){let i=yield Cs(n,this,"deserialize").call(this,t,e,r);return i.#e=t.areContours,i.description=t.accessibilityData?.alt||"",i.#r=t.uuid,i})}},nE=class n extends tt{#e=null;#t=null;#n=null;#r=null;#s=null;#i="";#o=null;#a=!1;#l=null;#c=!1;#h=!1;static _type="stamp";static _editorType=ve.STAMP;constructor(t){super(ce(H({},t),{name:"stampEditor"})),this.#r=t.bitmapUrl,this.#s=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){tt.initialize(t,e)}static isHandlingMimeForPasting(t){return L_.includes(t)}static paste(t,e){e.pasteEditor({mode:ve.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){let e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#u(t,e=!1){if(!t){this.remove();return}this.#e=t.bitmap,e||(this.#t=t.id,this.#c=t.isSvg),t.file&&(this.#i=t.file.name),this.#p()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#o){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}mlGuessAltText(t=null,e=!0){return K(this,null,function*(){if(this.hasAltTextData())return null;let{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!(yield r.isEnabledFor("altText")))throw new Error("ML isn't enabled for alt text.");let{data:i,width:s,height:o}=t||this.copyCanvas(null,null,!0).imageData,a=yield r.guess({name:"altText",request:{data:i,width:s,height:o,channels:i.length/(s*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");let l=a.output;return yield this.setGuessedAltText(l),e&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l})}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(r=>this.#u(r,!0)).finally(()=>this.#f());return}if(this.#r){let r=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(r).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#s){let r=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(r).then(i=>this.#u(i)).finally(()=>this.#f());return}let t=document.createElement("input");t.type="file",t.accept=L_.join(",");let e=this._uiManager._signal;this.#n=new Promise(r=>{t.addEventListener("change",()=>K(this,null,function*(){if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);let i=yield this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}r()}),{signal:e}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#l&&(clearTimeout(this.#l),this.#l=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#o===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#s||this.#t||this.#a)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#a||(this.#e?this.#p():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){let{id:r,bitmap:i}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),r&&this._uiManager.imageManager.isValidId(r)&&(this.#t=r,i&&(this.#e=i),this.#a=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#l!==null&&clearTimeout(this.#l);let t=200;this.#l=setTimeout(()=>{this.#l=null,this.#m()},t)}#p(){let{div:t}=this,{width:e,height:r}=this.#e,[i,s]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,r=this.height*s;else if(e>o*i||r>o*s){let u=Math.min(o*i/e,o*s/r);e*=u,r*=u}let[a,l]=this.parentDimensions;this.setDims(e*a/i,r*l/s),this._uiManager.enableWaiting(!1);let c=this.#o=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=e/i,this.height=r/s,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#m(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,r=!1){t||(t=224);let{width:i,height:s}=this.#e,o=new Pi,a=this.#e,l=i,c=s,u=null;if(e){if(i>e||s>e){let E=Math.min(e/i,e/s);l=Math.floor(i*E),c=Math.floor(s*E)}u=document.createElement("canvas");let h=u.width=Math.ceil(l*o.sx),f=u.height=Math.ceil(c*o.sy);this.#c||(a=this.#d(h,f));let p=u.getContext("2d");p.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");let v=15,y=v*o.sx,b=v*o.sy,C=new OffscreenCanvas(y*2,b*2),_=C.getContext("2d");_.fillStyle=g,_.fillRect(0,0,y*2,b*2),_.fillStyle=m,_.fillRect(0,0,y,b),_.fillRect(y,b,y,b),p.fillStyle=p.createPattern(C,"repeat"),p.fillRect(0,0,h,f),p.drawImage(a,0,0,a.width,a.height,0,0,h,f)}let d=null;if(r){let h,f;if(o.symmetric&&a.width<t&&a.height<t)h=a.width,f=a.height;else if(a=this.#e,i>t||s>t){let m=Math.min(t/i,t/s);h=Math.floor(i*m),f=Math.floor(s*m),this.#c||(a=this.#d(h,f))}let g=new OffscreenCanvas(h,f).getContext("2d",{willReadFrequently:!0});g.drawImage(a,0,0,a.width,a.height,0,0,h,f),d={width:h,height:f,data:g.getImageData(0,0,h,f).data}}return{canvas:u,width:l,height:c,imageData:d}}#d(t,e){let{width:r,height:i}=this.#e,s=r,o=i,a=this.#e;for(;s>2*t||o>2*e;){let l=s,c=o;s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));let u=new OffscreenCanvas(s,o);u.getContext("2d").drawImage(a,0,0,l,c,0,0,s,o),a=u.transferToImageBitmap()}return a}#m(){let[t,e]=this.parentDimensions,{width:r,height:i}=this,s=new Pi,o=Math.ceil(r*t*s.sx),a=Math.ceil(i*e*s.sy),l=this.#o;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;let c=this.#c?this.#e:this.#d(o,a),u=l.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(c,0,0,c.width,c.height,0,0,o,a)}#b(t){if(t){if(this.#c){let i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}let e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#e,e.getContext("2d").drawImage(this.#e,0,0),e.toDataURL()}if(this.#c){let[e,r]=this.pageDimensions,i=Math.round(this.width*e*bs.PDF_TO_CSS_UNITS),s=Math.round(this.height*r*bs.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(i,s);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,s),o.transferToImageBitmap()}return structuredClone(this.#e)}static deserialize(t,e,r){return K(this,null,function*(){let i=null,s=!1;if(t instanceof ig){let{data:{rect:g,rotation:m,id:v,structParent:y,popupRef:b,contentsObj:C},container:_,parent:{page:{pageNumber:E}},canvas:w}=t,x,S;w?(delete t.canvas,{id:x,bitmap:S}=r.imageManager.getFromCanvas(_.id,w),w.remove()):(s=!0,t._hasNoCanvas=!0);let A=(yield e._structTree.getAriaAttributes(`${iE}${v}`))?.get("aria-label")||"";i=t={annotationType:ve.STAMP,bitmapId:x,bitmap:S,pageIndex:E-1,rect:g.slice(0),rotation:m,annotationElementId:v,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:A},isSvg:!1,structParent:y,popupRef:b,comment:C?.str||null}}let o=yield Cs(n,this,"deserialize").call(this,t,e,r),{rect:a,bitmap:l,bitmapUrl:c,bitmapId:u,isSvg:d,accessibilityData:h}=t;s?(r.addMissingCanvas(t.id,o),o.#a=!0):u&&r.imageManager.isValidId(u)?(o.#t=u,l&&(o.#e=l)):o.#r=c,o.#c=d;let[f,p]=o.pageDimensions;return o.width=(a[2]-a[0])/f,o.height=(a[3]-a[1])/p,h&&(o.altTextData=h),o._initialData=i,t.comment&&o.setCommentData(t.comment),o.#h=!!i,o})}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();let r={annotationType:ve.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(this.addComment(r),t)return r.bitmapUrl=this.#b(!0),r.accessibilityData=this.serializeAltText(!0),r.isCopy=!0,r;let{decorative:i,altText:s}=this.serializeAltText(!1);if(!i&&s&&(r.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){let a=this.#v(r);if(a.isSame)return null;a.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,e===null)return r;e.stamps||=new Map;let o=this.#c?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!e.stamps.has(this.#t))e.stamps.set(this.#t,{area:o,serialized:r}),r.bitmap=this.#b(!1);else if(this.#c){let a=e.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#b(!1))}return r}#v(t){let{pageIndex:e,accessibilityData:{altText:r}}=this._initialData,i=t.pageIndex===e,s=(t.accessibilityData?.alt||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e={rect:this.getPDFRect()};return this.hasEditedComment&&(e.popup=this.comment),t.updateEdited(e),null}},W4=(()=>{class n{#e;#t=!1;#n=null;#r=null;#s=null;#i=new Map;#o=!1;#a=!1;#l=!1;#c=null;#h=null;#u=null;#f=null;#g=null;#p=-1;#d;static _initialized=!1;static#m=new Map([XC,QC,nE,ag,tE].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:r,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:a,drawLayer:l,textLayer:c,viewport:u,l10n:d}){let h=[...n.#m.values()];if(!n._initialized){n._initialized=!0;for(let f of h)f.initialize(d,e)}e.registerEditorTypes(h),this.#d=e,this.pageIndex=r,this.div=i,this.#e=o,this.#n=a,this.viewport=u,this.#u=c,this.drawLayer=l,this._structTree=s,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===ve.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#y(),e){case ve.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ve.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ve.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);let{classList:r}=this.div;for(let i of n.#m.values())r.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}enable(){return K(this,null,function*(){this.#l=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.#g?.abort(),this.#g=null;let e=new Set;for(let i of this.#i.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#d.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!this.#n){this.#l=!1;return}let r=this.#n.getEditableAnnotations();for(let i of r){if(i.hide(),this.#d.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;let s=yield this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#l=!1})}disable(){if(this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.#u&&!this.#g){this.#g=new AbortController;let s=this.#d.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",o=>{let{clientX:l,clientY:c,timeStamp:u}=o,d=this.#p;if(u-d>500){this.#p=u;return}this.#p=-1;let{classList:h}=this.div;h.toggle("getElements",!0);let f=document.elementsFromPoint(l,c);if(h.toggle("getElements",!1),!this.div.contains(f[0]))return;let p,g=new RegExp(`^${oR}[0-9]+$`);for(let v of f)if(g.test(v.id)){p=v.id;break}if(!p)return;let m=this.#i.get(p);m?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),m.dblclick())},{signal:s,capture:!0})}let e=new Map,r=new Map;for(let s of this.#i.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else r.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){let s=this.#n.getEditableAnnotations();for(let o of s){let{id:a}=o.data;if(this.#d.isDeletedAnnotationElement(a)){o.updateEdited({deleted:!0});continue}let l=r.get(a);if(l){l.resetAnnotationElement(o),l.show(!1),o.show();continue}l=e.get(a),l&&(this.#d.addChangedExistingAnnotation(l),l.renderAnnotationElement(o)&&l.show(!1)),o.show()}}this.#y(),this.isEmpty&&(this.div.hidden=!0);let{classList:i}=this.div;for(let s of n.#m.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;let e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#b(e){this.#d.unselectAll();let{target:r}=e;if(r===this.#u.div||(r.getAttribute("role")==="img"||r.classList.contains("endOfContent"))&&this.#u.div.contains(r)){let{isMac:i}=Pt.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),ag.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#r)return;this.#r=new AbortController;let e=this.#d.combinedSignal(this.#r);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});let r=this.pointerup.bind(this);this.div.addEventListener("pointerup",r,{signal:e}),this.div.addEventListener("pointercancel",r,{signal:e})}disableClick(){this.#r?.abort(),this.#r=null}attach(e){this.#i.set(e.id,e);let{annotationElementId:r}=e;r&&this.#d.isDeletedAnnotationElement(r)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),tt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){let r=e.render();this.div.append(r),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#l),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;let{activeElement:r}=document;e.div.contains(r)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),r.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){let r=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:r,undo:i,mustExec:!1})}getNextId(){return this.#d.getId()}get#v(){return n.#m.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#C(e){let r=this.#v;return r?new r.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#v?.canCreateNewEmptyEditor()}pasteEditor(e,r){return K(this,null,function*(){this.updateToolbar(e),yield this.#d.updateMode(e.mode);let{offsetX:i,offsetY:s}=this.#E(),o=this.getNextId(),a=this.#C(H({parent:this,id:o,x:i,y:s,uiManager:this.#d,isCentered:!0},r));a&&this.add(a)})}deserialize(e){return K(this,null,function*(){return(yield n.#m.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d))||null})}createAndAddNewEditor(e,r,i={}){let s=this.getNextId(),o=this.#C(H({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:r},i));return o&&this.add(o),o}#E(){let{x:e,y:r,width:i,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,e),a=Math.max(0,r),l=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,r+s),u=(o+l)/2-e,d=(a+c)/2-r,[h,f]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:f}}addNewEditor(e={}){this.createAndAddNewEditor(this.#E(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){let{isMac:r}=Pt.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div||!this.#o||(this.#o=!1,this.#v?.isDrawer&&this.#v.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}let i=this.#d.getMode();if(i===ve.STAMP||i===ve.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===ve.HIGHLIGHT&&this.enableTextSelection(),this.#o){this.#o=!1;return}let{isMac:r}=Pt.platform;if(e.button!==0||e.ctrlKey&&r||e.target!==this.div)return;if(this.#o=!0,this.#v?.isDrawer){this.startDrawingSession(e);return}let i=this.#d.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#c){this.#v.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#c=new AbortController;let r=this.#d.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:r}),this.#v.startDrawing(this,this.#d,!1,e)}pause(e){if(e){let{activeElement:r}=document;this.div.contains(r)&&(this.#h=r);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#d.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#v.endDrawing(e)):null}findNewParent(e,r,i){let s=this.#d.findParent(r,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#v.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(let e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#y(){for(let e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,yo(this.div,e);for(let r of this.#d.getEditors(this.pageIndex))this.add(r),r.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#y();let r=this.viewport.rotation,i=e.rotation;if(this.viewport=e,yo(this.div,{rotation:i}),r!==i)for(let s of this.#i.values())s.rotate(i)}get pageDimensions(){let{pageWidth:e,pageHeight:r}=this.viewport.rawDims;return[e,r]}get scale(){return this.#d.viewParameters.realScale}}return n})(),rE=class n{#e=null;#t=new Map;#n=new Map;static#r=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#e){this.#e=t;return}if(this.#e!==t){if(this.#t.size>0)for(let e of this.#t.values())e.remove(),t.append(e);this.#e=t}}static get _svgFactory(){return Ie(this,"_svgFactory",new nl)}static#s(t,[e,r,i,s]){let{style:o}=t;o.top=`${100*r}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*s}%`}#i(){let t=n._svgFactory.create(1,1,!0);return this.#e.append(t),t.setAttribute("aria-hidden",!0),t}#o(t,e){let r=n._svgFactory.createElement("clipPath");t.append(r);let i=`clip_${e}`;r.setAttribute("id",i),r.setAttribute("clipPathUnits","objectBoundingBox");let s=n._svgFactory.createElement("use");return r.append(s),s.setAttribute("href",`#${e}`),s.classList.add("clip"),i}#a(t,e){for(let[r,i]of Object.entries(e))i===null?t.removeAttribute(r):t.setAttribute(r,i)}draw(t,e=!1,r=!1){let i=n.#r++,s=this.#i(),o=n._svgFactory.createElement("defs");s.append(o);let a=n._svgFactory.createElement("path");o.append(a);let l=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#n.set(i,a);let c=r?this.#o(o,l):null,u=n._svgFactory.createElement("use");return s.append(u),u.setAttribute("href",`#${l}`),this.updateProperties(s,t),this.#t.set(i,s),{id:i,clipPathId:`url(#${c})`}}drawOutline(t,e){let r=n.#r++,i=this.#i(),s=n._svgFactory.createElement("defs");i.append(s);let o=n._svgFactory.createElement("path");s.append(o);let a=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){let d=n._svgFactory.createElement("mask");s.append(d),l=`mask_p${this.pageIndex}_${r}`,d.setAttribute("id",l),d.setAttribute("maskUnits","objectBoundingBox");let h=n._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");let f=n._svgFactory.createElement("use");d.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}let c=n._svgFactory.createElement("use");i.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);let u=c.cloneNode();return i.append(u),c.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),this.#t.set(r,i),r}finalizeDraw(t,e){this.#n.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;let{root:r,bbox:i,rootClass:s,path:o}=e,a=typeof t=="number"?this.#t.get(t):t;if(a){if(r&&this.#a(a,r),i&&n.#s(a,i),s){let{classList:l}=a;for(let[c,u]of Object.entries(s))l.toggle(c,u)}if(o){let c=a.firstChild.firstChild;this.#a(c,o)}}}updateParent(t,e){if(e===this)return;let r=this.#t.get(t);r&&(e.#e.append(r),this.#t.delete(t),e.#t.set(t,r))}remove(t){this.#n.delete(t),this.#e!==null&&(this.#t.get(t).remove(),this.#t.delete(t))}destroy(){this.#e=null;for(let t of this.#t.values())t.remove();this.#t.clear(),this.#n.clear()}};globalThis._pdfjsTestingUtils={HighlightOutliner:bu};globalThis.pdfjsLib={AbortException:Xr,AnnotationEditorLayer:W4,AnnotationEditorParamsType:Be,AnnotationEditorType:ve,AnnotationEditorUIManager:uu,AnnotationLayer:YC,AnnotationMode:ms,AnnotationType:St,build:$4,ColorPicker:Kp,createValidAbsoluteUrl:aR,DOMSVGFactory:nl,DrawLayer:rE,FeatureTest:Pt,fetchData:xu,getDocument:aE,getFilenameFromUrl:y4,getPdfFilenameFromUrl:b4,getRGB:gg,getUuid:uR,getXfaPageViewport:C4,GlobalWorkerOptions:Ni,ImageKind:Ip,InvalidPDFException:ou,isDataScheme:pg,isPdfFile:sE,isValidExplicitDest:S4,MathClamp:an,noContextMenu:Jn,normalizeUnicode:g4,OPS:su,OutputScale:Pi,PasswordResponses:a4,PDFDataRangeTransport:Xp,PDFDateString:cu,PDFWorker:gu,PermissionFlag:o4,PixelsPerInch:bs,RenderingCancelledException:lu,ResponseException:tl,setLayerDimensions:yo,shadow:Ie,SignatureExtractor:vs,stopEvent:Tt,SupportedImageMimeTypes:L_,TextLayer:fu,TouchManager:Pp,updateUrlHash:lR,Util:ne,VerbosityLevel:dg,version:U4,XfaLayer:Qp};var RR=(()=>{class n{_renderer;_elementRef;onChange=e=>{};onTouched=()=>{};constructor(e,r){this._renderer=e,this._elementRef=r}setProperty(e,r){this._renderer.setProperty(this._elementRef.nativeElement,e,r)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static \u0275fac=function(r){return new(r||n)(de(Ir),de(Sn))};static \u0275dir=at({type:n})}return n})(),Cg=(()=>{class n extends RR{static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,features:[Gn]})}return n})(),Mu=new se("");var X4={provide:Mu,useExisting:Fn(()=>ol),multi:!0};function K4(){let n=Yn()?Yn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Z4=new se(""),ol=(()=>{class n extends RR{_compositionMode;_composing=!1;constructor(e,r,i){super(e,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!K4())}writeValue(e){let r=e??"";this.setProperty("value",r)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static \u0275fac=function(r){return new(r||n)(de(Ir),de(Sn),de(Z4,8))};static \u0275dir=at({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&De("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[yi([X4]),Gn]})}return n})();var hE=new se(""),q4=new se("");function Q4(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function J4(n){return t=>{if(t.value==null||n==null)return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function ER(n){return null}function OR(n){return n!=null}function NR(n){return Ki(n)?it(n):n}function PR(n){let t={};return n.forEach(e=>{t=e!=null?H(H({},t),e):t}),Object.keys(t).length===0?null:t}function kR(n,t){return t.map(e=>e(n))}function e8(n){return!n.validate}function LR(n){return n.map(t=>e8(t)?t:e=>t.validate(e))}function t8(n){if(!n)return null;let t=n.filter(OR);return t.length==0?null:function(e){return PR(kR(e,t))}}function FR(n){return n!=null?t8(LR(n)):null}function n8(n){if(!n)return null;let t=n.filter(OR);return t.length==0?null:function(e){let r=kR(e,t).map(NR);return gm(r).pipe(Ne(PR))}}function BR(n){return n!=null?n8(LR(n)):null}function xR(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function r8(n){return n._rawValidators}function i8(n){return n._rawAsyncValidators}function lE(n){return n?Array.isArray(n)?n:[n]:[]}function yg(n,t){return Array.isArray(n)?n.includes(t):n===t}function wR(n,t){let e=lE(t);return lE(n).forEach(i=>{yg(e,i)||e.push(i)}),e}function DR(n,t){return lE(t).filter(e=>!yg(n,e))}var bg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=FR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=BR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},cE=class extends bg{name;get formDirective(){return null}get path(){return null}},Iu=class extends bg{_parent=null;name=null;valueAccessor=null},uE=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},s8={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dde=ce(H({},s8),{"[class.ng-submitted]":"isSubmitted"}),Eg=(()=>{class n extends uE{constructor(e){super(e)}static \u0275fac=function(r){return new(r||n)(de(Iu,2))};static \u0275dir=at({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vi("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Gn]})}return n})();var Du="VALID",vg="INVALID",rl="PENDING",Su="DISABLED",sl=class{},_g=class extends sl{value;source;constructor(t,e){super(),this.value=t,this.source=e}},Tu=class extends sl{pristine;source;constructor(t,e){super(),this.pristine=t,this.source=e}},Au=class extends sl{touched;source;constructor(t,e){super(),this.touched=t,this.source=e}},il=class extends sl{status;source;constructor(t,e){super(),this.status=t,this.source=e}};function o8(n){return(xg(n)?n.validators:n)||null}function a8(n){return Array.isArray(n)?FR(n):n||null}function l8(n,t){return(xg(t)?t.asyncValidators:n)||null}function c8(n){return Array.isArray(n)?BR(n):n||null}function xg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var dE=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,e){this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return Qt(this.statusReactive)}set status(t){Qt(()=>this.statusReactive.set(t))}_status=Jl(()=>this.statusReactive());statusReactive=ui(void 0);get valid(){return this.status===Du}get invalid(){return this.status===vg}get pending(){return this.status==rl}get disabled(){return this.status===Su}get enabled(){return this.status!==Su}errors;get pristine(){return Qt(this.pristineReactive)}set pristine(t){Qt(()=>this.pristineReactive.set(t))}_pristine=Jl(()=>this.pristineReactive());pristineReactive=ui(!0);get dirty(){return!this.pristine}get touched(){return Qt(this.touchedReactive)}set touched(t){Qt(()=>this.touchedReactive.set(t))}_touched=Jl(()=>this.touchedReactive());touchedReactive=ui(!1);get untouched(){return!this.touched}_events=new Mt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(wR(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(wR(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(DR(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(DR(t,this._rawAsyncValidators))}hasValidator(t){return yg(this._rawValidators,t)}hasAsyncValidator(t){return yg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let e=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(ce(H({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Au(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(e=>e.markAllAsTouched(t))}markAsUntouched(t={}){let e=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),e&&t.emitEvent!==!1&&this._events.next(new Au(!1,r))}markAsDirty(t={}){let e=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(ce(H({},t),{sourceControl:r})),e&&t.emitEvent!==!1&&this._events.next(new Tu(!1,r))}markAsPristine(t={}){let e=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),e&&t.emitEvent!==!1&&this._events.next(new Tu(!0,r))}markAsPending(t={}){this.status=rl;let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new il(this.status,e)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(ce(H({},t),{sourceControl:e}))}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Su,this.errors=null,this._forEachChild(i=>{i.disable(ce(H({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _g(this.value,r)),this._events.next(new il(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(H({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Du,this._forEachChild(r=>{r.enable(ce(H({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ce(H({},t),{skipPristineCheck:e}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,e){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},e),this._parent._updateTouched({},e))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Du||this.status===rl)&&this._runAsyncValidator(r,t.emitEvent)}let e=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new _g(this.value,e)),this._events.next(new il(this.status,e)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(ce(H({},t),{sourceControl:e}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Su:Du}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,e){if(this.asyncValidator){this.status=rl,this._hasOwnPendingAsyncValidator={emitEvent:e!==!1,shouldHaveEmitted:t!==!1};let r=NR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:e,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1,this,e.shouldHaveEmitted)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((r,i)=>r&&r._find(i),this)}getError(t,e){let r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,e,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new il(this.status,e)),this._parent&&this._parent._updateControlsErrors(t,e,r)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?Su:this.errors?vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rl)?rl:this._anyControlsHaveStatus(vg)?vg:Du}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,e){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,e),i&&this._events.next(new Tu(this.pristine,e))}_updateTouched(t={},e){this.touched=this._anyControlsTouched(),this._events.next(new Au(this.touched,e)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,e)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){xg(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=a8(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=c8(this._rawAsyncValidators)}};var jR=new se("",{providedIn:"root",factory:()=>fE}),fE="always";function u8(n,t){return[...t.path,n]}function d8(n,t,e=fE){f8(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),p8(n,t),m8(n,t),g8(n,t),h8(n,t)}function SR(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function h8(n,t){if(t.valueAccessor.setDisabledState){let e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function f8(n,t){let e=r8(n);t.validator!==null?n.setValidators(xR(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let r=i8(n);t.asyncValidator!==null?n.setAsyncValidators(xR(r,t.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();SR(t._rawValidators,i),SR(t._rawAsyncValidators,i)}function p8(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&VR(n,t)})}function g8(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&VR(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function VR(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function m8(n,t){let e=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function v8(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function y8(n){return Object.getPrototypeOf(n.constructor)===Cg}function b8(n,t){if(!t)return null;Array.isArray(t);let e,r,i;return t.forEach(s=>{s.constructor===ol?e=s:y8(s)?r=s:i=s}),i||r||e||null}function TR(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function AR(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _8=class extends dE{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,e,r){super(o8(e),l8(r,e)),this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xg(e)&&(e.nonNullable||e.initialValueIsDefault)&&(AR(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){TR(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){TR(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){AR(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var C8={provide:Iu,useExisting:Fn(()=>Ru)},IR=Promise.resolve(),Ru=(()=>{class n extends Iu{_changeDetectorRef;callSetDisabledState;control=new _8;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qe;constructor(e,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=e,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=b8(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let r=e.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),v8(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){d8(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){IR.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let r=e.isDisabled.currentValue,i=r!==0&&Bh(r);IR.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?u8(e,this._parent):[e]}static \u0275fac=function(r){return new(r||n)(de(cE,9),de(hE,10),de(q4,10),de(Mu,10),de(Zi,8),de(jR,8))};static \u0275dir=at({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[yi([C8]),Gn,zn]})}return n})();var E8={provide:Mu,useExisting:Fn(()=>Ou),multi:!0},Ou=(()=>{class n extends Cg{writeValue(e){let r=e??"";this.setProperty("value",r)}registerOnChange(e){this.onChange=r=>{e(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&De("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[yi([E8]),Gn]})}return n})();var x8={provide:Mu,useExisting:Fn(()=>al),multi:!0};function HR(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function w8(n){return n.split(":")[0]}var al=(()=>{class n extends Cg{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;appRefInjector=z(Rr).injector;destroyRef=z(ci);cdr=z(Zi);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Zl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(e){this.cdr.markForCheck(),this.value=e;let r=this._getOptionId(e),i=HR(r,e);this.setProperty("value",i)}registerOnChange(e){this.onChange=r=>{this.value=this._getOptionValue(r),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),e))return r;return null}_getOptionValue(e){let r=w8(e);return this._optionMap.has(r)?this._optionMap.get(r):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&De("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yi([x8]),Gn]})}return n})(),wg=(()=>{class n{_element;_renderer;_select;id;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(HR(this.id,e)),this._select._writeValueAfterRender())}set value(e){this._setElementValue(e),this._select&&this._select._writeValueAfterRender()}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(de(Sn),de(Ir),de(al,9))};static \u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),D8={provide:Mu,useExisting:Fn(()=>UR),multi:!0};function MR(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function S8(n){return n.split(":")[0]}var UR=(()=>{class n extends Cg{value;_optionMap=new Map;_idCounter=0;set compareWith(e){this._compareWith=e}_compareWith=Object.is;writeValue(e){this.value=e;let r;if(Array.isArray(e)){let i=e.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(e){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);i.push(c)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,e(i)}}_registerOption(e){let r=(this._idCounter++).toString();return this._optionMap.set(r,e),r}_getOptionId(e){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,e))return r;return null}_getOptionValue(e){let r=S8(e);return this._optionMap.has(r)?this._optionMap.get(r)._value:e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&De("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yi([D8]),Gn]})}return n})(),Dg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(e,r,i){this._element=e,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(MR(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(MR(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(de(Sn),de(Ir),de(UR,9))};static \u0275dir=at({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function $R(n){return typeof n=="number"?n:parseFloat(n)}var zR=(()=>{class n{_validator=ER;_onChange;_enabled;ngOnChanges(e){if(this.inputName in e){let r=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ER,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=at({type:n,features:[zn]})}return n})(),T8={provide:hE,useExisting:Fn(()=>pE),multi:!0},pE=(()=>{class n extends zR{max;inputName="max";normalizeInput=e=>$R(e);createValidator=e=>J4(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&aa("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[yi([T8]),Gn]})}return n})(),A8={provide:hE,useExisting:Fn(()=>Nu),multi:!0},Nu=(()=>{class n extends zR{min;inputName="min";normalizeInput=e=>$R(e);createValidator=e=>Q4(e);static \u0275fac=(()=>{let e;return function(i){return(e||(e=ur(n)))(i||n)}})();static \u0275dir=at({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&aa("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[yi([A8]),Gn]})}return n})();var I8=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=ir({})}return n})();var Sg=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:jR,useValue:e.callSetDisabledState??fE}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Mr({type:n});static \u0275inj=ir({imports:[I8]})}return n})();var _s=class n{termsSubject=new ft(this.loadTerms());terms$=this.termsSubject.asObservable();loadTerms(){let t=localStorage.getItem("transcript_terms");if(t)try{return JSON.parse(t)}catch{}return[]}getTerms(){let t=this.termsSubject.getValue();return!t||t.length===0?[{name:"Term 1",year:"",courses:[]}]:t}setTerms(t){this.termsSubject.next(t),localStorage.setItem("transcript_terms",JSON.stringify(t))}updateTerm(t,e){let r=this.getTerms();r[t]=e,this.setTerms([...r])}updateCourse(t,e,r){let i=this.getTerms();i[t].courses[e]=r,this.setTerms([...i])}addTerm(t){let e=this.getTerms();e.push(t),this.setTerms([...e])}deleteTerm(t){let e=this.getTerms();e.splice(t,1),this.setTerms([...e])}addCourse(t,e){let r=this.getTerms();r[t].courses.push(e),this.setTerms([...r])}deleteCourse(t,e){let r=this.getTerms();r[t].courses.splice(e,1),this.setTerms([...r])}static \u0275fac=function(e){return new(e||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kr=class n{gradeMap={"A+":4,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,"D+":1.3,D:1,F:0};calculateTermGPA(t){if(!t||!Array.isArray(t.courses))return 0;let e=0,r=0;for(let i of t.courses)if(i.credits>0&&!["IC","W","FW","UNKNOWN"].includes(i.grade)){let s=typeof i.gpa=="number"?i.gpa:this.gradeMap[i.grade]??0;e+=s*i.credits,r+=i.credits}return r>0?+(e/r).toFixed(2):0}calculateCumulativeGPA(t){let e=0,r=0;for(let i of t)if(Array.isArray(i.courses)){for(let s of i.courses)if(s.credits>0&&!["IC","W","FW","UNKNOWN"].includes(s.grade)){let o=typeof s.gpa=="number"?s.gpa:this.gradeMap[s.grade]??0;e+=o*s.credits,r+=s.credits}}return r>0?+(e/r).toFixed(2):0}calculateAllTermGPAs(t){return t.map(e=>this.calculateTermGPA(e))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"})};function M8(n,t){if(n&1){let e=ct();B(0,"div",3)(1,"div",21)(2,"h2",22),G(3,"Paste Transcript Text"),j(),B(4,"textarea",23),qt("ngModelChange",function(i){ke(e);let s=ae();return rn(s.transcriptText,i)||(s.transcriptText=i),Le(i)}),j(),B(5,"div",24)(6,"button",25),De("click",function(){ke(e);let i=ae();return Le(i.showTextPopup=!1)}),G(7,"Cancel"),j(),B(8,"button",26),De("click",function(){ke(e);let i=ae();return Le(i.confirmTranscriptText())}),G(9,"Confirm"),j()()()()}if(n&2){let e=ae();Z(4),Zt("ngModel",e.transcriptText)}}function R8(n,t){if(n&1){let e=ct();B(0,"input",30),qt("ngModelChange",function(i){ke(e);let s=ae(2).$implicit;return rn(s.name,i)||(s.name=i),Le(i)}),j(),B(1,"input",31),qt("ngModelChange",function(i){ke(e);let s=ae(2).$implicit;return rn(s.year,i)||(s.year=i),Le(i)}),j()}if(n&2){let e=ae(2).$implicit;Zt("ngModel",e.name),Z(),Zt("ngModel",e.year)}}function O8(n,t){if(n&1&&(B(0,"span",32),G(1),j(),B(2,"span",33),G(3),j()),n&2){let e=ae(2).$implicit;Z(),Xe(e.name),Z(2),Xe(e.year||"")}}function N8(n,t){if(n&1){let e=ct();B(0,"button",34),De("click",function(){ke(e);let i=ae(2).$index,s=ae();return Le(s.deleteTerm(i))}),G(1," \xD7 "),j()}}function P8(n,t){if(n&1){let e=ct();B(0,"div",27)(1,"button",28),De("click",function(){ke(e);let i=ae().$index,s=ae();return Le(s.selectTerm(i))}),Tn(2,R8,2,2)(3,O8,4,2),j(),Tn(4,N8,2,0,"button",29),j()}if(n&2){let e=ae().$index,r=ae();Z(),vi("bg-accent",r.selectedTermIdx===e)("text-white",r.selectedTermIdx===e)("font-bold",r.selectedTermIdx===e)("shadow-accent",r.selectedTermIdx===e)("bg-gray-100",r.selectedTermIdx!==e)("text-gray-900",r.selectedTermIdx!==e),Z(),An(r.editTerms?2:3),Z(2),An(r.editTerms&&r.terms.length>1?4:-1)}}function k8(n,t){n&1&&Tn(0,P8,5,14,"div",27),n&2&&An(0)}function L8(n,t){if(n&1&&(B(0,"option",40),G(1),j()),n&2){let e=t.$implicit;Fe("value",e.value),Z(),Xe(e.label)}}function F8(n,t){if(n&1){let e=ct();B(0,"tr")(1,"td",35)(2,"input",36),qt("ngModelChange",function(i){let s=ke(e).$implicit;return rn(s.name,i)||(s.name=i),Le(i)}),j()(),B(3,"td",37)(4,"input",38),qt("ngModelChange",function(i){let s=ke(e).$implicit;return rn(s.credits,i)||(s.credits=i),Le(i)}),De("ngModelChange",function(){let i=ke(e).$implicit,s=ae();return Le(s.onCreditsChange(i))}),j()(),B(5,"td",37)(6,"select",39),qt("ngModelChange",function(i){let s=ke(e).$implicit;return rn(s.grade,i)||(s.grade=i),Le(i)}),De("change",function(){let i=ke(e).$implicit,s=ae();return Le(s.onGradeChange(i))}),Nr(7,L8,2,2,"option",40,Or),j()(),B(9,"td",37),Et(10,"input",41),j(),B(11,"td",37)(12,"button",42),De("click",function(){let i=ke(e).$index,s=ae();return Le(s.deleteCourse(i))}),G(13,"Delete"),j()()()}if(n&2){let e=t.$implicit,r=ae();Z(2),Zt("ngModel",e.name),Z(2),Zt("ngModel",e.credits),Fe("disabled",e.grade==="IC"||e.grade==="W"||e.grade==="FW"),Z(2),Zt("ngModel",e.grade),Z(),Pr(r.gradeOptions),Z(3),Fe("value",e.gpa)}}Ni.workerSrc="/assets/pdf.worker.min.mjs";var Ag=class n{constructor(t,e,r){this.sanitizer=t;this.transcriptService=e;this.gpaCalculator=r}onTranscriptFileSelected(t){return K(this,null,function*(){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0];if(r.type==="application/pdf"||r.name.toLowerCase().endsWith(".pdf")){let i=yield r.arrayBuffer(),s=yield aE({data:i}).promise,o="";for(let a=1;a<=s.numPages;a++){let c=yield(yield s.getPage(a)).getTextContent();o+=c.items.map(u=>u.str).join(" ")+`
`}console.log("Extracted PDF text:",o),this.transcriptText=o,this.confirmTranscriptText()}else{let i=new FileReader;i.onload=s=>{console.log("Extracted TXT text:",s.target.result),this.transcriptText=s.target.result,this.confirmTranscriptText()},i.readAsText(r)}}})}addCourse(t){let e=this.selectedTermIdx;this.transcriptService.addCourse(e,t),this.terms=this.transcriptService.getTerms()}deleteCourse(t){let e=this.selectedTermIdx;this.transcriptService.deleteCourse(e,t),this.terms=this.transcriptService.getTerms()}showTextPopup=!1;transcriptText="";gradeOptions=[{label:"A+",value:"A+"},{label:"A",value:"A"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B",value:"B"},{label:"B-",value:"B-"},{label:"C+",value:"C+"},{label:"C",value:"C"},{label:"C-",value:"C-"},{label:"D+",value:"D+"},{label:"D",value:"D"},{label:"F",value:"F"},{label:"IC",value:"IC"},{label:"W",value:"W"},{label:"FW",value:"FW"},{label:"UNK",value:"UNKNOWN"}];terms=[];selectedTermIdx=0;pdfUrl=null;editTerms=!1;ngOnInit(){this.terms=this.transcriptService.getTerms()}confirmTranscriptText(){this.showTextPopup=!1;try{let t=this.parseTranscriptText(this.transcriptText);this.terms=Object.entries(t).map(([e,r])=>{let i=e.match(/^([\w]+)-(\d{4})$/),s=e,o="";return i&&(s=i[1],o=i[2]),{name:s,year:o,courses:r.map(a=>({name:a.course_title,credits:a.hours,grade:a.grade,gpa:this.gpaCalculator.gradeMap[a.grade]||0}))}}),this.transcriptService.setTerms(this.terms),this.selectedTermIdx=0}catch(t){console.error("Error parsing transcript:",t)}}parseTranscriptText(t){let e={},r=/(Fall|Spring|Summer|Winter)-\d{4}/,i=t.split(/\r?\n/),s=null;for(let o of i){o=o.trim();let a=r.exec(o);if(a){s=a[0],e[s]=[];continue}if(!o||!s)continue;let l=o.match(/^([\w]+)\s+([A-Za-z0-9,:\/\(\)\-\s]+)\s+([A-Za-z\+\-]+)\s+(\d+)\s+([\d\.]+)/);if(l){let c=l[2].trim(),u=l[3].trim(),d=parseInt(l[4],10);e[s].push({course_title:c,grade:u,hours:d})}}return e}get currentTermGPA(){let t=this.terms[this.selectedTermIdx];return this.gpaCalculator.calculateTermGPA(t)}get cumulativeGPA(){return this.gpaCalculator.calculateCumulativeGPA(this.terms)}onCreditsChange(t){t.credits<0&&(t.credits=0);let e=this.selectedTermIdx,r=this.terms[e].courses.indexOf(t);e>-1&&r>-1&&(this.transcriptService.updateCourse(e,r,t),this.terms=this.transcriptService.getTerms())}onGradeChange(t){t.gpa=this.gpaCalculator.gradeMap[t.grade]||0,["IC","W","FW"].includes(t.grade)||t.credits<0&&(t.credits=0);let e=this.selectedTermIdx,r=this.terms[e].courses.indexOf(t);e>-1&&r>-1&&(this.transcriptService.updateCourse(e,r,t),this.terms=this.transcriptService.getTerms())}onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0],i=URL.createObjectURL(r);this.pdfUrl=this.sanitizer.bypassSecurityTrustResourceUrl(i)}}selectTerm(t){this.selectedTermIdx=t}addTerm(){let t=this.terms.length+1;this.transcriptService.addTerm({name:`Term ${t}`,year:"",courses:[]}),this.terms=this.transcriptService.getTerms(),this.selectedTermIdx=this.terms.length-1}deleteTerm(t){this.transcriptService.deleteTerm(t),this.terms=this.transcriptService.getTerms(),this.selectedTermIdx>=this.terms.length&&(this.selectedTermIdx=this.terms.length-1)}static \u0275fac=function(e){return new(e||n)(de(Rb),de(_s),de(Kr))};static \u0275cmp=vt({type:n,selectors:[["app-transcript"]],decls:47,vars:4,consts:[[1,"flex","flex-col","items-center","w-full","h-full","p-2"],[1,"flex","gap-4","mb-4"],[1,"px-6","py-3","bg-accent","text-white","rounded-lg","font-bold","shadow","border-2","border-accent","transition","hover:bg-transparent","hover:text-accent","hover:border-accent",3,"click"],[1,"fixed","inset-0","flex","items-center","justify-center","bg-black","bg-opacity-40","z-50","backdrop-blur-sm"],[1,"w-full","max-w-5xl","mt-4"],[1,"flex","mb-2","border-b","border-gray-300","items-center","overflow-x-auto","scrollbar-thin","scrollbar-thumb-accent","scrollbar-track-gray-200",2,"white-space","nowrap"],["title","Add Term",1,"ml-2","flex","items-center","justify-center","w-8","h-8","rounded-full","transition-colors","border-none","bg-transparent","hover:bg-gray-200",2,"font-size","1.5rem",3,"click"],[1,"text-accent","font-bold"],["title","Edit Terms",1,"ml-2","flex","items-center","justify-center","w-20","h-8","rounded","transition-colors","border-none","bg-transparent","hover:bg-gray-200","text-accent","font-bold",3,"click"],[1,"w-full","border-collapse","rounded-lg","shadow-lg","bg-white","text-gray-900"],[1,"bg-accent","text-white"],[1,"p-3"],[1,"p-3","text-center"],["colspan","5",1,"p-2","text-right"],[1,"px-4","py-0.2","text-s","border","w-full","border-accent","text-accent","rounded","transition-colors","bg-transparent","hover:bg-accent","hover:text-white",3,"click"],[1,"w-full","border-collapse","flex","mt-6","mb-2"],[1,"w-1/2","pr-2"],[1,"bg-white","border","border-accent","rounded-lg","shadow","text-center","transition-all","duration-200","hover:shadow-xl","hover:border-accent","hover:bg-accent","hover:text-white","py-6","group"],[1,"text-s","text-gray-500","mb-1","group-hover:text-white"],[1,"text-2xl","font-bold","text-accent","group-hover:text-white"],[1,"w-1/2","pl-2"],[1,"bg-dark","rounded-lg","shadow-lg","p-6","w-full","max-w-xl","flex","flex-col"],[1,"text-lg","font-bold","mb-2"],["rows","12","placeholder","Paste transcript text here...",1,"w-full","p-2","border","text-dark","rounded","mb-4","font-mono","text-sm",3,"ngModelChange","ngModel"],[1,"flex","justify-end","gap-2"],[1,"px-4","py-2","rounded","bg-gray-300","text-dark","hover:bg-gray-400",3,"click"],[1,"px-4","py-2","rounded","bg-accent","text-white","font-bold","hover:bg-transparent","border-accent","border-2","hover:text-accent","hover:border-accent",3,"click"],[1,"flex","items-center","mr-2"],[1,"px-6","py-4","rounded-t-lg","transition-all","border-b-2","border-accent","flex","flex-col","items-center","justify-center",2,"height","64px","min-width","90px",3,"click"],["title","Delete Term",1,"ml-1","w-6","h-6","flex","items-center","justify-center","rounded-full","bg-transparent","hover:bg-red-100","text-red-600","font-bold"],[1,"w-24","px-2","py-1","rounded","bg-transparent","border","border-gray-300","text-center","font-bold","focus:outline-none","mb-1",3,"ngModelChange","ngModel"],["type","text","placeholder","Year",1,"w-20","px-1","py-1","rounded","bg-transparent","border","border-gray-200","text-center","text-xs","focus:outline-none",3,"ngModelChange","ngModel"],[1,"font-bold"],[1,"text-xs","font-bold","mt-1"],["title","Delete Term",1,"ml-1","w-6","h-6","flex","items-center","justify-center","rounded-full","bg-transparent","hover:bg-red-100","text-red-600","font-bold",3,"click"],[1,"p-2"],[1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],[1,"p-2","text-center"],["type","number","min","0",1,"w-16","p-2","border","rounded","text-center",3,"ngModelChange","ngModel","disabled"],[1,"w-20","p-2","border","rounded","text-center",3,"ngModelChange","change","ngModel"],[3,"value"],["type","text","readonly","",1,"w-16","p-2","border","rounded","text-center","bg-gray-100",3,"value"],[1,"px-2","py-1","bg-red-600","text-white","rounded","hover:bg-red-700","ml-2",3,"click"]],template:function(e,r){e&1&&(B(0,"div",0)(1,"div",1)(2,"button",2),De("click",function(){return r.showTextPopup=!0}),G(3,"Paste Transcript Text"),j()(),Tn(4,M8,10,1,"div",3),B(5,"div",4)(6,"div",5),Nr(7,k8,1,1,null,null,Or),B(9,"button",6),De("click",function(){return r.addTerm()}),B(10,"span",7),G(11,"+"),j()(),B(12,"button",8),De("click",function(){return r.editTerms=!r.editTerms}),G(13),j()(),B(14,"table",9)(15,"thead")(16,"tr",10)(17,"th",11),G(18,"Course Name"),j(),B(19,"th",12),G(20,"Credits"),j(),B(21,"th",12),G(22,"Grade"),j(),B(23,"th",12),G(24,"GPA"),j(),B(25,"th",12),G(26,"Actions"),j()()(),B(27,"tbody"),Nr(28,F8,14,5,"tr",null,Or),B(30,"tr")(31,"td",13)(32,"button",14),De("click",function(){return r.addCourse({name:"",credits:0,grade:"",gpa:0})}),G(33,"Add Course"),j()()()()(),B(34,"div",15)(35,"div",16)(36,"div",17)(37,"div",18),G(38,"Current Term GPA"),j(),B(39,"div",19),G(40),j()()(),B(41,"div",20)(42,"div",17)(43,"div",18),G(44,"Cumulative GPA"),j(),B(45,"div",19),G(46),j()()()()()()),e&2&&(Z(4),An(r.showTextPopup?4:-1),Z(3),Pr(r.terms),Z(6),Wn(" ",r.editTerms?"Done":"Edit"," "),Z(15),Pr(r.terms[r.selectedTermIdx].courses),Z(12),Xe(r.currentTermGPA),Z(6),Xe(r.cumulativeGPA))},dependencies:[Sg,wg,Dg,ol,Ou,al,Eg,Nu,Ru],encapsulation:2})};function B8(n,t){n&1&&(B(0,"div",5),G(1,"No GPA data yet"),j())}var Ig=class n{constructor(t){this.gpaCalculator=t}terms=[];lineChartData={labels:[],datasets:[{data:[],label:"GPA",fill:!1,borderColor:"#8a4a4b",backgroundColor:"#8a4a4b",pointBackgroundColor:"#8a4a4b",pointBorderColor:"#fff",pointRadius:5,pointHoverRadius:7,tension:0}]};lineChartLabels=[];lineChartOptions={responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0,callbacks:{label:t=>{let e=t.dataset.label||"",r=t.parsed.y,i=t.chart.data.labels?.[t.dataIndex]||"";return`${e}: ${r}`}}}},scales:{y:{title:{display:!0,text:"GPA"},ticks:{stepSize:1}},x:{title:{display:!0,text:"Term"}}}};ngOnChanges(){if(Array.isArray(this.terms)&&this.terms.length){let t=this.terms.filter(e=>Array.isArray(e.courses)&&e.courses.length>0);if(this.lineChartLabels=t.map(e=>e.fullName||(e.name&&e.year?`${e.name} ${e.year}`:e.name)),this.lineChartData.labels=this.lineChartLabels,Array.isArray(this.lineChartData.datasets)&&this.lineChartData.datasets[0]){let e=t.map(i=>this.gpaCalculator.calculateTermGPA(i));this.lineChartData.datasets[0].data=e;let r=Math.min(...e);this.lineChartOptions.scales&&this.lineChartOptions.scales.y&&(this.lineChartOptions.scales.y.min=Math.floor(r),this.lineChartOptions.scales.y.max=4)}}else this.lineChartLabels=[],this.lineChartData.labels=[],Array.isArray(this.lineChartData.datasets)&&this.lineChartData.datasets[0]&&(this.lineChartData.datasets[0].data=[],this.lineChartOptions.scales&&this.lineChartOptions.scales.y&&(this.lineChartOptions.scales.y.min=0,this.lineChartOptions.scales.y.max=4))}static \u0275fac=function(e){return new(e||n)(de(Kr))};static \u0275cmp=vt({type:n,selectors:[["gpa-trend-chart"]],inputs:{terms:"terms"},features:[zn],decls:6,vars:6,consts:[[1,"w-full","flex","flex-col","items-center","mt-4","2","bg-white","rounded-lg","shadow","border","border-gray-200","p-4"],[1,"text-xl","font-bold","text-accent","mb-2"],[1,"bg-white","w-full","rounded-lg","p-4",2,"max-width","100%","height","auto"],["baseChart","",3,"data","labels","options","legend","type"],["class","text-center text-fuchsia-700 font-mono font-bold mt-6",4,"ngIf"],[1,"text-center","text-fuchsia-700","font-mono","font-bold","mt-6"]],template:function(e,r){e&1&&(B(0,"div",0)(1,"h2",1),G(2,"GPA Trends Chart"),j(),B(3,"div",2),Et(4,"canvas",3),Ht(5,B8,2,0,"div",4),j()()),e&2&&(Z(4),Fe("data",r.lineChartData)("labels",r.lineChartLabels)("options",r.lineChartOptions)("legend",!1)("type","line"),Z(),Fe("ngIf",!(!(r.lineChartData==null||r.lineChartData.datasets==null)&&r.lineChartData.datasets.length)||!r.lineChartData.datasets[0].data.length))},dependencies:[gn,fr,zM],styles:[".bg-white[_ngcontent-%COMP%]{background:#fff}.shadow[_ngcontent-%COMP%]{box-shadow:0 2px 8px #00000014}.border[_ngcontent-%COMP%]{border-radius:12px}svg[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})};function j8(n,t){if(n&1&&(B(0,"div",18)(1,"div",5)(2,"div",19),G(3),j(),B(4,"div",20),G(5,"Grade: "),B(6,"span",21),G(7),j(),G(8," \u2022 Credits: "),B(9,"span",21),G(10),j()()()()),n&2){let e=t.$implicit;Z(3),Xe(e.name||e.courseName),Z(4),Xe(e.grade),Z(3),Xe(e.credits)}}function V8(n,t){if(n&1&&(B(0,"div",16),Ht(1,j8,11,3,"div",17),j()),n&2){let e=ae();Z(),Fe("ngForOf",e.bestHalf)}}function H8(n,t){n&1&&(B(0,"div",22),G(1,"No subjects found."),j())}function U8(n,t){if(n&1&&(B(0,"div",24)(1,"div",5)(2,"div",25),G(3),j(),B(4,"div",20),G(5,"Grade: "),B(6,"span",21),G(7),j(),G(8," \u2022 Credits: "),B(9,"span",21),G(10),j()()()()),n&2){let e=t.$implicit;Z(3),Xe(e.name||e.courseName),Z(4),Xe(e.grade),Z(3),Xe(e.credits)}}function $8(n,t){if(n&1&&(B(0,"div",16),Ht(1,U8,11,3,"div",23),j()),n&2){let e=ae();Z(),Fe("ngForOf",e.worstHalf)}}function z8(n,t){n&1&&(B(0,"div",22),G(1,"No subjects found."),j())}var Mg=class n{constructor(t,e){this.transcriptService=t;this.gpaCalculator=e}cumulativeGPA=0;lastTermGPA=0;totalCredits=0;terms=[];termsSub;bestHalf=[];worstHalf=[];ngOnInit(){this.termsSub=this.transcriptService.terms$.subscribe(t=>{this.terms=t,this.updateInsightsFromTranscript()})}ngOnDestroy(){this.termsSub?.unsubscribe()}updateInsightsFromTranscript(){this.totalCredits=this.terms.reduce((l,c)=>Array.isArray(c.courses)?l+c.courses.reduce((u,d)=>u+(d.credits>0&&!["IC","W","FW","UNKNOWN"].includes(d.grade)?d.credits:0),0):l,0),this.cumulativeGPA=this.gpaCalculator.calculateCumulativeGPA(this.terms);let t=null;for(let l=this.terms.length-1;l>=0;l--){let c=this.terms[l];if(Array.isArray(c.courses)&&c.courses.some(u=>u.credits>0&&!["IC","W","FW","UNKNOWN"].includes(u.grade))){t=c;break}}t?this.lastTermGPA=this.gpaCalculator.calculateTermGPA(t):this.lastTermGPA=0;let e=[];for(let l of this.terms)if(Array.isArray(l.courses))for(let c of l.courses)c.credits>0&&c.grade&&e.push(c);let r={"A+":4,A:4,"A-":3.7,"B+":3.3,B:3,"B-":2.7,"C+":2.3,C:2,"C-":1.7,"D+":1.3,D:1,F:0},i=["A+","A","A-","B+","B","B-","C+","C","C-","D+","D","F"],o=[...e.map(l=>{let c=typeof l.gpa=="number"?l.gpa:r[l.grade]??0;return ce(H({},l),{gradeValue:c})})].sort((l,c)=>{if(c.gradeValue!==l.gradeValue)return c.gradeValue-l.gradeValue;let u=i.indexOf(l.grade),d=i.indexOf(c.grade);return u!==d?u-d:c.credits-l.credits}),a=Math.ceil(o.length/2);this.bestHalf=o.slice(0,a),this.worstHalf=o.slice(a).reverse()}static \u0275fac=function(e){return new(e||n)(de(_s),de(Kr))};static \u0275cmp=vt({type:n,selectors:[["app-insights"]],decls:37,vars:10,consts:[["noBest",""],["noWorst",""],[1,"flex","flex-col","items-center","w-full","h-full","p-2"],[1,"max-w-5xl","items-center"],[1,"w-full","flex","mt-8","mb-4","gap-4"],[1,"flex-1"],[1,"bg-white","border","border-accent","rounded-lg","shadow","text-center","transition-all","duration-200","hover:shadow-xl","hover:border-accent","hover:bg-accent","hover:text-white","py-6","group"],[1,"text-s","text-gray-500","mb-1","group-hover:text-white"],[1,"text-2xl","font-bold","text-accent","group-hover:text-white"],[1,"top-subjects-container","flex","flex-col","md:flex-row","gap-4","mt-4"],[1,"subject-box","best","border-accent","border-2","rounded-lg","bg-white","shadow","p-4"],[1,"text-lg","font-semibold","mb-3","text-accent"],["class","scroll-list",4,"ngIf","ngIfElse"],[1,"subject-box","worst","border-gray-300","border-2","rounded-lg","bg-white","shadow","p-4"],[1,"text-lg","font-semibold","mb-3","text-gray-700"],[3,"terms"],[1,"scroll-list"],["class","subject-card mb-2 last:mb-0 rounded-lg border p-3 flex items-center gap-4 text-accent accent-card border-accent",4,"ngFor","ngForOf"],[1,"subject-card","mb-2","last:mb-0","rounded-lg","border","p-3","flex","items-center","gap-4","text-accent","accent-card","border-accent"],[1,"font-medium"],[1,"text-xs","text-gray-500"],[1,"font-bold"],[1,"text-gray-400","text-sm"],["class","subject-card mb-2 last:mb-0 rounded-lg border border-gray-200 p-3 flex items-center gap-4 bg-gray-50",4,"ngFor","ngForOf"],[1,"subject-card","mb-2","last:mb-0","rounded-lg","border","border-gray-200","p-3","flex","items-center","gap-4","bg-gray-50"],[1,"font-medium","text-gray-700"]],template:function(e,r){if(e&1&&(B(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",6)(5,"div",7),G(6,"Cumulative GPA"),j(),B(7,"div",8),G(8),j()()(),B(9,"div",5)(10,"div",6)(11,"div",7),G(12,"Last Term GPA"),j(),B(13,"div",8),G(14),j()()(),B(15,"div",5)(16,"div",6)(17,"div",7),G(18,"Total Completed Credits"),j(),B(19,"div",8),G(20),j()()()(),B(21,"div",9)(22,"div",5)(23,"div",10)(24,"h3",11),G(25),j(),Ht(26,V8,2,1,"div",12)(27,H8,2,0,"ng-template",null,0,Ph),j()(),B(29,"div",5)(30,"div",13)(31,"h3",14),G(32),j(),Ht(33,$8,2,1,"div",12)(34,z8,2,0,"ng-template",null,1,Ph),j()()(),Et(36,"gpa-trend-chart",15),j()()),e&2){let i=Nh(28),s=Nh(35);Z(8),Xe(r.cumulativeGPA),Z(6),Xe(r.lastTermGPA),Z(6),Xe(r.totalCredits),Z(5),Wn("Top ",r.bestHalf.length," Subjects"),Z(),Fe("ngIf",r.bestHalf.length)("ngIfElse",i),Z(6),Wn("Worst ",r.worstHalf.length," Subjects"),Z(),Fe("ngIf",r.worstHalf.length)("ngIfElse",s),Z(3),Fe("terms",r.terms)}},dependencies:[gn,la,fr,Ig],styles:[".accent-card[_ngcontent-%COMP%]{border-color:var(--tw-color-accent, #8a4a4b)!important;background-color:color-mix(in srgb,var(--tw-color-accent, #8a4a4b) 10%,#fff 90%)!important}.scroll-list[_ngcontent-%COMP%]{max-height:320px;overflow-y:auto;padding-right:4px}.top-subjects-container[_ngcontent-%COMP%]   .subject-box[_ngcontent-%COMP%]{min-height:220px;transition:box-shadow .2s,border-color #8a4a4b;box-shadow:0 2px 8px #0000000a;border-radius:1rem;background:#fff}.top-subjects-container[_ngcontent-%COMP%]   .subject-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem}.top-subjects-container[_ngcontent-%COMP%]   .best[_ngcontent-%COMP%]{border-color:var(--tw-color-accent, #8a4a4b)}.top-subjects-container[_ngcontent-%COMP%]   .best[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--tw-color-accent, #8a4a4b)}.top-subjects-container[_ngcontent-%COMP%]   .worst[_ngcontent-%COMP%]{border-color:#d1d5db}.top-subjects-container[_ngcontent-%COMP%]   .worst[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#374151}.top-subjects-container[_ngcontent-%COMP%]   .worst[_ngcontent-%COMP%]   .subject-card[_ngcontent-%COMP%]{background:#f3f4f6;border-color:#374151!important}.top-subjects-container[_ngcontent-%COMP%]   .worst[_ngcontent-%COMP%]   .subject-card[_ngcontent-%COMP%]   .font-medium[_ngcontent-%COMP%]{color:#374151!important}.top-subjects-container[_ngcontent-%COMP%]   .subject-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;border-radius:.75rem;border-width:1px;padding:.75rem 1rem;margin-bottom:.5rem;box-shadow:0 1px 4px #00000008}.top-subjects-container[_ngcontent-%COMP%]   .subject-card[_ngcontent-%COMP%]   .font-medium[_ngcontent-%COMP%]{font-size:1rem}.top-subjects-container[_ngcontent-%COMP%]   .subject-card[_ngcontent-%COMP%]   .text-xs[_ngcontent-%COMP%]{font-size:.85rem}@media (max-width: 768px){.top-subjects-container[_ngcontent-%COMP%]{flex-direction:column}.top-subjects-container[_ngcontent-%COMP%]   .subject-box[_ngcontent-%COMP%]{margin-bottom:1rem}}"]})};var G8=n=>({"warning-tab":n});function W8(n,t){if(n&1){let e=ct();B(0,"div",21)(1,"button",32),De("click",function(){let i=ke(e).$index,s=ae();return Le(s.selectTerm(i))}),B(2,"span",11),G(3),j(),B(4,"span",33),G(5),j()()()}if(n&2){let e=t.$implicit,r=t.$index,i=ae();Z(),vi("bg-accent",i.selectedTermIdx===r)("text-white",i.selectedTermIdx===r)("font-bold",i.selectedTermIdx===r)("selected-tab",i.selectedTermIdx===r)("bg-gray-100",i.selectedTermIdx!==r)("text-gray-900",i.selectedTermIdx!==r),Fe("ngClass",nb(15,G8,i.isTermWarning(e)||i.editableTermIndexes.has(r)&&!i.isSimulationTerm(e))),Z(2),Xe(e.name),Z(2),Xe(e.year||"")}}function Y8(n,t){if(n&1&&Et(0,"input",35),n&2){let e=ae().$implicit;Fe("value",e.name)}}function X8(n,t){if(n&1){let e=ct();B(0,"input",45),qt("ngModelChange",function(i){ke(e);let s=ae().$implicit;return rn(s.name,i)||(s.name=i),Le(i)}),j()}if(n&2){let e=ae().$implicit;Zt("ngModel",e.name)}}function K8(n,t){if(n&1&&Et(0,"input",38),n&2){let e=ae().$implicit;Fe("value",e.credits)}}function Z8(n,t){if(n&1){let e=ct();B(0,"input",46),qt("ngModelChange",function(i){ke(e);let s=ae().$implicit;return rn(s.credits,i)||(s.credits=i),Le(i)}),De("ngModelChange",function(){ke(e);let i=ae().$implicit,s=ae();return Le(s.onCreditsChange(i))}),j()}if(n&2){let e=ae().$implicit;Zt("ngModel",e.credits),Fe("disabled",e.grade==="IC"||e.grade==="W"||e.grade==="FW")}}function q8(n,t){if(n&1&&Et(0,"input",40),n&2){let e=ae().$implicit;Fe("value",e.grade)}}function Q8(n,t){if(n&1&&(B(0,"option",48),G(1),j()),n&2){let e=t.$implicit;Fe("value",e.value),Z(),Xe(e.label)}}function J8(n,t){if(n&1){let e=ct();B(0,"select",47),qt("ngModelChange",function(i){ke(e);let s=ae().$implicit;return rn(s.grade,i)||(s.grade=i),Le(i)}),De("change",function(){ke(e);let i=ae().$implicit,s=ae();return Le(s.onGradeChange(i))}),Nr(1,Q8,2,2,"option",48,Or),j()}if(n&2){let e=ae().$implicit,r=ae();Zt("ngModel",e.grade),Z(),Pr(r.gradeOptions)}}function e6(n,t){if(n&1&&Et(0,"input",40),n&2){let e=ae().$implicit;Fe("value",e.grade)}}function t6(n,t){if(n&1&&(B(0,"option",48),G(1),j()),n&2){let e=t.$implicit;Fe("value",e.value),Z(),Xe(e.label)}}function n6(n,t){if(n&1){let e=ct();B(0,"select",47),qt("ngModelChange",function(i){ke(e);let s=ae().$implicit;return rn(s.grade,i)||(s.grade=i),Le(i)}),De("change",function(){ke(e);let i=ae().$implicit,s=ae();return Le(s.onGradeChange(i))}),Nr(1,t6,2,2,"option",48,Or),j()}if(n&2){let e=ae().$implicit,r=ae();Zt("ngModel",e.grade),Z(),Pr(r.gradeOptions)}}function r6(n,t){n&1&&(B(0,"button",43),G(1,"Delete"),j())}function i6(n,t){if(n&1){let e=ct();B(0,"button",49),De("click",function(){ke(e);let i=ae().$index,s=ae();return Le(s.deleteCourse(i))}),G(1,"Delete"),j()}}function s6(n,t){if(n&1&&(B(0,"tr")(1,"td",34),Tn(2,Y8,1,1,"input",35)(3,X8,1,1,"input",36),j(),B(4,"td",37),Tn(5,K8,1,1,"input",38)(6,Z8,1,2,"input",39),j(),B(7,"td",37),Tn(8,q8,1,1,"input",40)(9,J8,3,1,"select",41)(10,e6,1,1,"input",40)(11,n6,3,1,"select",41),j(),B(12,"td",37),Et(13,"input",42),j(),B(14,"td",37),Tn(15,r6,2,0,"button",43)(16,i6,2,0,"button",44),j()()),n&2){let e=t.$implicit,r=ae();Z(2),An(!r.isTermEditable(r.selectedTermIdx)||r.editableTermIndexes.has(r.selectedTermIdx)&&!r.isSimulationTerm(r.terms[r.selectedTermIdx])||e.originalGrade!==void 0&&e.originalGrade!=="UNKNOWN"?2:3),Z(3),An(!r.isTermEditable(r.selectedTermIdx)||r.editableTermIndexes.has(r.selectedTermIdx)&&!r.isSimulationTerm(r.terms[r.selectedTermIdx])||e.originalGrade!==void 0&&e.originalGrade!=="UNKNOWN"?5:6),Z(3),An(r.isTermEditable(r.selectedTermIdx)?r.isTermWarning(r.terms[r.selectedTermIdx])&&!r.isSimulationTerm(r.terms[r.selectedTermIdx])&&(e.originalGrade===void 0||e.originalGrade==="UNKNOWN")?9:r.isTermWarning(r.terms[r.selectedTermIdx])&&!r.isSimulationTerm(r.terms[r.selectedTermIdx])&&e.originalGrade!==void 0&&e.originalGrade!=="UNKNOWN"?10:11:8),Z(5),Fe("value",e.gpa),Z(2),An(r.isTermEditable(r.selectedTermIdx)?16:15)}}function o6(n,t){n&1&&(B(0,"tr")(1,"td",50)(2,"div",51),G(3," Read-Only "),j()()())}function a6(n,t){n&1&&(B(0,"div",52),G(1," Edit Grade Only "),j())}function l6(n,t){if(n&1){let e=ct();B(0,"button",54),De("click",function(){ke(e);let i=ae(2);return Le(i.addCourse({name:"",credits:0,grade:"",gpa:0}))}),G(1,"Add Course"),j()}}function c6(n,t){if(n&1&&(B(0,"tr")(1,"td",50),Tn(2,a6,2,0,"div",52)(3,l6,2,0,"button",53),j()()),n&2){let e=ae();Z(2),An(e.isSimulationTerm(e.terms[e.selectedTermIdx])?3:2)}}var Rg=class n{constructor(t,e){this.transcriptService=t;this.gpaCalculator=e}isSimulationTerm(t){return typeof t.name=="string"&&t.name.startsWith("Sim Term")}editableTermIndexes=new Set;_targetGPA=4;get targetGPA(){return this._targetGPA}set targetGPA(t){this._targetGPA=t,this.updateSimulation()}numTerms=1;terms=[];selectedTermIdx=0;possible=!0;simulatedGPA=0;editTerms=!1;gradeOptions=[{label:"A+",value:"A+"},{label:"A",value:"A"},{label:"A-",value:"A-"},{label:"B+",value:"B+"},{label:"B",value:"B"},{label:"B-",value:"B-"},{label:"C+",value:"C+"},{label:"C",value:"C"},{label:"C-",value:"C-"},{label:"D+",value:"D+"},{label:"D",value:"D"},{label:"F",value:"F"},{label:"IC",value:"IC"},{label:"W",value:"W"},{label:"FW",value:"FW"},{label:"UNK",value:"UNKNOWN"}];ngOnInit(){this.terms=this.transcriptService.getTerms().map(t=>ce(H({},t),{courses:t.courses.map(e=>ce(H({},e),{originalGrade:e.grade}))})),this.addSimulationTerms(),this.updateSimulation(),this.terms.forEach((t,e)=>{this.isTermWarning(t)&&this.editableTermIndexes.add(e)})}isTermWarning(t){let e=typeof t.name=="string"&&t.name.startsWith("Sim Term"),r=(t.courses||[]).some(i=>{let s=i.grade?.toUpperCase?.()||"";return s==="UNKNOWN"||s==="UNK"});return e||r}addSimulationTerms(){let t=this.transcriptService.getTerms().length,e=this.terms.slice(0,t),r=this.terms.slice(t);if(r.length<this.numTerms)for(let i=r.length;i<this.numTerms;i++)r.push({name:"Sim Term",year:`${i+1}`,courses:[]});else r.length>this.numTerms&&(r=r.slice(0,this.numTerms));this.terms=[...e,...r]}onInputChange(){this.addSimulationTerms(),this.updateSimulation()}selectTerm(t){this.selectedTermIdx=t}addCourse(t){this.terms[this.selectedTermIdx].courses.push(H({},t)),this.updateSimulation()}deleteCourse(t){this.terms[this.selectedTermIdx].courses.splice(t,1),this.updateSimulation()}saveScenario(){let t={targetGPA:this.targetGPA,numTerms:this.numTerms,terms:this.terms},e=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download="gpa-scenario.json",i.click(),URL.revokeObjectURL(r)}loadScenario(t){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0],i=new FileReader;i.onload=s=>{try{let o=JSON.parse(s.target.result);this.targetGPA=o.targetGPA??this.targetGPA,this.numTerms=o.numTerms??this.numTerms,this.terms=o.terms??this.terms,this.updateSimulation()}catch{alert("Invalid scenario file.")}},i.readAsText(r)}}onCreditsChange(t){t.credits<0&&(t.credits=0),this.updateSimulation()}onGradeChange(t){t.gpa=this.gpaCalculator.gradeMap[t.grade]||0,["IC","W","FW"].includes(t.grade)||t.credits<0&&(t.credits=0),this.updateSimulation();let e=this.terms.findIndex(r=>r.courses.includes(t));e!==-1&&!this.editableTermIndexes.has(e)&&this.isTermWarning(this.terms[e])&&this.editableTermIndexes.add(e)}isTermEditable(t){return t>=this.terms.length-this.numTerms||this.editableTermIndexes.has(t)}updateSimulation(){this.simulatedGPA=this.gpaCalculator.calculateCumulativeGPA(this.terms),this.possible=this.simulatedGPA>=this.targetGPA}get currentTermGPA(){let t=this.terms[this.selectedTermIdx];return this.gpaCalculator.calculateTermGPA(t)}static \u0275fac=function(e){return new(e||n)(de(_s),de(Kr))};static \u0275cmp=vt({type:n,selectors:[["app-simulation"]],decls:72,vars:12,consts:[[1,"flex","flex-col","items-center","w-full","h-full","p-2"],[1,"w-full","max-w-5xl","flex","gap-4","mb-4","justify-end"],[1,"flex-1","flex","items-center","justify-center"],[1,"bg-gray-100","border","border-accent","rounded","px-4","py-2","w-full","text-xs","text-justify","font-bold","text-gray-700"],[1,"px-4","py-2","bg-accent","text-white","rounded","font-bold","shadow","hover:bg-blue-700",3,"click"],[1,"px-4","py-2","bg-gray-300","text-gray-900","rounded","font-bold","shadow","cursor-pointer","hover:bg-gray-400"],[1,"flex","items-center","h-full","justify-center"],["type","file","accept","application/json",2,"display","none",3,"change"],[1,"w-full","max-w-5xl","mb-6"],[1,"flex","items-center","justify-between","bg-white","border","border-accent","rounded-lg","shadow","px-6","py-4"],[1,"font-bold","text-lg","text-dark","mr-2"],[1,"font-bold"],[1,"text-gray-500","mr-2"],[1,"font-bold","text-accent","text-xl"],[1,"w-full","max-w-5xl","flex","gap-4","mb-4"],[1,"flex","flex-col","flex-1"],[1,"font-bold","mb-1","text-accent"],["type","number","min","0","max","4","step","0.01",1,"p-2","border","rounded","text-center","font-bold","text-lg","text-accent",3,"ngModelChange","ngModel"],["type","number","min","1","max","12",1,"p-2","border","rounded","text-center","font-bold","text-lg","text-accent",3,"ngModelChange","ngModel"],[1,"w-full","max-w-5xl","mt-2"],[1,"flex","mb-2","border-b","border-gray-300","items-center","overflow-x-auto","scrollbar-thin","scrollbar-thumb-accent","scrollbar-track-gray-200",2,"white-space","nowrap"],[1,"flex","items-center","mr-2"],[1,"w-full","border-collapse","rounded-lg","shadow-lg","bg-white","text-gray-900"],[1,"bg-accent","text-white"],[1,"p-3"],[1,"p-3","text-center"],[1,"w-full","border-collapse","flex","mt-6","mb-2"],[1,"w-1/2","pr-2"],[1,"bg-white","border","border-accent","rounded-lg","shadow","text-center","transition-all","duration-200","hover:shadow-xl","hover:border-accent","hover:bg-accent","hover:text-white","py-6","group"],[1,"text-s","text-gray-500","mb-1","group-hover:text-white"],[1,"text-2xl","font-bold","text-accent","group-hover:text-white"],[1,"w-1/2","pl-2"],[1,"px-6","py-4","rounded-t-lg","transition-all","border-b-2","border-accent","flex","flex-col","items-center","justify-center",2,"height","64px","min-width","90px",3,"click","ngClass"],[1,"text-xs","font-bold","mt-1"],[1,"p-2"],["readonly","",1,"w-full","p-2","border","rounded","bg-gray-100","text-gray-900",3,"value"],[1,"w-full","p-2","border","rounded",3,"ngModel"],[1,"p-2","text-center"],["type","number","readonly","",1,"w-16","p-2","border","rounded","text-center","bg-gray-100","text-gray-900",3,"value"],["type","number","min","0",1,"w-16","p-2","border","rounded","text-center",3,"ngModel","disabled"],["type","text","readonly","",1,"w-20","p-2","border","rounded","text-center","bg-gray-100","text-gray-900",3,"value"],[1,"w-20","p-2","border","rounded","text-center",3,"ngModel"],["type","text","readonly","",1,"w-16","p-2","border","rounded","text-center","bg-gray-100",3,"value"],["disabled","",1,"px-2","py-1","bg-gray-300","text-gray-500","rounded","ml-2","cursor-not-allowed"],[1,"px-2","py-1","bg-red-600","text-white","rounded","hover:bg-red-700","ml-2"],[1,"w-full","p-2","border","rounded",3,"ngModelChange","ngModel"],["type","number","min","0",1,"w-16","p-2","border","rounded","text-center",3,"ngModelChange","ngModel","disabled"],[1,"w-20","p-2","border","rounded","text-center",3,"ngModelChange","change","ngModel"],[3,"value"],[1,"px-2","py-1","bg-red-600","text-white","rounded","hover:bg-red-700","ml-2",3,"click"],["colspan","5",1,"p-2","text-right"],[1,"px-4","py-0.2","text-s","w-full","bg-gray-300","text-gray-500","rounded","cursor-not-allowed","text-center"],[1,"px-4","py-0.2","text-s","w-full","bg-yellow-100","text-yellow-800","rounded","text-center"],[1,"px-4","py-0.2","text-s","border","w-full","border-accent","text-accent","rounded","transition-colors","bg-transparent","hover:bg-accent","hover:text-white","mt-1"],[1,"px-4","py-0.2","text-s","border","w-full","border-accent","text-accent","rounded","transition-colors","bg-transparent","hover:bg-accent","hover:text-white","mt-1",3,"click"]],template:function(e,r){e&1&&(B(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),G(4," This page is intended for simulation, simulation is discarded when the page is closed or refreshed, please save your scenario for future access. "),j()(),B(5,"button",4),De("click",function(){return r.saveScenario()}),G(6,"Save Scenario"),j(),B(7,"label",5)(8,"span",6),G(9,"Load Scenario"),j(),B(10,"input",7),De("change",function(s){return r.loadScenario(s)}),j()()(),B(11,"div",8)(12,"div",9)(13,"div")(14,"span",10),G(15,"Simulation Status:"),j(),B(16,"span",11),G(17),j()(),B(18,"div")(19,"span",12),G(20,"Simulated GPA:"),j(),B(21,"span",13),G(22),j()(),B(23,"div")(24,"span",12),G(25,"Target GPA:"),j(),B(26,"span",13),G(27),j()()()(),B(28,"div",14)(29,"div",15)(30,"label",16),G(31,"Target GPA"),j(),B(32,"input",17),qt("ngModelChange",function(s){return rn(r.targetGPA,s)||(r.targetGPA=s),s}),j()(),B(33,"div",15)(34,"label",16),G(35,"Number of Future Terms"),j(),B(36,"input",18),qt("ngModelChange",function(s){return rn(r.numTerms,s)||(r.numTerms=s),s}),De("ngModelChange",function(){return r.onInputChange()}),j()()(),B(37,"div",19)(38,"div",20),Nr(39,W8,6,17,"div",21,Or),j(),B(41,"table",22)(42,"thead")(43,"tr",23)(44,"th",24),G(45,"Course Name"),j(),B(46,"th",25),G(47,"Credits"),j(),B(48,"th",25),G(49,"Grade"),j(),B(50,"th",25),G(51,"GPA"),j(),B(52,"th",25),G(53,"Actions"),j()()(),B(54,"tbody"),Nr(55,s6,17,5,"tr",null,Or),Tn(57,o6,4,0,"tr")(58,c6,4,1,"tr"),j()(),B(59,"div",26)(60,"div",27)(61,"div",28)(62,"div",29),G(63,"Current Term GPA"),j(),B(64,"div",30),G(65),j()()(),B(66,"div",31)(67,"div",28)(68,"div",29),G(69,"Simulated Cumulative GPA"),j(),B(70,"div",30),G(71),j()()()()()()),e&2&&(Z(16),vi("text-green-600",r.possible)("text-red-600",!r.possible),Z(),Wn(" ",r.possible?"Possible":"Not Possible"," "),Z(5),Xe(r.simulatedGPA),Z(5),Xe(r.targetGPA),Z(5),Zt("ngModel",r.targetGPA),Z(4),Zt("ngModel",r.numTerms),Z(3),Pr(r.terms),Z(16),Pr(r.terms[r.selectedTermIdx].courses),Z(2),An(r.isTermEditable(r.selectedTermIdx)?58:57),Z(8),Xe(r.currentTermGPA),Z(6),Xe(r.simulatedGPA))},dependencies:[gn,qs,Sg,wg,Dg,ol,Ou,al,Eg,Nu,pE,Ru],styles:[".warning-tab[_ngcontent-%COMP%]{background-color:#ffe5b4!important;color:#a15c00}.border-accent[_ngcontent-%COMP%]{border-color:#3b82f6}.text-accent[_ngcontent-%COMP%]{color:#3b82f6}.bg-accent[_ngcontent-%COMP%]{background-color:#3b82f6}.shadow-accent[_ngcontent-%COMP%]{box-shadow:0 2px 8px #3b82f6}.rounded-lg[_ngcontent-%COMP%]{border-radius:.75rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.group[_ngcontent-%COMP%]:hover   .group-hover\\:text-white[_ngcontent-%COMP%]{color:#fff!important}.group[_ngcontent-%COMP%]:hover   .group-hover\\:bg-accent[_ngcontent-%COMP%]{background-color:#3b82f6!important}.group[_ngcontent-%COMP%]:hover   .group-hover\\:border-accent[_ngcontent-%COMP%]{border-color:#3b82f6!important}.group[_ngcontent-%COMP%]:hover   .group-hover\\:shadow-xl[_ngcontent-%COMP%]{box-shadow:0 4px 16px #3b82f6!important}.transition-all[_ngcontent-%COMP%]{transition:all .2s}.scrollbar-thumb-accent[_ngcontent-%COMP%]{scrollbar-color:#3b82f6 #e5e7eb}.scrollbar-track-gray-200[_ngcontent-%COMP%]{scrollbar-color:#e5e7eb #fff}.text-green-600[_ngcontent-%COMP%]{color:#16a34a}.text-red-600[_ngcontent-%COMP%]{color:#dc2626}.bg-gray-100[_ngcontent-%COMP%]{background-color:#f3f4f6}.text-gray-900[_ngcontent-%COMP%]{color:#111827}.text-gray-500[_ngcontent-%COMP%]{color:#6b7280}.bg-white[_ngcontent-%COMP%]{background-color:#fff}.bg-red-600[_ngcontent-%COMP%]{background-color:#dc2626}.hover\\:bg-red-700[_ngcontent-%COMP%]:hover{background-color:#b91c1c}.hover\\:bg-accent[_ngcontent-%COMP%]:hover{background-color:#3b82f6;color:#fff}.hover\\:text-white[_ngcontent-%COMP%]:hover{color:#fff}.hover\\:shadow-accent[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #3b82f6}.hover\\:border-accent[_ngcontent-%COMP%]:hover{border-color:#3b82f6}.hover\\:text-accent[_ngcontent-%COMP%]:hover{color:#3b82f6}.rounded-t-lg[_ngcontent-%COMP%]{border-top-left-radius:.75rem;border-top-right-radius:.75rem}.rounded-full[_ngcontent-%COMP%]{border-radius:9999px}.p-2[_ngcontent-%COMP%]{padding:.5rem}.p-3[_ngcontent-%COMP%]{padding:.75rem}.px-6[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}.py-4[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.mb-6[_ngcontent-%COMP%]{margin-bottom:1.5rem}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.mt-2[_ngcontent-%COMP%]{margin-top:.5rem}.mt-6[_ngcontent-%COMP%]{margin-top:1.5rem}.w-full[_ngcontent-%COMP%]{width:100%}.max-w-3xl[_ngcontent-%COMP%]{max-width:48rem}.max-w-4xl[_ngcontent-%COMP%]{max-width:56rem}.flex[_ngcontent-%COMP%]{display:flex}.flex-col[_ngcontent-%COMP%]{flex-direction:column}.flex-1[_ngcontent-%COMP%]{flex:1 1 0%}.items-center[_ngcontent-%COMP%]{align-items:center}.justify-between[_ngcontent-%COMP%]{justify-content:space-between}.gap-4[_ngcontent-%COMP%]{gap:1rem}.pr-2[_ngcontent-%COMP%]{padding-right:.5rem}.pl-2[_ngcontent-%COMP%]{padding-left:.5rem}"]})};var Og=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vt({type:n,selectors:[["app-advisor"]],decls:4,vars:0,consts:[[1,"flex","flex-col","items-center","w-full","h-full","p-2"],[1,"max-w-5xl","items-center"]],template:function(e,r){e&1&&(fn(0,"div",0)(1,"div",1)(2,"p"),G(3,"Under Construction!"),pn()()())},encapsulation:2})};var WR=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"home",component:_p},{path:"transcript",component:Ag},{path:"insights",component:Mg},{path:"simulation",component:Rg},{path:"advisor",component:Og}];var mE={providers:[lb({eventCoalescing:!0}),D_(WR)]};var u6=(n,t)=>({"bg-dark text-white font-bold shadow-accent shadow-sm":n,"bg-transparent text-gray-100":t});function d6(n,t){if(n&1){let e=ct();B(0,"button",5),De("click",function(){ke(e);let i=ae();return Le(i.closeSidebarClicked())}),G(1," \u2715 "),j()}}function h6(n,t){if(n&1){let e=ct();Rh(0),B(1,"button",6),De("click",function(i){let s=ke(e).$implicit;return ae().goToPage(s),Le(i.stopPropagation())}),G(2),j(),Oh()}if(n&2){let e=t.$implicit,r=ae();Z(),Fe("ngClass",rb(2,u6,r.getCurrentRouteKey()===e.key,r.getCurrentRouteKey()!==e.key)),Z(),Wn(" ",e.label," ")}}var Ng=class n{constructor(t){this.router=t}isCollapsed=!1;closeSidebar=new Qe;navItems=[{label:"Home",key:"home",route:"/home"},{label:"Manage Grades",key:"transcript",route:"/transcript"},{label:"GPA Insights",key:"insights",route:"/insights"},{label:"GPA Simulation",key:"simulation",route:"/simulation"},{label:"AI Advisor",key:"advisor",route:"/advisor"}];getCurrentRouteKey(){let t=this.router.url,e=this.navItems.find(r=>t.startsWith(r.route));return e?e.key:""}goToPage(t){this.router.navigate([t.route])}closeSidebarClicked(){this.closeSidebar.emit()}trackByNavItem(t,e){return e.key}static \u0275fac=function(e){return new(e||n)(de(On))};static \u0275cmp=vt({type:n,selectors:[["app-sidebar"]],inputs:{isCollapsed:"isCollapsed"},outputs:{closeSidebar:"closeSidebar"},decls:5,vars:3,consts:[[1,"bg-navy","text-gray-100","h-screen","max-h-screen","overflow-y-auto","flex","flex-col","items-center","pt-4","shadow-lg","font-mono","w-full","md:w-[220px]","transition-all","duration-300","z-50","relative"],["class","md:hidden absolute top-4 right-4 w-10 h-10 bg-accent text-white rounded-lg flex items-center justify-center shadow-lg z-50","aria-label","Close sidebar",3,"click",4,"ngIf"],[1,"mb-2","flex","items-center","justify-center","w-2/3"],["src","gpaadvlogo.svg","alt","Sidebar Logo"],[4,"ngFor","ngForOf","ngForTrackBy"],["aria-label","Close sidebar",1,"md:hidden","absolute","top-4","right-4","w-10","h-10","bg-accent","text-white","rounded-lg","flex","items-center","justify-center","shadow-lg","z-50",3,"click"],[1,"w-11/12","py-3","px-6","my-2","rounded-lg","text-lg","transition-all","font-mono","outline-none","hover:bg-accent","hover:text-white","hover:shadow-lg",3,"click","ngClass"]],template:function(e,r){e&1&&(B(0,"aside",0),Ht(1,d6,2,0,"button",1),B(2,"div",2),Et(3,"img",3),j(),Ht(4,h6,3,5,"ng-container",4),j()),e&2&&(Z(),Fe("ngIf",!r.isCollapsed),Z(3),Fe("ngForOf",r.navItems)("ngForTrackBy",r.trackByNavItem))},dependencies:[gn,qs,la,fr,T_],styles:[".font-mono[_ngcontent-%COMP%]{font-family:JetBrains Mono,Fira Code,Consolas,monospace}@media (max-width: 768px){aside[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw!important;height:100vh!important;z-index:50;background:#141428fa;box-shadow:0 0 0 9999px #141428fa;transition:all .3s}aside[_ngcontent-%COMP%]   .sidebar-close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;width:2.5rem;height:2.5rem;background:var(--tw-color-accent, #8a4a4b);color:#fff;border-radius:.75rem;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 8px #0000001f;z-index:100;font-size:1.5rem;border:none;cursor:pointer}}"]})};function f6(n,t){if(n&1){let e=ct();B(0,"button",3),De("click",function(){ke(e);let i=ae();return Le(i.burgerMenuClick())}),G(1," \u2630 "),j()}}var Pg=class n{constructor(t){this.router=t;this.router.events.subscribe(e=>{if(e instanceof Rn){let r=e.urlAfterRedirects.split("?")[0];this.pageTitle=this.titles[r]||"GPA Advisor"}}),this.showBurgerMenu=window.innerWidth<=768,window.addEventListener("resize",()=>{this.showBurgerMenu=window.innerWidth<=768})}pageTitle="";showBurgerMenu=!1;burgerMenuClicked=new Qe;titles={"/home":"Home","/transcript":"Manage Grades (Transcript)","/insights":"GPA Insights","/simulation":"GPA Simulation","/advisor":"AI Advisor"};burgerMenuClick(){this.burgerMenuClicked.emit()}static \u0275fac=function(e){return new(e||n)(de(On))};static \u0275cmp=vt({type:n,selectors:[["app-top-ribbon"]],outputs:{burgerMenuClicked:"burgerMenuClicked"},decls:4,vars:2,consts:[[1,"w-full","bg-navy/50","backdrop-blur","text-gray-100","text-lg","font-bold","font-mono","shadow-lg","flex","items-center","justify-center","tracking-wide","drop-shadow-lg","relative"],["class","md:hidden absolute left-2 w-10 bg-accent text-white rounded-lg flex items-center justify-center","aria-label","Open sidebar",3,"click",4,"ngIf"],[1,"py-2"],["aria-label","Open sidebar",1,"md:hidden","absolute","left-2","w-10","bg-accent","text-white","rounded-lg","flex","items-center","justify-center",3,"click"]],template:function(e,r){e&1&&(B(0,"header",0),Ht(1,f6,2,0,"button",1),B(2,"span",2),G(3),j()()),e&2&&(Z(),Fe("ngIf",r.showBurgerMenu),Z(2),Xe(r.pageTitle))},dependencies:[gn,fr],encapsulation:2})};var p6=(n,t,e)=>({"fixed top-0 left-0 z-50 w-full h-full":n,"w-16":t,"w-56":e,"transition-all duration-300":!0});function g6(n,t){if(n&1){let e=ct();B(0,"app-sidebar",6),De("closeSidebar",function(){ke(e);let i=ae();return Le(i.sidebarOpen=!1)}),j()}if(n&2){let e=ae();Fe("isCollapsed",e.sidebarCollapsed)("ngClass",ib(2,p6,e.sidebarOpen&&e.isMobile,e.sidebarCollapsed&&!e.isMobile,!e.sidebarCollapsed&&!e.isMobile))}}function m6(n,t){if(n&1){let e=ct();B(0,"button",7),De("click",function(){ke(e);let i=ae();return Le(i.toggleSidebarDesktop())}),G(1," \u2B9E "),j()}}var kg=class n{title="gpa-advisor-frontend";sidebarOpen=!1;sidebarCollapsed=!1;get isMobile(){return window.innerWidth<=768}toggleSidebar(){this.sidebarOpen=!this.sidebarOpen}toggleSidebarMobile(){this.sidebarOpen=!this.sidebarOpen}toggleSidebarDesktop(){this.sidebarCollapsed=!this.sidebarCollapsed}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=vt({type:n,selectors:[["app-root"]],decls:7,vars:2,consts:[[1,"flex","h-screen","bg-dark","text-gray-100","font-mono"],[3,"isCollapsed","ngClass","closeSidebar",4,"ngIf"],[1,"flex-1","flex","flex-col"],["class","absolute left-2 top-2 z-40 bg-accent text-white rounded-lg w-10 h-10 flex items-center justify-center shadow-lg","aria-label","Expand sidebar",3,"click",4,"ngIf"],[3,"burgerMenuClicked"],[1,"flex-1","overflow-y-auto","p-6"],[3,"closeSidebar","isCollapsed","ngClass"],["aria-label","Expand sidebar",1,"absolute","left-2","top-2","z-40","bg-accent","text-white","rounded-lg","w-10","h-10","flex","items-center","justify-center","shadow-lg",3,"click"]],template:function(e,r){e&1&&(B(0,"div",0),Ht(1,g6,1,6,"app-sidebar",1),B(2,"div",2),Ht(3,m6,2,0,"button",3),B(4,"app-top-ribbon",4),De("burgerMenuClicked",function(){return r.sidebarOpen=!0}),j(),B(5,"main",5),Et(6,"router-outlet"),j()()()),e&2&&(Z(),Fe("ngIf",r.sidebarOpen||!r.isMobile),Z(2),Fe("ngIf",r.sidebarCollapsed&&!r.isMobile))},dependencies:[gn,qs,fr,Yc,Ng,Pg],styles:[".fixed.top-0.left-0.z-50.w-full.h-full[_ngcontent-%COMP%]{background:#141428fa}"]})};Mb(kg,ce(H({},mE),{providers:[...mE.providers||[],$M(UM())]})).catch(n=>console.error(n));
